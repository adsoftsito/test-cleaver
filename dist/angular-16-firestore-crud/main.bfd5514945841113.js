"use strict";(self.webpackChunkangular_16_firestore_crud=self.webpackChunkangular_16_firestore_crud||[]).push([[179],{2011:(lt,Ie,O)=>{O.d(Ie,{Dh:()=>Oe,GT:()=>le,cc:()=>Ce,hO:()=>Fe,on:()=>V,pX:()=>ne,xv:()=>de});var h=O(2223),q=O(9260),P=O(4976);lt=O.hmd(lt);const J=["ngOnDestroy"],ne=(Ne,mt,dt,te={})=>new Proxy(Ne,{get:(pe,K)=>dt.runOutsideAngular(()=>{var he;if(Ne[K])return!(null===(he=te?.spy)||void 0===he)&&he.get&&te.spy.get(K,Ne[K]),Ne[K];if(J.indexOf(K)>-1)return()=>{};const Te=mt.toPromise().then(Le=>{const ie=Le&&Le[K];return"function"==typeof ie?ie.bind(Le):ie&&ie.then?ie.then($e=>dt.run(()=>$e)):dt.run(()=>ie)});return new Proxy(()=>{},{get:(Le,ie)=>Te[ie],apply:(Le,ie,$e)=>Te.then(Ht=>{var fr;const zr=Ht&&Ht(...$e);return!(null===(fr=te?.spy)||void 0===fr)&&fr.apply&&te.spy.apply(K,$e,zr),zr})})})}),le=(Ne,mt)=>{mt.forEach(dt=>{Object.getOwnPropertyNames(dt.prototype||dt).forEach(te=>{Object.defineProperty(Ne.prototype,te,Object.getOwnPropertyDescriptor(dt.prototype||dt,te))})})};class fe{constructor(mt){return mt}}const Oe=new h.OlP("angularfire2.app.options"),de=new h.OlP("angularfire2.app.name");function V(Ne,mt,dt){const pe="object"==typeof dt&&dt||{};pe.name=pe.name||"string"==typeof dt&&dt||"[DEFAULT]";const he=q.Z.apps.filter(Te=>Te&&Te.name===pe.name)[0]||mt.runOutsideAngular(()=>q.Z.initializeApp(Ne,pe));try{JSON.stringify(Ne)!==JSON.stringify(he.options)&&j("error",`${he.name} Firebase App already initialized with different options${lt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new fe(he)}const j=(Ne,...mt)=>{(0,h.X6Q)()&&typeof console<"u"&&console[Ne](...mt)},Q={provide:fe,useFactory:V,deps:[Oe,h.R0b,[new h.FiY,de]]};let Fe=(()=>{class Ne{constructor(dt){q.Z.registerVersion("angularfire",P.q4.full,"core"),q.Z.registerVersion("angularfire",P.q4.full,"app-compat"),q.Z.registerVersion("angular",h.q4F.full,dt.toString())}static initializeApp(dt,te){return{ngModule:Ne,providers:[{provide:Oe,useValue:dt},{provide:de,useValue:te}]}}}return Ne.\u0275fac=function(dt){return new(dt||Ne)(h.LFG(h.Lbi))},Ne.\u0275mod=h.oAB({type:Ne}),Ne.\u0275inj=h.cJS({providers:[Q]}),Ne})();function Ce(Ne,mt,dt,te,pe){const[,K,he]=globalThis.\u0275AngularfireInstanceCache.find(Te=>Te[0]===Ne)||[];if(K)return function Ye(Ne,mt){try{return Ne.toString()===mt.toString()}catch{return Ne===mt}}(pe,he)||(ze("error",`${mt} was already initialized on the ${dt} Firebase App with different settings.${Me?" You may need to reload as Firebase is not HMR aware.":""}`),ze("warn",{is:pe,was:he})),K;{const Te=te();return globalThis.\u0275AngularfireInstanceCache.push([Ne,Te,pe]),Te}}const Me=!!lt.hot,ze=(Ne,...mt)=>{(0,h.X6Q)()&&typeof console<"u"&&console[Ne](...mt)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},4976:(lt,Ie,O)=>{O.d(Ie,{q4:()=>Jo,iC:()=>ap,HU:()=>Al,vb:()=>sp,JM:()=>wo});var h=O(2223),q=O(259),P=O(5861),J=O(6881),ne=O(2090),le=O(4859),fe=O(1877);const Oe=(E,C)=>C.some(M=>E instanceof M);let de,V;const Fe=new WeakMap,Ce=new WeakMap,Ye=new WeakMap,Me=new WeakMap,ze=new WeakMap;let dt={get(E,C,M){if(E instanceof IDBTransaction){if("done"===C)return Ce.get(E);if("objectStoreNames"===C)return E.objectStoreNames||Ye.get(E);if("store"===C)return M.objectStoreNames[1]?void 0:M.objectStore(M.objectStoreNames[0])}return he(E[C])},set:(E,C,M)=>(E[C]=M,!0),has:(E,C)=>E instanceof IDBTransaction&&("done"===C||"store"===C)||C in E};function K(E){return"function"==typeof E?function pe(E){return E!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Q(){return V||(V=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(E)?function(...C){return E.apply(Te(this),C),he(Fe.get(this))}:function(...C){return he(E.apply(Te(this),C))}:function(C,...M){const k=E.call(Te(this),C,...M);return Ye.set(k,C.sort?C.sort():[C]),he(k)}}(E):(E instanceof IDBTransaction&&function mt(E){if(Ce.has(E))return;const C=new Promise((M,k)=>{const $=()=>{E.removeEventListener("complete",W),E.removeEventListener("error",ce),E.removeEventListener("abort",ce)},W=()=>{M(),$()},ce=()=>{k(E.error||new DOMException("AbortError","AbortError")),$()};E.addEventListener("complete",W),E.addEventListener("error",ce),E.addEventListener("abort",ce)});Ce.set(E,C)}(E),Oe(E,function j(){return de||(de=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(E,dt):E)}function he(E){if(E instanceof IDBRequest)return function Ne(E){const C=new Promise((M,k)=>{const $=()=>{E.removeEventListener("success",W),E.removeEventListener("error",ce)},W=()=>{M(he(E.result)),$()},ce=()=>{k(E.error),$()};E.addEventListener("success",W),E.addEventListener("error",ce)});return C.then(M=>{M instanceof IDBCursor&&Fe.set(M,E)}).catch(()=>{}),ze.set(C,E),C}(E);if(Me.has(E))return Me.get(E);const C=K(E);return C!==E&&(Me.set(E,C),ze.set(C,E)),C}const Te=E=>ze.get(E),$e=["get","getKey","getAll","getAllKeys","count"],Ht=["put","add","delete","clear"],fr=new Map;function zr(E,C){if(!(E instanceof IDBDatabase)||C in E||"string"!=typeof C)return;if(fr.get(C))return fr.get(C);const M=C.replace(/FromIndex$/,""),k=C!==M,$=Ht.includes(M);if(!(M in(k?IDBIndex:IDBObjectStore).prototype)||!$&&!$e.includes(M))return;const W=function(){var ce=(0,P.Z)(function*(We,...Be){const it=this.transaction(We,$?"readwrite":"readonly");let Dt=it.store;return k&&(Dt=Dt.index(Be.shift())),(yield Promise.all([Dt[M](...Be),$&&it.done]))[0]});return function(Be){return ce.apply(this,arguments)}}();return fr.set(C,W),W}!function te(E){dt=E(dt)}(E=>({...E,get:(C,M,k)=>zr(C,M)||E.get(C,M,k),has:(C,M)=>!!zr(C,M)||E.has(C,M)}));const Fs="@firebase/installations",oe="0.6.4",me=1e4,Ee=`w:${oe}`,Ae="FIS_v2",He="https://firebaseinstallations.googleapis.com/v1",Ve=36e5,tt=new ne.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function ht(E){return E instanceof ne.ZR&&E.code.includes("request-failed")}function _n({projectId:E}){return`${He}/projects/${E}/installations`}function tn(E){return{token:E.token,requestStatus:2,expiresIn:no(E.expiresIn),creationTime:Date.now()}}function Rn(E,C){return Kt.apply(this,arguments)}function Kt(){return(Kt=(0,P.Z)(function*(E,C){const k=(yield C.json()).error;return tt.create("request-failed",{requestName:E,serverCode:k.code,serverMessage:k.message,serverStatus:k.status})})).apply(this,arguments)}function ti({apiKey:E}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":E})}function qr(E){return Zn.apply(this,arguments)}function Zn(){return(Zn=(0,P.Z)(function*(E){const C=yield E();return C.status>=500&&C.status<600?E():C})).apply(this,arguments)}function no(E){return Number(E.replace("s","000"))}function ni(){return(ni=(0,P.Z)(function*({appConfig:E,heartbeatServiceProvider:C},{fid:M}){const k=_n(E),$=ti(E),W=C.getImmediate({optional:!0});if(W){const it=yield W.getHeartbeatsHeader();it&&$.append("x-firebase-client",it)}const We={method:"POST",headers:$,body:JSON.stringify({fid:M,authVersion:Ae,appId:E.appId,sdkVersion:Ee})},Be=yield qr(()=>fetch(k,We));if(Be.ok){const it=yield Be.json();return{fid:it.fid||M,registrationStatus:2,refreshToken:it.refreshToken,authToken:tn(it.authToken)}}throw yield Rn("Create Installation",Be)})).apply(this,arguments)}function ri(E){return new Promise(C=>{setTimeout(C,E)})}const Aa=/^[cdef][\w-]{21}$/,qe="";function ft(){try{const E=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(E),E[0]=112+E[0]%16;const M=function yt(E){return function Ls(E){return btoa(String.fromCharCode(...E)).replace(/\+/g,"-").replace(/\//g,"_")}(E).substr(0,22)}(E);return Aa.test(M)?M:qe}catch{return qe}}function ln(E){return`${E.appName}!${E.appId}`}const Tn=new Map;function Wr(E,C){const M=ln(E);Ma(M,C),function an(E,C){const M=function Bt(){return!Mr&&"BroadcastChannel"in self&&(Mr=new BroadcastChannel("[Firebase] FID Change"),Mr.onmessage=E=>{Ma(E.data.key,E.data.fid)}),Mr}();M&&M.postMessage({key:E,fid:C}),function Xi(){0===Tn.size&&Mr&&(Mr.close(),Mr=null)}()}(M,C)}function Ma(E,C){const M=Tn.get(E);if(M)for(const k of M)k(C)}let Mr=null;const io="firebase-installations-database",xa=1,ii="firebase-installations-store";let es=null;function gr(){return es||(es=function Le(E,C,{blocked:M,upgrade:k,blocking:$,terminated:W}={}){const ce=indexedDB.open(E,C),We=he(ce);return k&&ce.addEventListener("upgradeneeded",Be=>{k(he(ce.result),Be.oldVersion,Be.newVersion,he(ce.transaction))}),M&&ce.addEventListener("blocked",()=>M()),We.then(Be=>{W&&Be.addEventListener("close",()=>W()),$&&Be.addEventListener("versionchange",()=>$())}).catch(()=>{}),We}(io,xa,{upgrade:(E,C)=>{0===C&&E.createObjectStore(ii)}})),es}function nr(E,C){return mn.apply(this,arguments)}function mn(){return(mn=(0,P.Z)(function*(E,C){const M=ln(E),$=(yield gr()).transaction(ii,"readwrite"),W=$.objectStore(ii),ce=yield W.get(M);return yield W.put(C,M),yield $.done,(!ce||ce.fid!==C.fid)&&Wr(E,C.fid),C})).apply(this,arguments)}function ts(E){return Jt.apply(this,arguments)}function Jt(){return(Jt=(0,P.Z)(function*(E){const C=ln(E),k=(yield gr()).transaction(ii,"readwrite");yield k.objectStore(ii).delete(C),yield k.done})).apply(this,arguments)}function ns(E,C){return qt.apply(this,arguments)}function qt(){return(qt=(0,P.Z)(function*(E,C){const M=ln(E),$=(yield gr()).transaction(ii,"readwrite"),W=$.objectStore(ii),ce=yield W.get(M),We=C(ce);return void 0===We?yield W.delete(M):yield W.put(We,M),yield $.done,We&&(!ce||ce.fid!==We.fid)&&Wr(E,We.fid),We})).apply(this,arguments)}function U(E){return L.apply(this,arguments)}function L(){return L=(0,P.Z)(function*(E){let C;const M=yield ns(E.appConfig,k=>{const $=function z(E){return dn(E||{fid:ft(),registrationStatus:0})}(k),W=function _e(E,C){if(0===C.registrationStatus){if(!navigator.onLine)return{installationEntry:C,registrationPromise:Promise.reject(tt.create("app-offline"))};const M={fid:C.fid,registrationStatus:1,registrationTime:Date.now()},k=function se(E,C){return nt.apply(this,arguments)}(E,M);return{installationEntry:M,registrationPromise:k}}return 1===C.registrationStatus?{installationEntry:C,registrationPromise:pt(E)}:{installationEntry:C}}(E,$);return C=W.registrationPromise,W.installationEntry});return M.fid===qe?{installationEntry:yield C}:{installationEntry:M,registrationPromise:C}}),L.apply(this,arguments)}function nt(){return nt=(0,P.Z)(function*(E,C){try{const M=yield function Sa(E,C){return ni.apply(this,arguments)}(E,C);return nr(E.appConfig,M)}catch(M){throw ht(M)&&409===M.customData.serverCode?yield ts(E.appConfig):yield nr(E.appConfig,{fid:C.fid,registrationStatus:0}),M}}),nt.apply(this,arguments)}function pt(E){return Nt.apply(this,arguments)}function Nt(){return(Nt=(0,P.Z)(function*(E){let C=yield yn(E.appConfig);for(;1===C.registrationStatus;)yield ri(100),C=yield yn(E.appConfig);if(0===C.registrationStatus){const{installationEntry:M,registrationPromise:k}=yield U(E);return k||M}return C})).apply(this,arguments)}function yn(E){return ns(E,C=>{if(!C)throw tt.create("installation-not-found");return dn(C)})}function dn(E){return function bt(E){return 1===E.registrationStatus&&E.registrationTime+me<Date.now()}(E)?{fid:E.fid,registrationStatus:0}:E}function mr(){return(mr=(0,P.Z)(function*({appConfig:E,heartbeatServiceProvider:C},M){const k=function vi(E,{fid:C}){return`${_n(E)}/${C}/authTokens:generate`}(E,M),$=function Wn(E,{refreshToken:C}){const M=ti(E);return M.append("Authorization",function ro(E){return`${Ae} ${E}`}(C)),M}(E,M),W=C.getImmediate({optional:!0});if(W){const it=yield W.getHeartbeatsHeader();it&&$.append("x-firebase-client",it)}const We={method:"POST",headers:$,body:JSON.stringify({installation:{sdkVersion:Ee,appId:E.appId}})},Be=yield qr(()=>fetch(k,We));if(Be.ok)return tn(yield Be.json());throw yield Rn("Generate Auth Token",Be)})).apply(this,arguments)}function rs(E){return si.apply(this,arguments)}function si(){return si=(0,P.Z)(function*(E,C=!1){let M;const k=yield ns(E.appConfig,W=>{if(!Ft(W))throw tt.create("not-registered");const ce=W.authToken;if(!C&&function Yt(E){return 2===E.requestStatus&&!function rr(E){const C=Date.now();return C<E.creationTime||E.creationTime+E.expiresIn<C+Ve}(E)}(ce))return W;if(1===ce.requestStatus)return M=function ue(E,C){return ee.apply(this,arguments)}(E,C),W;{if(!navigator.onLine)throw tt.create("app-offline");const We=function Kn(E){const C={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},E),{authToken:C})}(W);return M=function ut(E,C){return At.apply(this,arguments)}(E,We),We}});return M?yield M:k.authToken}),si.apply(this,arguments)}function ee(){return(ee=(0,P.Z)(function*(E,C){let M=yield xe(E.appConfig);for(;1===M.authToken.requestStatus;)yield ri(100),M=yield xe(E.appConfig);const k=M.authToken;return 0===k.requestStatus?rs(E,C):k})).apply(this,arguments)}function xe(E){return ns(E,C=>{if(!Ft(C))throw tt.create("not-registered");return function gs(E){return 1===E.requestStatus&&E.requestTime+me<Date.now()}(C.authToken)?Object.assign(Object.assign({},C),{authToken:{requestStatus:0}}):C})}function At(){return At=(0,P.Z)(function*(E,C){try{const M=yield function Gt(E,C){return mr.apply(this,arguments)}(E,C),k=Object.assign(Object.assign({},C),{authToken:M});return yield nr(E.appConfig,k),M}catch(M){if(!ht(M)||401!==M.customData.serverCode&&404!==M.customData.serverCode){const k=Object.assign(Object.assign({},C),{authToken:{requestStatus:0}});yield nr(E.appConfig,k)}else yield ts(E.appConfig);throw M}}),At.apply(this,arguments)}function Ft(E){return void 0!==E&&2===E.registrationStatus}function Na(){return(Na=(0,P.Z)(function*(E){const C=E,{installationEntry:M,registrationPromise:k}=yield U(C);return k?k.catch(console.error):rs(C).catch(console.error),M.fid})).apply(this,arguments)}function oi(){return oi=(0,P.Z)(function*(E,C=!1){const M=E;return yield function Md(E){return _i.apply(this,arguments)}(M),(yield rs(M,C)).token}),oi.apply(this,arguments)}function _i(){return(_i=(0,P.Z)(function*(E){const{registrationPromise:C}=yield U(E);C&&(yield C)})).apply(this,arguments)}function oo(E){return tt.create("missing-app-config-values",{valueName:E})}const Nd="installations",vm=E=>{const C=E.getProvider("app").getImmediate(),M=function Ou(E){if(!E||!E.options)throw oo("App Configuration");if(!E.name)throw oo("App Name");const C=["projectId","apiKey","appId"];for(const M of C)if(!E.options[M])throw oo(M);return{appName:E.name,projectId:E.options.projectId,apiKey:E.options.apiKey,appId:E.options.appId}}(C);return{app:C,appConfig:M,heartbeatServiceProvider:(0,J._getProvider)(C,"heartbeat"),_delete:()=>Promise.resolve()}},ms=E=>{const C=E.getProvider("app").getImmediate(),M=(0,J._getProvider)(C,Nd).getImmediate();return{getId:()=>function so(E){return Na.apply(this,arguments)}(M),getToken:$=>function Ad(E){return oi.apply(this,arguments)}(M,$)}};(function Hf(){(0,J._registerComponent)(new le.wA(Nd,vm,"PUBLIC")),(0,J._registerComponent)(new le.wA("installations-internal",ms,"PRIVATE"))})(),(0,J.registerVersion)(Fs,oe),(0,J.registerVersion)(Fs,oe,"esm2017");const Ra="@firebase/remote-config",un=new ne.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Zr{constructor(C,M,k,$){this.client=C,this.storage=M,this.storageCache=k,this.logger=$}isCachedDataFresh(C,M){if(!M)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const k=Date.now()-M,$=k<=C;return this.logger.debug(`Config fetch cache check. Cache age millis: ${k}. Cache max age millis (minimumFetchIntervalMillis setting): ${C}. Is cache hit: ${$}.`),$}fetch(C){var M=this;return(0,P.Z)(function*(){const[k,$]=yield Promise.all([M.storage.getLastSuccessfulFetchTimestampMillis(),M.storage.getLastSuccessfulFetchResponse()]);if($&&M.isCachedDataFresh(C.cacheMaxAgeMillis,k))return $;C.eTag=$&&$.eTag;const W=yield M.client.fetch(C),ce=[M.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===W.status&&ce.push(M.storage.setLastSuccessfulFetchResponse(W)),yield Promise.all(ce),W})()}}function Pd(E=navigator){return E.languages&&E.languages[0]||E.language}class is{constructor(C,M,k,$,W,ce){this.firebaseInstallations=C,this.sdkVersion=M,this.namespace=k,this.projectId=$,this.apiKey=W,this.appId=ce}fetch(C){var M=this;return(0,P.Z)(function*(){const[k,$]=yield Promise.all([M.firebaseInstallations.getId(),M.firebaseInstallations.getToken()]),ce=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${M.projectId}/namespaces/${M.namespace}:fetch?key=${M.apiKey}`,We={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":C.eTag||"*"},Be={sdk_version:M.sdkVersion,app_instance_id:k,app_instance_id_token:$,app_id:M.appId,language_code:Pd()},it={method:"POST",headers:We,body:JSON.stringify(Be)},Dt=fetch(ce,it),Ct=new Promise((Si,Hi)=>{C.signal.addEventListener(()=>{const du=new Error("The operation was aborted.");du.name="AbortError",Hi(du)})});let Er;try{yield Promise.race([Dt,Ct]),Er=yield Dt}catch(Si){let Hi="fetch-client-network";throw"AbortError"===Si?.name&&(Hi="fetch-timeout"),un.create(Hi,{originalErrorMessage:Si?.message})}let ir=Er.status;const $i=Er.headers.get("ETag")||void 0;let Ml,li;if(200===Er.status){let Si;try{Si=yield Er.json()}catch(Hi){throw un.create("fetch-client-parse",{originalErrorMessage:Hi?.message})}Ml=Si.entries,li=Si.state}if("INSTANCE_STATE_UNSPECIFIED"===li?ir=500:"NO_CHANGE"===li?ir=304:("NO_TEMPLATE"===li||"EMPTY_CONFIG"===li)&&(Ml={}),304!==ir&&200!==ir)throw un.create("fetch-status",{httpStatus:ir});return{status:ir,eTag:$i,config:Ml}})()}}class Pa{constructor(C,M){this.client=C,this.storage=M}fetch(C){var M=this;return(0,P.Z)(function*(){const k=(yield M.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return M.attemptFetch(C,k)})()}attemptFetch(C,{throttleEndTimeMillis:M,backoffCount:k}){var $=this;return(0,P.Z)(function*(){yield function On(E,C){return new Promise((M,k)=>{const $=Math.max(C-Date.now(),0),W=setTimeout(M,$);E.addEventListener(()=>{clearTimeout(W),k(un.create("fetch-throttle",{throttleEndTimeMillis:C}))})})}(C.signal,M);try{const W=yield $.client.fetch(C);return yield $.storage.deleteThrottleMetadata(),W}catch(W){if(!function ko(E){if(!(E instanceof ne.ZR&&E.customData))return!1;const C=Number(E.customData.httpStatus);return 429===C||500===C||503===C||504===C}(W))throw W;const ce={throttleEndTimeMillis:Date.now()+(0,ne.$s)(k),backoffCount:k+1};return yield $.storage.setThrottleMetadata(ce),$.attemptFetch(C,ce)}})()}}class kd{constructor(C,M,k,$,W){this.app=C,this._client=M,this._storageCache=k,this._storage=$,this._logger=W,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function ui(E,C){const M=E.target.error||void 0;return un.create(C,{originalErrorMessage:M&&M?.message})}const Un="app_namespace_store";class ZE{constructor(C,M,k,$=function jt(){return new Promise((E,C)=>{try{const M=indexedDB.open("firebase_remote_config",1);M.onerror=k=>{C(ui(k,"storage-open"))},M.onsuccess=k=>{E(k.target.result)},M.onupgradeneeded=k=>{0===k.oldVersion&&k.target.result.createObjectStore(Un,{keyPath:"compositeKey"})}}catch(M){C(un.create("storage-open",{originalErrorMessage:M?.message}))}})}()){this.appId=C,this.appName=M,this.namespace=k,this.openDbPromise=$}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(C){return this.set("last_fetch_status",C)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(C){return this.set("last_successful_fetch_timestamp_millis",C)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(C){return this.set("last_successful_fetch_response",C)}getActiveConfig(){return this.get("active_config")}setActiveConfig(C){return this.set("active_config",C)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(C){return this.set("active_config_etag",C)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(C){return this.set("throttle_metadata",C)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(C){var M=this;return(0,P.Z)(function*(){const k=yield M.openDbPromise;return new Promise(($,W)=>{const We=k.transaction([Un],"readonly").objectStore(Un),Be=M.createCompositeKey(C);try{const it=We.get(Be);it.onerror=Dt=>{W(ui(Dt,"storage-get"))},it.onsuccess=Dt=>{const Ct=Dt.target.result;$(Ct?Ct.value:void 0)}}catch(it){W(un.create("storage-get",{originalErrorMessage:it?.message}))}})})()}set(C,M){var k=this;return(0,P.Z)(function*(){const $=yield k.openDbPromise;return new Promise((W,ce)=>{const Be=$.transaction([Un],"readwrite").objectStore(Un),it=k.createCompositeKey(C);try{const Dt=Be.put({compositeKey:it,value:M});Dt.onerror=Ct=>{ce(ui(Ct,"storage-set"))},Dt.onsuccess=()=>{W()}}catch(Dt){ce(un.create("storage-set",{originalErrorMessage:Dt?.message}))}})})()}delete(C){var M=this;return(0,P.Z)(function*(){const k=yield M.openDbPromise;return new Promise(($,W)=>{const We=k.transaction([Un],"readwrite").objectStore(Un),Be=M.createCompositeKey(C);try{const it=We.delete(Be);it.onerror=Dt=>{W(ui(Dt,"storage-delete"))},it.onsuccess=()=>{$()}}catch(it){W(un.create("storage-delete",{originalErrorMessage:it?.message}))}})})()}createCompositeKey(C){return[this.appId,this.appName,this.namespace,C].join()}}class ku{constructor(C){this.storage=C}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var C=this;return(0,P.Z)(function*(){const M=C.storage.getLastFetchStatus(),k=C.storage.getLastSuccessfulFetchTimestampMillis(),$=C.storage.getActiveConfig(),W=yield M;W&&(C.lastFetchStatus=W);const ce=yield k;ce&&(C.lastSuccessfulFetchTimestampMillis=ce);const We=yield $;We&&(C.activeConfig=We)})()}setLastFetchStatus(C){return this.lastFetchStatus=C,this.storage.setLastFetchStatus(C)}setLastSuccessfulFetchTimestampMillis(C){return this.lastSuccessfulFetchTimestampMillis=C,this.storage.setLastSuccessfulFetchTimestampMillis(C)}setActiveConfig(C){return this.activeConfig=C,this.storage.setActiveConfig(C)}}function co(){return lo.apply(this,arguments)}function lo(){return(lo=(0,P.Z)(function*(){if(!(0,ne.hl)())return!1;try{return yield(0,ne.eu)()}catch{return!1}})).apply(this,arguments)}!function ss(){(0,J._registerComponent)(new le.wA("remote-config",function E(C,{instanceIdentifier:M}){const k=C.getProvider("app").getImmediate(),$=C.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw un.create("registration-window");if(!(0,ne.hl)())throw un.create("indexed-db-unavailable");const{projectId:W,apiKey:ce,appId:We}=k.options;if(!W)throw un.create("registration-project-id");if(!ce)throw un.create("registration-api-key");if(!We)throw un.create("registration-app-id");const Be=new ZE(We,k.name,M=M||"firebase"),it=new ku(Be),Dt=new fe.Yd(Ra);Dt.logLevel=fe.in.ERROR;const Ct=new is($,J.SDK_VERSION,M,W,ce,We),Er=new Pa(Ct,Be),ir=new Zr(Er,Be,it,Dt),$i=new kd(k,ir,it,Be,Dt);return function kt(E){const C=(0,ne.m9)(E);C._initializePromise||(C._initializePromise=C._storageCache.loadFromStorage().then(()=>{C._isInitializationComplete=!0}))}($i),$i},"PUBLIC").setMultipleInstances(!0)),(0,J.registerVersion)(Ra,"0.4.4"),(0,J.registerVersion)(Ra,"0.4.4","esm2017")}();const ar=(E,C)=>C.some(M=>E instanceof M);let _m,Bn;const vs=new WeakMap,_s=new WeakMap,vr=new WeakMap,Nr=new WeakMap,ho=new WeakMap;let ka={get(E,C,M){if(E instanceof IDBTransaction){if("done"===C)return _s.get(E);if("objectStoreNames"===C)return E.objectStoreNames||vr.get(E);if("store"===C)return M.objectStoreNames[1]?void 0:M.objectStore(M.objectStoreNames[0])}return os(E[C])},set:(E,C,M)=>(E[C]=M,!0),has:(E,C)=>E instanceof IDBTransaction&&("done"===C||"store"===C)||C in E};function Em(E){return"function"==typeof E?function zf(E){return E!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Lo(){return Bn||(Bn=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(E)?function(...C){return E.apply(Qc(this),C),os(vs.get(this))}:function(...C){return os(E.apply(Qc(this),C))}:function(C,...M){const k=E.call(Qc(this),C,...M);return vr.set(k,C.sort?C.sort():[C]),os(k)}}(E):(E instanceof IDBTransaction&&function Yc(E){if(_s.has(E))return;const C=new Promise((M,k)=>{const $=()=>{E.removeEventListener("complete",W),E.removeEventListener("error",ce),E.removeEventListener("abort",ce)},W=()=>{M(),$()},ce=()=>{k(E.error||new DOMException("AbortError","AbortError")),$()};E.addEventListener("complete",W),E.addEventListener("error",ce),E.addEventListener("abort",ce)});_s.set(E,C)}(E),ar(E,function ci(){return _m||(_m=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(E,ka):E)}function os(E){if(E instanceof IDBRequest)return function wm(E){const C=new Promise((M,k)=>{const $=()=>{E.removeEventListener("success",W),E.removeEventListener("error",ce)},W=()=>{M(os(E.result)),$()},ce=()=>{k(E.error),$()};E.addEventListener("success",W),E.addEventListener("error",ce)});return C.then(M=>{M instanceof IDBCursor&&vs.set(M,E)}).catch(()=>{}),ho.set(C,E),C}(E);if(Nr.has(E))return Nr.get(E);const C=Em(E);return C!==E&&(Nr.set(E,C),ho.set(C,E)),C}const Qc=E=>ho.get(E);function Jc(E,C,{blocked:M,upgrade:k,blocking:$,terminated:W}={}){const ce=indexedDB.open(E,C),We=os(ce);return k&&ce.addEventListener("upgradeneeded",Be=>{k(os(ce.result),Be.oldVersion,Be.newVersion,os(ce.transaction))}),M&&ce.addEventListener("blocked",()=>M()),We.then(Be=>{W&&Be.addEventListener("close",()=>W()),$&&Be.addEventListener("versionchange",()=>$())}).catch(()=>{}),We}function Fa(E,{blocked:C}={}){const M=indexedDB.deleteDatabase(E);return C&&M.addEventListener("blocked",()=>C()),os(M).then(()=>{})}const Fd=["get","getKey","getAll","getAllKeys","count"],qf=["put","add","delete","clear"],Xc=new Map;function Ld(E,C){if(!(E instanceof IDBDatabase)||C in E||"string"!=typeof C)return;if(Xc.get(C))return Xc.get(C);const M=C.replace(/FromIndex$/,""),k=C!==M,$=qf.includes(M);if(!(M in(k?IDBIndex:IDBObjectStore).prototype)||!$&&!Fd.includes(M))return;const W=function(){var ce=(0,P.Z)(function*(We,...Be){const it=this.transaction(We,$?"readwrite":"readonly");let Dt=it.store;return k&&(Dt=Dt.index(Be.shift())),(yield Promise.all([Dt[M](...Be),$&&it.done]))[0]});return function(Be){return ce.apply(this,arguments)}}();return Xc.set(C,W),W}!function Gf(E){ka=E(ka)}(E=>({...E,get:(C,M,k)=>Ld(C,M)||E.get(C,M,k),has:(C,M)=>!!Ld(C,M)||E.has(C,M)}));const Vd="/firebase-messaging-sw.js",La="/firebase-cloud-messaging-push-scope",Va="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Im="https://fcmregistrations.googleapis.com/v1",el="google.c.a.c_id",jn="google.c.a.c_l",js="google.c.a.ts";var ws=(()=>((ws=ws||{}).PUSH_RECEIVED="push-received",ws.NOTIFICATION_CLICKED="notification-clicked",ws))();function ki(E){const C=new Uint8Array(E);return btoa(String.fromCharCode(...C)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Fu(E){const M=(E+"=".repeat((4-E.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),k=atob(M),$=new Uint8Array(k.length);for(let W=0;W<k.length;++W)$[W]=k.charCodeAt(W);return $}const Ua="fcm_token_details_db",Ud=5,Ba="fcm_token_object_Store";function jr(){return jr=(0,P.Z)(function*(E){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(W=>W.name).includes(Ua))return null;let C=null;return(yield Jc(Ua,Ud,{upgrade:(k=(0,P.Z)(function*($,W,ce,We){var Be;if(W<2||!$.objectStoreNames.contains(Ba))return;const it=We.objectStore(Ba),Dt=yield it.index("fcmSenderId").get(E);if(yield it.clear(),Dt)if(2===W){const Ct=Dt;if(!Ct.auth||!Ct.p256dh||!Ct.endpoint)return;C={token:Ct.fcmToken,createTime:null!==(Be=Ct.createTime)&&void 0!==Be?Be:Date.now(),subscriptionOptions:{auth:Ct.auth,p256dh:Ct.p256dh,endpoint:Ct.endpoint,swScope:Ct.swScope,vapidKey:"string"==typeof Ct.vapidKey?Ct.vapidKey:ki(Ct.vapidKey)}}}else if(3===W){const Ct=Dt;C={token:Ct.fcmToken,createTime:Ct.createTime,subscriptionOptions:{auth:ki(Ct.auth),p256dh:ki(Ct.p256dh),endpoint:Ct.endpoint,swScope:Ct.swScope,vapidKey:ki(Ct.vapidKey)}}}else if(4===W){const Ct=Dt;C={token:Ct.fcmToken,createTime:Ct.createTime,subscriptionOptions:{auth:ki(Ct.auth),p256dh:ki(Ct.p256dh),endpoint:Ct.endpoint,swScope:Ct.swScope,vapidKey:ki(Ct.vapidKey)}}}}),function(W,ce,We,Be){return k.apply(this,arguments)})})).close(),yield Fa(Ua),yield Fa("fcm_vapid_details_db"),yield Fa("undefined"),function Lu(E){if(!E||!E.subscriptionOptions)return!1;const{subscriptionOptions:C}=E;return"number"==typeof E.createTime&&E.createTime>0&&"string"==typeof E.token&&E.token.length>0&&"string"==typeof C.auth&&C.auth.length>0&&"string"==typeof C.p256dh&&C.p256dh.length>0&&"string"==typeof C.endpoint&&C.endpoint.length>0&&"string"==typeof C.swScope&&C.swScope.length>0&&"string"==typeof C.vapidKey&&C.vapidKey.length>0}(C)?C:null;var k}),jr.apply(this,arguments)}const Qn="firebase-messaging-database",Vu=1,Ii="firebase-messaging-store";let ja=null;function Vo(){return ja||(ja=Jc(Qn,Vu,{upgrade:(E,C)=>{0===C&&E.createObjectStore(Ii)}})),ja}function Uo(E){return Bo.apply(this,arguments)}function Bo(){return Bo=(0,P.Z)(function*(E){const C=fo(E),k=yield(yield Vo()).transaction(Ii).objectStore(Ii).get(C);if(k)return k;{const $=yield function Cm(E){return jr.apply(this,arguments)}(E.appConfig.senderId);if($)return yield Zf(E,$),$}}),Bo.apply(this,arguments)}function Zf(E,C){return $a.apply(this,arguments)}function $a(){return($a=(0,P.Z)(function*(E,C){const M=fo(E),$=(yield Vo()).transaction(Ii,"readwrite");return yield $.objectStore(Ii).put(C,M),yield $.done,C})).apply(this,arguments)}function Uu(){return(Uu=(0,P.Z)(function*(E){const C=fo(E),k=(yield Vo()).transaction(Ii,"readwrite");yield k.objectStore(Ii).delete(C),yield k.done})).apply(this,arguments)}function fo({appConfig:E}){return E.appId}const $r=new ne.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Kf(E,C){return Bd.apply(this,arguments)}function Bd(){return(Bd=(0,P.Z)(function*(E,C){const M=yield il(E),k=sl(C),$={method:"POST",headers:M,body:JSON.stringify(k)};let W;try{W=yield(yield fetch(Ha(E.appConfig),$)).json()}catch(ce){throw $r.create("token-subscribe-failed",{errorInfo:ce?.toString()})}if(W.error)throw $r.create("token-subscribe-failed",{errorInfo:W.error.message});if(!W.token)throw $r.create("token-subscribe-no-token");return W.token})).apply(this,arguments)}function jd(){return(jd=(0,P.Z)(function*(E,C){const M=yield il(E),k=sl(C.subscriptionOptions),$={method:"PATCH",headers:M,body:JSON.stringify(k)};let W;try{W=yield(yield fetch(`${Ha(E.appConfig)}/${C.token}`,$)).json()}catch(ce){throw $r.create("token-update-failed",{errorInfo:ce?.toString()})}if(W.error)throw $r.create("token-update-failed",{errorInfo:W.error.message});if(!W.token)throw $r.create("token-update-no-token");return W.token})).apply(this,arguments)}function rl(E,C){return Bu.apply(this,arguments)}function Bu(){return(Bu=(0,P.Z)(function*(E,C){const k={method:"DELETE",headers:yield il(E)};try{const W=yield(yield fetch(`${Ha(E.appConfig)}/${C}`,k)).json();if(W.error)throw $r.create("token-unsubscribe-failed",{errorInfo:W.error.message})}catch($){throw $r.create("token-unsubscribe-failed",{errorInfo:$?.toString()})}})).apply(this,arguments)}function Ha({projectId:E}){return`${Im}/projects/${E}/registrations`}function il(E){return ju.apply(this,arguments)}function ju(){return(ju=(0,P.Z)(function*({appConfig:E,installations:C}){const M=yield C.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":E.apiKey,"x-goog-firebase-installations-auth":`FIS ${M}`})})).apply(this,arguments)}function sl({p256dh:E,auth:C,endpoint:M,vapidKey:k}){const $={web:{endpoint:M,auth:C,p256dh:E}};return k!==Va&&($.web.applicationPubKey=k),$}const $u=6048e5;function jo(){return jo=(0,P.Z)(function*(E){const C=yield function Hu(E,C){return Hr.apply(this,arguments)}(E.swRegistration,E.vapidKey),M={vapidKey:E.vapidKey,swScope:E.swRegistration.scope,endpoint:C.endpoint,auth:ki(C.getKey("auth")),p256dh:ki(C.getKey("p256dh"))},k=yield Uo(E.firebaseDependencies);if(k){if(function Gu(E,C){return C.vapidKey===E.vapidKey&&C.endpoint===E.endpoint&&C.auth===E.auth&&C.p256dh===E.p256dh}(k.subscriptionOptions,M))return Date.now()>=k.createTime+$u?function $d(E,C){return Ga.apply(this,arguments)}(E,{token:k.token,createTime:Date.now(),subscriptionOptions:M}):k.token;try{yield rl(E.firebaseDependencies,k.token)}catch($){console.warn($)}return In(E.firebaseDependencies,M)}return In(E.firebaseDependencies,M)}),jo.apply(this,arguments)}function Fi(){return Fi=(0,P.Z)(function*(E){const C=yield Uo(E.firebaseDependencies);C&&(yield rl(E.firebaseDependencies,C.token),yield function tl(E){return Uu.apply(this,arguments)}(E.firebaseDependencies));const M=yield E.swRegistration.pushManager.getSubscription();return!M||M.unsubscribe()}),Fi.apply(this,arguments)}function Ga(){return Ga=(0,P.Z)(function*(E,C){try{const M=yield function nl(E,C){return jd.apply(this,arguments)}(E.firebaseDependencies,C),k=Object.assign(Object.assign({},C),{token:M,createTime:Date.now()});return yield Zf(E.firebaseDependencies,k),M}catch(M){throw yield function Yf(E){return Fi.apply(this,arguments)}(E),M}}),Ga.apply(this,arguments)}function In(E,C){return po.apply(this,arguments)}function po(){return(po=(0,P.Z)(function*(E,C){const k={token:yield Kf(E,C),createTime:Date.now(),subscriptionOptions:C};return yield Zf(E,k),k.token})).apply(this,arguments)}function Hr(){return(Hr=(0,P.Z)(function*(E,C){return(yield E.pushManager.getSubscription())||E.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Fu(C)})})).apply(this,arguments)}function ol(E){const C={from:E.from,collapseKey:E.collapse_key,messageId:E.fcmMessageId};return function $s(E,C){if(!C.notification)return;E.notification={};const M=C.notification.title;M&&(E.notification.title=M);const k=C.notification.body;k&&(E.notification.body=k);const $=C.notification.image;$&&(E.notification.image=$);const W=C.notification.icon;W&&(E.notification.icon=W)}(C,E),function ur(E,C){C.data&&(E.data=C.data)}(C,E),function Sm(E,C){var M,k,$,W,ce;if(!(C.fcmOptions||null!==(M=C.notification)&&void 0!==M&&M.click_action))return;E.fcmOptions={};const We=null!==($=null===(k=C.fcmOptions)||void 0===k?void 0:k.link)&&void 0!==$?$:null===(W=C.notification)||void 0===W?void 0:W.click_action;We&&(E.fcmOptions.link=We);const Be=null===(ce=C.fcmOptions)||void 0===ce?void 0:ce.analytics_label;Be&&(E.fcmOptions.analyticsLabel=Be)}(C,E),C}function Hd(E,C){const M=[];for(let k=0;k<E.length;k++)M.push(E.charAt(k)),k<C.length&&M.push(C.charAt(k));return M.join("")}function al(E){return $r.create("missing-app-config-values",{valueName:E})}Hd("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Hd("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Gd{constructor(C,M,k){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const $=function Hs(E){if(!E||!E.options)throw al("App Configuration Object");if(!E.name)throw al("App Name");const C=["projectId","apiKey","appId","messagingSenderId"],{options:M}=E;for(const k of C)if(!M[k])throw al(k);return{appName:E.name,projectId:M.projectId,apiKey:M.apiKey,appId:M.appId,senderId:M.messagingSenderId}}(C);this.firebaseDependencies={app:C,appConfig:$,installations:M,analyticsProvider:k}}_delete(){return Promise.resolve()}}function zu(){return(zu=(0,P.Z)(function*(E){try{E.swRegistration=yield navigator.serviceWorker.register(Vd,{scope:La}),E.swRegistration.update().catch(()=>{})}catch(C){throw $r.create("failed-service-worker-registration",{browserErrorMessage:C?.message})}})).apply(this,arguments)}function Ho(){return(Ho=(0,P.Z)(function*(E,C){if(!C&&!E.swRegistration&&(yield function ul(E){return zu.apply(this,arguments)}(E)),C||!E.swRegistration){if(!(C instanceof ServiceWorkerRegistration))throw $r.create("invalid-sw-registration");E.swRegistration=C}})).apply(this,arguments)}function Gs(){return(Gs=(0,P.Z)(function*(E,C){C?E.vapidKey=C:E.vapidKey||(E.vapidKey=Va)})).apply(this,arguments)}function ll(){return ll=(0,P.Z)(function*(E,C){if(!navigator)throw $r.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw $r.create("permission-blocked");return yield function gt(E,C){return Gs.apply(this,arguments)}(E,C?.vapidKey),yield function cl(E,C){return Ho.apply(this,arguments)}(E,C?.serviceWorkerRegistration),function Tm(E){return jo.apply(this,arguments)}(E)}),ll.apply(this,arguments)}function qd(){return(qd=(0,P.Z)(function*(E,C,M){const k=function Wd(E){switch(E){case ws.NOTIFICATION_CLICKED:return"notification_open";case ws.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(C);(yield E.firebaseDependencies.analyticsProvider.get()).logEvent(k,{message_id:M[el],message_name:M[jn],message_time:M[js],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function za(){return za=(0,P.Z)(function*(E,C){const M=C.data;if(!M.isFirebaseMessaging)return;E.onMessageHandler&&M.messageType===ws.PUSH_RECEIVED&&("function"==typeof E.onMessageHandler?E.onMessageHandler(ol(M)):E.onMessageHandler.next(ol(M)));const k=M.data;(function $o(E){return"object"==typeof E&&!!E&&el in E})(k)&&"1"===k["google.c.a.e"]&&(yield function Qf(E,C,M){return qd.apply(this,arguments)}(E,M.messageType,k))}),za.apply(this,arguments)}const qa="@firebase/messaging",zo=E=>{const C=new Gd(E.getProvider("app").getImmediate(),E.getProvider("installations-internal").getImmediate(),E.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",M=>function Go(E,C){return za.apply(this,arguments)}(C,M)),C},Zd=E=>{const C=E.getProvider("messaging").getImmediate();return{getToken:k=>function zd(E,C){return ll.apply(this,arguments)}(C,k)}};function Wt(){return qu.apply(this,arguments)}function qu(){return(qu=(0,P.Z)(function*(){try{yield(0,ne.eu)()}catch{return!1}return typeof window<"u"&&(0,ne.hl)()&&(0,ne.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function be(){(0,J._registerComponent)(new le.wA("messaging",zo,"PUBLIC")),(0,J._registerComponent)(new le.wA("messaging-internal",Zd,"PRIVATE")),(0,J.registerVersion)(qa,"0.12.4"),(0,J.registerVersion)(qa,"0.12.4","esm2017")}();const $n="analytics",fl="firebase_id",Rr="origin",Is=6e4,Wu="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",zs="https://www.googletagmanager.com/gtag/js",hn=new fe.Yd("@firebase/analytics"),Or=new ne.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function Za(E){if(!E.startsWith(zs)){const C=Or.create("invalid-gtag-resource",{gtagURL:E});return hn.warn(C.message),""}return E}function Zu(E){return Promise.all(E.map(C=>C.catch(M=>M)))}function Yu(){return(Yu=(0,P.Z)(function*(E,C,M,k,$,W){const ce=k[$];try{if(ce)yield C[ce];else{const Be=(yield Zu(M)).find(it=>it.measurementId===$);Be&&(yield C[Be.appId])}}catch(We){hn.error(We)}E("config",$,W)})).apply(this,arguments)}function Wo(){return(Wo=(0,P.Z)(function*(E,C,M,k,$){try{let W=[];if($&&$.send_to){let ce=$.send_to;Array.isArray(ce)||(ce=[ce]);const We=yield Zu(M);for(const Be of ce){const it=We.find(Ct=>Ct.measurementId===Be),Dt=it&&C[it.appId];if(!Dt){W=[];break}W.push(Dt)}}0===W.length&&(W=Object.values(C)),yield Promise.all(W),E("event",k,$||{})}catch(W){hn.error(W)}})).apply(this,arguments)}const Qu=30,Xf=new class Qa{constructor(C={},M=1e3){this.throttleMetadata=C,this.intervalMillis=M}getThrottleMetadata(C){return this.throttleMetadata[C]}setThrottleMetadata(C,M){this.throttleMetadata[C]=M}deleteThrottleMetadata(C){delete this.throttleMetadata[C]}};function Yr(E){return new Headers({Accept:"application/json","x-goog-api-key":E})}function Cn(){return(Cn=(0,P.Z)(function*(E){var C;const{appId:M,apiKey:k}=E,$={method:"GET",headers:Yr(k)},W=Wu.replace("{app-id}",M),ce=yield fetch(W,$);if(200!==ce.status&&304!==ce.status){let We="";try{const Be=yield ce.json();null!==(C=Be.error)&&void 0!==C&&C.message&&(We=Be.error.message)}catch{}throw Or.create("config-fetch-failed",{httpStatus:ce.status,responseMessage:We})}return ce.json()})).apply(this,arguments)}function Ja(){return(Ja=(0,P.Z)(function*(E,C=Xf,M){const{appId:k,apiKey:$,measurementId:W}=E.options;if(!k)throw Or.create("no-app-id");if(!$){if(W)return{measurementId:W,appId:k};throw Or.create("no-api-key")}const ce=C.getThrottleMetadata(k)||{backoffCount:0,throttleEndTimeMillis:Date.now()},We=new yl;return setTimeout((0,P.Z)(function*(){We.abort()}),void 0!==M?M:Is),ep({appId:k,apiKey:$,measurementId:W},ce,We,C)})).apply(this,arguments)}function ep(E,C,M){return Jd.apply(this,arguments)}function Jd(){return Jd=(0,P.Z)(function*(E,{throttleEndTimeMillis:C,backoffCount:M},k,$=Xf){var W;const{appId:ce,measurementId:We}=E;try{yield function tp(E,C){return new Promise((M,k)=>{const $=Math.max(C-Date.now(),0),W=setTimeout(M,$);E.addEventListener(()=>{clearTimeout(W),k(Or.create("fetch-throttle",{throttleEndTimeMillis:C}))})})}(k,C)}catch(Be){if(We)return hn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${We} provided in the "measurementId" field in the local Firebase config. [${Be?.message}]`),{appId:ce,measurementId:We};throw Be}try{const Be=yield function mo(E){return Cn.apply(this,arguments)}(E);return $.deleteThrottleMetadata(ce),Be}catch(Be){const it=Be;if(!function ml(E){if(!(E instanceof ne.ZR&&E.customData))return!1;const C=Number(E.customData.httpStatus);return 429===C||500===C||503===C||504===C}(it)){if($.deleteThrottleMetadata(ce),We)return hn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${We} provided in the "measurementId" field in the local Firebase config. [${it?.message}]`),{appId:ce,measurementId:We};throw Be}const Dt=503===Number(null===(W=it?.customData)||void 0===W?void 0:W.httpStatus)?(0,ne.$s)(M,$.intervalMillis,Qu):(0,ne.$s)(M,$.intervalMillis),Ct={throttleEndTimeMillis:Date.now()+Dt,backoffCount:M+1};return $.setThrottleMetadata(ce,Ct),hn.debug(`Calling attemptFetch again in ${Dt} millis`),ep(E,Ct,k,$)}}),Jd.apply(this,arguments)}class yl{constructor(){this.listeners=[]}addEventListener(C){this.listeners.push(C)}abort(){this.listeners.forEach(C=>C())}}let as,eu;function Xa(){return(Xa=(0,P.Z)(function*(E,C,M,k,$){if($&&$.global)E("event",M,k);else{const W=yield C;E("event",M,Object.assign(Object.assign({},k),{send_to:W}))}})).apply(this,arguments)}function tu(){return(tu=(0,P.Z)(function*(){if(!(0,ne.hl)())return hn.warn(Or.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ne.eu)()}catch(E){return hn.warn(Or.create("indexeddb-unavailable",{errorInfo:E?.toString()}).message),!1}return!0})).apply(this,arguments)}function Hn(){return Hn=(0,P.Z)(function*(E,C,M,k,$,W,ce){var We;const Be=function Am(E){return Ja.apply(this,arguments)}(E);Be.then(ir=>{M[ir.measurementId]=ir.appId,E.options.measurementId&&ir.measurementId!==E.options.measurementId&&hn.warn(`The measurement ID in the local Firebase config (${E.options.measurementId}) does not match the measurement ID fetched from the server (${ir.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(ir=>hn.error(ir)),C.push(Be);const it=function El(){return tu.apply(this,arguments)}().then(ir=>{if(ir)return k.getId()}),[Dt,Ct]=yield Promise.all([Be,it]);(function Qd(E){const C=window.document.getElementsByTagName("script");for(const M of Object.values(C))if(M.src&&M.src.includes(zs)&&M.src.includes(E))return M;return null})(W)||function Ka(E,C){const M=function go(E,C){let M;return window.trustedTypes&&(M=window.trustedTypes.createPolicy(E,C)),M}("firebase-js-sdk-policy",{createScriptURL:Za}),k=document.createElement("script"),$=`${zs}?l=${E}&id=${C}`;k.src=M?M?.createScriptURL($):$,k.async=!0,document.head.appendChild(k)}(W,Dt.measurementId),eu&&($("consent","default",eu),function wl(E){eu=E}(void 0)),$("js",new Date);const Er=null!==(We=ce?.config)&&void 0!==We?We:{};return Er[Rr]="firebase",Er.update=!0,null!=Ct&&(Er[fl]=Ct),$("config",Dt.measurementId,Er),as&&($("set",as),function Ko(E){as=E}(void 0)),Dt.measurementId}),Hn.apply(this,arguments)}class Tt{constructor(C){this.app=C}_delete(){return delete Ci[this.app.options.appId],Promise.resolve()}}let Ci={},nu=[];const ru={};let iu,wr,qs="dataLayer",bi=!1;function Qo(E,C,M){!function th(){const E=[];if((0,ne.ru)()&&E.push("This is a browser extension environment."),(0,ne.zI)()||E.push("Cookies are not available."),E.length>0){const C=E.map((k,$)=>`(${$+1}) ${k}`).join(" "),M=Or.create("invalid-analytics-context",{errorInfo:C});hn.warn(M.message)}}();const k=E.options.appId;if(!k)throw Or.create("no-app-id");if(!E.options.apiKey){if(!E.options.measurementId)throw Or.create("no-api-key");hn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${E.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Ci[k])throw Or.create("already-exists",{id:k});if(!bi){!function Yd(E){let C=[];Array.isArray(window[E])?C=window[E]:window[E]=C}(qs);const{wrappedGtag:W,gtagCore:ce}=function pl(E,C,M,k,$){let W=function(...ce){window[k].push(arguments)};return window[$]&&"function"==typeof window[$]&&(W=window[$]),window[$]=function Li(E,C,M,k){function W(){return W=(0,P.Z)(function*(ce,...We){try{if("event"===ce){const[Be,it]=We;yield function Ya(E,C,M,k,$){return Wo.apply(this,arguments)}(E,C,M,Be,it)}else if("config"===ce){const[Be,it]=We;yield function Ku(E,C,M,k,$,W){return Yu.apply(this,arguments)}(E,C,M,k,Be,it)}else if("consent"===ce){const[Be]=We;E("consent","update",Be)}else if("get"===ce){const[Be,it,Dt]=We;E("get",Be,it,Dt)}else if("set"===ce){const[Be]=We;E("set",Be)}else E(ce,...We)}catch(Be){hn.error(Be)}}),W.apply(this,arguments)}return function $(ce){return W.apply(this,arguments)}}(W,E,C,M),{gtagCore:W,wrappedGtag:window[$]}}(Ci,nu,ru,qs,"gtag");wr=W,iu=ce,bi=!0}return Ci[k]=function Yo(E,C,M,k,$,W,ce){return Hn.apply(this,arguments)}(E,nu,ru,C,iu,qs,M),new Tt(E)}function Ds(){return Ti.apply(this,arguments)}function Ti(){return(Ti=(0,P.Z)(function*(){if((0,ne.ru)()||!(0,ne.zI)()||!(0,ne.hl)())return!1;try{return yield(0,ne.eu)()}catch{return!1}})).apply(this,arguments)}const ou="@firebase/analytics";!function yo(){(0,J._registerComponent)(new le.wA($n,(C,{options:M})=>Qo(C.getProvider("app").getImmediate(),C.getProvider("installations-internal").getImmediate(),M),"PUBLIC")),(0,J._registerComponent)(new le.wA("analytics-internal",function E(C){try{const M=C.getProvider($n).getImmediate();return{logEvent:(k,$,W)=>function us(E,C,M,k){E=(0,ne.m9)(E),function Xd(E,C,M,k,$){return Xa.apply(this,arguments)}(wr,Ci[E.app.options.appId],C,M,k).catch($=>hn.error($))}(M,k,$,W)}}catch(M){throw Or.create("interop-component-reg-failed",{reason:M})}},"PRIVATE")),(0,J.registerVersion)(ou,"0.10.0"),(0,J.registerVersion)(ou,"0.10.0","esm2017")}();var rc=O(4408),ic=O(7565);const bl=new class sc extends ic.v{}(class au extends rc.o{constructor(C,M){super(C,M),this.scheduler=C,this.work=M}schedule(C,M=0){return M>0?super.schedule(C,M):(this.delay=M,this.state=C,this.scheduler.flush(this),this)}execute(C,M){return M>0||this.closed?super.execute(C,M):this._execute(C,M)}requestAsyncId(C,M,k=0){return null!=k&&k>0||null==k&&this.delay>0?super.requestAsyncId(C,M,k):(C.flush(this),0)}});var Ws=O(4986),vo=O(8505),Cs=O(9468),_o=O(5363);const Jo=new h.GfV("7.6.1"),Bi="__angularfire_symbol__analyticsIsSupportedValue",uu="__angularfire_symbol__analyticsIsSupported",oc="__angularfire_symbol__remoteConfigIsSupportedValue",ac="__angularfire_symbol__remoteConfigIsSupported",cu="__angularfire_symbol__messagingIsSupportedValue",Xo="__angularfire_symbol__messagingIsSupported";function wo(E,C,M){if(C){if(1===C.length)return C[0];const W=C.filter(ce=>ce.app===M);if(1===W.length)return W[0]}return M.container.getProvider(E).getImmediate({optional:!0})}globalThis[uu]||(globalThis[uu]=Ds().then(E=>globalThis[Bi]=E).catch(()=>globalThis[Bi]=!1)),globalThis[Xo]||(globalThis[Xo]=Wt().then(E=>globalThis[cu]=E).catch(()=>globalThis[cu]=!1)),globalThis[ac]||(globalThis[ac]=co().then(E=>globalThis[oc]=E).catch(()=>globalThis[oc]=!1));const sp=(E,C)=>{const M=C?[C]:(0,q.C6)(),k=[];return M.forEach($=>{$.container.getProvider(E).instances.forEach(ce=>{k.includes(ce)||k.push(ce)})}),k};function Dn(){}class op{constructor(C,M=bl){this.zone=C,this.delegate=M}now(){return this.delegate.now()}schedule(C,M,k){const $=this.zone;return this.delegate.schedule(function(ce){$.runGuarded(()=>{C.apply(this,[ce])})},M,k)}}class Zs{constructor(C){this.zone=C,this.task=null}call(C,M){const k=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Dn,{},Dn,Dn)),M.pipe((0,vo.b)({next:k,complete:k,error:k})).subscribe(C).add(k)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Al=(()=>{class E{constructor(M){this.ngZone=M,this.outsideAngular=M.runOutsideAngular(()=>new op(Zone.current)),this.insideAngular=M.run(()=>new op(Zone.current,Ws.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return E.\u0275fac=function(M){return new(M||E)(h.LFG(h.R0b))},E.\u0275prov=h.Yz7({token:E,factory:E.\u0275fac,providedIn:"root"}),E})();function Jn(){const E=globalThis.\u0275AngularFireScheduler;if(!E)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return E}function ap(E){return Jn(),function g_(E){return function(M){return(M=M.lift(new Zs(E.ngZone))).pipe((0,Cs.R)(E.outsideAngular),(0,_o.Q)(E.insideAngular))}}(Jn())(E)}},2090:(lt,Ie,O)=>{O.d(Ie,{$s:()=>ts,BH:()=>K,G6:()=>Ee,L:()=>de,LL:()=>Ut,Pz:()=>pe,Sg:()=>he,UG:()=>ie,US:()=>le,ZB:()=>Q,ZR:()=>Xe,aH:()=>te,b$:()=>fr,eu:()=>He,hl:()=>Ae,jU:()=>$e,m9:()=>qt,ne:()=>ln,pd:()=>ft,r3:()=>Zn,ru:()=>Ht,tV:()=>V,uI:()=>Le,vZ:()=>ni,w1:()=>Fs,xO:()=>Aa,xb:()=>ro,z$:()=>Te,zI:()=>Ve,zd:()=>qe});const J=function(U){const L=[];let z=0;for(let _e=0;_e<U.length;_e++){let se=U.charCodeAt(_e);se<128?L[z++]=se:se<2048?(L[z++]=se>>6|192,L[z++]=63&se|128):55296==(64512&se)&&_e+1<U.length&&56320==(64512&U.charCodeAt(_e+1))?(se=65536+((1023&se)<<10)+(1023&U.charCodeAt(++_e)),L[z++]=se>>18|240,L[z++]=se>>12&63|128,L[z++]=se>>6&63|128,L[z++]=63&se|128):(L[z++]=se>>12|224,L[z++]=se>>6&63|128,L[z++]=63&se|128)}return L},le={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(U,L){if(!Array.isArray(U))throw Error("encodeByteArray takes an array as a parameter");this.init_();const z=L?this.byteToCharMapWebSafe_:this.byteToCharMap_,_e=[];for(let se=0;se<U.length;se+=3){const nt=U[se],pt=se+1<U.length,Nt=pt?U[se+1]:0,yn=se+2<U.length,dn=yn?U[se+2]:0;let mr=(15&Nt)<<2|dn>>6,vi=63&dn;yn||(vi=64,pt||(mr=64)),_e.push(z[nt>>2],z[(3&nt)<<4|Nt>>4],z[mr],z[vi])}return _e.join("")},encodeString(U,L){return this.HAS_NATIVE_SUPPORT&&!L?btoa(U):this.encodeByteArray(J(U),L)},decodeString(U,L){return this.HAS_NATIVE_SUPPORT&&!L?atob(U):function(U){const L=[];let z=0,_e=0;for(;z<U.length;){const se=U[z++];if(se<128)L[_e++]=String.fromCharCode(se);else if(se>191&&se<224){const nt=U[z++];L[_e++]=String.fromCharCode((31&se)<<6|63&nt)}else if(se>239&&se<365){const yn=((7&se)<<18|(63&U[z++])<<12|(63&U[z++])<<6|63&U[z++])-65536;L[_e++]=String.fromCharCode(55296+(yn>>10)),L[_e++]=String.fromCharCode(56320+(1023&yn))}else{const nt=U[z++],pt=U[z++];L[_e++]=String.fromCharCode((15&se)<<12|(63&nt)<<6|63&pt)}}return L.join("")}(this.decodeStringToByteArray(U,L))},decodeStringToByteArray(U,L){this.init_();const z=L?this.charToByteMapWebSafe_:this.charToByteMap_,_e=[];for(let se=0;se<U.length;){const nt=z[U.charAt(se++)],Nt=se<U.length?z[U.charAt(se)]:0;++se;const dn=se<U.length?z[U.charAt(se)]:64;++se;const Gt=se<U.length?z[U.charAt(se)]:64;if(++se,null==nt||null==Nt||null==dn||null==Gt)throw new fe;_e.push(nt<<2|Nt>>4),64!==dn&&(_e.push(Nt<<4&240|dn>>2),64!==Gt&&_e.push(dn<<6&192|Gt))}return _e},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let U=0;U<this.ENCODED_VALS.length;U++)this.byteToCharMap_[U]=this.ENCODED_VALS.charAt(U),this.charToByteMap_[this.byteToCharMap_[U]]=U,this.byteToCharMapWebSafe_[U]=this.ENCODED_VALS_WEBSAFE.charAt(U),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[U]]=U,U>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(U)]=U,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(U)]=U)}}};class fe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const de=function(U){return function(U){const L=J(U);return le.encodeByteArray(L,!0)}(U).replace(/\./g,"")},V=function(U){try{return le.decodeString(U,!0)}catch(L){console.error("base64Decode failed: ",L)}return null};function Q(U,L){if(!(L instanceof Object))return L;switch(L.constructor){case Date:return new Date(L.getTime());case Object:void 0===U&&(U={});break;case Array:U=[];break;default:return L}for(const z in L)!L.hasOwnProperty(z)||!Fe(z)||(U[z]=Q(U[z],L[z]));return U}function Fe(U){return"__proto__"!==U}const Ne=()=>{try{return function Ce(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const U=process.env.__FIREBASE_DEFAULTS__;return U?JSON.parse(U):void 0})()||(()=>{if(typeof document>"u")return;let U;try{U=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const L=U&&V(U[1]);return L&&JSON.parse(L)})()}catch(U){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${U}`)}},te=()=>{var U;return null===(U=Ne())||void 0===U?void 0:U.config},pe=U=>{var L;return null===(L=Ne())||void 0===L?void 0:L[`_${U}`]};class K{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((L,z)=>{this.resolve=L,this.reject=z})}wrapCallback(L){return(z,_e)=>{z?this.reject(z):this.resolve(_e),"function"==typeof L&&(this.promise.catch(()=>{}),1===L.length?L(z):L(z,_e))}}}function he(U,L){if(U.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const _e=L||"demo-project",se=U.iat||0,nt=U.sub||U.user_id;if(!nt)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const pt=Object.assign({iss:`https://securetoken.google.com/${_e}`,aud:_e,iat:se,exp:se+3600,auth_time:se,sub:nt,user_id:nt,firebase:{sign_in_provider:"custom",identities:{}}},U);return[de(JSON.stringify({alg:"none",type:"JWT"})),de(JSON.stringify(pt)),""].join(".")}function Te(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Le(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Te())}function ie(){var U;const L=null===(U=Ne())||void 0===U?void 0:U.forceEnvironment;if("node"===L)return!0;if("browser"===L)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function $e(){return"object"==typeof self&&self.self===self}function Ht(){const U="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof U&&void 0!==U.id}function fr(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Fs(){const U=Te();return U.indexOf("MSIE ")>=0||U.indexOf("Trident/")>=0}function Ee(){return!ie()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ae(){try{return"object"==typeof indexedDB}catch{return!1}}function He(){return new Promise((U,L)=>{try{let z=!0;const _e="validate-browser-context-for-indexeddb-analytics-module",se=self.indexedDB.open(_e);se.onsuccess=()=>{se.result.close(),z||self.indexedDB.deleteDatabase(_e),U(!0)},se.onupgradeneeded=()=>{z=!1},se.onerror=()=>{var nt;L((null===(nt=se.error)||void 0===nt?void 0:nt.message)||"")}}catch(z){L(z)}})}function Ve(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class Xe extends Error{constructor(L,z,_e){super(z),this.code=L,this.customData=_e,this.name="FirebaseError",Object.setPrototypeOf(this,Xe.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ut.prototype.create)}}class Ut{constructor(L,z,_e){this.service=L,this.serviceName=z,this.errors=_e}create(L,...z){const _e=z[0]||{},se=`${this.service}/${L}`,nt=this.errors[L],pt=nt?function tt(U,L){return U.replace(ht,(z,_e)=>{const se=L[_e];return null!=se?String(se):`<${_e}?>`})}(nt,_e):"Error";return new Xe(se,`${this.serviceName}: ${pt} (${se}).`,_e)}}const ht=/\{\$([^}]+)}/g;function Zn(U,L){return Object.prototype.hasOwnProperty.call(U,L)}function ro(U){for(const L in U)if(Object.prototype.hasOwnProperty.call(U,L))return!1;return!0}function ni(U,L){if(U===L)return!0;const z=Object.keys(U),_e=Object.keys(L);for(const se of z){if(!_e.includes(se))return!1;const nt=U[se],pt=L[se];if(ri(nt)&&ri(pt)){if(!ni(nt,pt))return!1}else if(nt!==pt)return!1}for(const se of _e)if(!z.includes(se))return!1;return!0}function ri(U){return null!==U&&"object"==typeof U}function Aa(U){const L=[];for(const[z,_e]of Object.entries(U))Array.isArray(_e)?_e.forEach(se=>{L.push(encodeURIComponent(z)+"="+encodeURIComponent(se))}):L.push(encodeURIComponent(z)+"="+encodeURIComponent(_e));return L.length?"&"+L.join("&"):""}function qe(U){const L={};return U.replace(/^\?/,"").split("&").forEach(_e=>{if(_e){const[se,nt]=_e.split("=");L[decodeURIComponent(se)]=decodeURIComponent(nt)}}),L}function ft(U){const L=U.indexOf("?");if(!L)return"";const z=U.indexOf("#",L);return U.substring(L,z>0?z:void 0)}function ln(U,L){const z=new Tn(U,L);return z.subscribe.bind(z)}class Tn{constructor(L,z){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=z,this.task.then(()=>{L(this)}).catch(_e=>{this.error(_e)})}next(L){this.forEachObserver(z=>{z.next(L)})}error(L){this.forEachObserver(z=>{z.error(L)}),this.close(L)}complete(){this.forEachObserver(L=>{L.complete()}),this.close()}subscribe(L,z,_e){let se;if(void 0===L&&void 0===z&&void 0===_e)throw new Error("Missing Observer.");se=function rn(U,L){if("object"!=typeof U||null===U)return!1;for(const z of L)if(z in U&&"function"==typeof U[z])return!0;return!1}(L,["next","error","complete"])?L:{next:L,error:z,complete:_e},void 0===se.next&&(se.next=pr),void 0===se.error&&(se.error=pr),void 0===se.complete&&(se.complete=pr);const nt=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?se.error(this.finalError):se.complete()}catch{}}),this.observers.push(se),nt}unsubscribeOne(L){void 0===this.observers||void 0===this.observers[L]||(delete this.observers[L],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(L){if(!this.finalized)for(let z=0;z<this.observers.length;z++)this.sendOne(z,L)}sendOne(L,z){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[L])try{z(this.observers[L])}catch(_e){typeof console<"u"&&console.error&&console.error(_e)}})}close(L){this.finalized||(this.finalized=!0,void 0!==L&&(this.finalError=L),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function pr(){}const es=1e3,gr=2,nr=144e5,mn=.5;function ts(U,L=es,z=gr){const _e=L*Math.pow(z,U),se=Math.round(mn*_e*(Math.random()-.5)*2);return Math.min(nr,_e+se)}function qt(U){return U&&U._delegate?U._delegate:U}},8541:(lt,Ie,O)=>{var h=O(2223);let q=null;function P(){return q}class ne{}const le=new h.OlP("DocumentToken");let fe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return(0,h.f3M)(de)},providedIn:"platform"}),n})();const Oe=new h.OlP("Location Initialized");let de=(()=>{class n extends fe{constructor(){super(),this._doc=(0,h.f3M)(le),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return P().getBaseHref(this._doc)}onPopState(t){const r=P().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=P().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,o){this._history.pushState(t,r,o)}replaceState(t,r,o){this._history.replaceState(t,r,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return new n},providedIn:"platform"}),n})();function V(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function j(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Q(n){return n&&"?"!==n[0]?"?"+n:n}let Fe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return(0,h.f3M)(Ye)},providedIn:"root"}),n})();const Ce=new h.OlP("appBaseHref");let Ye=(()=>{class n extends Fe{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,h.f3M)(le).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return V(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Q(this._platformLocation.search),o=this._platformLocation.hash;return o&&t?`${r}${o}`:r}pushState(t,r,o,u){const l=this.prepareExternalUrl(o+Q(u));this._platformLocation.pushState(t,r,l)}replaceState(t,r,o,u){const l=this.prepareExternalUrl(o+Q(u));this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(fe),h.LFG(Ce,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Me=(()=>{class n extends Fe{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=V(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,o,u){let l=this.prepareExternalUrl(o+Q(u));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(t,r,l)}replaceState(t,r,o,u){let l=this.prepareExternalUrl(o+Q(u));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(fe),h.LFG(Ce,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),ze=(()=>{class n{constructor(t){this._subject=new h.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function te(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(j(dt(r))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Q(r))}normalize(t){return n.stripTrailingSlash(function mt(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,dt(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",o=null){this._locationStrategy.pushState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Q(r)),o)}replaceState(t,r="",o=null){this._locationStrategy.replaceState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Q(r)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(o=>o(t,r))}subscribe(t,r,o){return this._subject.subscribe({next:t,error:r,complete:o})}}return n.normalizeQueryParams=Q,n.joinWithSlash=V,n.stripTrailingSlash=j,n.\u0275fac=function(t){return new(t||n)(h.LFG(Fe))},n.\u0275prov=h.Yz7({token:n,factory:function(){return function Ne(){return new ze((0,h.LFG)(Fe))}()},providedIn:"root"}),n})();function dt(n){return n.replace(/\/index.html$/,"")}class zc{constructor(e,t,r,o){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=o}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Ru=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,o){this._viewContainer=t,this._template=r,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((o,u,l)=>{if(null==o.previousIndex)r.createEmbeddedView(this._template,new zc(o.item,this._ngForOf,-1,-1),null===l?void 0:l);else if(null==l)r.remove(null===u?void 0:u);else if(null!==u){const m=r.get(u);r.move(m,l),xd(m,o)}});for(let o=0,u=r.length;o<u;o++){const m=r.get(o).context;m.index=o,m.count=u,m.ngForOf=this._ngForOf}t.forEachIdentityChange(o=>{xd(r.get(o.currentIndex),o)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.s_b),h.Y36(h.Rgc),h.Y36(h.ZZ4))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function xd(n,e){n.context.$implicit=e.item}let Vs=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new ym,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){$f("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){$f("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.s_b),h.Y36(h.Rgc))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class ym{constructor(){this.$implicit=null,this.ngIf=null}}function $f(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,h.AaK)(e)}'.`)}let wi=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();function uo(n){return"server"===n}let ss=(()=>{class n{}return n.\u0275prov=(0,h.Yz7)({token:n,providedIn:"root",factory:()=>new Kr((0,h.LFG)(le),window)}),n})();class Kr{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function co(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let o=r.currentNode;for(;o;){const u=o.shadowRoot;if(u){const l=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(l)return l}o=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,o=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],o-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Ei(this.window.history)||Ei(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Ei(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class ol extends ne{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class $s extends ol{static makeCurrent(){!function J(n){q||(q=n)}(new $s)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Sm(){return ur=ur||document.querySelector("base"),ur?ur.getAttribute("href"):null}();return null==t?null:function Hd(n){$o=$o||document.createElement("a"),$o.setAttribute("href",n);const e=$o.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){ur=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function so(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[o,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(o.trim()===e)return decodeURIComponent(u)}return null}(document.cookie,e)}}let $o,ur=null,al=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const Gd=new h.OlP("EventManagerPlugins");let ul=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(o=>{o.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,o){return this._findPluginFor(r).addEventListener(t,r,o)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(u=>u.supports(t)),!r)throw new h.vHH(5101,!1);return this._eventNameToPlugin.set(t,r),r}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Gd),h.LFG(h.R0b))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class zu{constructor(e){this._doc=e}}const cl="ng-app-id";let Ho=(()=>{class n{constructor(t,r,o,u={}){this.doc=t,this.appId=r,this.nonce=o,this.platformId=u,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=uo(u),this.resetHostNodes()}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.elements?.forEach(o=>o.remove()),r.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${cl}="${this.appId}"]`);if(t?.length){const r=new Map;return t.forEach(o=>{null!=o.textContent&&r.set(o.textContent,o)}),r}return null}changeUsageCount(t,r){const o=this.styleRef;if(o.has(t)){const u=o.get(t);return u.usage+=r,u.usage}return o.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){const o=this.styleNodesInDOM,u=o?.get(r);if(u?.parentNode===t)return o.delete(r),u.removeAttribute(cl),u;{const l=this.doc.createElement("style");return this.nonce&&l.setAttribute("nonce",this.nonce),l.textContent=r,this.platformIsServer&&l.setAttribute(cl,this.appId),l}}addStyleToHost(t,r){const o=this.getStyleElement(t,r);t.appendChild(o);const u=this.styleRef,l=u.get(r)?.elements;l?l.push(o):u.set(r,{elements:[o],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(le),h.LFG(h.AFp),h.LFG(h.Ojb,8),h.LFG(h.Lbi))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const gt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Gs=/%COMP%/g,Wd=new h.OlP("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function qa(n,e){return e.map(t=>t.replace(Gs,n))}let dl=(()=>{class n{constructor(t,r,o,u,l,m,I,b=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=o,this.removeStylesOnCompDestory=u,this.doc=l,this.platformId=m,this.ngZone=I,this.nonce=b,this.rendererByCompId=new Map,this.platformIsServer=uo(m),this.defaultRenderer=new zo(t,l,I,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===h.ifc.ShadowDom&&(r={...r,encapsulation:h.ifc.Emulated});const o=this.getOrCreateRenderer(t,r);return o instanceof Sn?o.applyToHost(t):o instanceof hl&&o.applyStyles(),o}getOrCreateRenderer(t,r){const o=this.rendererByCompId;let u=o.get(r.id);if(!u){const l=this.doc,m=this.ngZone,I=this.eventManager,b=this.sharedStylesHost,A=this.removeStylesOnCompDestory,R=this.platformIsServer;switch(r.encapsulation){case h.ifc.Emulated:u=new Sn(I,b,r,this.appId,A,l,m,R);break;case h.ifc.ShadowDom:return new qu(I,b,t,r,l,m,this.nonce,R);default:u=new hl(I,b,r,A,l,m,R)}u.onDestroy=()=>o.delete(r.id),o.set(r.id,u)}return u}ngOnDestroy(){this.rendererByCompId.clear()}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ul),h.LFG(Ho),h.LFG(h.AFp),h.LFG(Wd),h.LFG(le),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(h.Ojb))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class zo{constructor(e,t,r,o){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=o,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(gt[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(Wt(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Wt(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new h.vHH(5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,o){if(o){t=o+":"+t;const u=gt[o];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const o=gt[r];o?e.removeAttributeNS(o,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,o){o&(h.JOm.DashCase|h.JOm.Important)?e.style.setProperty(t,r,o&h.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&h.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){if("string"==typeof e&&!(e=P().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function Wt(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class qu extends zo{constructor(e,t,r,o,u,l,m,I){super(e,u,l,I),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const b=qa(o.id,o.styles);for(const A of b){const R=document.createElement("style");m&&R.setAttribute("nonce",m),R.textContent=A,this.shadowRoot.appendChild(R)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class hl extends zo{constructor(e,t,r,o,u,l,m,I){super(e,u,l,m),this.sharedStylesHost=t,this.removeStylesOnCompDestory=o,this.rendererUsageCount=0,this.styles=I?qa(I,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class Sn extends hl{constructor(e,t,r,o,u,l,m,I){const b=o+"-"+r.id;super(e,t,r,u,l,m,I,b),this.contentAttr=function Go(n){return"_ngcontent-%COMP%".replace(Gs,n)}(b),this.hostAttr=function za(n){return"_nghost-%COMP%".replace(Gs,n)}(b)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let Jf=(()=>{class n extends zu{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,o){return t.addEventListener(r,o,!1),()=>this.removeEventListener(t,r,o)}removeEventListener(t,r,o){return t.removeEventListener(r,o)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(le))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const Di=["alt","control","meta","shift"],Es={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Wa={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let qo=(()=>{class n extends zu{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,o){const u=n.parseEventName(r),l=n.eventCallback(u.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>P().onAndCancel(t,u.domEventName,l))}static parseEventName(t){const r=t.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const u=n._normalizeKey(r.pop());let l="",m=r.indexOf("code");if(m>-1&&(r.splice(m,1),l="code."),Di.forEach(b=>{const A=r.indexOf(b);A>-1&&(r.splice(A,1),l+=b+".")}),l+=u,0!=r.length||0===u.length)return null;const I={};return I.domEventName=o,I.fullKey=l,I}static matchEventFullKeyCode(t,r){let o=Es[t.key]||t.key,u="";return r.indexOf("code.")>-1&&(o=t.code,u="code."),!(null==o||!o)&&(o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),Di.forEach(l=>{l!==o&&(0,Wa[l])(t)&&(u+=l+".")}),u+=o,u===r)}static eventCallback(t,r,o){return u=>{n.matchEventFullKeyCode(u,t)&&o.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(le))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const Kd=(0,h.eFA)(h._c5,"browser",[{provide:h.Lbi,useValue:"browser"},{provide:h.g9A,useValue:function Is(){$s.makeCurrent()},multi:!0},{provide:le,useFactory:function zs(){return(0,h.RDi)(document),document},deps:[]}]),Or=new h.OlP(""),Za=[{provide:h.rWj,useClass:class Hs{addToWindow(e){h.dqk.getAngularTestability=(r,o=!0)=>{const u=e.findTestabilityInTree(r,o);if(null==u)throw new h.vHH(5103,!1);return u},h.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),h.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),h.dqk.frameworkStabilizers||(h.dqk.frameworkStabilizers=[]),h.dqk.frameworkStabilizers.push(r=>{const o=h.dqk.getAllAngularTestabilities();let u=o.length,l=!1;const m=function(I){l=l||I,u--,0==u&&r(l)};o.forEach(function(I){I.whenStable(m)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?P().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:h.lri,useClass:h.dDg,deps:[h.R0b,h.eoX,h.rWj]},{provide:h.dDg,useClass:h.dDg,deps:[h.R0b,h.eoX,h.rWj]}],Zu=[{provide:h.zSh,useValue:"root"},{provide:h.qLn,useFactory:function Wu(){return new h.qLn},deps:[]},{provide:Gd,useClass:Jf,multi:!0,deps:[le,h.R0b,h.Lbi]},{provide:Gd,useClass:qo,multi:!0,deps:[le]},dl,Ho,ul,{provide:h.FYo,useExisting:dl},{provide:class ar{},useClass:al,deps:[]},[]];let go=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:h.AFp,useValue:t.appId}]}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Or,12))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[...Zu,...Za],imports:[wi,h.hGG]}),n})(),Ya=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(le))},n.\u0275prov=h.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function Yu(){return new Ya((0,h.LFG)(le))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;var fn=O(8996),_r=O(9751);const{isArray:rp}=Array,{getPrototypeOf:Xu,prototype:eu,keys:wl}=Object;function Ko(n){if(1===n.length){const e=n[0];if(rp(e))return{args:e,keys:null};if(function El(n){return n&&"object"==typeof n&&Xu(n)===eu}(e)){const t=wl(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var tu=O(8421),Yo=O(7669),Hn=O(5403),Tt=O(4004);const{isArray:Ci}=Array;function ru(n){return(0,Tt.U)(e=>function nu(n,e){return Ci(e)?n(...e):n(e)}(n,e))}function qs(n,e){return n.reduce((t,r,o)=>(t[r]=e[o],t),{})}let iu=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.Qsj),h.Y36(h.SBq))},n.\u0275dir=h.lG2({type:n}),n})(),wr=(()=>{class n extends iu{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275dir=h.lG2({type:n,features:[h.qOj]}),n})();const bi=new h.OlP("NgValueAccessor"),Qo={provide:bi,useExisting:(0,h.Gpc)(()=>Ds),multi:!0},ec=new h.OlP("CompositionEventMode");let Ds=(()=>{class n extends iu{constructor(t,r,o){super(t,r),this._compositionMode=o,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function nh(){const n=P()?P().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.Qsj),h.Y36(h.SBq),h.Y36(ec,8))},n.\u0275dir=h.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&h.NdJ("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},features:[h._Bn([Qo]),h.qOj]}),n})();const Pr=new h.OlP("NgValidators"),Ui=new h.OlP("NgAsyncValidators");function us(n){return function Ti(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}(n.value)?{required:!0}:null}function au(n){return null}function ic(n){return null!=n}function sc(n){return(0,h.QGY)(n)?(0,fn.D)(n):n}function bl(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function Tl(n,e){return e.map(t=>t(n))}function vo(n){return n.map(e=>function Ws(n){return!n.validate}(e)?e:t=>e.validate(t))}function _o(n){return null!=n?function Cs(n){if(!n)return null;const e=n.filter(ic);return 0==e.length?null:function(t){return bl(Tl(t,e))}}(vo(n)):null}function Bi(n){return null!=n?function Jo(n){if(!n)return null;const e=n.filter(ic);return 0==e.length?null:function(t){return function Il(...n){const e=(0,Yo.jO)(n),{args:t,keys:r}=Ko(n),o=new _r.y(u=>{const{length:l}=t;if(!l)return void u.complete();const m=new Array(l);let I=l,b=l;for(let A=0;A<l;A++){let R=!1;(0,tu.Xf)(t[A]).subscribe((0,Hn.x)(u,H=>{R||(R=!0,b--),m[A]=H},()=>I--,void 0,()=>{(!I||!R)&&(b||u.next(r?qs(r,m):m),u.complete())}))}});return e?o.pipe(ru(e)):o}(Tl(t,e).map(sc)).pipe((0,Tt.U)(bl))}}(vo(n)):null}function uu(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function cu(n){return n?Array.isArray(n)?n:[n]:[]}function Xo(n,e){return Array.isArray(n)?n.includes(e):n===e}function Sl(n,e){const t=cu(e);return cu(n).forEach(o=>{Xo(t,o)||t.push(o)}),t}function ip(n,e){return cu(e).filter(t=>!Xo(n,t))}class sh{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=_o(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Bi(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class cr extends sh{get formDirective(){return null}get path(){return null}}class wo extends sh{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class sp{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Zs=(()=>{class n extends sp{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(wo,2))},n.\u0275dir=h.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&h.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[h.qOj]}),n})(),Al=(()=>{class n extends sp{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(cr,10))},n.\u0275dir=h.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&h.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[h.qOj]}),n})();const Be="VALID",it="INVALID",Dt="PENDING",Ct="DISABLED";function Er(n){return(li(n)?n.validators:n)||null}function $i(n,e){return(li(e)?e.asyncValidators:n)||null}function li(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class du{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Be}get invalid(){return this.status===it}get pending(){return this.status==Dt}get disabled(){return this.status===Ct}get enabled(){return this.status!==Ct}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(Sl(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Sl(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(ip(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(ip(e,this._rawAsyncValidators))}hasValidator(e){return Xo(this._rawValidators,e)}hasAsyncValidator(e){return Xo(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Dt,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Ct,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Be,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Be||this.status===Dt)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Ct:Be}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Dt,this._hasOwnPendingAsyncValidator=!0;const t=sc(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,o)=>r&&r._find(o),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new h.vpe,this.statusChanges=new h.vpe}_calculateStatus(){return this._allControlsDisabled()?Ct:this.errors?it:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Dt)?Dt:this._anyControlsHaveStatus(it)?it:Be}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){li(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function ir(n){return Array.isArray(n)?_o(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function Ml(n){return Array.isArray(n)?Bi(n):n||null}(this._rawAsyncValidators)}}class ea extends du{constructor(e,t,r){super(Er(t),$i(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function Hi(n,e,t){n._forEachChild((r,o)=>{if(void 0===t[o])throw new h.vHH(1002,"")})})(this,0,e),Object.keys(e).forEach(r=>{(function Si(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new h.vHH(1e3,"");if(!r[t])throw new h.vHH(1001,"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const o=this.controls[r];o&&o.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,o)=>((r.enabled||this.disabled)&&(t[o]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((o,u)=>{r=t(r,o,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}const Gi=new h.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>xl}),xl="always";function lc(n,e,t=xl){lp(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function uh(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&ta(n,e)})}(n,e),function xm(n,e){const t=(r,o)=>{e.valueAccessor.writeValue(r),o&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function v_(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&ta(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function y_(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function cp(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function lp(n,e){const t=function oc(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(uu(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function ac(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(uu(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const o=()=>n.updateValueAndValidity();cp(e._rawValidators,o),cp(e._rawAsyncValidators,o)}function ta(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}const QE={provide:cr,useExisting:(0,h.Gpc)(()=>na)},Rl=(()=>Promise.resolve())();let na=(()=>{class n extends cr{constructor(t,r,o){super(),this.callSetDisabledState=o,this.submitted=!1,this._directives=new Set,this.ngSubmit=new h.vpe,this.form=new ea({},_o(t),Bi(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Rl.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),lc(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Rl.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Rl.then(()=>{const r=this._findContainer(t.path),o=new ea({});(function __(n,e){lp(n,e)})(o,t),r.registerControl(t.name,o),o.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Rl.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){Rl.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,function pp(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Pr,10),h.Y36(Ui,10),h.Y36(Gi,8))},n.\u0275dir=h.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&h.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[h._Bn([QE]),h.qOj]}),n})();function dc(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function gp(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const mp=class extends du{constructor(e=null,t,r){super(Er(t),$i(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),li(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=gp(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){dc(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){dc(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){gp(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},Pm={provide:wo,useExisting:(0,h.Gpc)(()=>Ol)},lh=(()=>Promise.resolve())();let Ol=(()=>{class n extends wo{constructor(t,r,o,u,l,m){super(),this._changeDetectorRef=l,this.callSetDisabledState=m,this.control=new mp,this._registered=!1,this.name="",this.update=new h.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=function Om(n,e){if(!e)return null;let t,r,o;return Array.isArray(e),e.forEach(u=>{u.constructor===Ds?t=u:function fp(n){return Object.getPrototypeOf(n.constructor)===wr}(u)?r=u:o=u}),o||r||t||null}(0,u)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function Rm(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){lc(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){lh.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,o=0!==r&&(0,h.D6c)(r);lh.then(()=>{o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function oh(n,e){return[...e.path,n]}(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(cr,9),h.Y36(Pr,10),h.Y36(Ui,10),h.Y36(bi,10),h.Y36(h.sBO,8),h.Y36(Gi,8))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[h._Bn([Pm]),h.qOj,h.TTD]}),n})(),km=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=h.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),di=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();const mh={provide:bi,useExisting:(0,h.Gpc)(()=>fc),multi:!0};function Vm(n,e){return null==n?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let fc=(()=>{class n extends wr{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const o=Vm(this._getOptionId(t),t);this.setProperty("value",o)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){const r=function cs(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r):t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275dir=h.lG2({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,r){1&t&&h.NdJ("change",function(u){return r.onChange(u.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[h._Bn([mh]),h.qOj]}),n})(),Ap=(()=>{class n{constructor(t,r,o){this._element=t,this._renderer=r,this._select=o,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(Vm(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.SBq),h.Y36(h.Qsj),h.Y36(fc,9))},n.\u0275dir=h.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();const Mp={provide:bi,useExisting:(0,h.Gpc)(()=>oa),multi:!0};function yh(n,e){return null==n?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let oa=(()=>{class n extends wr{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let r;if(this.value=t,Array.isArray(t)){const o=t.map(u=>this._getOptionId(u));r=(u,l)=>{u._setSelected(o.indexOf(l.toString())>-1)}}else r=(o,u)=>{o._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{const o=[],u=r.selectedOptions;if(void 0!==u){const l=u;for(let m=0;m<l.length;m++){const b=this._getOptionValue(l[m].value);o.push(b)}}else{const l=r.options;for(let m=0;m<l.length;m++){const I=l[m];if(I.selected){const b=this._getOptionValue(I.value);o.push(b)}}}this.value=o,t(o)}}_registerOption(t){const r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(const r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){const r=function xp(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275dir=h.lG2({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,r){1&t&&h.NdJ("change",function(u){return r.onChange(u.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[h._Bn([Mp]),h.qOj]}),n})(),pc=(()=>{class n{constructor(t,r,o){this._element=t,this._renderer=r,this._select=o,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(yh(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(yh(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.SBq),h.Y36(h.Qsj),h.Y36(oa,9))},n.\u0275dir=h.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})(),bs=(()=>{class n{constructor(){this._validator=au}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):au,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=h.lG2({type:n,features:[h.TTD]}),n})();const D_={provide:Pr,useExisting:(0,h.Gpc)(()=>hu),multi:!0};let hu=(()=>{class n extends bs{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=h.D6c,this.createValidator=t=>us}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275dir=h.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,r){2&t&&h.uIk("required",r._enabled?"":null)},inputs:{required:"required"},features:[h._Bn([D_]),h.qOj]}),n})(),rt=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[di]}),n})(),Ih=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Gi,useValue:t.callSetDisabledState??xl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[rt]}),n})();var Ai=O(2011),Ch=O(4986),Et=O(9646),Dr=O(4976),gc=O(8189);function C_(...n){return function sT(){return(0,gc.J)(1)}()((0,fn.D)(n,(0,Yo.yG)(n)))}var Ss=O(4482);function Fp(...n){const e=(0,Yo.yG)(n);return(0,Ss.e)((t,r)=>{(e?C_(n,t,e):C_(n,t)).subscribe(r)})}function jm(){return(0,Ss.e)((n,e)=>{let t,r=!1;n.subscribe((0,Hn.x)(e,o=>{const u=t;t=o,r&&e.next([u,o]),r=!0}))})}function bh(n,e){return(0,Ss.e)(function $m(n,e,t,r,o){return(u,l)=>{let m=t,I=e,b=0;u.subscribe((0,Hn.x)(l,A=>{const R=b++;I=m?n(I,A,R):(m=!0,A),r&&l.next(I)},o&&(()=>{m&&l.next(I),l.complete()})))}}(n,e,arguments.length>=2,!0))}var Th=O(1884);function Io(n,e){return(0,Ss.e)((t,r)=>{let o=0;t.subscribe((0,Hn.x)(r,u=>n.call(e,u,o++)&&r.next(u)))})}O(2644);var Je,CM=O(3942),ge=O(5861),fu=O(6881),Hm=O(4859),Ys=O(1877),nn=O(2090),b_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Qs={},Gm=Gm||{},Vt=b_||self;function zm(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Lp(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var T_="closure_uid_"+(1e9*Math.random()>>>0),aT=0;function mc(n,e,t){return n.call.apply(n.bind,arguments)}function Vp(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var o=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(o,r),n.apply(e,o)}}return function(){return n.apply(e,arguments)}}function Mi(n,e,t){return(Mi=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?mc:Vp).apply(null,arguments)}function S_(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function hi(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(r,o,u){for(var l=Array(arguments.length-2),m=2;m<arguments.length;m++)l[m-2]=arguments[m];return e.prototype[o].apply(r,l)}}function Fl(){this.s=this.s,this.o=this.o}Fl.prototype.s=!1,Fl.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function oT(n){Object.prototype.hasOwnProperty.call(n,T_)&&n[T_]||(n[T_]=++aT)}(this)},Fl.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const uT=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function qm(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function eI(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(zm(r)){const o=n.length||0,u=r.length||0;n.length=o+u;for(let l=0;l<u;l++)n[o+l]=r[l]}else n.push(r)}}function xi(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}xi.prototype.h=function(){this.defaultPrevented=!0};var cT=function(){if(!Vt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Vt.addEventListener("test",()=>{},e),Vt.removeEventListener("test",()=>{},e)}catch{}return n}();function Up(n){return/^[\s\xa0]*$/.test(n)}function Sh(){var n=Vt.navigator;return n&&(n=n.userAgent)?n:""}function Qr(n){return-1!=Sh().indexOf(n)}function Ll(n){return Ll[" "](n),n}Ll[" "]=function(){};var iI,n,nI=Qr("Opera"),Vl=Qr("Trident")||Qr("MSIE"),lT=Qr("Edge"),rI=lT||Vl,dT=Qr("Gecko")&&!(-1!=Sh().toLowerCase().indexOf("webkit")&&!Qr("Edge"))&&!(Qr("Trident")||Qr("MSIE"))&&!Qr("Edge"),A_=-1!=Sh().toLowerCase().indexOf("webkit")&&!Qr("Edge");function Wm(){var n=Vt.document;return n?n.documentMode:void 0}e:{var sI="",Zm=(n=Sh(),dT?/rv:([^\);]+)(\)|;)/.exec(n):lT?/Edge\/([\d\.]+)/.exec(n):Vl?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):A_?/WebKit\/(\S+)/.exec(n):nI?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Zm&&(sI=Zm?Zm[1]:""),Vl){var M_=Wm();if(null!=M_&&M_>parseFloat(sI)){iI=String(M_);break e}}iI=sI}var hT=Vt.document&&Vl&&(Wm()||parseInt(iI,10))||void 0;function Ah(n,e){if(xi.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(dT){e:{try{Ll(e.nodeName);var o=!0;break e}catch{}o=!1}o||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:Km[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Ah.$.h.call(this)}}hi(Ah,xi);var Km={2:"touch",3:"pen",4:"mouse"};Ah.prototype.h=function(){Ah.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Bp="closure_listenable_"+(1e6*Math.random()|0),N_=0;function fT(n,e,t,r,o){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.la=o,this.key=++N_,this.fa=this.ia=!1}function sr(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function R_(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function O_(n){const e={};for(const t in n)e[t]=n[t];return e}const P_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function aI(n,e){let t,r;for(let o=1;o<arguments.length;o++){for(t in r=arguments[o],r)n[t]=r[t];for(let u=0;u<P_.length;u++)t=P_[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Ym(n){this.src=n,this.g={},this.h=0}function k_(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],o=uT(r,e);(u=0<=o)&&Array.prototype.splice.call(r,o,1),u&&(sr(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function F_(n,e,t,r){for(var o=0;o<n.length;++o){var u=n[o];if(!u.fa&&u.listener==e&&u.capture==!!t&&u.la==r)return o}return-1}Ym.prototype.add=function(n,e,t,r,o){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var l=F_(n,e,r,o);return-1<l?(e=n[l],t||(e.ia=!1)):((e=new fT(e,this.src,u,!!r,o)).ia=t,n.push(e)),e};var Qm="closure_lm_"+(1e6*Math.random()|0),uI={};function gT(n,e,t,r,o){if(r&&r.once)return xh(n,e,t,r,o);if(Array.isArray(e)){for(var u=0;u<e.length;u++)gT(n,e[u],t,r,o);return null}return t=ey(t),n&&n[Bp]?n.O(e,t,Lp(r)?!!r.capture:!!r,o):Mh(n,e,t,!1,r,o)}function Mh(n,e,t,r,o,u){if(!e)throw Error("Invalid event type");var l=Lp(o)?!!o.capture:!!o,m=U_(n);if(m||(n[Qm]=m=new Ym(n)),(t=m.add(e,t,r,l,u)).proxy)return t;if(r=function pn(){const e=cI;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)cT||(o=l),void 0===o&&(o=!1),n.addEventListener(e.toString(),r,o);else if(n.attachEvent)n.attachEvent(V_(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function xh(n,e,t,r,o){if(Array.isArray(e)){for(var u=0;u<e.length;u++)xh(n,e[u],t,r,o);return null}return t=ey(t),n&&n[Bp]?n.P(e,t,Lp(r)?!!r.capture:!!r,o):Mh(n,e,t,!0,r,o)}function L_(n,e,t,r,o){if(Array.isArray(e))for(var u=0;u<e.length;u++)L_(n,e[u],t,r,o);else r=Lp(r)?!!r.capture:!!r,t=ey(t),n&&n[Bp]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=F_(u=n.g[e],t,r,o))&&(sr(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=U_(n))&&(e=n.g[e.toString()],n=-1,e&&(n=F_(e,t,r,o)),(t=-1<n?e[n]:null)&&Jm(t))}function Jm(n){if("number"!=typeof n&&n&&!n.fa){var e=n.src;if(e&&e[Bp])k_(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(V_(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=U_(e))?(k_(t,n),0==t.h&&(t.src=null,e[Qm]=null)):sr(n)}}}function V_(n){return n in uI?uI[n]:uI[n]="on"+n}function cI(n,e){if(n.fa)n=!0;else{e=new Ah(e,this);var t=n.listener,r=n.la||n.src;n.ia&&Jm(n),n=t.call(r,e)}return n}function U_(n){return(n=n[Qm])instanceof Ym?n:null}var Xm="__closure_events_fn_"+(1e9*Math.random()>>>0);function ey(n){return"function"==typeof n?n:(n[Xm]||(n[Xm]=function(e){return n.handleEvent(e)}),n[Xm])}function Fr(){Fl.call(this),this.i=new Ym(this),this.S=this,this.J=null}function Ni(n,e){var t,r=n.J;if(r)for(t=[];r;r=r.J)t.push(r);if(n=n.S,r=e.type||e,"string"==typeof e)e=new xi(e,n);else if(e instanceof xi)e.target=e.target||n;else{var o=e;aI(e=new xi(r,n),o)}if(o=!0,t)for(var u=t.length-1;0<=u;u--){var l=e.g=t[u];o=Nh(l,r,!0,e)&&o}if(o=Nh(l=e.g=n,r,!0,e)&&o,o=Nh(l,r,!1,e)&&o,t)for(u=0;u<t.length;u++)o=Nh(l=e.g=t[u],r,!1,e)&&o}function Nh(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var o=!0,u=0;u<e.length;++u){var l=e[u];if(l&&!l.fa&&l.capture==t){var m=l.listener,I=l.la||l.src;l.ia&&k_(n.i,l),o=!1!==m.call(I,r)&&o}}return o&&!r.defaultPrevented}hi(Fr,Fl),Fr.prototype[Bp]=!0,Fr.prototype.removeEventListener=function(n,e,t,r){L_(this,n,e,t,r)},Fr.prototype.N=function(){if(Fr.$.N.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)sr(t[r]);delete n.g[e],n.h--}}this.J=null},Fr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Fr.prototype.P=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var B_=Vt.JSON.stringify;function lI(){var n=Rh;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var yc=new class j_{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new mT,n=>n.reset());class mT{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function $_(n){var e=1;n=n.split(":");const t=[];for(;0<e&&n.length;)t.push(n.shift()),e--;return n.length&&t.push(n.join(":")),t}function ty(n){Vt.setTimeout(()=>{throw n},0)}let jp,Ul=!1,Rh=new class dI{constructor(){this.h=this.g=null}add(e,t){const r=yc.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}},vc=()=>{const n=Vt.Promise.resolve(void 0);jp=()=>{n.then(H_)}};var H_=()=>{for(var n;n=lI();){try{n.h.call(n.g)}catch(t){ty(t)}var e=yc;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Ul=!1};function Oh(n,e){Fr.call(this),this.h=n||1,this.g=e||Vt,this.j=Mi(this.qb,this),this.l=Date.now()}function G_(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function z_(n,e,t){if("function"==typeof n)t&&(n=Mi(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Mi(n.handleEvent,n)}return 2147483647<Number(e)?-1:Vt.setTimeout(n,e||0)}function q_(n){n.g=z_(()=>{n.g=null,n.i&&(n.i=!1,q_(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}hi(Oh,Fr),(Je=Oh.prototype).ga=!1,Je.T=null,Je.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Ni(this,"tick"),this.ga&&(G_(this),this.start()))}},Je.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Je.N=function(){Oh.$.N.call(this),G_(this),delete this.g};class Ph extends Fl{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:q_(this)}N(){super.N(),this.g&&(Vt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function $p(n){Fl.call(this),this.h=n,this.g={}}hi($p,Fl);var hI=[];function fI(n,e,t,r){Array.isArray(t)||(t&&(hI[0]=t.toString()),t=hI);for(var o=0;o<t.length;o++){var u=gT(e,t[o],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function ny(n){R_(n.g,function(e,t){this.g.hasOwnProperty(t)&&Jm(e)},n),n.g={}}function Hp(){this.g=!0}function _c(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function SM(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var o=r[1];if(Array.isArray(o)&&!(1>o.length)){var u=o[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var l=1;l<o.length;l++)o[l]=""}}}return B_(t)}catch{return e}}(n,t)+(r?" "+r:"")})}$p.prototype.N=function(){$p.$.N.call(this),ny(this)},$p.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Hp.prototype.Ea=function(){this.g=!1},Hp.prototype.info=function(){};var Bl={},gI=null;function W_(){return gI=gI||new Fr}function vT(n){xi.call(this,Bl.Ta,n)}function wc(n){const e=W_();Ni(e,new vT(e))}function mI(n,e){xi.call(this,Bl.STAT_EVENT,n),this.stat=e}function fi(n){const e=W_();Ni(e,new mI(e,n))}function ry(n,e){xi.call(this,Bl.Ua,n),this.size=e}function pu(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Vt.setTimeout(function(){n()},e)}Bl.Ta="serverreachability",hi(vT,xi),Bl.STAT_EVENT="statevent",hi(mI,xi),Bl.Ua="timingevent",hi(ry,xi);var kh={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},iy={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function jl(){}function Fh(){}jl.prototype.h=null;var yI,Lh={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function zp(){xi.call(this,"d")}function Vh(){xi.call(this,"c")}function Uh(){}function $l(n,e,t,r){this.l=n,this.j=e,this.m=t,this.W=r||1,this.U=new $p(this),this.P=_T,this.V=new Oh(n=rI?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Z_}function Z_(){this.i=null,this.g="",this.h=!1}hi(zp,xi),hi(Vh,xi),hi(Uh,jl),Uh.prototype.g=function(){return new XMLHttpRequest},Uh.prototype.i=function(){return{}},yI=new Uh;var _T=45e3,K_={},qp={};function sy(n,e,t){n.L=1,n.v=Wp(Js(e)),n.s=t,n.S=!0,vI(n,null)}function vI(n,e){n.G=Date.now(),Hl(n),n.A=Js(n.v);var t=n.A,r=n.W;Array.isArray(r)||(r=[String(r)]),X_(t.i,"t",r),n.C=0,t=n.l.J,n.h=new Z_,n.g=LI(n.l,t?e:null,!n.s),0<n.O&&(n.M=new Ph(Mi(n.Pa,n,n.g),n.O)),fI(n.U,n.g,"readystatechange",n.nb),e=n.I?O_(n.I):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.A,n.u,n.s,e)):(n.u="GET",n.g.ha(n.A,n.u,null,e)),wc(),function yT(n,e,t,r,o,u){n.info(function(){if(n.g)if(u)for(var l="",m=u.split("&"),I=0;I<m.length;I++){var b=m[I].split("=");if(1<b.length){var A=b[0];b=b[1];var R=A.split("_");l=2<=R.length&&"type"==R[1]?l+(A+"=")+b+"&":l+(A+"=redacted&")}}else l=null;else l=u;return"XMLHTTP REQ ("+r+") [attempt "+o+"]: "+e+"\n"+t+"\n"+l})}(n.j,n.u,n.A,n.m,n.W,n.s)}function _I(n){return!!n.g&&"GET"==n.u&&2!=n.L&&n.l.Ha}function wT(n,e,t){let o,r=!0;for(;!n.J&&n.C<t.length;){if(o=ET(n,t),o==qp){4==e&&(n.o=4,fi(14),r=!1),_c(n.j,n.m,null,"[Incomplete Response]");break}if(o==K_){n.o=4,fi(15),_c(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}_c(n.j,n.m,o,null),jh(n,o)}_I(n)&&o!=qp&&o!=K_&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,fi(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.ba&&(n.ba=!0,(e=n.l).g==n&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),rg(e),e.M=!0,fi(11))):(_c(n.j,n.m,t,"[Invalid Chunked Response]"),gu(n),Bh(n))}function ET(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?qp:(t=Number(e.substring(t,r)),isNaN(t)?K_:(r+=1)+t>e.length?qp:(e=e.slice(r,r+t),n.C=r+t,e))}function Hl(n){n.Y=Date.now()+n.P,oy(n,n.P)}function oy(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=pu(Mi(n.lb,n),e)}function ay(n){n.B&&(Vt.clearTimeout(n.B),n.B=null)}function Bh(n){0==n.l.H||n.J||PI(n.l,n)}function gu(n){ay(n);var e=n.M;e&&"function"==typeof e.sa&&e.sa(),n.M=null,G_(n.V),ny(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.sa())}function jh(n,e){try{var t=n.l;if(0!=t.H&&(t.g==n||ly(t.i,n)))if(!n.K&&ly(t.i,n)&&3==t.H){try{var r=t.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var o=r;if(0==o[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<n.G))break e;Zh(t),tg(t)}ng(t),fi(18)}}else t.Fa=o[1],0<t.Fa-t.V&&37500>o[2]&&t.G&&0==t.A&&!t.v&&(t.v=pu(Mi(t.ib,t),6e3));if(1>=TI(t.i)&&t.oa){try{t.oa()}catch{}t.oa=void 0}}else Zl(t,11)}else if((n.K||t.g==n)&&Zh(t),!Up(e))for(o=t.Ja.g.parse(e),e=0;e<o.length;e++){let b=o[e];if(t.V=b[0],b=b[1],2==t.H)if("c"==b[0]){t.K=b[1],t.pa=b[2];const A=b[3];null!=A&&(t.ra=A,t.l.info("VER="+t.ra));const R=b[4];null!=R&&(t.Ga=R,t.l.info("SVER="+t.Ga));const H=b[5];null!=H&&"number"==typeof H&&0<H&&(t.L=r=1.5*H,t.l.info("backChannelRequestTimeoutMs_="+r)),r=t;const X=n.g;if(X){const ye=X.g?X.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ye){var u=r.i;u.g||-1==ye.indexOf("spdy")&&-1==ye.indexOf("quic")&&-1==ye.indexOf("h2")||(u.j=u.l,u.g=new Set,u.h&&(Ec(u,u.h),u.h=null))}if(r.F){const ke=X.g?X.g.getResponseHeader("X-HTTP-Session-Id"):null;ke&&(r.Da=ke,Gn(r.I,r.F,ke))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-n.G,t.l.info("Handshake RTT: "+t.S+"ms"));var l=n;if((r=t).wa=FI(r,r.J?r.pa:null,r.Y),l.K){ua(r.i,l);var m=l,I=r.L;I&&m.setTimeout(I),m.B&&(ay(m),Hl(m)),r.g=l}else py(r);0<t.j.length&&Wl(t)}else"stop"!=b[0]&&"close"!=b[0]||Zl(t,7);else 3==t.H&&("stop"==b[0]||"close"==b[0]?"stop"==b[0]?Zl(t,7):Ic(t):"noop"!=b[0]&&t.h&&t.h.Aa(b),t.A=0)}wc()}catch{}}function EI(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(zm(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function wI(n){if(n.ta&&"function"==typeof n.ta)return n.ta();if(!n.Z||"function"!=typeof n.Z){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(zm(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function IT(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(zm(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),o=r.length,u=0;u<o;u++)e.call(void 0,r[u],t&&t[u],n)}(Je=$l.prototype).setTimeout=function(n){this.P=n},Je.nb=function(n){n=n.target;const e=this.M;e&&3==Do(n)?e.l():this.Pa(n)},Je.Pa=function(n){try{if(n==this.g)e:{const A=Do(this.g);var e=this.g.Ia();if(this.g.da(),!(3>A)&&(3!=A||rI||this.g&&(this.h.h||this.g.ja()||RI(this.g)))){this.J||4!=A||7==e||wc(),ay(this);var t=this.g.da();this.ca=t;t:if(_I(this)){var r=RI(this.g);n="";var o=r.length,u=4==Do(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){gu(this),Bh(this);var l="";break t}this.h.i=new Vt.TextDecoder}for(e=0;e<o;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==o-1});r.splice(0,o),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.ja();if(this.i=200==t,function pI(n,e,t,r,o,u,l){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+o+"]: "+e+"\n"+t+"\n"+u+" "+l})}(this.j,this.u,this.A,this.m,this.W,A,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var m,I=this.g;if((m=I.g?I.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Up(m)){var b=m;break t}}b=null}if(!(t=b)){this.i=!1,this.o=3,fi(12),gu(this),Bh(this);break e}_c(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,jh(this,t)}this.S?(wT(this,A,l),rI&&this.i&&3==A&&(fI(this.U,this.V,"tick",this.mb),this.V.start())):(_c(this.j,this.m,l,null),jh(this,l)),4==A&&gu(this),this.i&&!this.J&&(4==A?PI(this.l,this):(this.i=!1,Hl(this)))}else(function MT(n){const e={};n=(n.g&&2<=Do(n)&&n.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<n.length;r++){if(Up(n[r]))continue;var t=$_(n[r]);const o=t[0];if("string"!=typeof(t=t[1]))continue;t=t.trim();const u=e[o]||[];e[o]=u,u.push(t)}!function pT(n,e){for(const t in n)e.call(void 0,n[t],t,n)}(e,function(r){return r.join(", ")})})(this.g),400==t&&0<l.indexOf("Unknown SID")?(this.o=3,fi(12)):(this.o=0,fi(13)),gu(this),Bh(this)}}}catch{}},Je.mb=function(){if(this.g){var n=Do(this.g),e=this.g.ja();this.C<e.length&&(ay(this),wT(this,n,e),this.i&&4!=n&&Hl(this))}},Je.cancel=function(){this.J=!0,gu(this)},Je.lb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function TM(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(wc(),fi(17)),gu(this),this.o=2,Bh(this)):oy(this,this.Y-n)};var Y_=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Gl(n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Gl){this.h=n.h,uy(this,n.j),this.s=n.s,this.g=n.g,mu(this,n.m),this.l=n.l;var e=n.i,t=new cy;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),$h(this,t),this.o=n.o}else n&&(e=String(n).match(Y_))?(this.h=!1,uy(this,e[1]||"",!0),this.s=Zp(e[2]||""),this.g=Zp(e[3]||"",!0),mu(this,e[4]),this.l=Zp(e[5]||"",!0),$h(this,e[6]||"",!0),this.o=Zp(e[7]||"")):(this.h=!1,this.i=new cy(null,this.h))}function Js(n){return new Gl(n)}function uy(n,e,t){n.j=t?Zp(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function mu(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function $h(n,e,t){e instanceof cy?(n.i=e,function CT(n,e){e&&!n.j&&(aa(n),n.i=null,n.g.forEach(function(t,r){var o=r.toLowerCase();r!=o&&(zl(this,r),X_(this,o,t))},n)),n.j=e}(n.i,n.h)):(t||(e=Kp(e,Yp)),n.i=new cy(e,n.h))}function Gn(n,e,t){n.i.set(e,t)}function Wp(n){return Gn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Zp(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Kp(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,DT),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function DT(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Gl.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Kp(e,Q_,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Kp(e,Q_,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(Kp(t,"/"==t.charAt(0)?J_:II,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Kp(t,DI)),n.join("")};var Q_=/[#\/\?@]/g,II=/[#\?:]/g,J_=/[#\?]/g,Yp=/[#\?@]/g,DI=/#/g;function cy(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function aa(n){n.g||(n.g=new Map,n.h=0,n.i&&function AM(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),o=null;if(0<=r){var u=n[t].substring(0,r);o=n[t].substring(r+1)}else u=n[t];e(u,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function zl(n,e){aa(n),e=ql(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function Qp(n,e){return aa(n),e=ql(n,e),n.g.has(e)}function X_(n,e,t){zl(n,e),0<t.length&&(n.i=null,n.g.set(ql(n,e),qm(t)),n.h+=t.length)}function ql(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function CI(n){this.l=n||TT,n=Vt.PerformanceNavigationTiming?0<(n=Vt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Vt.g&&Vt.g.Ka&&Vt.g.Ka()&&Vt.g.Ka().ec),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Je=cy.prototype).add=function(n,e){aa(this),this.i=null,n=ql(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Je.forEach=function(n,e){aa(this),this.g.forEach(function(t,r){t.forEach(function(o){n.call(e,o,r,this)},this)},this)},Je.ta=function(){aa(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const o=n[r];for(let u=0;u<o.length;u++)t.push(e[r])}return t},Je.Z=function(n){aa(this);let e=[];if("string"==typeof n)Qp(this,n)&&(e=e.concat(this.g.get(ql(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},Je.set=function(n,e){return aa(this),this.i=null,Qp(this,n=ql(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Je.get=function(n,e){return n&&0<(n=this.Z(n)).length?String(n[0]):e},Je.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const u=encodeURIComponent(String(r)),l=this.Z(r);for(r=0;r<l.length;r++){var o=u;""!==l[r]&&(o+="="+encodeURIComponent(String(l[r]))),n.push(o)}}return this.i=n.join("&")};var TT=10;function bI(n){return!!n.h||!!n.g&&n.g.size>=n.j}function TI(n){return n.h?1:n.g?n.g.size:0}function ly(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Ec(n,e){n.g?n.g.add(e):n.h=e}function ua(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function e0(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return qm(n.i)}CI.prototype.cancel=function(){if(this.i=e0(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}};var MM=class{stringify(n){return Vt.JSON.stringify(n,void 0)}parse(n){return Vt.JSON.parse(n,void 0)}};function ST(){this.g=new MM}function xM(n,e,t){const r=t||"";try{EI(n,function(o,u){let l=o;Lp(o)&&(l=B_(o)),e.push(r+u+"="+encodeURIComponent(l))})}catch(o){throw e.push(r+"type="+encodeURIComponent("_badmap")),o}}function Jp(n,e,t,r,o){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,o(r)}catch{}}function Hh(n){this.l=n.fc||null,this.j=n.ob||!1}function t0(n,e){Fr.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=dy,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}hi(Hh,jl),Hh.prototype.g=function(){return new t0(this.l,this.j)},Hh.prototype.i=function(n){return function(){return n}}({}),hi(t0,Fr);var dy=0;function Xp(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function Gh(n){n.readyState=4,n.l=null,n.j=null,n.A=null,zh(n)}function zh(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Je=t0.prototype).open=function(n,e){if(this.readyState!=dy)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,zh(this)},Je.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||Vt).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},Je.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Gh(this)),this.readyState=dy},Je.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,zh(this)),this.g&&(this.readyState=3,zh(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Vt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Xp(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},Je.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Gh(this):zh(this),3==this.readyState&&Xp(this)}},Je.Za=function(n){this.g&&(this.response=this.responseText=n,Gh(this))},Je.Ya=function(n){this.g&&(this.response=n,Gh(this))},Je.ka=function(){this.g&&Gh(this)},Je.setRequestHeader=function(n,e){this.v.append(n,e)},Je.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Je.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(t0.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var SI=Vt.JSON.parse;function at(n){Fr.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=n0,this.L=this.M=!1}hi(at,Fr);var n0="",AI=/^https?$/i,RM=["POST","PUT"];function r0(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,MI(n),eg(n)}function MI(n){n.F||(n.F=!0,Ni(n,"complete"),Ni(n,"error"))}function xI(n){if(n.h&&typeof Gm<"u"&&(!n.C[1]||4!=Do(n)||2!=n.da()))if(n.v&&4==Do(n))z_(n.La,0,n);else if(Ni(n,"readystatechange"),4==Do(n)){n.h=!1;try{const l=n.da();e:switch(l){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===l){var o=String(n.I).match(Y_)[1]||null;!o&&Vt.self&&Vt.self.location&&(o=Vt.self.location.protocol.slice(0,-1)),r=!AI.test(o?o.toLowerCase():"")}t=r}if(t)Ni(n,"complete"),Ni(n,"success");else{n.m=6;try{var u=2<Do(n)?n.g.statusText:""}catch{u=""}n.j=u+" ["+n.da()+"]",MI(n)}}finally{eg(n)}}}function eg(n,e){if(n.g){NI(n);const t=n.g,r=n.C[0]?()=>{}:null;n.g=null,n.C=null,e||Ni(n,"ready");try{t.onreadystatechange=r}catch{}}}function NI(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(Vt.clearTimeout(n.A),n.A=null)}function Do(n){return n.g?n.g.readyState:0}function RI(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case n0:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function xT(n){let e="";return R_(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function hy(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=xT(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Gn(n,e,t))}function qh(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function yu(n){this.Ga=0,this.j=[],this.l=new Hp,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=qh("failFast",!1,n),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=qh("baseRetryDelayMs",5e3,n),this.hb=qh("retryDelaySeedMs",1e4,n),this.eb=qh("forwardChannelMaxRetries",2,n),this.xa=qh("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.dc||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.i=new CI(n&&n.concurrentRequestLimit),this.Ja=new ST,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.l.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.qa=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.qa=n.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function Ic(n){if(OI(n),3==n.H){var e=n.W++,t=Js(n.I);if(Gn(t,"SID",n.K),Gn(t,"RID",e),Gn(t,"TYPE","terminate"),vu(n,t),(e=new $l(n,n.l,e)).L=2,e.v=Wp(Js(t)),t=!1,Vt.navigator&&Vt.navigator.sendBeacon)try{t=Vt.navigator.sendBeacon(e.v.toString(),"")}catch{}!t&&Vt.Image&&((new Image).src=e.v,t=!0),t||(e.g=LI(e.l,null),e.g.ha(e.v)),e.G=Date.now(),Hl(e)}a0(n)}function tg(n){n.g&&(rg(n),n.g.cancel(),n.g=null)}function OI(n){tg(n),n.u&&(Vt.clearTimeout(n.u),n.u=null),Zh(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Vt.clearTimeout(n.m),n.m=null)}function Wl(n){if(!bI(n.i)&&!n.m){n.m=!0;var e=n.Na;jp||vc(),Ul||(jp(),Ul=!0),Rh.add(e,n),n.C=0}}function fy(n,e){var t;t=e?e.m:n.W++;const r=Js(n.I);Gn(r,"SID",n.K),Gn(r,"RID",t),Gn(r,"AID",n.V),vu(n,r),n.o&&n.s&&hy(r,n.o,n.s),t=new $l(n,n.l,t,n.C+1),null===n.o&&(t.I=n.s),e&&(n.j=e.F.concat(n.j)),e=s0(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),Ec(n.i,t),sy(t,r,e)}function vu(n,e){n.na&&R_(n.na,function(t,r){Gn(e,r,t)}),n.h&&EI({},function(t,r){Gn(e,r,t)})}function s0(n,e,t){t=Math.min(n.j.length,t);var r=n.h?Mi(n.h.Va,n.h,n):null;e:{var o=n.j;let u=-1;for(;;){const l=["count="+t];-1==u?0<t?(u=o[0].g,l.push("ofs="+u)):u=0:l.push("ofs="+u);let m=!0;for(let I=0;I<t;I++){let b=o[I].g;const A=o[I].map;if(b-=u,0>b)u=Math.max(0,o[I].g-100),m=!1;else try{xM(A,l,"req"+b+"_")}catch{r&&r(A)}}if(m){r=l.join("&");break e}}}return n=n.j.splice(0,t),e.F=n,r}function py(n){if(!n.g&&!n.u){n.ba=1;var e=n.Ma;jp||vc(),Ul||(jp(),Ul=!0),Rh.add(e,n),n.A=0}}function ng(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=pu(Mi(n.Ma,n),kI(n,n.A)),n.A++,0))}function rg(n){null!=n.B&&(Vt.clearTimeout(n.B),n.B=null)}function o0(n){n.g=new $l(n,n.l,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var e=Js(n.wa);Gn(e,"RID","rpc"),Gn(e,"SID",n.K),Gn(e,"AID",n.V),Gn(e,"CI",n.G?"0":"1"),!n.G&&n.qa&&Gn(e,"TO",n.qa),Gn(e,"TYPE","xmlhttp"),vu(n,e),n.o&&n.s&&hy(e,n.o,n.s),n.L&&n.g.setTimeout(n.L);var t=n.g;n=n.pa,t.L=1,t.v=Wp(Js(e)),t.s=null,t.S=!0,vI(t,n)}function Zh(n){null!=n.v&&(Vt.clearTimeout(n.v),n.v=null)}function PI(n,e){var t=null;if(n.g==e){Zh(n),rg(n),n.g=null;var r=2}else{if(!ly(n.i,e))return;t=e.F,ua(n.i,e),r=1}if(0!=n.H)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.G;var o=n.C;Ni(r=W_(),new ry(r,t)),Wl(n)}else py(n);else if(3==(o=e.o)||0==o&&0<e.ca||!(1==r&&function Wh(n,e){return!(TI(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.j=e.F.concat(n.j),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=pu(Mi(n.Na,n,e),kI(n,n.C)),n.C++,0)))}(n,e)||2==r&&ng(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),o){case 1:Zl(n,5);break;case 4:Zl(n,10);break;case 3:Zl(n,6);break;default:Zl(n,2)}}function kI(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.isActive()||(t*=2),t*e}function Zl(n,e){if(n.l.info("Error code "+e),2==e){var t=null;n.h&&(t=null);var r=Mi(n.pb,n);t||(t=new Gl("//www.google.com/images/cleardot.gif"),Vt.location&&"http"==Vt.location.protocol||uy(t,"https"),Wp(t)),function NM(n,e){const t=new Hp;if(Vt.Image){const r=new Image;r.onload=S_(Jp,t,r,"TestLoadImage: loaded",!0,e),r.onerror=S_(Jp,t,r,"TestLoadImage: error",!1,e),r.onabort=S_(Jp,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=S_(Jp,t,r,"TestLoadImage: timeout",!1,e),Vt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else fi(2);n.H=0,n.h&&n.h.za(e),a0(n),OI(n)}function a0(n){if(n.H=0,n.ma=[],n.h){const e=e0(n.i);(0!=e.length||0!=n.j.length)&&(eI(n.ma,e),eI(n.ma,n.j),n.i.i.length=0,qm(n.j),n.j.length=0),n.h.ya()}}function FI(n,e,t){var r=t instanceof Gl?Js(t):new Gl(t);if(""!=r.g)e&&(r.g=e+"."+r.g),mu(r,r.m);else{var o=Vt.location;r=o.protocol,e=e?e+"."+o.hostname:o.hostname,o=+o.port;var u=new Gl(null);r&&uy(u,r),e&&(u.g=e),o&&mu(u,o),t&&(u.l=t),r=u}return e=n.Da,(t=n.F)&&e&&Gn(r,t,e),Gn(r,"VER",n.ra),vu(n,r),r}function LI(n,e,t){if(e&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new at(t&&n.Ha&&!n.va?new Hh({ob:!0}):n.va)).Oa(n.J),e}function VI(){}function gy(){if(Vl&&!(10<=Number(hT)))throw Error("Environmental error: no available transport.")}function ls(n,e){Fr.call(this),this.g=new yu(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!Up(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Up(e)&&(this.g.F=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Kh(this)}function u0(n){zp.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function UI(){Vh.call(this),this.status=1}function Kh(n){this.g=n}function Co(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function c0(n,e,t){t||(t=0);var r=Array(16);if("string"==typeof e)for(var o=0;16>o;++o)r[o]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(o=0;16>o;++o)r[o]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var u=n.g[3],l=(e=n.g[0])+(u^(t=n.g[1])&((o=n.g[2])^u))+r[0]+3614090360&4294967295;l=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=t+(l<<7&4294967295|l>>>25))+((l=u+(o^e&(t^o))+r[1]+3905402710&4294967295)<<12&4294967295|l>>>20))+((l=o+(t^u&(e^t))+r[2]+606105819&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^o&(u^e))+r[3]+3250441966&4294967295)<<22&4294967295|l>>>10))+((l=e+(u^t&(o^u))+r[4]+4118548399&4294967295)<<7&4294967295|l>>>25))+((l=u+(o^e&(t^o))+r[5]+1200080426&4294967295)<<12&4294967295|l>>>20))+((l=o+(t^u&(e^t))+r[6]+2821735955&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^o&(u^e))+r[7]+4249261313&4294967295)<<22&4294967295|l>>>10))+((l=e+(u^t&(o^u))+r[8]+1770035416&4294967295)<<7&4294967295|l>>>25))+((l=u+(o^e&(t^o))+r[9]+2336552879&4294967295)<<12&4294967295|l>>>20))+((l=o+(t^u&(e^t))+r[10]+4294925233&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^o&(u^e))+r[11]+2304563134&4294967295)<<22&4294967295|l>>>10))+((l=e+(u^t&(o^u))+r[12]+1804603682&4294967295)<<7&4294967295|l>>>25))+((l=u+(o^e&(t^o))+r[13]+4254626195&4294967295)<<12&4294967295|l>>>20))+((l=o+(t^u&(e^t))+r[14]+2792965006&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^o&(u^e))+r[15]+1236535329&4294967295)<<22&4294967295|l>>>10))+((l=e+(o^u&(t^o))+r[1]+4129170786&4294967295)<<5&4294967295|l>>>27))+((l=u+(t^o&(e^t))+r[6]+3225465664&4294967295)<<9&4294967295|l>>>23))+((l=o+(e^t&(u^e))+r[11]+643717713&4294967295)<<14&4294967295|l>>>18))+((l=t+(u^e&(o^u))+r[0]+3921069994&4294967295)<<20&4294967295|l>>>12))+((l=e+(o^u&(t^o))+r[5]+3593408605&4294967295)<<5&4294967295|l>>>27))+((l=u+(t^o&(e^t))+r[10]+38016083&4294967295)<<9&4294967295|l>>>23))+((l=o+(e^t&(u^e))+r[15]+3634488961&4294967295)<<14&4294967295|l>>>18))+((l=t+(u^e&(o^u))+r[4]+3889429448&4294967295)<<20&4294967295|l>>>12))+((l=e+(o^u&(t^o))+r[9]+568446438&4294967295)<<5&4294967295|l>>>27))+((l=u+(t^o&(e^t))+r[14]+3275163606&4294967295)<<9&4294967295|l>>>23))+((l=o+(e^t&(u^e))+r[3]+4107603335&4294967295)<<14&4294967295|l>>>18))+((l=t+(u^e&(o^u))+r[8]+1163531501&4294967295)<<20&4294967295|l>>>12))+((l=e+(o^u&(t^o))+r[13]+2850285829&4294967295)<<5&4294967295|l>>>27))+((l=u+(t^o&(e^t))+r[2]+4243563512&4294967295)<<9&4294967295|l>>>23))+((l=o+(e^t&(u^e))+r[7]+1735328473&4294967295)<<14&4294967295|l>>>18))+((l=t+(u^e&(o^u))+r[12]+2368359562&4294967295)<<20&4294967295|l>>>12))+((l=e+(t^o^u)+r[5]+4294588738&4294967295)<<4&4294967295|l>>>28))+((l=u+(e^t^o)+r[8]+2272392833&4294967295)<<11&4294967295|l>>>21))+((l=o+(u^e^t)+r[11]+1839030562&4294967295)<<16&4294967295|l>>>16))+((l=t+(o^u^e)+r[14]+4259657740&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^o^u)+r[1]+2763975236&4294967295)<<4&4294967295|l>>>28))+((l=u+(e^t^o)+r[4]+1272893353&4294967295)<<11&4294967295|l>>>21))+((l=o+(u^e^t)+r[7]+4139469664&4294967295)<<16&4294967295|l>>>16))+((l=t+(o^u^e)+r[10]+3200236656&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^o^u)+r[13]+681279174&4294967295)<<4&4294967295|l>>>28))+((l=u+(e^t^o)+r[0]+3936430074&4294967295)<<11&4294967295|l>>>21))+((l=o+(u^e^t)+r[3]+3572445317&4294967295)<<16&4294967295|l>>>16))+((l=t+(o^u^e)+r[6]+76029189&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^o^u)+r[9]+3654602809&4294967295)<<4&4294967295|l>>>28))+((l=u+(e^t^o)+r[12]+3873151461&4294967295)<<11&4294967295|l>>>21))+((l=o+(u^e^t)+r[15]+530742520&4294967295)<<16&4294967295|l>>>16))+((l=t+(o^u^e)+r[2]+3299628645&4294967295)<<23&4294967295|l>>>9))+((l=e+(o^(t|~u))+r[0]+4096336452&4294967295)<<6&4294967295|l>>>26))+((l=u+(t^(e|~o))+r[7]+1126891415&4294967295)<<10&4294967295|l>>>22))+((l=o+(e^(u|~t))+r[14]+2878612391&4294967295)<<15&4294967295|l>>>17))+((l=t+(u^(o|~e))+r[5]+4237533241&4294967295)<<21&4294967295|l>>>11))+((l=e+(o^(t|~u))+r[12]+1700485571&4294967295)<<6&4294967295|l>>>26))+((l=u+(t^(e|~o))+r[3]+2399980690&4294967295)<<10&4294967295|l>>>22))+((l=o+(e^(u|~t))+r[10]+4293915773&4294967295)<<15&4294967295|l>>>17))+((l=t+(u^(o|~e))+r[1]+2240044497&4294967295)<<21&4294967295|l>>>11))+((l=e+(o^(t|~u))+r[8]+1873313359&4294967295)<<6&4294967295|l>>>26))+((l=u+(t^(e|~o))+r[15]+4264355552&4294967295)<<10&4294967295|l>>>22))+((l=o+(e^(u|~t))+r[6]+2734768916&4294967295)<<15&4294967295|l>>>17))+((l=t+(u^(o|~e))+r[13]+1309151649&4294967295)<<21&4294967295|l>>>11))+((u=(e=t+((l=e+(o^(t|~u))+r[4]+4149444226&4294967295)<<6&4294967295|l>>>26))+((l=u+(t^(e|~o))+r[11]+3174756917&4294967295)<<10&4294967295|l>>>22))^((o=u+((l=o+(e^(u|~t))+r[2]+718787259&4294967295)<<15&4294967295|l>>>17))|~e))+r[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(o+(l<<21&4294967295|l>>>11))&4294967295,n.g[2]=n.g[2]+o&4294967295,n.g[3]=n.g[3]+u&4294967295}function bn(n,e){this.h=e;for(var t=[],r=!0,o=n.length-1;0<=o;o--){var u=0|n[o];r&&u==e||(t[o]=u,r=!1)}this.g=t}(Je=at.prototype).Oa=function(n){this.M=n},Je.ha=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():yI.g(),this.C=function Gp(n){return n.h||(n.h=n.i())}(this.u?this.u:yI),this.g.onreadystatechange=Mi(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(u){return void r0(this,u)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var o in r)t.set(o,r[o]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const u of r.keys())t.set(u,r.get(u))}r=Array.from(t.keys()).find(u=>"content-type"==u.toLowerCase()),o=Vt.FormData&&n instanceof Vt.FormData,!(0<=uT(RM,e))||r||o||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[u,l]of t)this.g.setRequestHeader(u,l);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{NI(this),0<this.B&&((this.L=function AT(n){return Vl&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Mi(this.ua,this)):this.A=z_(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){r0(this,u)}},Je.ua=function(){typeof Gm<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ni(this,"timeout"),this.abort(8))},Je.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Ni(this,"complete"),Ni(this,"abort"),eg(this))},Je.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),eg(this,!0)),at.$.N.call(this)},Je.La=function(){this.s||(this.G||this.v||this.l?xI(this):this.kb())},Je.kb=function(){xI(this)},Je.isActive=function(){return!!this.g},Je.da=function(){try{return 2<Do(this)?this.g.status:-1}catch{return-1}},Je.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},Je.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),SI(e)}},Je.Ia=function(){return this.m},Je.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(Je=yu.prototype).ra=8,Je.H=1,Je.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const o=new $l(this,this.l,n);let u=this.s;if(this.U&&(u?(u=O_(u),aI(u,this.U)):u=this.U),null!==this.o||this.O||(o.I=u,u=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){var r=this.j[t];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=s0(this,o,e),Gn(t=Js(this.I),"RID",n),Gn(t,"CVER",22),this.F&&Gn(t,"X-HTTP-Session-Id",this.F),vu(this,t),u&&(this.O?e="headers="+encodeURIComponent(String(xT(u)))+"&"+e:this.o&&hy(t,this.o,u)),Ec(this.i,o),this.bb&&Gn(t,"TYPE","init"),this.P?(Gn(t,"$req",e),Gn(t,"SID","null"),o.aa=!0,sy(o,t,null)):sy(o,t,e),this.H=2}}else 3==this.H&&(n?fy(this,n):0==this.j.length||bI(this.i)||fy(this))},Je.Ma=function(){if(this.u=null,o0(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var n=2*this.S;this.l.info("BP detection timer enabled: "+n),this.B=pu(Mi(this.jb,this),n)}},Je.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,fi(10),tg(this),o0(this))},Je.ib=function(){null!=this.v&&(this.v=null,tg(this),ng(this),fi(19))},Je.pb=function(n){n?(this.l.info("Successfully pinged google.com"),fi(2)):(this.l.info("Failed to ping google.com"),fi(1))},Je.isActive=function(){return!!this.h&&this.h.isActive(this)},(Je=VI.prototype).Ba=function(){},Je.Aa=function(){},Je.za=function(){},Je.ya=function(){},Je.isActive=function(){return!0},Je.Va=function(){},gy.prototype.g=function(n,e){return new ls(n,e)},hi(ls,Fr),ls.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var n=this.g,e=this.l,t=this.h||void 0;fi(0),n.Y=e,n.na=t||{},n.G=n.aa,n.I=FI(n,null,n.Y),Wl(n)},ls.prototype.close=function(){Ic(this.g)},ls.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=B_(n),n=t);e.j.push(new class{constructor(n,e){this.g=n,this.map=e}}(e.fb++,n)),3==e.H&&Wl(e)},ls.prototype.N=function(){this.g.h=null,delete this.j,Ic(this.g),delete this.g,ls.$.N.call(this)},hi(u0,zp),hi(UI,Vh),hi(Kh,VI),Kh.prototype.Ba=function(){Ni(this.g,"a")},Kh.prototype.Aa=function(n){Ni(this.g,new u0(n))},Kh.prototype.za=function(n){Ni(this.g,new UI)},Kh.prototype.ya=function(){Ni(this.g,"b")},hi(Co,function As(){this.blockSize=-1}),Co.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Co.prototype.j=function(n,e){void 0===e&&(e=n.length);for(var t=e-this.blockSize,r=this.m,o=this.h,u=0;u<e;){if(0==o)for(;u<=t;)c0(this,n,u),u+=this.blockSize;if("string"==typeof n){for(;u<e;)if(r[o++]=n.charCodeAt(u++),o==this.blockSize){c0(this,r),o=0;break}}else for(;u<e;)if(r[o++]=n[u++],o==this.blockSize){c0(this,r),o=0;break}}this.h=o,this.i+=e},Co.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=255&t,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var r=0;32>r;r+=8)n[t++]=this.g[e]>>>r&255;return n};var l0={};function my(n){return-128<=n&&128>n?function tI(n,e){var t=l0;return Object.prototype.hasOwnProperty.call(t,n)?t[n]:t[n]=e(n)}(n,function(e){return new bn([0|e],0>e?-1:0)}):new bn([0|n],0>n?-1:0)}function ca(n){if(isNaN(n)||!isFinite(n))return Kl;if(0>n)return pi(ca(-n));for(var e=[],t=1,r=0;n>=t;r++)e[r]=n/t|0,t*=d0;return new bn(e,0)}var d0=4294967296,Kl=my(0),h0=my(1),jI=my(16777216);function bo(n){if(0!=n.h)return!1;for(var e=0;e<n.g.length;e++)if(0!=n.g[e])return!1;return!0}function Xs(n){return-1==n.h}function pi(n){for(var e=n.g.length,t=[],r=0;r<e;r++)t[r]=~n.g[r];return new bn(t,~n.h).add(h0)}function yy(n,e){return n.add(pi(e))}function vy(n,e){for(;(65535&n[e])!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function ig(n,e){this.g=n,this.h=e}function Ms(n,e){if(bo(e))throw Error("division by zero");if(bo(n))return new ig(Kl,Kl);if(Xs(n))return e=Ms(pi(n),e),new ig(pi(e.g),pi(e.h));if(Xs(e))return e=Ms(n,pi(e)),new ig(pi(e.g),e.h);if(30<n.g.length){if(Xs(n)||Xs(e))throw Error("slowDivide_ only works with positive integers.");for(var t=h0,r=e;0>=r.X(n);)t=_y(t),r=_y(r);var o=Yh(t,1),u=Yh(r,1);for(r=Yh(r,2),t=Yh(t,2);!bo(r);){var l=u.add(r);0>=l.X(n)&&(o=o.add(t),u=l),r=Yh(r,1),t=Yh(t,1)}return e=yy(n,o.R(e)),new ig(o,e)}for(o=Kl;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,r-48),l=(u=ca(t)).R(e);Xs(l)||0<l.X(n);)l=(u=ca(t-=r)).R(e);bo(u)&&(u=h0),o=o.add(u),n=yy(n,l)}return new ig(o,n)}function _y(n){for(var e=n.g.length+1,t=[],r=0;r<e;r++)t[r]=n.D(r)<<1|n.D(r-1)>>>31;return new bn(t,n.h)}function Yh(n,e){var t=e>>5;e%=32;for(var r=n.g.length-t,o=[],u=0;u<r;u++)o[u]=0<e?n.D(u+t)>>>e|n.D(u+t+1)<<32-e:n.D(u+t);return new bn(o,n.h)}(Je=bn.prototype).ea=function(){if(Xs(this))return-pi(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var r=this.D(t);n+=(0<=r?r:d0+r)*e,e*=d0}return n},Je.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(bo(this))return"0";if(Xs(this))return"-"+pi(this).toString(n);for(var e=ca(Math.pow(n,6)),t=this,r="";;){var o=Ms(t,e).g,u=((0<(t=yy(t,o.R(e))).g.length?t.g[0]:t.h)>>>0).toString(n);if(bo(t=o))return u+r;for(;6>u.length;)u="0"+u;r=u+r}},Je.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},Je.X=function(n){return Xs(n=yy(this,n))?-1:bo(n)?0:1},Je.abs=function(){return Xs(this)?pi(this):this},Je.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0,o=0;o<=e;o++){var u=r+(65535&this.D(o))+(65535&n.D(o)),l=(u>>>16)+(this.D(o)>>>16)+(n.D(o)>>>16);r=l>>>16,t[o]=(l&=65535)<<16|(u&=65535)}return new bn(t,-2147483648&t[t.length-1]?-1:0)},Je.R=function(n){if(bo(this)||bo(n))return Kl;if(Xs(this))return Xs(n)?pi(this).R(pi(n)):pi(pi(this).R(n));if(Xs(n))return pi(this.R(pi(n)));if(0>this.X(jI)&&0>n.X(jI))return ca(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],r=0;r<2*e;r++)t[r]=0;for(r=0;r<this.g.length;r++)for(var o=0;o<n.g.length;o++){var u=this.D(r)>>>16,l=65535&this.D(r),m=n.D(o)>>>16,I=65535&n.D(o);t[2*r+2*o]+=l*I,vy(t,2*r+2*o),t[2*r+2*o+1]+=u*I,vy(t,2*r+2*o+1),t[2*r+2*o+1]+=l*m,vy(t,2*r+2*o+1),t[2*r+2*o+2]+=u*m,vy(t,2*r+2*o+2)}for(r=0;r<e;r++)t[r]=t[2*r+1]<<16|t[2*r];for(r=e;r<2*e;r++)t[r]=0;return new bn(t,0)},Je.gb=function(n){return Ms(this,n).h},Je.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)&n.D(r);return new bn(t,this.h&n.h)},Je.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)|n.D(r);return new bn(t,this.h|n.h)},Je.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)^n.D(r);return new bn(t,this.h^n.h)},gy.prototype.createWebChannel=gy.prototype.g,ls.prototype.send=ls.prototype.u,ls.prototype.open=ls.prototype.m,ls.prototype.close=ls.prototype.close,kh.NO_ERROR=0,kh.TIMEOUT=8,kh.HTTP_ERROR=6,iy.COMPLETE="complete",Fh.EventType=Lh,Lh.OPEN="a",Lh.CLOSE="b",Lh.ERROR="c",Lh.MESSAGE="d",Fr.prototype.listen=Fr.prototype.O,at.prototype.listenOnce=at.prototype.P,at.prototype.getLastError=at.prototype.Sa,at.prototype.getLastErrorCode=at.prototype.Ia,at.prototype.getStatus=at.prototype.da,at.prototype.getResponseJson=at.prototype.Wa,at.prototype.getResponseText=at.prototype.ja,at.prototype.send=at.prototype.ha,at.prototype.setWithCredentials=at.prototype.Oa,Co.prototype.digest=Co.prototype.l,Co.prototype.reset=Co.prototype.reset,Co.prototype.update=Co.prototype.j,bn.prototype.add=bn.prototype.add,bn.prototype.multiply=bn.prototype.R,bn.prototype.modulo=bn.prototype.gb,bn.prototype.compare=bn.prototype.X,bn.prototype.toNumber=bn.prototype.ea,bn.prototype.toString=bn.prototype.toString,bn.prototype.getBits=bn.prototype.D,bn.fromNumber=ca,bn.fromString=function BI(n,e){if(0==n.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==n.charAt(0))return pi(BI(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=ca(Math.pow(e,8)),r=Kl,o=0;o<n.length;o+=8){var u=Math.min(8,n.length-o),l=parseInt(n.substring(o,o+u),e);8>u?(u=ca(Math.pow(e,u)),r=r.R(u).add(ca(l))):r=(r=r.R(t)).add(ca(l))}return r};var $I=Qs.createWebChannelTransport=function(){return new gy},NT=Qs.getStatEventTarget=function(){return W_()},wy=Qs.ErrorCode=kh,HI=Qs.EventType=iy,Ey=Qs.Event=Bl,Iy=Qs.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},OM=Qs.FetchXmlHttpFactory=Hh,sg=Qs.WebChannel=Fh,GI=Qs.XhrIo=at,zI=Qs.Md5=Co,Yl=Qs.Integer=bn;const Dy="@firebase/firestore";class kn{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}kn.UNAUTHENTICATED=new kn(null),kn.GOOGLE_CREDENTIALS=new kn("google-credentials-uid"),kn.FIRST_PARTY=new kn("first-party-uid"),kn.MOCK_USER=new kn("mock-user");let Qh="9.23.0";const Dc=new Ys.Yd("@firebase/firestore");function og(){return Dc.logLevel}function Pe(n,...e){if(Dc.logLevel<=Ys.in.DEBUG){const t=e.map(Cy);Dc.debug(`Firestore (${Qh}): ${n}`,...t)}}function Cr(n,...e){if(Dc.logLevel<=Ys.in.ERROR){const t=e.map(Cy);Dc.error(`Firestore (${Qh}): ${n}`,...t)}}function To(n,...e){if(Dc.logLevel<=Ys.in.WARN){const t=e.map(Cy);Dc.warn(`Firestore (${Qh}): ${n}`,...t)}}function Cy(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function st(n="Unexpected state"){const e=`FIRESTORE (${Qh}) INTERNAL ASSERTION FAILED: `+n;throw Cr(e),new Error(e)}function ct(n,e){n||st()}function Ke(n,e){return n}const ae={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class De extends nn.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class lr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class qI{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class OT{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(kn.UNAUTHENTICATED))}shutdown(){}}class PT{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class f0{constructor(e){this.t=e,this.currentUser=kn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let o=this.i;const u=b=>this.i!==o?(o=this.i,t(b)):Promise.resolve();let l=new lr;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new lr,e.enqueueRetryable(()=>u(this.currentUser))};const m=()=>{const b=l;e.enqueueRetryable((0,ge.Z)(function*(){yield b.promise,yield u(r.currentUser)}))},I=b=>{Pe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=b,this.auth.addAuthTokenListener(this.o),m()};this.t.onInit(b=>I(b)),setTimeout(()=>{if(!this.auth){const b=this.t.getImmediate({optional:!0});b?I(b):(Pe("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new lr)}},0),m()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Pe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ct("string"==typeof r.accessToken),new qI(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return ct(null===e||"string"==typeof e),new kn(e)}}class kT{constructor(e,t,r){this.h=e,this.l=t,this.m=r,this.type="FirstParty",this.user=kn.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class ug{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new kT(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(kn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class WI{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ZI{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const r=u=>{null!=u.error&&Pe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const l=u.token!==this.T;return this.T=u.token,Pe("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const o=u=>{Pe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.I.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.I.getImmediate({optional:!0});u?o(u):Pe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ct("string"==typeof t.token),this.T=t.token,new WI(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function LT(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class KI{static A(){const t=62*Math.floor(256/62);let r="";for(;r.length<20;){const o=LT(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<t&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(o[u]%62))}return r}}function xt(n,e){return n<e?-1:n>e?1:0}function Jh(n,e,t){return n.length===e.length&&n.every((r,o)=>t(r,e[o]))}function VT(n){return n+"\0"}class Xn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new De(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new De(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new De(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new De(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Xn.fromMillis(Date.now())}static fromDate(e){return Xn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Xn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?xt(this.nanoseconds,e.nanoseconds):xt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class vt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new vt(e)}static min(){return new vt(new Xn(0,0))}static max(){return new vt(new Xn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class cg{constructor(e,t,r){void 0===t?t=0:t>e.length&&st(),void 0===r?r=e.length-t:r>e.length-t&&st(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===cg.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof cg?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const u=e.get(o),l=t.get(o);if(u<l)return-1;if(u>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class sn extends cg{construct(e,t,r){return new sn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new De(ae.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(o=>o.length>0))}return new sn(t)}static emptyPath(){return new sn([])}}const UT=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class dr extends cg{construct(e,t,r){return new dr(e,t,r)}static isValidIdentifier(e){return UT.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),dr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new dr(["__name__"])}static fromServerFormat(e){const t=[];let r="",o=0;const u=()=>{if(0===r.length)throw new De(ae.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;o<e.length;){const m=e[o];if("\\"===m){if(o+1===e.length)throw new De(ae.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const I=e[o+1];if("\\"!==I&&"."!==I&&"`"!==I)throw new De(ae.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=I,o+=2}else"`"===m?(l=!l,o++):"."!==m||l?(r+=m,o++):(u(),o++)}if(u(),l)throw new De(ae.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new dr(t)}static emptyPath(){return new dr([])}}class Qe{constructor(e){this.path=e}static fromPath(e){return new Qe(sn.fromString(e))}static fromName(e){return new Qe(sn.fromString(e).popFirst(5))}static empty(){return new Qe(sn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===sn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return sn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Qe(new sn(e.slice()))}}class lg{constructor(e,t,r,o){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=o}}function dg(n){return n.fields.find(e=>2===e.kind)}function Ql(n){return n.fields.filter(e=>2!==e.kind)}lg.UNKNOWN_ID=-1;class by{constructor(e,t){this.fieldPath=e,this.kind=t}}class hg{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new hg(0,xs.min())}}function YI(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,o=vt.fromTimestamp(1e9===r?new Xn(t+1,0):new Xn(t,r));return new xs(o,Qe.empty(),e)}function QI(n){return new xs(n.readTime,n.key,-1)}class xs{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new xs(vt.min(),Qe.empty(),-1)}static max(){return new xs(vt.max(),Qe.empty(),-1)}}function g0(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Qe.comparator(n.documentKey,e.documentKey),0!==t?t:xt(n.largestBatchId,e.largestBatchId))}const m0="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class y0{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Cc(n){return JI.apply(this,arguments)}function JI(){return JI=(0,ge.Z)(function*(n){if(n.code!==ae.FAILED_PRECONDITION||n.message!==m0)throw n;Pe("LocalStore","Unexpectedly lost primary lease")}),JI.apply(this,arguments)}class re{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&st(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new re((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof re?t:re.resolve(t)}catch(t){return re.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):re.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):re.reject(t)}static resolve(e){return new re((t,r)=>{t(e)})}static reject(e){return new re((t,r)=>{r(e)})}static waitFor(e){return new re((t,r)=>{let o=0,u=0,l=!1;e.forEach(m=>{++o,m.next(()=>{++u,l&&u===o&&t()},I=>r(I))}),l=!0,u===o&&t()})}static or(e){let t=re.resolve(!1);for(const r of e)t=t.next(o=>o?re.resolve(o):r());return t}static forEach(e,t){const r=[];return e.forEach((o,u)=>{r.push(t.call(this,o,u))}),this.waitFor(r)}static mapArray(e,t){return new re((r,o)=>{const u=e.length,l=new Array(u);let m=0;for(let I=0;I<u;I++){const b=I;t(e[b]).next(A=>{l[b]=A,++m,m===u&&r(l)},A=>o(A))}})}static doWhile(e,t){return new re((r,o)=>{const u=()=>{!0===e()?t().next(()=>{u()},o):r()};u()})}}class v0{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.v=new lr,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{t.error?this.v.reject(new fg(e,t.error)):this.v.resolve()},this.transaction.onerror=r=>{const o=Jr(r.target.error);this.v.reject(new fg(e,o))}}static open(e,t,r,o){try{return new v0(t,e.transaction(o,r))}catch(u){throw new fg(t,u)}}get R(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(Pe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new $T(t)}}class ds{constructor(e,t,r){this.name=e,this.version=t,this.V=r,12.2===ds.S((0,nn.z$)())&&Cr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Pe("SimpleDb","Removing database:",e),Ri(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,nn.hl)())return!1;if(ds.C())return!0;const e=(0,nn.z$)(),t=ds.S(e),r=0<t&&t<10,o=ds.N(e),u=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static N(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}$(e){var t=this;return(0,ge.Z)(function*(){return t.db||(Pe("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,o)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=l=>{r(l.target.result)},u.onblocked=()=>{o(new fg(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=l=>{const m=l.target.error;o("VersionError"===m.name?new De(ae.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===m.name?new De(ae.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+m):new fg(e,m))},u.onupgradeneeded=l=>{Pe("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',l.oldVersion),t.V.O(l.target.result,u.transaction,l.oldVersion,t.version).next(()=>{Pe("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=r=>t.F(r)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,o){var u=this;return(0,ge.Z)(function*(){const l="readonly"===t;let m=0;for(;;){++m;try{u.db=yield u.$(e);const I=v0.open(u.db,e,l?"readonly":"readwrite",r),b=o(I).next(A=>(I.P(),A)).catch(A=>(I.abort(A),re.reject(A))).toPromise();return b.catch(()=>{}),yield I.R,b}catch(I){const b=I,A="FirebaseError"!==b.name&&m<3;if(Pe("SimpleDb","Transaction failed with error:",b.message,"Retrying:",A),u.close(),!A)return Promise.reject(b)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class jT{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return Ri(this.L.delete())}}class fg extends De{constructor(e,t){super(ae.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function la(n){return"IndexedDbTransactionError"===n.name}class $T{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Pe("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Pe("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Ri(r)}add(e){return Pe("SimpleDb","ADD",this.store.name,e,e),Ri(this.store.add(e))}get(e){return Ri(this.store.get(e)).next(t=>(void 0===t&&(t=null),Pe("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Pe("SimpleDb","DELETE",this.store.name,e),Ri(this.store.delete(e))}count(){return Pe("SimpleDb","COUNT",this.store.name),Ri(this.store.count())}j(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const o=this.cursor(r),u=[];return this.W(o,(l,m)=>{u.push(m)}).next(()=>u)}{const o=this.store.getAll(r.range);return new re((u,l)=>{o.onerror=m=>{l(m.target.error)},o.onsuccess=m=>{u(m.target.result)}})}}H(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new re((o,u)=>{r.onerror=l=>{u(l.target.error)},r.onsuccess=l=>{o(l.target.result)}})}J(e,t){Pe("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.Y=!1;const o=this.cursor(r);return this.W(o,(u,l,m)=>m.delete())}X(e,t){let r;t?r=e:(r={},t=e);const o=this.cursor(r);return this.W(o,t)}Z(e){const t=this.cursor({});return new re((r,o)=>{t.onerror=u=>{const l=Jr(u.target.error);o(l)},t.onsuccess=u=>{const l=u.target.result;l?e(l.primaryKey,l.value).next(m=>{m?l.continue():r()}):r()}})}W(e,t){const r=[];return new re((o,u)=>{e.onerror=l=>{u(l.target.error)},e.onsuccess=l=>{const m=l.target.result;if(!m)return void o();const I=new jT(m),b=t(m.primaryKey,m.value,I);if(b instanceof re){const A=b.catch(R=>(I.done(),re.reject(R)));r.push(A)}I.isDone?o():null===I.K?m.continue():m.continue(I.K)}}).next(()=>re.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Ri(n){return new re((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const o=Jr(r.target.error);t(o)}})}let Xh=!1;function Jr(n){const e=ds.S((0,nn.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new De("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Xh||(Xh=!0,setTimeout(()=>{throw r},0)),r}}return n}class Jl{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;Pe("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,ge.Z)(function*(){t.task=null;try{Pe("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(r){la(r)?Pe("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield Cc(r)}yield t.et(6e4)}))}}class Ty{constructor(e,t){this.localStore=e,this.persistence=t}nt(e=50){var t=this;return(0,ge.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.st(r,e))})()}st(e,t){const r=new Set;let o=t,u=!0;return re.doWhile(()=>!0===u&&o>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(l=>{if(null!==l&&!r.has(l))return Pe("IndexBackiller",`Processing collection: ${l}`),this.it(e,l,o).next(m=>{o-=m,r.add(l)});u=!1})).next(()=>t-o)}it(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(o=>this.localStore.localDocuments.getNextDocuments(e,t,o,r).next(u=>{const l=u.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next(()=>this.rt(o,u)).next(m=>(Pe("IndexBackiller",`Updating offset: ${m}`),this.localStore.indexManager.updateCollectionGroup(e,t,m))).next(()=>l.size)}))}rt(e,t){let r=e;return t.changes.forEach((o,u)=>{const l=QI(u);g0(l,r)>0&&(r=l)}),new xs(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let er=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=o=>this.ot(o),this.ut=o=>r.writeSequenceNumber(o))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return n.ct=-1,n})();function Xl(n){return null==n}function da(n){return 0===n&&1/n==-1/0}function ed(n){return"number"==typeof n&&Number.isInteger(n)&&!da(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function br(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=td(e)),e=ef(n.get(t),e);return td(e)}function ef(n,e){let t=e;const r=n.length;for(let o=0;o<r;o++){const u=n.charAt(o);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function td(n){return n+"\x01\x01"}function Wi(n){const e=n.length;if(ct(e>=2),2===e)return ct("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),sn.emptyPath();const t=e-2,r=[];let o="";for(let u=0;u<e;){const l=n.indexOf("\x01",u);switch((l<0||l>t)&&st(),n.charAt(l+1)){case"\x01":const m=n.substring(u,l);let I;0===o.length?I=m:(o+=m,I=o,o=""),r.push(I);break;case"\x10":o+=n.substring(u,l),o+="\0";break;case"\x11":o+=n.substring(u,l+1);break;default:st()}u=l+2}return new sn(r)}const nd=["userId","batchId"];function _u(n,e){return[n,br(e)]}function rd(n,e,t){return[n,br(e),t]}const XI={},eD=["prefixPath","collectionGroup","readTime","documentId"],tD=["prefixPath","collectionGroup","documentId"],nD=["collectionGroup","readTime","prefixPath","documentId"],rD=["canonicalId","targetId"],iD=["targetId","path"],sD=["path","targetId"],oD=["collectionId","parent"],aD=["indexId","uid"],_0=["uid","sequenceNumber"],HT=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],PM=["indexId","uid","orderedDocumentKey"],kM=["userId","collectionPath","documentId"],GT=["userId","collectionPath","largestBatchId"],zT=["userId","collectionGroup","largestBatchId"],qT=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],WT=[...qT,"documentOverlays"],ZT=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],uD=ZT,KT=[...uD,"indexConfiguration","indexState","indexEntries"];class w0 extends y0{constructor(e,t){super(),this.ht=e,this.currentSequenceNumber=t}}function Lr(n,e){const t=Ke(n);return ds.M(t.ht,e)}function tf(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ha(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function pg(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class An{constructor(e,t){this.comparator=e,this.root=t||Xr.EMPTY}insert(e,t){return new An(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Xr.BLACK,null,null))}remove(e){return new An(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Xr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(0===o)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new bc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new bc(this.root,e,this.comparator,!1)}getReverseIterator(){return new bc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new bc(this.root,e,this.comparator,!0)}}class bc{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Xr{constructor(e,t,r,o,u){this.key=e,this.value=t,this.color=r??Xr.RED,this.left=o??Xr.EMPTY,this.right=u??Xr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,u){return new Xr(e??this.key,t??this.value,r??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const u=r(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,t,r),null):0===u?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Xr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),0===t(e,o.key)){if(o.right.isEmpty())return Xr.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Xr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Xr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw st();const e=this.left.check();if(e!==this.right.check())throw st();return e+(this.isRed()?0:1)}}Xr.EMPTY=null,Xr.RED=!0,Xr.BLACK=!1,Xr.EMPTY=new class{constructor(){this.size=0}get key(){throw st()}get value(){throw st()}get color(){throw st()}get left(){throw st()}get right(){throw st()}copy(n,e,t,r,o){return this}insert(n,e,t){return new Xr(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class zn{constructor(e){this.comparator=e,this.data=new An(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new nf(this.data.getIterator())}getIteratorFrom(e){return new nf(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof zn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(o,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new zn(this.comparator);return t.data=e,t}}class nf{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function rf(n){return n.hasNext()?n.getNext():void 0}class hs{constructor(e){this.fields=e,e.sort(dr.comparator)}static empty(){return new hs([])}unionWith(e){let t=new zn(dr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new hs(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Jh(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class cD extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Tr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new cD("Invalid base64 string: "+o):o}}(e);return new Tr(t)}static fromUint8Array(e){const t=function(r){let o="";for(let u=0;u<r.length;++u)o+=String.fromCharCode(r[u]);return o}(e);return new Tr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return xt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Tr.EMPTY_BYTE_STRING=new Tr("");const Sy=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function So(n){if(ct(!!n),"string"==typeof n){let e=0;const t=Sy.exec(n);if(ct(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Sr(n.seconds),nanos:Sr(n.nanos)}}function Sr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function wu(n){return"string"==typeof n?Tr.fromBase64String(n):Tr.fromUint8Array(n)}function Ay(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function sf(n){const e=n.mapValue.fields.__previous_value__;return Ay(e)?sf(e):e}function gg(n){const e=So(n.mapValue.fields.__local_write_time__.timestampValue);return new Xn(e.seconds,e.nanos)}class lD{constructor(e,t,r,o,u,l,m,I,b){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=l,this.autoDetectLongPolling=m,this.longPollingOptions=I,this.useFetchStreams=b}}class Tc{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Tc("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Tc&&e.projectId===this.projectId&&e.database===this.database}}const Sc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},mg={nullValue:"NULL_VALUE"};function Eu(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Ay(n)?4:hD(n)?9007199254740991:10:st()}function Ao(n,e){if(n===e)return!0;const t=Eu(n);if(t!==Eu(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return gg(n).isEqual(gg(e));case 3:return function(r,o){if("string"==typeof r.timestampValue&&"string"==typeof o.timestampValue&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const u=So(r.timestampValue),l=So(o.timestampValue);return u.seconds===l.seconds&&u.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return o=e,wu(n.bytesValue).isEqual(wu(o.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,o){return Sr(r.geoPointValue.latitude)===Sr(o.geoPointValue.latitude)&&Sr(r.geoPointValue.longitude)===Sr(o.geoPointValue.longitude)}(n,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return Sr(r.integerValue)===Sr(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const u=Sr(r.doubleValue),l=Sr(o.doubleValue);return u===l?da(u)===da(l):isNaN(u)&&isNaN(l)}return!1}(n,e);case 9:return Jh(n.arrayValue.values||[],e.arrayValue.values||[],Ao);case 10:return function(r,o){const u=r.mapValue.fields||{},l=o.mapValue.fields||{};if(tf(u)!==tf(l))return!1;for(const m in u)if(u.hasOwnProperty(m)&&(void 0===l[m]||!Ao(u[m],l[m])))return!1;return!0}(n,e);default:return st()}var o}function yg(n,e){return void 0!==(n.values||[]).find(t=>Ao(t,e))}function Ac(n,e){if(n===e)return 0;const t=Eu(n),r=Eu(e);if(t!==r)return xt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return xt(n.booleanValue,e.booleanValue);case 2:return function(o,u){const l=Sr(o.integerValue||o.doubleValue),m=Sr(u.integerValue||u.doubleValue);return l<m?-1:l>m?1:l===m?0:isNaN(l)?isNaN(m)?0:-1:1}(n,e);case 3:return dD(n.timestampValue,e.timestampValue);case 4:return dD(gg(n),gg(e));case 5:return xt(n.stringValue,e.stringValue);case 6:return function(o,u){const l=wu(o),m=wu(u);return l.compareTo(m)}(n.bytesValue,e.bytesValue);case 7:return function(o,u){const l=o.split("/"),m=u.split("/");for(let I=0;I<l.length&&I<m.length;I++){const b=xt(l[I],m[I]);if(0!==b)return b}return xt(l.length,m.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,u){const l=xt(Sr(o.latitude),Sr(u.latitude));return 0!==l?l:xt(Sr(o.longitude),Sr(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(o,u){const l=o.values||[],m=u.values||[];for(let I=0;I<l.length&&I<m.length;++I){const b=Ac(l[I],m[I]);if(b)return b}return xt(l.length,m.length)}(n.arrayValue,e.arrayValue);case 10:return function(o,u){if(o===Sc.mapValue&&u===Sc.mapValue)return 0;if(o===Sc.mapValue)return 1;if(u===Sc.mapValue)return-1;const l=o.fields||{},m=Object.keys(l),I=u.fields||{},b=Object.keys(I);m.sort(),b.sort();for(let A=0;A<m.length&&A<b.length;++A){const R=xt(m[A],b[A]);if(0!==R)return R;const H=Ac(l[m[A]],I[b[A]]);if(0!==H)return H}return xt(m.length,b.length)}(n.mapValue,e.mapValue);default:throw st()}}function dD(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return xt(n,e);const t=So(n),r=So(e),o=xt(t.seconds,r.seconds);return 0!==o?o:xt(t.nanos,r.nanos)}function af(n){return vg(n)}function vg(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const o=So(r);return`time(${o.seconds},${o.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?wu(n.bytesValue).toBase64():"referenceValue"in n?Qe.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let o="[",u=!0;for(const l of r.values||[])u?u=!1:o+=",",o+=vg(l);return o+"]"}(n.arrayValue):"mapValue"in n?function(r){const o=Object.keys(r.fields||{}).sort();let u="{",l=!0;for(const m of o)l?l=!1:u+=",",u+=`${m}:${vg(r.fields[m])}`;return u+"}"}(n.mapValue):st();var e}function id(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function cf(n){return!!n&&"integerValue"in n}function Mc(n){return!!n&&"arrayValue"in n}function My(n){return!!n&&"nullValue"in n}function E0(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function xy(n){return!!n&&"mapValue"in n}function _g(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return ha(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=_g(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=_g(n.arrayValue.values[t]);return e}return Object.assign({},n)}function hD(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function I0(n){return"nullValue"in n?mg:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?id(Tc.empty(),Qe.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:st()}function D0(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?id(Tc.empty(),Qe.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Sc:st()}function C0(n,e){const t=Ac(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function b0(n,e){const t=Ac(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class gi{constructor(e){this.value=e}static empty(){return new gi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!xy(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=_g(t)}setAll(e){let t=dr.emptyPath(),r={},o=[];e.forEach((l,m)=>{if(!t.isImmediateParentOf(m)){const I=this.getFieldsMap(t);this.applyChanges(I,r,o),r={},o=[],t=m.popLast()}l?r[m.lastSegment()]=_g(l):o.push(m.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,o)}delete(e){const t=this.field(e.popLast());xy(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ao(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];xy(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){ha(t,(o,u)=>e[o]=u);for(const o of r)delete e[o]}clone(){return new gi(_g(this.value))}}function fD(n){const e=[];return ha(n.fields,(t,r)=>{const o=new dr([t]);if(xy(r)){const u=fD(r.mapValue).fields;if(0===u.length)e.push(o);else for(const l of u)e.push(o.child(l))}else e.push(o)}),new hs(e)}class Fn{constructor(e,t,r,o,u,l,m){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.createTime=u,this.data=l,this.documentState=m}static newInvalidDocument(e){return new Fn(e,0,vt.min(),vt.min(),vt.min(),gi.empty(),0)}static newFoundDocument(e,t,r,o){return new Fn(e,1,t,vt.min(),r,o,0)}static newNoDocument(e,t){return new Fn(e,2,t,vt.min(),vt.min(),gi.empty(),0)}static newUnknownDocument(e,t){return new Fn(e,3,t,vt.min(),vt.min(),gi.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(vt.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=gi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=gi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=vt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Fn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Fn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class fa{constructor(e,t){this.position=e,this.inclusive=t}}function T0(n,e,t){let r=0;for(let o=0;o<n.position.length;o++){const u=e[o],l=n.position[o];if(r=u.field.isKeyField()?Qe.comparator(Qe.fromName(l.referenceValue),t.key):Ac(l,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function Ny(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ao(n.position[t],e.position[t]))return!1;return!0}class sd{constructor(e,t="asc"){this.field=e,this.dir=t}}function QT(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class S0{}class Xt extends S0{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new gD(e,t,r):"array-contains"===t?new vD(e,r):"in"===t?new O0(e,r):"not-in"===t?new Py(e,r):"array-contains-any"===t?new xc(e,r):new Xt(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new mD(e,r):new yD(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Ac(t,this.value)):null!==t&&Eu(this.value)===Eu(t)&&this.matchesComparison(Ac(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return st()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class vn extends S0{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new vn(e,t)}matches(e){return od(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(t=>t.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function od(n){return"and"===n.op}function A0(n){return"or"===n.op}function M0(n){return pD(n)&&od(n)}function pD(n){for(const e of n.filters)if(e instanceof vn)return!1;return!0}function Ry(n){if(n instanceof Xt)return n.field.canonicalString()+n.op.toString()+af(n.value);if(M0(n))return n.filters.map(e=>Ry(e)).join(",");{const e=n.filters.map(t=>Ry(t)).join(",");return`${n.op}(${e})`}}function Oy(n,e){return n instanceof Xt?(t=n,(r=e)instanceof Xt&&t.op===r.op&&t.field.isEqual(r.field)&&Ao(t.value,r.value)):n instanceof vn?function(t,r){return r instanceof vn&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((o,u,l)=>o&&Oy(u,r.filters[l]),!0)}(n,e):void st();var t,r}function x0(n,e){const t=n.filters.concat(e);return vn.create(t,n.op)}function N0(n){return n instanceof Xt?`${(e=n).field.canonicalString()} ${e.op} ${af(e.value)}`:n instanceof vn?function(e){return e.op.toString()+" {"+e.getFilters().map(N0).join(" ,")+"}"}(n):"Filter";var e}class gD extends Xt{constructor(e,t,r){super(e,t,r),this.key=Qe.fromName(r.referenceValue)}matches(e){const t=Qe.comparator(e.key,this.key);return this.matchesComparison(t)}}class mD extends Xt{constructor(e,t){super(e,"in",t),this.keys=R0(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class yD extends Xt{constructor(e,t){super(e,"not-in",t),this.keys=R0(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function R0(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Qe.fromName(r.referenceValue))}class vD extends Xt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Mc(t)&&yg(t.arrayValue,this.value)}}class O0 extends Xt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&yg(this.value.arrayValue,t)}}class Py extends Xt{constructor(e,t){super(e,"not-in",t)}matches(e){if(yg(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!yg(this.value.arrayValue,t)}}class xc extends Xt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Mc(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>yg(this.value.arrayValue,r))}}class JT{constructor(e,t=null,r=[],o=[],u=null,l=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=l,this.endAt=m,this.dt=null}}function P0(n,e=null,t=[],r=[],o=null,u=null,l=null){return new JT(n,e,t,r,o,u,l)}function Iu(n){const e=Ke(n);if(null===e.dt){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Ry(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),Xl(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>af(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>af(r)).join(",")),e.dt=t}return e.dt}function Mo(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!QT(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Oy(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Ny(n.startAt,e.startAt)&&Ny(n.endAt,e.endAt)}function lf(n){return Qe.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function ky(n,e){return n.filters.filter(t=>t instanceof Xt&&t.field.isEqual(e))}function Fy(n,e,t){let r=mg,o=!0;for(const u of ky(n,e)){let l=mg,m=!0;switch(u.op){case"<":case"<=":l=I0(u.value);break;case"==":case"in":case">=":l=u.value;break;case">":l=u.value,m=!1;break;case"!=":case"not-in":l=mg}C0({value:r,inclusive:o},{value:l,inclusive:m})<0&&(r=l,o=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const l=t.position[u];C0({value:r,inclusive:o},{value:l,inclusive:t.inclusive})<0&&(r=l,o=t.inclusive);break}return{value:r,inclusive:o}}function XT(n,e,t){let r=Sc,o=!0;for(const u of ky(n,e)){let l=Sc,m=!0;switch(u.op){case">=":case">":l=D0(u.value),m=!1;break;case"==":case"in":case"<=":l=u.value;break;case"<":l=u.value,m=!1;break;case"!=":case"not-in":l=Sc}b0({value:r,inclusive:o},{value:l,inclusive:m})>0&&(r=l,o=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const l=t.position[u];b0({value:r,inclusive:o},{value:l,inclusive:t.inclusive})>0&&(r=l,o=t.inclusive);break}return{value:r,inclusive:o}}class Nc{constructor(e,t=null,r=[],o=[],u=null,l="F",m=null,I=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=l,this.startAt=m,this.endAt=I,this.wt=null,this._t=null}}function _D(n,e,t,r,o,u,l,m){return new Nc(n,e,t,r,o,u,l,m)}function df(n){return new Nc(n)}function k0(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function F0(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function hr(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function Ly(n){return null!==n.collectionGroup}function ad(n){const e=Ke(n);if(null===e.wt){e.wt=[];const t=hr(e),r=F0(e);if(null!==t&&null===r)t.isKeyField()||e.wt.push(new sd(t)),e.wt.push(new sd(dr.keyField(),"asc"));else{let o=!1;for(const u of e.explicitOrderBy)e.wt.push(u),u.field.isKeyField()&&(o=!0);if(!o){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new sd(dr.keyField(),u))}}}return e.wt}function Zi(n){const e=Ke(n);if(!e._t)if("F"===e.limitType)e._t=P0(e.path,e.collectionGroup,ad(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of ad(e))t.push(new sd(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new fa(e.endAt.position,e.endAt.inclusive):null,o=e.startAt?new fa(e.startAt.position,e.startAt.inclusive):null;e._t=P0(e.path,e.collectionGroup,t,e.filters,e.limit,r,o)}return e._t}function Vy(n,e){e.getFirstInequalityField(),hr(n);const t=n.filters.concat([e]);return new Nc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Uy(n,e,t){return new Nc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function hf(n,e){return Mo(Zi(n),Zi(e))&&n.limitType===e.limitType}function L0(n){return`${Iu(Zi(n))}|lt:${n.limitType}`}function Rc(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>N0(r)).join(", ")}]`),Xl(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(o=r).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>af(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>af(r)).join(",")),`Target(${t})`}(Zi(n))}; limitType=${n.limitType})`}function wg(n,e){return e.isFoundDocument()&&function(t,r){const o=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(o):Qe.isDocumentKey(t.path)?t.path.isEqual(o):t.path.isImmediateParentOf(o)}(n,e)&&function(t,r){for(const o of ad(t))if(!o.field.isKeyField()&&null===r.data.field(o.field))return!1;return!0}(n,e)&&function(t,r){for(const o of t.filters)if(!o.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(o,u,l){const m=T0(o,u,l);return o.inclusive?m<=0:m<0}(t.startAt,ad(t),r)||t.endAt&&!function(o,u,l){const m=T0(o,u,l);return o.inclusive?m>=0:m>0}(t.endAt,ad(t),r)));var t,r}function wD(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function V0(n){return(e,t)=>{let r=!1;for(const o of ad(n)){const u=eS(o,e,t);if(0!==u)return u;r=r||o.field.isKeyField()}return 0}}function eS(n,e,t){const r=n.field.isKeyField()?Qe.comparator(e.key,t.key):function(o,u,l){const m=u.data.field(o),I=l.data.field(o);return null!==m&&null!==I?Ac(m,I):st()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return st()}}class pa{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[o,u]of r)if(this.equalsFn(o,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(void 0===o)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return 1===r.length?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){ha(this.inner,(t,r)=>{for(const[o,u]of r)e(o,u)})}isEmpty(){return pg(this.inner)}size(){return this.innerSize}}const FM=new An(Qe.comparator);function Ki(){return FM}const By=new An(Qe.comparator);function fs(...n){let e=By;for(const t of n)e=e.insert(t.key,t);return e}function ED(n){let e=By;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function ga(){return Yi()}function xo(){return Yi()}function Yi(){return new pa(n=>n.toString(),(n,e)=>n.isEqual(e))}const No=new An(Qe.comparator),ID=new zn(Qe.comparator);function $t(...n){let e=ID;for(const t of n)e=e.add(t);return e}const tS=new zn(xt);function U0(){return tS}function DD(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:da(e)?"-0":e}}function CD(n){return{integerValue:""+n}}function jy(n,e){return ed(e)?CD(e):DD(n,e)}class Oc{constructor(){this._=void 0}}function nS(n,e,t){return n instanceof ff?function(r,o){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&Ay(o)&&(o=sf(o)),o&&(u.fields.__previous_value__=o),{mapValue:u}}(t,e):n instanceof Pc?B0(n,e):n instanceof ma?SD(n,e):function(r,o){const u=TD(r,o),l=j0(u)+j0(r.gt);return cf(u)&&cf(r.gt)?CD(l):DD(r.serializer,l)}(n,e)}function bD(n,e,t){return n instanceof Pc?B0(n,e):n instanceof ma?SD(n,e):t}function TD(n,e){return n instanceof ud?cf(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class ff extends Oc{}class Pc extends Oc{constructor(e){super(),this.elements=e}}function B0(n,e){const t=$0(e);for(const r of n.elements)t.some(o=>Ao(o,r))||t.push(r);return{arrayValue:{values:t}}}class ma extends Oc{constructor(e){super(),this.elements=e}}function SD(n,e){let t=$0(e);for(const r of n.elements)t=t.filter(o=>!Ao(o,r));return{arrayValue:{values:t}}}class ud extends Oc{constructor(e,t){super(),this.serializer=e,this.gt=t}}function j0(n){return Sr(n.integerValue||n.doubleValue)}function $0(n){return Mc(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Eg{constructor(e,t){this.field=e,this.transform=t}}class H0{constructor(e,t){this.version=e,this.transformResults=t}}class Mn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Mn}static exists(e){return new Mn(void 0,e)}static updateTime(e){return new Mn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ig(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Dg{}function $y(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new gf(n.key,Mn.none()):new cd(n.key,n.data,Mn.none());{const t=n.data,r=gi.empty();let o=new zn(dr.comparator);for(let u of e.fields)if(!o.has(u)){let l=t.field(u);null===l&&u.length>1&&(u=u.popLast(),l=t.field(u)),null===l?r.delete(u):r.set(u,l),o=o.add(u)}return new Du(n.key,r,new hs(o.toArray()),Mn.none())}}function AD(n,e,t){n instanceof cd?function(r,o,u){const l=r.value.clone(),m=ND(r.fieldTransforms,o,u.transformResults);l.setAll(m),o.convertToFoundDocument(u.version,l).setHasCommittedMutations()}(n,e,t):n instanceof Du?function(r,o,u){if(!Ig(r.precondition,o))return void o.convertToUnknownDocument(u.version);const l=ND(r.fieldTransforms,o,u.transformResults),m=o.data;m.setAll(xD(r)),m.setAll(l),o.convertToFoundDocument(u.version,m).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function pf(n,e,t,r){return n instanceof cd?function(o,u,l,m){if(!Ig(o.precondition,u))return l;const I=o.value.clone(),b=RD(o.fieldTransforms,m,u);return I.setAll(b),u.convertToFoundDocument(u.version,I).setHasLocalMutations(),null}(n,e,t,r):n instanceof Du?function(o,u,l,m){if(!Ig(o.precondition,u))return l;const I=RD(o.fieldTransforms,m,u),b=u.data;return b.setAll(xD(o)),b.setAll(I),u.convertToFoundDocument(u.version,b).setHasLocalMutations(),null===l?null:l.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(A=>A.field))}(n,e,t,r):(l=t,Ig(n.precondition,u=e)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):l);var u,l}function MD(n,e){let t=null;for(const r of n.fieldTransforms){const o=e.data.field(r.field),u=TD(r.transform,o||null);null!=u&&(null===t&&(t=gi.empty()),t.set(r.field,u))}return t||null}function G0(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Jh(t,r,(o,u)=>function rS(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Pc&&r instanceof Pc||t instanceof ma&&r instanceof ma?Jh(t.elements,r.elements,Ao):t instanceof ud&&r instanceof ud?Ao(t.gt,r.gt):t instanceof ff&&r instanceof ff);var t,r}(o,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class cd extends Dg{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Du extends Dg{constructor(e,t,r,o,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function xD(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function ND(n,e,t){const r=new Map;ct(n.length===t.length);for(let o=0;o<t.length;o++){const u=n[o],l=u.transform,m=e.data.field(u.field);r.set(u.field,bD(l,m,t[o]))}return r}function RD(n,e,t){const r=new Map;for(const o of n){const u=o.transform,l=t.data.field(o.field);r.set(o.field,nS(u,l,e))}return r}class gf extends Dg{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class z0 extends Dg{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class q0{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&AD(u,e,r[o])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=pf(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=pf(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=xo();return this.mutations.forEach(o=>{const u=e.get(o.key),l=u.overlayedDocument;let m=this.applyToLocalView(l,u.mutatedFields);m=t.has(o.key)?null:m;const I=$y(l,m);null!==I&&r.set(o.key,I),l.isValidDocument()||l.convertToNoDocument(vt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),$t())}isEqual(e){return this.batchId===e.batchId&&Jh(this.mutations,e.mutations,(t,r)=>G0(t,r))&&Jh(this.baseMutations,e.baseMutations,(t,r)=>G0(t,r))}}class W0{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){ct(e.mutations.length===r.length);let o=No;const u=e.mutations;for(let l=0;l<u.length;l++)o=o.insert(u[l].key,r[l].version);return new W0(e,t,r,o)}}class Z0{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class sS{constructor(e,t){this.count=e,this.unchangedNames=t}}var Vr,on;function OD(n){switch(n){default:return st();case ae.CANCELLED:case ae.UNKNOWN:case ae.DEADLINE_EXCEEDED:case ae.RESOURCE_EXHAUSTED:case ae.INTERNAL:case ae.UNAVAILABLE:case ae.UNAUTHENTICATED:return!1;case ae.INVALID_ARGUMENT:case ae.NOT_FOUND:case ae.ALREADY_EXISTS:case ae.PERMISSION_DENIED:case ae.FAILED_PRECONDITION:case ae.ABORTED:case ae.OUT_OF_RANGE:case ae.UNIMPLEMENTED:case ae.DATA_LOSS:return!0}}function PD(n){if(void 0===n)return Cr("GRPC error has no .code"),ae.UNKNOWN;switch(n){case Vr.OK:return ae.OK;case Vr.CANCELLED:return ae.CANCELLED;case Vr.UNKNOWN:return ae.UNKNOWN;case Vr.DEADLINE_EXCEEDED:return ae.DEADLINE_EXCEEDED;case Vr.RESOURCE_EXHAUSTED:return ae.RESOURCE_EXHAUSTED;case Vr.INTERNAL:return ae.INTERNAL;case Vr.UNAVAILABLE:return ae.UNAVAILABLE;case Vr.UNAUTHENTICATED:return ae.UNAUTHENTICATED;case Vr.INVALID_ARGUMENT:return ae.INVALID_ARGUMENT;case Vr.NOT_FOUND:return ae.NOT_FOUND;case Vr.ALREADY_EXISTS:return ae.ALREADY_EXISTS;case Vr.PERMISSION_DENIED:return ae.PERMISSION_DENIED;case Vr.FAILED_PRECONDITION:return ae.FAILED_PRECONDITION;case Vr.ABORTED:return ae.ABORTED;case Vr.OUT_OF_RANGE:return ae.OUT_OF_RANGE;case Vr.UNIMPLEMENTED:return ae.UNIMPLEMENTED;case Vr.DATA_LOSS:return ae.DATA_LOSS;default:return st()}}(on=Vr||(Vr={}))[on.OK=0]="OK",on[on.CANCELLED=1]="CANCELLED",on[on.UNKNOWN=2]="UNKNOWN",on[on.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",on[on.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",on[on.NOT_FOUND=5]="NOT_FOUND",on[on.ALREADY_EXISTS=6]="ALREADY_EXISTS",on[on.PERMISSION_DENIED=7]="PERMISSION_DENIED",on[on.UNAUTHENTICATED=16]="UNAUTHENTICATED",on[on.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",on[on.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",on[on.ABORTED=10]="ABORTED",on[on.OUT_OF_RANGE=11]="OUT_OF_RANGE",on[on.UNIMPLEMENTED=12]="UNIMPLEMENTED",on[on.INTERNAL=13]="INTERNAL",on[on.UNAVAILABLE=14]="UNAVAILABLE",on[on.DATA_LOSS=15]="DATA_LOSS";class K0{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return Hy}static getOrCreateInstance(){return null===Hy&&(Hy=new K0),Hy}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let Hy=null;function kD(){return new TextEncoder}const FD=new Yl([4294967295,4294967295],0);function Y0(n){const e=kD().encode(n),t=new zI;return t.update(e),new Uint8Array(t.digest())}function Q0(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new Yl([t,r],0),new Yl([o,u],0)]}class Gy{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new mf(`Invalid padding: ${t}`);if(r<0)throw new mf(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new mf(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new mf(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=Yl.fromNumber(this.It)}Et(e,t,r){let o=e.add(t.multiply(Yl.fromNumber(r)));return 1===o.compare(FD)&&(o=new Yl([o.getBits(0),o.getBits(1)],0)),o.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=Y0(e),[r,o]=Q0(t);for(let u=0;u<this.hashCount;u++){const l=this.Et(r,o,u);if(!this.At(l))return!1}return!0}static create(e,t,r){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),l=new Gy(u,o,t);return r.forEach(m=>l.insert(m)),l}insert(e){if(0===this.It)return;const t=Y0(e),[r,o]=Q0(t);for(let u=0;u<this.hashCount;u++){const l=this.Et(r,o,u);this.Rt(l)}}Rt(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class mf extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class yf{constructor(e,t,r,o,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const o=new Map;return o.set(e,vf.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new yf(vt.min(),o,new An(xt),Ki(),$t())}}class vf{constructor(e,t,r,o,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new vf(r,t,$t(),$t(),$t())}}class Cg{constructor(e,t,r,o){this.Pt=e,this.removedTargetIds=t,this.key=r,this.bt=o}}class J0{constructor(e,t){this.targetId=e,this.Vt=t}}class X0{constructor(e,t,r=Tr.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class ew{constructor(){this.St=0,this.Dt=VD(),this.Ct=Tr.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=$t(),t=$t(),r=$t();return this.Dt.forEach((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:st()}}),new vf(this.Ct,this.xt,e,t,r)}Ft(){this.Nt=!1,this.Dt=VD()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class ld{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=Ki(),this.zt=LD(),this.Wt=new An(xt)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const r=this.Zt(t);switch(e.state){case 0:this.te(t)&&r.$t(e.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(e.resumeToken);break;case 2:r.Ut(),r.kt||this.removeTarget(t);break;case 3:this.te(t)&&(r.Kt(),r.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),r.$t(e.resumeToken));break;default:st()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((r,o)=>{this.te(o)&&t(o)})}ne(e){var t;const r=e.targetId,o=e.Vt.count,u=this.se(r);if(u){const l=u.target;if(lf(l))if(0===o){const m=new Qe(l.path);this.Yt(r,m,Fn.newNoDocument(m,vt.min()))}else ct(1===o);else{const m=this.ie(r);if(m!==o){const I=this.re(e,m);0!==I&&(this.ee(r),this.Wt=this.Wt.insert(r,2===I?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=K0.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(b,A,R){var H,X,ye,ke,Ue,wt;const Rt={localCacheCount:A,existenceFilterCount:R.count},St=R.unchangedNames;return St&&(Rt.bloomFilter={applied:0===b,hashCount:null!==(H=St?.hashCount)&&void 0!==H?H:0,bitmapLength:null!==(ke=null===(ye=null===(X=St?.bits)||void 0===X?void 0:X.bitmap)||void 0===ye?void 0:ye.length)&&void 0!==ke?ke:0,padding:null!==(wt=null===(Ue=St?.bits)||void 0===Ue?void 0:Ue.padding)&&void 0!==wt?wt:0}),Rt}(I,m,e.Vt))}}}}re(e,t){const{unchangedNames:r,count:o}=e.Vt;if(!r||!r.bits)return 1;const{bits:{bitmap:u="",padding:l=0},hashCount:m=0}=r;let I,b;try{I=wu(u).toUint8Array()}catch(A){if(A instanceof cD)return To("Decoding the base64 bloom filter in existence filter failed ("+A.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw A}try{b=new Gy(I,l,m)}catch(A){return To(A instanceof mf?"BloomFilter error: ":"Applying bloom filter failed: ",A),1}return 0===b.It?1:o!==t-this.oe(e.targetId,b)?2:0}oe(e,t){const r=this.Gt.getRemoteKeysForTarget(e);let o=0;return r.forEach(u=>{const l=this.Gt.ue(),m=`projects/${l.projectId}/databases/${l.database}/documents/${u.path.canonicalString()}`;t.vt(m)||(this.Yt(e,u,null),o++)}),o}ce(e){const t=new Map;this.Qt.forEach((u,l)=>{const m=this.se(l);if(m){if(u.current&&lf(m.target)){const I=new Qe(m.target.path);null!==this.jt.get(I)||this.ae(l,I)||this.Yt(l,I,Fn.newNoDocument(I,e))}u.Mt&&(t.set(l,u.Ot()),u.Ft())}});let r=$t();this.zt.forEach((u,l)=>{let m=!0;l.forEachWhile(I=>{const b=this.se(I);return!b||"TargetPurposeLimboResolution"===b.purpose||(m=!1,!1)}),m&&(r=r.add(u))}),this.jt.forEach((u,l)=>l.setReadTime(e));const o=new yf(e,t,this.Wt,this.jt,r);return this.jt=Ki(),this.zt=LD(),this.Wt=new An(xt),o}Jt(e,t){if(!this.te(e))return;const r=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,r),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,r){if(!this.te(e))return;const o=this.Zt(e);this.ae(e,t)?o.Bt(t,1):o.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),r&&(this.jt=this.jt.insert(t,r))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new ew,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new zn(xt),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||Pe("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new ew),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function LD(){return new An(Qe.comparator)}function VD(){return new An(Qe.comparator)}const _f={asc:"ASCENDING",desc:"DESCENDING"},LM={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},tw={and:"AND",or:"OR"};class VM{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function zy(n,e){return n.useProto3Json||Xl(e)?e:{value:e}}function dd(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function oS(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Mt(n,e){return dd(n,e.toTimestamp())}function Ar(n){return ct(!!n),vt.fromTimestamp(function(e){const t=So(e);return new Xn(t.seconds,t.nanos)}(n))}function nw(n,e){return(t=n,new sn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function UD(n){const e=sn.fromString(n);return ct(If(e)),e}function ya(n,e){return nw(n.databaseId,e.path)}function va(n,e){const t=UD(e);if(t.get(1)!==n.databaseId.projectId)throw new De(ae.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new De(ae.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Qe(aS(t))}function wf(n,e){return nw(n.databaseId,e)}function bg(n){const e=UD(n);return 4===e.length?sn.emptyPath():aS(e)}function Ln(n){return new sn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function aS(n){return ct(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function rw(n,e,t){return{name:ya(n,e),fields:t.value.mapValue.fields}}function iw(n,e,t){const r=va(n,e.name),o=Ar(e.updateTime),u=e.createTime?Ar(e.createTime):vt.min(),l=new gi({mapValue:{fields:e.fields}}),m=Fn.newFoundDocument(r,o,u,l);return t&&m.setHasCommittedMutations(),t?m.setHasCommittedMutations():m}function Ef(n,e){let t;if(e instanceof cd)t={update:rw(n,e.key,e.value)};else if(e instanceof gf)t={delete:ya(n,e.key)};else if(e instanceof Du)t={update:rw(n,e.key,e.data),updateMask:dS(e.fieldMask)};else{if(!(e instanceof z0))return st();t={verify:ya(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,u){const l=u.transform;if(l instanceof ff)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Pc)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof ma)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof ud)return{fieldPath:u.field.canonicalString(),increment:l.gt};throw st()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:Mt(n,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:st()),t;var o}function qy(n,e){const t=e.currentDocument?void 0!==(o=e.currentDocument).updateTime?Mn.updateTime(Ar(o.updateTime)):void 0!==o.exists?Mn.exists(o.exists):Mn.none():Mn.none(),r=e.updateTransforms?e.updateTransforms.map(o=>function(u,l){let m=null;"setToServerValue"in l?(ct("REQUEST_TIME"===l.setToServerValue),m=new ff):"appendMissingElements"in l?m=new Pc(l.appendMissingElements.values||[]):"removeAllFromArray"in l?m=new ma(l.removeAllFromArray.values||[]):"increment"in l?m=new ud(u,l.increment):st();const I=dr.fromServerFormat(l.fieldPath);return new Eg(I,m)}(n,o)):[];var o;if(e.update){const o=va(n,e.update.name),u=new gi({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=new hs((e.updateMask.fieldPaths||[]).map(b=>dr.fromServerFormat(b)));return new Du(o,u,l,t,r)}return new cd(o,u,t,r)}if(e.delete){const o=va(n,e.delete);return new gf(o,t)}if(e.verify){const o=va(n,e.verify);return new z0(o,t)}return st()}function $D(n,e){return{documents:[wf(n,e.path)]}}function sw(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=wf(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=wf(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const o=function(I){if(0!==I.length)return ow(vn.create(I,"and"))}(e.filters);o&&(t.structuredQuery.where=o);const u=function(I){if(0!==I.length)return I.map(b=>{return{field:Cu((A=b).field),direction:cS(A.dir)};var A})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const l=zy(n,e.limit);var m,I;return null!==l&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt={before:(m=e.startAt).inclusive,values:m.position}),e.endAt&&(t.structuredQuery.endAt={before:!(I=e.endAt).inclusive,values:I.position}),t}function HD(n){let e=bg(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){ct(1===r);const A=t.from[0];A.allDescendants?o=A.collectionId:e=e.child(A.collectionId)}let u=[];t.where&&(u=function(A){const R=GD(A);return R instanceof vn&&M0(R)?R.getFilters():[R]}(t.where));let l=[];t.orderBy&&(l=t.orderBy.map(A=>{return new sd(hd((R=A).field),function(H){switch(H){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(R.direction));var R}));let m=null;t.limit&&(m=function(A){let R;return R="object"==typeof A?A.value:A,Xl(R)?null:R}(t.limit));let I=null;var A;t.startAt&&(I=new fa((A=t.startAt).values||[],!!A.before));let b=null;return t.endAt&&(b=function(A){return new fa(A.values||[],!A.before)}(t.endAt)),_D(e,o,l,u,m,"F",I,b)}function GD(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=hd(e.unaryFilter.field);return Xt.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=hd(e.unaryFilter.field);return Xt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=hd(e.unaryFilter.field);return Xt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=hd(e.unaryFilter.field);return Xt.create(u,"!=",{nullValue:"NULL_VALUE"});default:return st()}}(n):void 0!==n.fieldFilter?Xt.create(hd((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return st()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return vn.create(e.compositeFilter.filters.map(t=>GD(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return st()}}(e.compositeFilter.op))}(n):st();var e}function cS(n){return _f[n]}function lS(n){return LM[n]}function Wy(n){return tw[n]}function Cu(n){return{fieldPath:n.canonicalString()}}function hd(n){return dr.fromServerFormat(n.fieldPath)}function ow(n){return n instanceof Xt?function(e){if("=="===e.op){if(E0(e.value))return{unaryFilter:{field:Cu(e.field),op:"IS_NAN"}};if(My(e.value))return{unaryFilter:{field:Cu(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(E0(e.value))return{unaryFilter:{field:Cu(e.field),op:"IS_NOT_NAN"}};if(My(e.value))return{unaryFilter:{field:Cu(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Cu(e.field),op:lS(e.op),value:e.value}}}(n):n instanceof vn?function(e){const t=e.getFilters().map(r=>ow(r));return 1===t.length?t[0]:{compositeFilter:{op:Wy(e.op),filters:t}}}(n):st()}function dS(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function If(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class Ns{constructor(e,t,r,o,u=vt.min(),l=vt.min(),m=Tr.EMPTY_BYTE_STRING,I=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=m,this.expectedCount=I}withSequenceNumber(e){return new Ns(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ns(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ns(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ns(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class zD{constructor(e){this.fe=e}}function qD(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Sg(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:ya(o=n.fe,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:dd(o,u.version.toTimestamp()),createTime:dd(o,u.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:kc(e.version)};else{if(!e.isUnknownDocument())return st();r.unknownDocument={path:t.path.toArray(),version:kc(e.version)}}var o,u;return r}function Sg(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function kc(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Fc(n){const e=new Xn(n.seconds,n.nanoseconds);return vt.fromTimestamp(e)}function fd(n,e){const t=(e.baseMutations||[]).map(u=>qy(n.fe,u));for(let u=0;u<e.mutations.length-1;++u)u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(e.mutations[u].updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u);const r=e.mutations.map(u=>qy(n.fe,u)),o=Xn.fromMillis(e.localWriteTimeMs);return new q0(e.batchId,o,t,r)}function Df(n){const e=Fc(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Fc(n.lastLimboFreeSnapshotVersion):vt.min();let r;var o;return void 0!==n.query.documents?(ct(1===(o=n.query).documents.length),r=Zi(df(bg(o.documents[0])))):r=Zi(HD(n.query)),new Ns(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Tr.fromBase64String(n.resumeToken))}function WD(n,e){const t=kc(e.snapshotVersion),r=kc(e.lastLimboFreeSnapshotVersion);let o;o=lf(e.target)?$D(n.fe,e.target):sw(n.fe,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Iu(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:o}}function aw(n){const e=HD({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Uy(e,e.limit,"L"):e}function ZD(n,e){return new Z0(e.largestBatchId,qy(n.fe,e.overlayMutation))}function fS(n,e){const t=e.path.lastSegment();return[n,br(e.path.popLast()),t]}function pS(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:kc(r.readTime),documentKey:br(r.documentKey.path),largestBatchId:r.largestBatchId}}class UM{getBundleMetadata(e,t){return uw(e).get(t).next(r=>{if(r)return{id:(o=r).bundleId,createTime:Fc(o.createTime),version:o.version};var o})}saveBundleMetadata(e,t){return uw(e).put({bundleId:(r=t).id,createTime:kc(Ar(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return Ag(e).get(t).next(r=>{if(r)return{name:(o=r).name,query:aw(o.bundledQuery),readTime:Fc(o.readTime)};var o})}saveNamedQuery(e,t){return Ag(e).put({name:(r=t).name,readTime:kc(Ar(r.readTime)),bundledQuery:r.bundledQuery});var r}}function uw(n){return Lr(n,"bundles")}function Ag(n){return Lr(n,"namedQueries")}class Zy{constructor(e,t){this.serializer=e,this.userId=t}static de(e,t){return new Zy(e,t.uid||"")}getOverlay(e,t){return Mg(e).get(fS(this.userId,t)).next(r=>r?ZD(this.serializer,r):null)}getOverlays(e,t){const r=ga();return re.forEach(t,o=>this.getOverlay(e,o).next(u=>{null!==u&&r.set(o,u)})).next(()=>r)}saveOverlays(e,t,r){const o=[];return r.forEach((u,l)=>{const m=new Z0(t,l);o.push(this.we(e,m))}),re.waitFor(o)}removeOverlaysForBatchId(e,t,r){const o=new Set;t.forEach(l=>o.add(br(l.getCollectionPath())));const u=[];return o.forEach(l=>{const m=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);u.push(Mg(e).J("collectionPathOverlayIndex",m))}),re.waitFor(u)}getOverlaysForCollection(e,t,r){const o=ga(),u=br(t),l=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return Mg(e).j("collectionPathOverlayIndex",l).next(m=>{for(const I of m){const b=ZD(this.serializer,I);o.set(b.getKey(),b)}return o})}getOverlaysForCollectionGroup(e,t,r,o){const u=ga();let l;const m=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Mg(e).X({index:"collectionGroupOverlayIndex",range:m},(I,b,A)=>{const R=ZD(this.serializer,b);u.size()<o||R.largestBatchId===l?(u.set(R.getKey(),R),l=R.largestBatchId):A.done()}).next(()=>u)}we(e,t){return Mg(e).put(function(r,o,u){const[l,m,I]=fS(o,u.mutation.key);return{userId:o,collectionPath:m,documentId:I,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:Ef(r.fe,u.mutation)}}(this.serializer,this.userId,t))}}function Mg(n){return Lr(n,"documentOverlays")}class Lc{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(Sr(e.integerValue));else if("doubleValue"in e){const r=Sr(e.doubleValue);isNaN(r)?this.ye(t,13):(this.ye(t,15),da(r)?t.pe(0):t.pe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ye(t,20),"string"==typeof r?t.Ie(r):(t.Ie(`${r.seconds||""}`),t.pe(r.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(wu(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ye(t,45),t.pe(r.latitude||0),t.pe(r.longitude||0)}else"mapValue"in e?hD(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):st()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const r=e.fields||{};this.ye(t,55);for(const o of Object.keys(r))this.Te(o,t),this.me(r[o],t)}Pe(e,t){const r=e.values||[];this.ye(t,50);for(const o of r)this.me(o,t)}ve(e,t){this.ye(t,37),Qe.fromName(e).path.forEach(r=>{this.ye(t,60),this.be(r,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}function xg(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function KD(n){const e=64-function(t){let r=0;for(let o=0;o<8;++o){const u=xg(255&t[o]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}Lc.Ve=new Lc;class gS{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.De(r.value),r=t.next();this.Ce()}xe(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ne(r.value),r=t.next();this.ke()}Me(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.De(r);else if(r<2048)this.De(960|r>>>6),this.De(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.De(480|r>>>12),this.De(128|63&r>>>6),this.De(128|63&r);else{const o=t.codePointAt(0);this.De(240|o>>>18),this.De(128|63&o>>>12),this.De(128|63&o>>>6),this.De(128|63&o)}}this.Ce()}$e(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ne(r);else if(r<2048)this.Ne(960|r>>>6),this.Ne(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ne(480|r>>>12),this.Ne(128|63&r>>>6),this.Ne(128|63&r);else{const o=t.codePointAt(0);this.Ne(240|o>>>18),this.Ne(128|63&o>>>12),this.Ne(128|63&o>>>6),this.Ne(128|63&o)}}this.ke()}Oe(e){const t=this.Fe(e),r=KD(t);this.Be(1+r),this.buffer[this.position++]=255&r;for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=255&t[o]}Le(e){const t=this.Fe(e),r=KD(t);this.Be(1+r),this.buffer[this.position++]=~(255&r);for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=~(255&t[o])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}Qe(){return this.buffer.slice(0,this.position)}Fe(e){const t=function(o){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,o,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let o=1;o<t.length;++o)t[o]^=r?255:0;return t}De(e){const t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}Ne(e){const t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(e){this.Be(1),this.buffer[this.position++]=e}Ge(e){this.Be(1),this.buffer[this.position++]=~e}Be(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const o=new Uint8Array(r);o.set(this.buffer),this.buffer=o}}class mS{constructor(e){this.je=e}Ae(e){this.je.Se(e)}Ie(e){this.je.Me(e)}pe(e){this.je.Oe(e)}ge(){this.je.qe()}}class yS{constructor(e){this.je=e}Ae(e){this.je.xe(e)}Ie(e){this.je.$e(e)}pe(e){this.je.Le(e)}ge(){this.je.Ke()}}class Ky{constructor(){this.je=new gS,this.ze=new mS(this.je),this.We=new yS(this.je)}seed(e){this.je.seed(e)}He(e){return 0===e?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}class pd{constructor(e,t,r,o){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=o}Je(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new pd(this.indexId,this.documentKey,this.arrayValue,r)}}function bu(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=YD(n.arrayValue,e.arrayValue),0!==t?t:(t=YD(n.directionalValue,e.directionalValue),0!==t?t:Qe.comparator(n.documentKey,e.documentKey)))}function YD(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class vS{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ye=e.orderBy,this.Xe=[];for(const t of e.filters){const r=t;r.isInequality()?this.Ze=r:this.Xe.push(r)}}tn(e){ct(e.collectionGroup===this.collectionId);const t=dg(e);if(void 0!==t&&!this.en(t))return!1;const r=Ql(e);let o=new Set,u=0,l=0;for(;u<r.length&&this.en(r[u]);++u)o=o.add(r[u].fieldPath.canonicalString());if(u===r.length)return!0;if(void 0!==this.Ze){if(!o.has(this.Ze.field.canonicalString())){const m=r[u];if(!this.nn(this.Ze,m)||!this.sn(this.Ye[l++],m))return!1}++u}for(;u<r.length;++u)if(l>=this.Ye.length||!this.sn(this.Ye[l++],r[u]))return!1;return!0}en(e){for(const t of this.Xe)if(this.nn(t,e))return!0;return!1}nn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function Cf(n){var e,t;if(ct(n instanceof Xt||n instanceof vn),n instanceof Xt){if(n instanceof O0){const o=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(u=>Xt.create(n.field,"==",u)))||[];return vn.create(o,"or")}return n}const r=n.filters.map(o=>Cf(o));return vn.create(r,n.op)}function _S(n){if(0===n.getFilters().length)return[];const e=dw(Cf(n));return ct(lw(e)),Yy(e)||cw(e)?[e]:e.getFilters()}function Yy(n){return n instanceof Xt}function cw(n){return n instanceof vn&&M0(n)}function lw(n){return Yy(n)||cw(n)||function(e){if(e instanceof vn&&A0(e)){for(const t of e.getFilters())if(!Yy(t)&&!cw(t))return!1;return!0}return!1}(n)}function dw(n){if(ct(n instanceof Xt||n instanceof vn),n instanceof Xt)return n;if(1===n.filters.length)return dw(n.filters[0]);const e=n.filters.map(r=>dw(r));let t=vn.create(e,n.op);return t=bf(t),lw(t)?t:(ct(t instanceof vn),ct(od(t)),ct(t.filters.length>1),t.filters.reduce((r,o)=>Qy(r,o)))}function Qy(n,e){let t;return ct(n instanceof Xt||n instanceof vn),ct(e instanceof Xt||e instanceof vn),t=n instanceof Xt?e instanceof Xt?vn.create([n,e],"and"):QD(n,e):e instanceof Xt?QD(e,n):function(r,o){if(ct(r.filters.length>0&&o.filters.length>0),od(r)&&od(o))return x0(r,o.getFilters());const u=A0(r)?r:o,l=A0(r)?o:r,m=u.filters.map(I=>Qy(I,l));return vn.create(m,"or")}(n,e),bf(t)}function QD(n,e){if(od(e))return x0(e,n.getFilters());{const t=e.filters.map(r=>Qy(n,r));return vn.create(t,"or")}}function bf(n){if(ct(n instanceof Xt||n instanceof vn),n instanceof Xt)return n;const e=n.getFilters();if(1===e.length)return bf(e[0]);if(pD(n))return n;const t=e.map(o=>bf(o)),r=[];return t.forEach(o=>{o instanceof Xt?r.push(o):o instanceof vn&&(o.op===n.op?r.push(...o.filters):r.push(o))}),1===r.length?r[0]:vn.create(r,n.op)}class wS{constructor(){this.rn=new Jy}addToCollectionParentIndex(e,t){return this.rn.add(t),re.resolve()}getCollectionParents(e,t){return re.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return re.resolve()}deleteFieldIndex(e,t){return re.resolve()}getDocumentsMatchingTarget(e,t){return re.resolve(null)}getIndexType(e,t){return re.resolve(0)}getFieldIndexes(e,t){return re.resolve([])}getNextCollectionGroupToUpdate(e){return re.resolve(null)}getMinOffset(e,t){return re.resolve(xs.min())}getMinOffsetFromCollectionGroup(e,t){return re.resolve(xs.min())}updateCollectionGroup(e,t,r){return re.resolve()}updateIndexEntries(e,t){return re.resolve()}}class Jy{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new zn(sn.comparator),u=!o.has(r);return this.index[t]=o.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new zn(sn.comparator)).toArray()}}const Ng=new Uint8Array(0);class ES{constructor(e,t){this.user=e,this.databaseId=t,this.on=new Jy,this.un=new pa(r=>Iu(r),(r,o)=>Mo(r,o)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.on.has(t)){const r=t.lastSegment(),o=t.popLast();e.addOnCommittedListener(()=>{this.on.add(t)});const u={collectionId:r,parent:br(o)};return JD(e).put(u)}return re.resolve()}getCollectionParents(e,t){const r=[],o=IDBKeyRange.bound([t,""],[VT(t),""],!1,!0);return JD(e).j(o).next(u=>{for(const l of u){if(l.collectionId!==t)break;r.push(Wi(l.parent))}return r})}addFieldIndex(e,t){const r=Tf(e),o={indexId:(l=t).indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(m=>[m.fieldPath.canonicalString(),m.kind])};var l;delete o.indexId;const u=r.add(o);if(t.indexState){const l=Og(e);return u.next(m=>{l.put(pS(m,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return u.next()}deleteFieldIndex(e,t){const r=Tf(e),o=Og(e),u=Rg(e);return r.delete(t.indexId).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=Rg(e);let o=!0;const u=new Map;return re.forEach(this.cn(t),l=>this.an(e,l).next(m=>{o&&(o=!!m),u.set(l,m)})).next(()=>{if(o){let l=$t();const m=[];return re.forEach(u,(I,b)=>{var A;Pe("IndexedDbIndexManager",`Using index ${A=I,`id=${A.indexId}|cg=${A.collectionGroup}|f=${A.fields.map(St=>`${St.fieldPath}:${St.kind}`).join(",")}`} to execute ${Iu(t)}`);const R=function(St,Pt){const zt=dg(Pt);if(void 0===zt)return null;for(const cn of ky(St,zt.fieldPath))switch(cn.op){case"array-contains-any":return cn.value.arrayValue.values||[];case"array-contains":return[cn.value]}return null}(b,I),H=function(St,Pt){const zt=new Map;for(const cn of Ql(Pt))for(const ps of ky(St,cn.fieldPath))switch(ps.op){case"==":case"in":zt.set(cn.fieldPath.canonicalString(),ps.value);break;case"not-in":case"!=":return zt.set(cn.fieldPath.canonicalString(),ps.value),Array.from(zt.values())}return null}(b,I),X=function(St,Pt){const zt=[];let cn=!0;for(const ps of Ql(Pt)){const mm=0===ps.kind?Fy(St,ps.fieldPath,St.startAt):XT(St,ps.fieldPath,St.startAt);zt.push(mm.value),cn&&(cn=mm.inclusive)}return new fa(zt,cn)}(b,I),ye=function(St,Pt){const zt=[];let cn=!0;for(const ps of Ql(Pt)){const mm=0===ps.kind?XT(St,ps.fieldPath,St.endAt):Fy(St,ps.fieldPath,St.endAt);zt.push(mm.value),cn&&(cn=mm.inclusive)}return new fa(zt,cn)}(b,I),ke=this.hn(I,b,X),Ue=this.hn(I,b,ye),wt=this.ln(I,b,H),Rt=this.fn(I.indexId,R,ke,X.inclusive,Ue,ye.inclusive,wt);return re.forEach(Rt,St=>r.H(St,t.limit).next(Pt=>{Pt.forEach(zt=>{const cn=Qe.fromSegments(zt.documentKey);l.has(cn)||(l=l.add(cn),m.push(cn))})}))}).next(()=>m)}return re.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:_S(vn.create(e.filters,"and")).map(r=>P0(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}fn(e,t,r,o,u,l,m){const I=(null!=t?t.length:1)*Math.max(r.length,u.length),b=I/(null!=t?t.length:1),A=[];for(let R=0;R<I;++R){const H=t?this.dn(t[R/b]):Ng,X=this.wn(e,H,r[R%b],o),ye=this._n(e,H,u[R%b],l),ke=m.map(Ue=>this.wn(e,H,Ue,!0));A.push(...this.createRange(X,ye,ke))}return A}wn(e,t,r,o){const u=new pd(e,Qe.empty(),t,r);return o?u:u.Je()}_n(e,t,r,o){const u=new pd(e,Qe.empty(),t,r);return o?u.Je():u}an(e,t){const r=new vS(t),o=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,o).next(u=>{let l=null;for(const m of u)r.tn(m)&&(!l||m.fields.length>l.fields.length)&&(l=m);return l})}getIndexType(e,t){let r=2;const o=this.cn(t);return re.forEach(o,u=>this.an(e,u).next(l=>{l?0!==r&&l.fields.length<function(m){let I=new zn(dr.comparator),b=!1;for(const A of m.filters)for(const R of A.getFlattenedFilters())R.field.isKeyField()||("array-contains"===R.op||"array-contains-any"===R.op?b=!0:I=I.add(R.field));for(const A of m.orderBy)A.field.isKeyField()||(I=I.add(A.field));return I.size+(b?1:0)}(u)&&(r=1):r=0})).next(()=>null!==t.limit&&o.length>1&&2===r?1:r)}mn(e,t){const r=new Ky;for(const o of Ql(e)){const u=t.data.field(o.fieldPath);if(null==u)return null;const l=r.He(o.kind);Lc.Ve._e(u,l)}return r.Qe()}dn(e){const t=new Ky;return Lc.Ve._e(e,t.He(0)),t.Qe()}gn(e,t){const r=new Ky;return Lc.Ve._e(id(this.databaseId,t),r.He(function(o){const u=Ql(o);return 0===u.length?0:u[u.length-1].kind}(e))),r.Qe()}ln(e,t,r){if(null===r)return[];let o=[];o.push(new Ky);let u=0;for(const l of Ql(e)){const m=r[u++];for(const I of o)if(this.yn(t,l.fieldPath)&&Mc(m))o=this.pn(o,l,m);else{const b=I.He(l.kind);Lc.Ve._e(m,b)}}return this.In(o)}hn(e,t,r){return this.ln(e,t,r.position)}In(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Qe();return t}pn(e,t,r){const o=[...e],u=[];for(const l of r.arrayValue.values||[])for(const m of o){const I=new Ky;I.seed(m.Qe()),Lc.Ve._e(l,I.He(t.kind)),u.push(I)}return u}yn(e,t){return!!e.filters.find(r=>r instanceof Xt&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=Tf(e),o=Og(e);return(t?r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.j()).next(u=>{const l=[];return re.forEach(u,m=>o.get([m.indexId,this.uid]).next(I=>{l.push(function(b,A){const R=A?new hg(A.sequenceNumber,new xs(Fc(A.readTime),new Qe(Wi(A.documentKey)),A.largestBatchId)):hg.empty(),H=b.fields.map(([X,ye])=>new by(dr.fromServerFormat(X),ye));return new lg(b.indexId,b.collectionGroup,H,R)}(m,I))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,o)=>{const u=r.indexState.sequenceNumber-o.indexState.sequenceNumber;return 0!==u?u:xt(r.collectionGroup,o.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const o=Tf(e),u=Og(e);return this.Tn(e).next(l=>o.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(m=>re.forEach(m,I=>u.put(pS(I.indexId,this.user,l,r)))))}updateIndexEntries(e,t){const r=new Map;return re.forEach(t,(o,u)=>{const l=r.get(o.collectionGroup);return(l?re.resolve(l):this.getFieldIndexes(e,o.collectionGroup)).next(m=>(r.set(o.collectionGroup,m),re.forEach(m,I=>this.En(e,o,I).next(b=>{const A=this.An(u,I);return b.isEqual(A)?re.resolve():this.vn(e,u,I,b,A)}))))})}Rn(e,t,r,o){return Rg(e).put({indexId:o.indexId,uid:this.uid,arrayValue:o.arrayValue,directionalValue:o.directionalValue,orderedDocumentKey:this.gn(r,t.key),documentKey:t.key.path.toArray()})}Pn(e,t,r,o){return Rg(e).delete([o.indexId,this.uid,o.arrayValue,o.directionalValue,this.gn(r,t.key),t.key.path.toArray()])}En(e,t,r){const o=Rg(e);let u=new zn(bu);return o.X({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.gn(r,t)])},(l,m)=>{u=u.add(new pd(r.indexId,t,m.arrayValue,m.directionalValue))}).next(()=>u)}An(e,t){let r=new zn(bu);const o=this.mn(t,e);if(null==o)return r;const u=dg(t);if(null!=u){const l=e.data.field(u.fieldPath);if(Mc(l))for(const m of l.arrayValue.values||[])r=r.add(new pd(t.indexId,e.key,this.dn(m),o))}else r=r.add(new pd(t.indexId,e.key,Ng,o));return r}vn(e,t,r,o,u){Pe("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const l=[];return function(m,I,b,A,R){const H=m.getIterator(),X=I.getIterator();let ye=rf(H),ke=rf(X);for(;ye||ke;){let Ue=!1,wt=!1;if(ye&&ke){const Rt=b(ye,ke);Rt<0?wt=!0:Rt>0&&(Ue=!0)}else null!=ye?wt=!0:Ue=!0;Ue?(A(ke),ke=rf(X)):wt?(R(ye),ye=rf(H)):(ye=rf(H),ke=rf(X))}}(o,u,bu,m=>{l.push(this.Rn(e,t,r,m))},m=>{l.push(this.Pn(e,t,r,m))}),re.waitFor(l)}Tn(e){let t=1;return Og(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,o,u)=>{u.done(),t=o.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((l,m)=>bu(l,m)).filter((l,m,I)=>!m||0!==bu(l,I[m-1]));const o=[];o.push(e);for(const l of r){const m=bu(l,e),I=bu(l,t);if(0===m)o[0]=e.Je();else if(m>0&&I<0)o.push(l),o.push(l.Je());else if(I>0)break}o.push(t);const u=[];for(let l=0;l<o.length;l+=2){if(this.bn(o[l],o[l+1]))return[];u.push(IDBKeyRange.bound([o[l].indexId,this.uid,o[l].arrayValue,o[l].directionalValue,Ng,[]],[o[l+1].indexId,this.uid,o[l+1].arrayValue,o[l+1].directionalValue,Ng,[]]))}return u}bn(e,t){return bu(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(hw)}getMinOffset(e,t){return re.mapArray(this.cn(t),r=>this.an(e,r).next(o=>o||st())).next(hw)}}function JD(n){return Lr(n,"collectionParents")}function Rg(n){return Lr(n,"indexEntries")}function Tf(n){return Lr(n,"indexConfiguration")}function Og(n){return Lr(n,"indexState")}function hw(n){ct(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const o=n[r].indexState.offset;g0(o,e)<0&&(e=o),t<o.largestBatchId&&(t=o.largestBatchId)}return new xs(e.readTime,e.documentKey,t)}const XD={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Oi{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Oi(e,Oi.DEFAULT_COLLECTION_PERCENTILE,Oi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function eC(n,e,t){const r=n.store("mutations"),o=n.store("documentMutations"),u=[],l=IDBKeyRange.only(t.batchId);let m=0;const I=r.X({range:l},(A,R,H)=>(m++,H.delete()));u.push(I.next(()=>{ct(1===m)}));const b=[];for(const A of t.mutations){const R=rd(e,A.key.path,t.batchId);u.push(o.delete(R)),b.push(A.key)}return re.waitFor(u).next(()=>b)}function Xy(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw st();e=n.noDocument}return JSON.stringify(e).length}Oi.DEFAULT_COLLECTION_PERCENTILE=10,Oi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Oi.DEFAULT=new Oi(41943040,Oi.DEFAULT_COLLECTION_PERCENTILE,Oi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Oi.DISABLED=new Oi(-1,0,0);class ev{constructor(e,t,r,o){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=o,this.Vn={}}static de(e,t,r,o){ct(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new ev(u,t,r,o)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Vc(e).X({index:"userMutationsIndex",range:r},(o,u,l)=>{t=!1,l.done()}).next(()=>t)}addMutationBatch(e,t,r,o){const u=Sf(e),l=Vc(e);return l.add({}).next(m=>{ct("number"==typeof m);const I=new q0(m,t,r,o),b=function(H,X,ye){const ke=ye.baseMutations.map(wt=>Ef(H.fe,wt)),Ue=ye.mutations.map(wt=>Ef(H.fe,wt));return{userId:X,batchId:ye.batchId,localWriteTimeMs:ye.localWriteTime.toMillis(),baseMutations:ke,mutations:Ue}}(this.serializer,this.userId,I),A=[];let R=new zn((H,X)=>xt(H.canonicalString(),X.canonicalString()));for(const H of o){const X=rd(this.userId,H.key.path,m);R=R.add(H.key.path.popLast()),A.push(l.put(b)),A.push(u.put(X,XI))}return R.forEach(H=>{A.push(this.indexManager.addToCollectionParentIndex(e,H))}),e.addOnCommittedListener(()=>{this.Vn[m]=I.keys()}),re.waitFor(A).next(()=>I)})}lookupMutationBatch(e,t){return Vc(e).get(t).next(r=>r?(ct(r.userId===this.userId),fd(this.serializer,r)):null)}Sn(e,t){return this.Vn[t]?re.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const o=r.keys();return this.Vn[t]=o,o}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return Vc(e).X({index:"userMutationsIndex",range:o},(l,m,I)=>{m.userId===this.userId&&(ct(m.batchId>=r),u=fd(this.serializer,m)),I.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Vc(e).X({index:"userMutationsIndex",range:t,reverse:!0},(o,u,l)=>{r=u.batchId,l.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Vc(e).j("userMutationsIndex",t).next(r=>r.map(o=>fd(this.serializer,o)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=_u(this.userId,t.path),o=IDBKeyRange.lowerBound(r),u=[];return Sf(e).X({range:o},(l,m,I)=>{const[b,A,R]=l,H=Wi(A);if(b===this.userId&&t.path.isEqual(H))return Vc(e).get(R).next(X=>{if(!X)throw st();ct(X.userId===this.userId),u.push(fd(this.serializer,X))});I.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new zn(xt);const o=[];return t.forEach(u=>{const l=_u(this.userId,u.path),m=IDBKeyRange.lowerBound(l),I=Sf(e).X({range:m},(b,A,R)=>{const[H,X,ye]=b,ke=Wi(X);H===this.userId&&u.path.isEqual(ke)?r=r.add(ye):R.done()});o.push(I)}),re.waitFor(o).next(()=>this.Dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1,u=_u(this.userId,r),l=IDBKeyRange.lowerBound(u);let m=new zn(xt);return Sf(e).X({range:l},(I,b,A)=>{const[R,H,X]=I,ye=Wi(H);R===this.userId&&r.isPrefixOf(ye)?ye.length===o&&(m=m.add(X)):A.done()}).next(()=>this.Dn(e,m))}Dn(e,t){const r=[],o=[];return t.forEach(u=>{o.push(Vc(e).get(u).next(l=>{if(null===l)throw st();ct(l.userId===this.userId),r.push(fd(this.serializer,l))}))}),re.waitFor(o).next(()=>r)}removeMutationBatch(e,t){return eC(e.ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Cn(t.batchId)}),re.forEach(r,o=>this.referenceDelegate.markPotentiallyOrphaned(e,o))))}Cn(e){delete this.Vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return re.resolve();const r=IDBKeyRange.lowerBound([this.userId]),o=[];return Sf(e).X({range:r},(u,l,m)=>{if(u[0]===this.userId){const I=Wi(u[1]);o.push(I)}else m.done()}).next(()=>{ct(0===o.length)})})}containsKey(e,t){return tC(e,this.userId,t)}xn(e){return fw(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function tC(n,e,t){const r=_u(e,t.path),o=r[1],u=IDBKeyRange.lowerBound(r);let l=!1;return Sf(n).X({range:u,Y:!0},(m,I,b)=>{const[A,R,H]=m;A===e&&R===o&&(l=!0),b.done()}).next(()=>l)}function Vc(n){return Lr(n,"mutations")}function Sf(n){return Lr(n,"documentMutations")}function fw(n){return Lr(n,"mutationQueues")}class Uc{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new Uc(0)}static Mn(){return new Uc(-1)}}class IS{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.$n(e).next(t=>{const r=new Uc(t.highestTargetId);return t.highestTargetId=r.next(),this.On(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.$n(e).next(t=>vt.fromTimestamp(new Xn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.$n(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.$n(e).next(o=>(o.highestListenSequenceNumber=t,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),t>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=t),this.On(e,o)))}addTargetData(e,t){return this.Fn(e,t).next(()=>this.$n(e).next(r=>(r.targetCount+=1,this.Bn(t,r),this.On(e,r))))}updateTargetData(e,t){return this.Fn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Af(e).delete(t.targetId)).next(()=>this.$n(e)).next(r=>(ct(r.targetCount>0),r.targetCount-=1,this.On(e,r)))}removeTargets(e,t,r){let o=0;const u=[];return Af(e).X((l,m)=>{const I=Df(m);I.sequenceNumber<=t&&null===r.get(I.targetId)&&(o++,u.push(this.removeTargetData(e,I)))}).next(()=>re.waitFor(u)).next(()=>o)}forEachTarget(e,t){return Af(e).X((r,o)=>{const u=Df(o);t(u)})}$n(e){return pw(e).get("targetGlobalKey").next(t=>(ct(null!==t),t))}On(e,t){return pw(e).put("targetGlobalKey",t)}Fn(e,t){return Af(e).put(WD(this.serializer,t))}Bn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.$n(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Iu(t),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return Af(e).X({range:o,index:"queryTargetsIndex"},(l,m,I)=>{const b=Df(m);Mo(t,b.target)&&(u=b,I.done())}).next(()=>u)}addMatchingKeys(e,t,r){const o=[],u=Bc(e);return t.forEach(l=>{const m=br(l.path);o.push(u.put({targetId:r,path:m})),o.push(this.referenceDelegate.addReference(e,r,l))}),re.waitFor(o)}removeMatchingKeys(e,t,r){const o=Bc(e);return re.forEach(t,u=>{const l=br(u.path);return re.waitFor([o.delete([r,l]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=Bc(e),o=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),o=Bc(e);let u=$t();return o.X({range:r,Y:!0},(l,m,I)=>{const b=Wi(l[1]),A=new Qe(b);u=u.add(A)}).next(()=>u)}containsKey(e,t){const r=br(t.path),o=IDBKeyRange.bound([r],[VT(r)],!1,!0);let u=0;return Bc(e).X({index:"documentTargetsIndex",Y:!0,range:o},([l,m],I,b)=>{0!==l&&(u++,b.done())}).next(()=>u>0)}le(e,t){return Af(e).get(t).next(r=>r?Df(r):null)}}function Af(n){return Lr(n,"targets")}function pw(n){return Lr(n,"targetGlobal")}function Bc(n){return Lr(n,"targetDocuments")}function nC([n,e],[t,r]){const o=xt(n,t);return 0===o?xt(e,r):o}class DS{constructor(e){this.Ln=e,this.buffer=new zn(nC),this.qn=0}Un(){return++this.qn}Kn(e){const t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();nC(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class tv{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(e){var t=this;Pe("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,ge.Z)(function*(){t.Gn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){la(r)?Pe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Cc(r)}yield t.Qn(3e5)}))}}class gw{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.zn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return re.resolve(er.ct);const r=new DS(t);return this.jn.forEachTarget(e,o=>r.Kn(o.sequenceNumber)).next(()=>this.jn.Wn(e,o=>r.Kn(o))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Pe("LruGarbageCollector","Garbage collection skipped; disabled"),re.resolve(XD)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Pe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),XD):this.Hn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Hn(e,t){let r,o,u,l,m,I,b;const A=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(R=>(R>this.params.maximumSequenceNumbersToCollect?(Pe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${R}`),o=this.params.maximumSequenceNumbersToCollect):o=R,l=Date.now(),this.nthSequenceNumber(e,o))).next(R=>(r=R,m=Date.now(),this.removeTargets(e,r,t))).next(R=>(u=R,I=Date.now(),this.removeOrphanedDocuments(e,r))).next(R=>(b=Date.now(),og()<=Ys.in.DEBUG&&Pe("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${l-A}ms\n\tDetermined least recently used ${o} in `+(m-l)+`ms\n\tRemoved ${u} targets in `+(I-m)+`ms\n\tRemoved ${R} documents in `+(b-I)+`ms\nTotal Duration: ${b-A}ms`),re.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:R})))}}class yw{constructor(e,t){this.db=e,this.garbageCollector=function mw(n,e){return new gw(n,e)}(this,t)}zn(e){const t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(o=>r+o))}Jn(e){let t=0;return this.Wn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Wn(e,t){return this.Yn(e,(r,o)=>t(o))}addReference(e,t,r){return nv(e,r)}removeReference(e,t,r){return nv(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return nv(e,t)}Xn(e,t){return function(r,o){let u=!1;return fw(r).Z(l=>tC(r,l,o).next(m=>(m&&(u=!0),re.resolve(!m)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let u=0;return this.Yn(e,(l,m)=>{if(m<=t){const I=this.Xn(e,l).next(b=>{if(!b)return u++,r.getEntry(e,l).next(()=>(r.removeEntry(l,vt.min()),Bc(e).delete([0,br(l.path)])))});o.push(I)}}).next(()=>re.waitFor(o)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return nv(e,t)}Yn(e,t){const r=Bc(e);let o,u=er.ct;return r.X({index:"documentTargetsIndex"},([l,m],{path:I,sequenceNumber:b})=>{0===l?(u!==er.ct&&t(new Qe(Wi(o)),u),u=b,o=I):u=er.ct}).next(()=>{u!==er.ct&&t(new Qe(Wi(o)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function nv(n,e){return Bc(n).put((r=n.currentSequenceNumber,{targetId:0,path:br(e.path),sequenceNumber:r}));var r}class rC{constructor(){this.changes=new pa(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Fn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?re.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class vw{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return jc(e).put(r)}removeEntry(e,t,r){return jc(e).delete(function(o,u){const l=o.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],Sg(u),l[l.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Zn(e,r)))}getEntry(e,t){let r=Fn.newInvalidDocument(t);return jc(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Pg(t))},(o,u)=>{r=this.ts(t,u)}).next(()=>r)}es(e,t){let r={size:0,document:Fn.newInvalidDocument(t)};return jc(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Pg(t))},(o,u)=>{r={document:this.ts(t,u),size:Xy(u)}}).next(()=>r)}getEntries(e,t){let r=Ki();return this.ns(e,t,(o,u)=>{const l=this.ts(o,u);r=r.insert(o,l)}).next(()=>r)}ss(e,t){let r=Ki(),o=new An(Qe.comparator);return this.ns(e,t,(u,l)=>{const m=this.ts(u,l);r=r.insert(u,m),o=o.insert(u,Xy(l))}).next(()=>({documents:r,rs:o}))}ns(e,t,r){if(t.isEmpty())return re.resolve();let o=new zn(rv);t.forEach(I=>o=o.add(I));const u=IDBKeyRange.bound(Pg(o.first()),Pg(o.last())),l=o.getIterator();let m=l.getNext();return jc(e).X({index:"documentKeyIndex",range:u},(I,b,A)=>{const R=Qe.fromSegments([...b.prefixPath,b.collectionGroup,b.documentId]);for(;m&&rv(m,R)<0;)r(m,null),m=l.getNext();m&&m.isEqual(R)&&(r(m,b),m=l.hasNext()?l.getNext():null),m?A.G(Pg(m)):A.done()}).next(()=>{for(;m;)r(m,null),m=l.hasNext()?l.getNext():null})}getDocumentsMatchingQuery(e,t,r,o){const u=t.path,l=[u.popLast().toArray(),u.lastSegment(),Sg(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],m=[u.popLast().toArray(),u.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return jc(e).j(IDBKeyRange.bound(l,m,!0)).next(I=>{let b=Ki();for(const A of I){const R=this.ts(Qe.fromSegments(A.prefixPath.concat(A.collectionGroup,A.documentId)),A);R.isFoundDocument()&&(wg(t,R)||o.has(R.key))&&(b=b.insert(R.key,R))}return b})}getAllFromCollectionGroup(e,t,r,o){let u=Ki();const l=CS(t,r),m=CS(t,xs.max());return jc(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,m,!0)},(I,b,A)=>{const R=this.ts(Qe.fromSegments(b.prefixPath.concat(b.collectionGroup,b.documentId)),b);u=u.insert(R.key,R),u.size===o&&A.done()}).next(()=>u)}newChangeBuffer(e){return new sC(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return gd(e).get("remoteDocumentGlobalKey").next(t=>(ct(!!t),t))}Zn(e,t){return gd(e).put("remoteDocumentGlobalKey",t)}ts(e,t){if(t){const r=function hS(n,e){let t;if(e.document)t=iw(n.fe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Qe.fromSegments(e.noDocument.path),o=Fc(e.noDocument.readTime);t=Fn.newNoDocument(r,o),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return st();{const r=Qe.fromSegments(e.unknownDocument.path),o=Fc(e.unknownDocument.version);t=Fn.newUnknownDocument(r,o)}}return e.readTime&&t.setReadTime(function(r){const o=new Xn(r[0],r[1]);return vt.fromTimestamp(o)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(vt.min()))return r}return Fn.newInvalidDocument(e)}}function iC(n){return new vw(n)}class sC extends rC{constructor(e,t){super(),this.os=e,this.trackRemovals=t,this.us=new pa(r=>r.toString(),(r,o)=>r.isEqual(o))}applyChanges(e){const t=[];let r=0,o=new zn((u,l)=>xt(u.canonicalString(),l.canonicalString()));return this.changes.forEach((u,l)=>{const m=this.us.get(u);if(t.push(this.os.removeEntry(e,u,m.readTime)),l.isValidDocument()){const I=qD(this.os.serializer,l);o=o.add(u.path.popLast());const b=Xy(I);r+=b-m.size,t.push(this.os.addEntry(e,u,I))}else if(r-=m.size,this.trackRemovals){const I=qD(this.os.serializer,l.convertToNoDocument(vt.min()));t.push(this.os.addEntry(e,u,I))}}),o.forEach(u=>{t.push(this.os.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.os.updateMetadata(e,r)),re.waitFor(t)}getFromCache(e,t){return this.os.es(e,t).next(r=>(this.us.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.os.ss(e,t).next(({documents:r,rs:o})=>(o.forEach((u,l)=>{this.us.set(u,{size:l,readTime:r.get(u).readTime})}),r))}}function gd(n){return Lr(n,"remoteDocumentGlobal")}function jc(n){return Lr(n,"remoteDocumentsV14")}function Pg(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function CS(n,e){const t=e.documentKey.path.toArray();return[n,Sg(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function rv(n,e){const t=n.path.toArray(),r=e.path.toArray();let o=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(o=xt(t[u],r[u]),o)return o;return o=xt(t.length,r.length),o||(o=xt(t[t.length-2],r[r.length-2]),o||xt(t[t.length-1],r[r.length-1]))}class _w{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class oC{constructor(e,t,r,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(o=>(r=o,this.remoteDocumentCache.getEntry(e,t))).next(o=>(null!==r&&pf(r.mutation,o,hs.empty(),Xn.now()),o))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,$t()).next(()=>r))}getLocalViewOfDocuments(e,t,r=$t()){const o=ga();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,r).next(u=>{let l=fs();return u.forEach((m,I)=>{l=l.insert(m,I.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const r=ga();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,$t()))}populateOverlays(e,t,r){const o=[];return r.forEach(u=>{t.has(u)||o.push(u)}),this.documentOverlayCache.getOverlays(e,o).next(u=>{u.forEach((l,m)=>{t.set(l,m)})})}computeViews(e,t,r,o){let u=Ki();const l=Yi(),m=Yi();return t.forEach((I,b)=>{const A=r.get(b.key);o.has(b.key)&&(void 0===A||A.mutation instanceof Du)?u=u.insert(b.key,b):void 0!==A?(l.set(b.key,A.mutation.getFieldMask()),pf(A.mutation,b,A.mutation.getFieldMask(),Xn.now())):l.set(b.key,hs.empty())}),this.recalculateAndSaveOverlays(e,u).next(I=>(I.forEach((b,A)=>l.set(b,A)),t.forEach((b,A)=>{var R;return m.set(b,new _w(A,null!==(R=l.get(b))&&void 0!==R?R:null))}),m))}recalculateAndSaveOverlays(e,t){const r=Yi();let o=new An((l,m)=>l-m),u=$t();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const m of l)m.keys().forEach(I=>{const b=t.get(I);if(null===b)return;let A=r.get(I)||hs.empty();A=m.applyToLocalView(b,A),r.set(I,A);const R=(o.get(m.batchId)||$t()).add(I);o=o.insert(m.batchId,R)})}).next(()=>{const l=[],m=o.getReverseIterator();for(;m.hasNext();){const I=m.getNext(),b=I.key,A=I.value,R=xo();A.forEach(H=>{if(!u.has(H)){const X=$y(t.get(H),r.get(H));null!==X&&R.set(H,X),u=u.add(H)}}),l.push(this.documentOverlayCache.saveOverlays(e,b,R))}return re.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return Qe.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):Ly(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var o}getNextDocuments(e,t,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,o).next(u=>{const l=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,o-u.size):re.resolve(ga());let m=-1,I=u;return l.next(b=>re.forEach(b,(A,R)=>(m<R.largestBatchId&&(m=R.largestBatchId),u.get(A)?re.resolve():this.remoteDocumentCache.getEntry(e,A).next(H=>{I=I.insert(A,H)}))).next(()=>this.populateOverlays(e,b,u)).next(()=>this.computeViews(e,I,b,$t())).next(A=>({batchId:m,changes:ED(A)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Qe(t)).next(r=>{let o=fs();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const o=t.collectionGroup;let u=fs();return this.indexManager.getCollectionParents(e,o).next(l=>re.forEach(l,m=>{const I=(b=t,A=m.child(o),new Nc(A,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt));var b,A;return this.getDocumentsMatchingCollectionQuery(e,I,r).next(b=>{b.forEach((A,R)=>{u=u.insert(A,R)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,r){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(u=>(o=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o))).next(u=>{o.forEach((m,I)=>{const b=I.getKey();null===u.get(b)&&(u=u.insert(b,Fn.newInvalidDocument(b)))});let l=fs();return u.forEach((m,I)=>{const b=o.get(m);void 0!==b&&pf(b.mutation,I,hs.empty(),Xn.now()),wg(t,I)&&(l=l.insert(m,I))}),l})}}class aC{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return re.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var r;return this.cs.set(t.id,{id:(r=t).id,version:r.version,createTime:Ar(r.createTime)}),re.resolve()}getNamedQuery(e,t){return re.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,{name:(r=t).name,query:aw(r.bundledQuery),readTime:Ar(r.readTime)}),re.resolve();var r}}class uC{constructor(){this.overlays=new An(Qe.comparator),this.ls=new Map}getOverlay(e,t){return re.resolve(this.overlays.get(t))}getOverlays(e,t){const r=ga();return re.forEach(t,o=>this.getOverlay(e,o).next(u=>{null!==u&&r.set(o,u)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((o,u)=>{this.we(e,t,u)}),re.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.ls.get(r);return void 0!==o&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.ls.delete(r)),re.resolve()}getOverlaysForCollection(e,t,r){const o=ga(),u=t.length+1,l=new Qe(t.child("")),m=this.overlays.getIteratorFrom(l);for(;m.hasNext();){const I=m.getNext().value,b=I.getKey();if(!t.isPrefixOf(b.path))break;b.path.length===u&&I.largestBatchId>r&&o.set(I.getKey(),I)}return re.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let u=new An((b,A)=>b-A);const l=this.overlays.getIterator();for(;l.hasNext();){const b=l.getNext().value;if(b.getKey().getCollectionGroup()===t&&b.largestBatchId>r){let A=u.get(b.largestBatchId);null===A&&(A=ga(),u=u.insert(b.largestBatchId,A)),A.set(b.getKey(),b)}}const m=ga(),I=u.getIterator();for(;I.hasNext()&&(I.getNext().value.forEach((b,A)=>m.set(b,A)),!(m.size()>=o)););return re.resolve(m)}we(e,t,r){const o=this.overlays.get(r.key);if(null!==o){const l=this.ls.get(o.largestBatchId).delete(r.key);this.ls.set(o.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new Z0(t,r));let u=this.ls.get(t);void 0===u&&(u=$t(),this.ls.set(t,u)),this.ls.set(t,u.add(r.key))}}class ww{constructor(){this.fs=new zn(Gr.ds),this.ws=new zn(Gr._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const r=new Gr(e,t);this.fs=this.fs.add(r),this.ws=this.ws.add(r)}gs(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.ys(new Gr(e,t))}ps(e,t){e.forEach(r=>this.removeReference(r,t))}Is(e){const t=new Qe(new sn([])),r=new Gr(t,e),o=new Gr(t,e+1),u=[];return this.ws.forEachInRange([r,o],l=>{this.ys(l),u.push(l.key)}),u}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new Qe(new sn([])),r=new Gr(t,e),o=new Gr(t,e+1);let u=$t();return this.ws.forEachInRange([r,o],l=>{u=u.add(l.key)}),u}containsKey(e){const t=new Gr(e,0),r=this.fs.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Gr{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return Qe.comparator(e.key,t.key)||xt(e.As,t.As)}static _s(e,t){return xt(e.As,t.As)||Qe.comparator(e.key,t.key)}}class Ew{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new zn(Gr.ds)}checkEmpty(e){return re.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,o){const u=this.vs;this.vs++;const l=new q0(u,t,r,o);this.mutationQueue.push(l);for(const m of o)this.Rs=this.Rs.add(new Gr(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return re.resolve(l)}lookupMutationBatch(e,t){return re.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const o=this.bs(t+1),u=o<0?0:o;return re.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return re.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return re.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Gr(t,0),o=new Gr(t,Number.POSITIVE_INFINITY),u=[];return this.Rs.forEachInRange([r,o],l=>{const m=this.Ps(l.As);u.push(m)}),re.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new zn(xt);return t.forEach(o=>{const u=new Gr(o,0),l=new Gr(o,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([u,l],m=>{r=r.add(m.As)})}),re.resolve(this.Vs(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let u=r;Qe.isDocumentKey(u)||(u=u.child(""));const l=new Gr(new Qe(u),0);let m=new zn(xt);return this.Rs.forEachWhile(I=>{const b=I.key.path;return!!r.isPrefixOf(b)&&(b.length===o&&(m=m.add(I.As)),!0)},l),re.resolve(this.Vs(m))}Vs(e){const t=[];return e.forEach(r=>{const o=this.Ps(r);null!==o&&t.push(o)}),t}removeMutationBatch(e,t){ct(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let r=this.Rs;return re.forEach(t.mutations,o=>{const u=new Gr(o.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Rs=r})}Cn(e){}containsKey(e,t){const r=new Gr(t,0),o=this.Rs.firstAfterOrEqual(r);return re.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return re.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class cC{constructor(e){this.Ds=e,this.docs=new An(Qe.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),u=o?o.size:0,l=this.Ds(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return re.resolve(r?r.document.mutableCopy():Fn.newInvalidDocument(t))}getEntries(e,t){let r=Ki();return t.forEach(o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():Fn.newInvalidDocument(o))}),re.resolve(r)}getDocumentsMatchingQuery(e,t,r,o){let u=Ki();const l=t.path,m=new Qe(l.child("")),I=this.docs.getIteratorFrom(m);for(;I.hasNext();){const{key:b,value:{document:A}}=I.getNext();if(!l.isPrefixOf(b.path))break;b.path.length>l.length+1||g0(QI(A),r)<=0||(o.has(A.key)||wg(t,A))&&(u=u.insert(A.key,A.mutableCopy()))}return re.resolve(u)}getAllFromCollectionGroup(e,t,r,o){st()}Cs(e,t){return re.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new lC(this)}getSize(e){return re.resolve(this.size)}}class lC extends rC{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?t.push(this.os.addEntry(e,o)):this.os.removeEntry(r)}),re.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class dC{constructor(e){this.persistence=e,this.xs=new pa(t=>Iu(t),Mo),this.lastRemoteSnapshotVersion=vt.min(),this.highestTargetId=0,this.Ns=0,this.ks=new ww,this.targetCount=0,this.Ms=Uc.kn()}forEachTarget(e,t){return this.xs.forEach((r,o)=>t(o)),re.resolve()}getLastRemoteSnapshotVersion(e){return re.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return re.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),re.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ns&&(this.Ns=t),re.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new Uc(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,re.resolve()}updateTargetData(e,t){return this.Fn(t),re.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,re.resolve()}removeTargets(e,t,r){let o=0;const u=[];return this.xs.forEach((l,m)=>{m.sequenceNumber<=t&&null===r.get(m.targetId)&&(this.xs.delete(l),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)}),re.waitFor(u).next(()=>o)}getTargetCount(e){return re.resolve(this.targetCount)}getTargetData(e,t){const r=this.xs.get(t)||null;return re.resolve(r)}addMatchingKeys(e,t,r){return this.ks.gs(t,r),re.resolve()}removeMatchingKeys(e,t,r){this.ks.ps(t,r);const o=this.persistence.referenceDelegate,u=[];return o&&t.forEach(l=>{u.push(o.markPotentiallyOrphaned(e,l))}),re.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),re.resolve()}getMatchingKeysForTargetId(e,t){const r=this.ks.Es(t);return re.resolve(r)}containsKey(e,t){return re.resolve(this.ks.containsKey(t))}}class iv{constructor(e,t){this.$s={},this.overlays={},this.Os=new er(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new dC(this),this.indexManager=new wS,this.remoteDocumentCache=new cC(r=>this.referenceDelegate.Ls(r)),this.serializer=new zD(t),this.qs=new aC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new uC,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.$s[e.toKey()];return r||(r=new Ew(t,this.referenceDelegate),this.$s[e.toKey()]=r),r}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,r){Pe("MemoryPersistence","Starting transaction:",e);const o=new bS(this.Os.next());return this.referenceDelegate.Us(),r(o).next(u=>this.referenceDelegate.Ks(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}Gs(e,t){return re.or(Object.values(this.$s).map(r=>()=>r.containsKey(e,t)))}}class bS extends y0{constructor(e){super(),this.currentSequenceNumber=e}}class sv{constructor(e){this.persistence=e,this.Qs=new ww,this.js=null}static zs(e){return new sv(e)}get Ws(){if(this.js)return this.js;throw st()}addReference(e,t,r){return this.Qs.addReference(r,t),this.Ws.delete(r.toString()),re.resolve()}removeReference(e,t,r){return this.Qs.removeReference(r,t),this.Ws.add(r.toString()),re.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),re.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(o=>this.Ws.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(u=>this.Ws.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return re.forEach(this.Ws,r=>{const o=Qe.fromPath(r);return this.Hs(e,o).next(u=>{u||t.removeEntry(o,vt.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(r=>{r?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return re.or([()=>re.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class TS{constructor(e){this.serializer=e}O(e,t,r,o){const u=new v0("createOrUpgrade",t);var m;r<1&&o>=1&&(e.createObjectStore("owner"),(m=e).createObjectStore("mutationQueues",{keyPath:"userId"}),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",nd,{unique:!0}),m.createObjectStore("documentMutations"),Iw(e),function(m){m.createObjectStore("remoteDocuments")}(e));let l=re.resolve();return r<3&&o>=3&&(0!==r&&(function(m){m.deleteObjectStore("targetDocuments"),m.deleteObjectStore("targets"),m.deleteObjectStore("targetGlobal")}(e),Iw(e)),l=l.next(()=>function(m){const I=m.store("targetGlobal"),b={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:vt.min().toTimestamp(),targetCount:0};return I.put("targetGlobalKey",b)}(u))),r<4&&o>=4&&(0!==r&&(l=l.next(()=>function(m,I){return I.store("mutations").j().next(b=>{m.deleteObjectStore("mutations"),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",nd,{unique:!0});const A=I.store("mutations"),R=b.map(H=>A.put(H));return re.waitFor(R)})}(e,u))),l=l.next(()=>{!function(m){m.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&o>=5&&(l=l.next(()=>this.Ys(u))),r<6&&o>=6&&(l=l.next(()=>(function(m){m.createObjectStore("remoteDocumentGlobal")}(e),this.Xs(u)))),r<7&&o>=7&&(l=l.next(()=>this.Zs(u))),r<8&&o>=8&&(l=l.next(()=>this.ti(e,u))),r<9&&o>=9&&(l=l.next(()=>{!function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&o>=10&&(l=l.next(()=>this.ei(u))),r<11&&o>=11&&(l=l.next(()=>{(function(m){m.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(m){m.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&o>=12&&(l=l.next(()=>{!function(m){const I=m.createObjectStore("documentOverlays",{keyPath:kM});I.createIndex("collectionPathOverlayIndex",GT,{unique:!1}),I.createIndex("collectionGroupOverlayIndex",zT,{unique:!1})}(e)})),r<13&&o>=13&&(l=l.next(()=>function(m){const I=m.createObjectStore("remoteDocumentsV14",{keyPath:eD});I.createIndex("documentKeyIndex",tD),I.createIndex("collectionGroupIndex",nD)}(e)).next(()=>this.ni(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&o>=14&&(l=l.next(()=>this.si(e,u))),r<15&&o>=15&&(l=l.next(()=>function(m){m.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),m.createObjectStore("indexState",{keyPath:aD}).createIndex("sequenceNumberIndex",_0,{unique:!1}),m.createObjectStore("indexEntries",{keyPath:HT}).createIndex("documentKeyIndex",PM,{unique:!1})}(e))),l}Xs(e){let t=0;return e.store("remoteDocuments").X((r,o)=>{t+=Xy(o)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Ys(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.j().next(o=>re.forEach(o,u=>{const l=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.j("userMutationsIndex",l).next(m=>re.forEach(m,I=>{ct(I.userId===u.userId);const b=fd(this.serializer,I);return eC(e,u.userId,b).next(()=>{})}))}))}Zs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(o=>{const u=[];return r.X((l,m)=>{const I=new sn(l),b=[0,br(I)];u.push(t.get(b).next(A=>A?re.resolve():t.put({targetId:0,path:br(I),sequenceNumber:o.highestListenSequenceNumber})))}).next(()=>re.waitFor(u))})}ti(e,t){e.createObjectStore("collectionParents",{keyPath:oD});const r=t.store("collectionParents"),o=new Jy,u=l=>{if(o.add(l)){const m=l.lastSegment(),I=l.popLast();return r.put({collectionId:m,parent:br(I)})}};return t.store("remoteDocuments").X({Y:!0},(l,m)=>{const I=new sn(l);return u(I.popLast())}).next(()=>t.store("documentMutations").X({Y:!0},([l,m,I],b)=>{const A=Wi(m);return u(A.popLast())}))}ei(e){const t=e.store("targets");return t.X((r,o)=>{const u=Df(o),l=WD(this.serializer,u);return t.put(l)})}ni(e,t){const r=t.store("remoteDocuments"),o=[];return r.X((u,l)=>{const m=t.store("remoteDocumentsV14"),I=(b=l,b.document?new Qe(sn.fromString(b.document.name).popFirst(5)):b.noDocument?Qe.fromSegments(b.noDocument.path):b.unknownDocument?Qe.fromSegments(b.unknownDocument.path):st()).path.toArray();var b;const A={prefixPath:I.slice(0,I.length-2),collectionGroup:I[I.length-2],documentId:I[I.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};o.push(m.put(A))}).next(()=>re.waitFor(o))}si(e,t){const r=t.store("mutations"),o=iC(this.serializer),u=new iv(sv.zs,this.serializer.fe);return r.j().next(l=>{const m=new Map;return l.forEach(I=>{var b;let A=null!==(b=m.get(I.userId))&&void 0!==b?b:$t();fd(this.serializer,I).keys().forEach(R=>A=A.add(R)),m.set(I.userId,A)}),re.forEach(m,(I,b)=>{const A=new kn(b),R=Zy.de(this.serializer,A),H=u.getIndexManager(A),X=ev.de(A,this.serializer,H,u.referenceDelegate);return new oC(o,X,R,H).recalculateAndSaveOverlaysForDocumentKeys(new w0(t,er.ct),I).next()})})}}function Iw(n){n.createObjectStore("targetDocuments",{keyPath:iD}).createIndex("documentTargetsIndex",sD,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",rD,{unique:!0}),n.createObjectStore("targetGlobal")}const hC="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class av{constructor(e,t,r,o,u,l,m,I,b,A,R=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ii=u,this.window=l,this.document=m,this.ri=b,this.oi=A,this.ui=R,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=H=>Promise.resolve(),!av.D())throw new De(ae.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new yw(this,o),this.di=t+"main",this.serializer=new zD(I),this.wi=new ds(this.di,this.ui,new TS(this.serializer)),this.Bs=new IS(this.referenceDelegate,this.serializer),this.remoteDocumentCache=iC(this.serializer),this.qs=new UM,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===A&&Cr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new De(ae.FAILED_PRECONDITION,hC);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Bs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new er(e,this.ri)}).then(()=>{this.Fs=!0}).catch(e=>(this.wi&&this.wi.close(),Promise.reject(e)))}Ii(e){var t=this;return this.fi=function(){var r=(0,ge.Z)(function*(o){if(t.started)return e(o)});return function(o){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.wi.B(function(){var t=(0,ge.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget((0,ge.Z)(function*(){t.started&&(yield t.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>uv(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ti(e).next(t=>{t||(this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Ei(e)).next(t=>this.isPrimary&&!t?this.Ai(e).next(()=>!1):!!t&&this.vi(e).next(()=>!0))).catch(e=>{if(la(e))return Pe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Pe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ii.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Ti(e){return kg(e).get("owner").next(t=>re.resolve(this.Ri(t)))}Pi(e){return uv(e).delete(this.clientId)}bi(){var e=this;return(0,ge.Z)(function*(){if(e.isPrimary&&!e.Vi(e.li,18e5)){e.li=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const o=Lr(r,"clientMetadata");return o.j().next(u=>{const l=e.Si(u,18e5),m=u.filter(I=>-1===l.indexOf(I));return re.forEach(m,I=>o.delete(I.clientId)).next(()=>m)})}).catch(()=>[]);if(e._i)for(const r of t)e._i.removeItem(e.Di(r.clientId))}})()}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.bi()).then(()=>this.pi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ei(e){return this.oi?re.resolve(!0):kg(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)){if(this.Ri(t)&&this.networkEnabled)return!0;if(!this.Ri(t)){if(!t.allowTabSynchronization)throw new De(ae.FAILED_PRECONDITION,hC);return!1}}return!(!this.networkEnabled||!this.inForeground)||uv(e).j().next(r=>void 0===this.Si(r,5e3).find(o=>!(this.clientId===o.clientId||!(!this.networkEnabled&&o.networkEnabled||!this.inForeground&&o.inForeground&&this.networkEnabled===o.networkEnabled))))}).next(t=>(this.isPrimary!==t&&Pe("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ge.Z)(function*(){e.Fs=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Ni(),e.ki(),yield e.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new w0(t,er.ct);return e.Ai(r).next(()=>e.Pi(r))}),e.wi.close(),e.Mi()})()}Si(e,t){return e.filter(r=>this.Vi(r.updateTimeMs,t)&&!this.Ci(r.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",e=>uv(e).j().next(t=>this.Si(t,18e5).map(r=>r.clientId)))}get started(){return this.Fs}getMutationQueue(e,t){return ev.de(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new ES(e,this.serializer.fe.databaseId)}getDocumentOverlayCache(e){return Zy.de(this.serializer,e)}getBundleCache(){return this.qs}runTransaction(e,t,r){Pe("IndexedDbPersistence","Starting transaction:",e);const o="readonly"===t?"readonly":"readwrite",u=15===(l=this.ui)?KT:14===l?uD:13===l?ZT:12===l?WT:11===l?qT:void st();var l;let m;return this.wi.runTransaction(e,o,u,I=>(m=new w0(I,this.Os?this.Os.next():er.ct),"readwrite-primary"===t?this.Ti(m).next(b=>!!b||this.Ei(m)).next(b=>{if(!b)throw Cr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)),new De(ae.FAILED_PRECONDITION,m0);return r(m)}).next(b=>this.vi(m).next(()=>b)):this.Oi(m).next(()=>r(m)))).then(I=>(m.raiseOnCommittedEvent(),I))}Oi(e){return kg(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)&&!this.Ri(t)&&!(this.oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new De(ae.FAILED_PRECONDITION,hC)})}vi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return kg(e).put("owner",t)}static D(){return ds.D()}Ai(e){const t=kg(e);return t.get("owner").next(r=>this.Ri(r)?(Pe("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):re.resolve())}Vi(e,t){const r=Date.now();return!(e<r-t||e>r&&(Cr(`Detected an update time that is in the future: ${e} > ${r}`),1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;(0,nn.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(e){var t;try{const r=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return Pe("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Cr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){Cr("Failed to set zombie client id.",e)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch{}}Di(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function kg(n){return Lr(n,"owner")}function uv(n){return Lr(n,"clientMetadata")}function fC(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class Dw{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.Fi=r,this.Bi=o}static Li(e,t){let r=$t(),o=$t();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new Dw(e,t.fromCache,r,o)}}class pC{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,r,o){return this.Ki(e,t).next(u=>u||this.Gi(e,t,o,r)).next(u=>u||this.Qi(e,t))}Ki(e,t){if(k0(t))return re.resolve(null);let r=Zi(t);return this.indexManager.getIndexType(e,r).next(o=>0===o?null:(null!==t.limit&&1===o&&(t=Uy(t,null,"F"),r=Zi(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(u=>{const l=$t(...u);return this.Ui.getDocuments(e,l).next(m=>this.indexManager.getMinOffset(e,r).next(I=>{const b=this.ji(t,m);return this.zi(t,b,l,I.readTime)?this.Ki(e,Uy(t,null,"F")):this.Wi(e,b,t,I)}))})))}Gi(e,t,r,o){return k0(t)||o.isEqual(vt.min())?this.Qi(e,t):this.Ui.getDocuments(e,r).next(u=>{const l=this.ji(t,u);return this.zi(t,l,r,o)?this.Qi(e,t):(og()<=Ys.in.DEBUG&&Pe("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Rc(t)),this.Wi(e,l,t,YI(o,-1)))})}ji(e,t){let r=new zn(V0(e));return t.forEach((o,u)=>{wg(e,u)&&(r=r.add(u))}),r}zi(e,t,r,o){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Qi(e,t){return og()<=Ys.in.DEBUG&&Pe("QueryEngine","Using full collection scan to execute query:",Rc(t)),this.Ui.getDocumentsMatchingQuery(e,t,xs.min())}Wi(e,t,r,o){return this.Ui.getDocumentsMatchingQuery(e,r,o).next(u=>(t.forEach(l=>{u=u.insert(l.key,l)}),u))}}class SS{constructor(e,t,r,o){this.persistence=e,this.Hi=t,this.serializer=o,this.Ji=new An(xt),this.Yi=new pa(u=>Iu(u),Mo),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(r)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new oC(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function gC(n,e,t,r){return new SS(n,e,t,r)}function mC(n,e){return Cw.apply(this,arguments)}function Cw(){return Cw=(0,ge.Z)(function*(n,e){const t=Ke(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let o;return t.mutationQueue.getAllMutationBatches(r).next(u=>(o=u,t.tr(e),t.mutationQueue.getAllMutationBatches(r))).next(u=>{const l=[],m=[];let I=$t();for(const b of o){l.push(b.batchId);for(const A of b.mutations)I=I.add(A.key)}for(const b of u){m.push(b.batchId);for(const A of b.mutations)I=I.add(A.key)}return t.localDocuments.getDocuments(r,I).next(b=>({er:b,removedBatchIds:l,addedBatchIds:m}))})})}),Cw.apply(this,arguments)}function yC(n){const e=Ke(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Bs.getLastRemoteSnapshotVersion(t))}function vC(n,e,t){let r=$t(),o=$t();return t.forEach(u=>r=r.add(u)),e.getEntries(n,r).next(u=>{let l=Ki();return t.forEach((m,I)=>{const b=u.get(m);I.isFoundDocument()!==b.isFoundDocument()&&(o=o.add(m)),I.isNoDocument()&&I.version.isEqual(vt.min())?(e.removeEntry(m,I.readTime),l=l.insert(m,I)):!b.isValidDocument()||I.version.compareTo(b.version)>0||0===I.version.compareTo(b.version)&&b.hasPendingWrites?(e.addEntry(I),l=l.insert(m,I)):Pe("LocalStore","Ignoring outdated watch update for ",m,". Current version:",b.version," Watch version:",I.version)}),{nr:l,sr:o}})}function xS(n,e){const t=Ke(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Mf(n,e){const t=Ke(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return t.Bs.getTargetData(r,e).next(u=>u?(o=u,re.resolve(o)):t.Bs.allocateTargetId(r).next(l=>(o=new Ns(e,l,"TargetPurposeListen",r.currentSequenceNumber),t.Bs.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=t.Ji.get(r.targetId);return(null===o||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ji=t.Ji.insert(r.targetId,r),t.Yi.set(e,r.targetId)),r})}function _a(n,e,t){return cv.apply(this,arguments)}function cv(){return cv=(0,ge.Z)(function*(n,e,t){const r=Ke(n),o=r.Ji.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,l=>r.persistence.referenceDelegate.removeTarget(l,o)))}catch(l){if(!la(l))throw l;Pe("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.Ji=r.Ji.remove(e),r.Yi.delete(o.target)}),cv.apply(this,arguments)}function Fg(n,e,t){const r=Ke(n);let o=vt.min(),u=$t();return r.persistence.runTransaction("Execute query","readonly",l=>function(m,I,b){const A=Ke(m),R=A.Yi.get(b);return void 0!==R?re.resolve(A.Ji.get(R)):A.Bs.getTargetData(I,b)}(r,l,Zi(e)).next(m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(l,m.targetId).next(I=>{u=I})}).next(()=>r.Hi.getDocumentsMatchingQuery(l,e,t?o:vt.min(),t?u:$t())).next(m=>(Sw(r,wD(e),m),{documents:m,ir:u})))}function bw(n,e){const t=Ke(n),r=Ke(t.Bs),o=t.Ji.get(e);return o?Promise.resolve(o.target):t.persistence.runTransaction("Get target data","readonly",u=>r.le(u,e).next(l=>l?l.target:null))}function Tw(n,e){const t=Ke(n),r=t.Xi.get(e)||vt.min();return t.persistence.runTransaction("Get new document changes","readonly",o=>t.Zi.getAllFromCollectionGroup(o,e,YI(r,-1),Number.MAX_SAFE_INTEGER)).then(o=>(Sw(t,e,o),o))}function Sw(n,e,t){let r=n.Xi.get(e)||vt.min();t.forEach((o,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.Xi.set(e,r)}function Aw(){return Aw=(0,ge.Z)(function*(n,e,t,r){const o=Ke(n);let u=$t(),l=Ki();for(const b of t){const A=e.rr(b.metadata.name);b.document&&(u=u.add(A));const R=e.ur(b);R.setReadTime(e.cr(b.metadata.readTime)),l=l.insert(A,R)}const m=o.Zi.newChangeBuffer({trackRemovals:!0}),I=yield Mf(o,(b=r,Zi(df(sn.fromString(`__bundle__/docs/${b}`)))));var b;return o.persistence.runTransaction("Apply bundle documents","readwrite",b=>vC(b,m,l).next(A=>(m.apply(b),A)).next(A=>o.Bs.removeMatchingKeysForTargetId(b,I.targetId).next(()=>o.Bs.addMatchingKeys(b,u,I.targetId)).next(()=>o.localDocuments.getLocalViewOfDocuments(b,A.nr,A.sr)).next(()=>A.nr)))}),Aw.apply(this,arguments)}function BM(n,e){return Mw.apply(this,arguments)}function Mw(){return Mw=(0,ge.Z)(function*(n,e,t=$t()){const r=yield Mf(n,Zi(aw(e.bundledQuery))),o=Ke(n);return o.persistence.runTransaction("Save named query","readwrite",u=>{const l=Ar(e.readTime);if(r.snapshotVersion.compareTo(l)>=0)return o.qs.saveNamedQuery(u,e);const m=r.withResumeToken(Tr.EMPTY_BYTE_STRING,l);return o.Ji=o.Ji.insert(m.targetId,m),o.Bs.updateTargetData(u,m).next(()=>o.Bs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>o.Bs.addMatchingKeys(u,t,r.targetId)).next(()=>o.qs.saveNamedQuery(u,e))})}),Mw.apply(this,arguments)}function _C(n,e){return`firestore_clients_${n}_${e}`}function wC(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function xw(n,e){return`firestore_targets_${n}_${e}`}class lv{constructor(e,t,r,o){this.user=e,this.batchId=t,this.state=r,this.error=o}static ar(e,t,r){const o=JSON.parse(r);let u,l="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return l&&o.error&&(l="string"==typeof o.error.message&&"string"==typeof o.error.code,l&&(u=new De(o.error.code,o.error.message))),l?new lv(e,t,o.state,u):(Cr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Tu{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static ar(e,t){const r=JSON.parse(t);let o,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(o=new De(r.error.code,r.error.message))),u?new Tu(e,r.state,o):(Cr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class dv{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static ar(e,t){const r=JSON.parse(t);let o="object"==typeof r&&r.activeTargetIds instanceof Array,u=U0();for(let l=0;o&&l<r.activeTargetIds.length;++l)o=ed(r.activeTargetIds[l]),u=u.add(r.activeTargetIds[l]);return o?new dv(e,u):(Cr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Lg{constructor(e,t){this.clientId=e,this.onlineState=t}static ar(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Lg(t.clientId,t.onlineState):(Cr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class eo{constructor(){this.activeTargetIds=U0()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Nw{constructor(e,t,r,o,u){this.window=e,this.ii=t,this.persistenceKey=r,this.wr=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new An(xt),this.started=!1,this.yr=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.pr=_C(this.persistenceKey,this.wr),this.Ir=`firestore_sequence_number_${this.persistenceKey}`,this.gr=this.gr.insert(this.wr,new eo),this.Tr=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.Er=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this.Ar=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.vr=`firestore_online_state_${this.persistenceKey}`,this.Rr=function(m){return`firestore_bundle_loaded_v2_${m}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ge.Z)(function*(){const t=yield e.syncEngine.$i();for(const o of t){if(o===e.wr)continue;const u=e.getItem(_C(e.persistenceKey,o));if(u){const l=dv.ar(o,u);l&&(e.gr=e.gr.insert(l.clientId,l))}}e.Pr();const r=e.storage.getItem(e.vr);if(r){const o=e.br(r);o&&e.Vr(o)}for(const o of e.yr)e.mr(o);e.yr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ir,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(e){let t=!1;return this.gr.forEach((r,o)=>{o.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Dr(e,"pending")}updateMutationState(e,t,r){this.Dr(e,t,r),this.Cr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(xw(this.persistenceKey,e));if(r){const o=Tu.ar(e,r);o&&(t=o.state)}}return this.Nr.lr(e),this.Pr(),t}removeLocalQueryTarget(e){this.Nr.dr(e),this.Pr()}isLocalQueryTarget(e){return this.Nr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(xw(this.persistenceKey,e))}updateQueryState(e,t,r){this.kr(e,t,r)}handleUserChange(e,t,r){t.forEach(o=>{this.Cr(o)}),this.currentUser=e,r.forEach(o=>{this.addPendingMutation(o)})}setOnlineState(e){this.Mr(e)}notifyBundleLoaded(e){this.$r(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Pe("SharedClientState","READ",e,t),t}setItem(e,t){Pe("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Pe("SharedClientState","REMOVE",e),this.storage.removeItem(e)}mr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Pe("SharedClientState","EVENT",r.key,r.newValue),r.key===this.pr)return void Cr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable((0,ge.Z)(function*(){if(t.started){if(null!==r.key)if(t.Tr.test(r.key)){if(null==r.newValue){const o=t.Or(r.key);return t.Fr(o,null)}{const o=t.Br(r.key,r.newValue);if(o)return t.Fr(o.clientId,o)}}else if(t.Er.test(r.key)){if(null!==r.newValue){const o=t.Lr(r.key,r.newValue);if(o)return t.qr(o)}}else if(t.Ar.test(r.key)){if(null!==r.newValue){const o=t.Ur(r.key,r.newValue);if(o)return t.Kr(o)}}else if(r.key===t.vr){if(null!==r.newValue){const o=t.br(r.newValue);if(o)return t.Vr(o)}}else if(r.key===t.Ir){const o=function(u){let l=er.ct;if(null!=u)try{const m=JSON.parse(u);ct("number"==typeof m),l=m}catch(m){Cr("SharedClientState","Failed to read sequence number from WebStorage",m)}return l}(r.newValue);o!==er.ct&&t.sequenceNumberHandler(o)}else if(r.key===t.Rr){const o=t.Gr(r.newValue);yield Promise.all(o.map(u=>t.syncEngine.Qr(u)))}}else t.yr.push(r)}))}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(e,t,r){const o=new lv(this.currentUser,e,t,r),u=wC(this.persistenceKey,this.currentUser,e);this.setItem(u,o.hr())}Cr(e){const t=wC(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Mr(e){this.storage.setItem(this.vr,JSON.stringify({clientId:this.wr,onlineState:e}))}kr(e,t,r){const o=xw(this.persistenceKey,e),u=new Tu(e,t,r);this.setItem(o,u.hr())}$r(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}Or(e){const t=this.Tr.exec(e);return t?t[1]:null}Br(e,t){const r=this.Or(e);return dv.ar(r,t)}Lr(e,t){const r=this.Er.exec(e),o=Number(r[1]);return lv.ar(new kn(void 0!==r[2]?r[2]:null),o,t)}Ur(e,t){const r=this.Ar.exec(e),o=Number(r[1]);return Tu.ar(o,t)}br(e){return Lg.ar(e)}Gr(e){return JSON.parse(e)}qr(e){var t=this;return(0,ge.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.jr(e.batchId,e.state,e.error);Pe("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Kr(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}Fr(e,t){const r=t?this.gr.insert(e,t):this.gr.remove(e),o=this.Sr(this.gr),u=this.Sr(r),l=[],m=[];return u.forEach(I=>{o.has(I)||l.push(I)}),o.forEach(I=>{u.has(I)||m.push(I)}),this.syncEngine.Wr(l,m).then(()=>{this.gr=r})}Vr(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Sr(e){let t=U0();return e.forEach((r,o)=>{t=t.unionWith(o.activeTargetIds)}),t}}class hv{constructor(){this.Hr=new eo,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,r){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new eo,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Vg{Yr(e){}shutdown(){}}class EC{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){Pe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){Pe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let fv=null;function Rw(){return null===fv?fv=268435456+Math.round(2147483648*Math.random()):fv++,"0x"+fv.toString(16)}const pv={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class IC{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const Pi="WebChannelConnection";class RS extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.mo=(e.ssl?"https":"http")+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,r,o,u){const l=Rw(),m=this.To(e,t);Pe("RestConnection",`Sending RPC '${e}' ${l}:`,m,r);const I={};return this.Eo(I,o,u),this.Ao(e,m,I,r).then(b=>(Pe("RestConnection",`Received RPC '${e}' ${l}: `,b),b),b=>{throw To("RestConnection",`RPC '${e}' ${l} failed with error: `,b,"url: ",m,"request:",r),b})}vo(e,t,r,o,u,l){return this.Io(e,t,r,o,u)}Eo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Qh,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,u)=>e[u]=o),r&&r.headers.forEach((o,u)=>e[u]=o)}To(e,t){return`${this.mo}/v1/${t}:${pv[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,r,o){const u=Rw();return new Promise((l,m)=>{const I=new GI;I.setWithCredentials(!0),I.listenOnce(HI.COMPLETE,()=>{try{switch(I.getLastErrorCode()){case wy.NO_ERROR:const A=I.getResponseJson();Pe(Pi,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(A)),l(A);break;case wy.TIMEOUT:Pe(Pi,`RPC '${e}' ${u} timed out`),m(new De(ae.DEADLINE_EXCEEDED,"Request time out"));break;case wy.HTTP_ERROR:const R=I.getStatus();if(Pe(Pi,`RPC '${e}' ${u} failed with status:`,R,"response text:",I.getResponseText()),R>0){let H=I.getResponseJson();Array.isArray(H)&&(H=H[0]);const X=H?.error;if(X&&X.status&&X.message){const ye=function(ke){const Ue=ke.toLowerCase().replace(/_/g,"-");return Object.values(ae).indexOf(Ue)>=0?Ue:ae.UNKNOWN}(X.status);m(new De(ye,X.message))}else m(new De(ae.UNKNOWN,"Server responded with status "+I.getStatus()))}else m(new De(ae.UNAVAILABLE,"Connection failed."));break;default:st()}}finally{Pe(Pi,`RPC '${e}' ${u} completed.`)}});const b=JSON.stringify(o);Pe(Pi,`RPC '${e}' ${u} sending request:`,o),I.send(t,"POST",b,r,15)})}Ro(e,t,r){const o=Rw(),u=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=$I(),m=NT(),I={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},b=this.longPollingOptions.timeoutSeconds;void 0!==b&&(I.longPollingTimeout=Math.round(1e3*b)),this.useFetchStreams&&(I.xmlHttpFactory=new OM({})),this.Eo(I.initMessageHeaders,t,r),I.encodeInitMessageHeaders=!0;const A=u.join("");Pe(Pi,`Creating RPC '${e}' stream ${o}: ${A}`,I);const R=l.createWebChannel(A,I);let H=!1,X=!1;const ye=new IC({ro:Ue=>{X?Pe(Pi,`Not sending because RPC '${e}' stream ${o} is closed:`,Ue):(H||(Pe(Pi,`Opening RPC '${e}' stream ${o} transport.`),R.open(),H=!0),Pe(Pi,`RPC '${e}' stream ${o} sending:`,Ue),R.send(Ue))},oo:()=>R.close()}),ke=(Ue,wt,Rt)=>{Ue.listen(wt,St=>{try{Rt(St)}catch(Pt){setTimeout(()=>{throw Pt},0)}})};return ke(R,sg.EventType.OPEN,()=>{X||Pe(Pi,`RPC '${e}' stream ${o} transport opened.`)}),ke(R,sg.EventType.CLOSE,()=>{X||(X=!0,Pe(Pi,`RPC '${e}' stream ${o} transport closed`),ye.wo())}),ke(R,sg.EventType.ERROR,Ue=>{X||(X=!0,To(Pi,`RPC '${e}' stream ${o} transport errored:`,Ue),ye.wo(new De(ae.UNAVAILABLE,"The operation could not be completed")))}),ke(R,sg.EventType.MESSAGE,Ue=>{var wt;if(!X){const Rt=Ue.data[0];ct(!!Rt);const Pt=Rt.error||(null===(wt=Rt[0])||void 0===wt?void 0:wt.error);if(Pt){Pe(Pi,`RPC '${e}' stream ${o} received error:`,Pt);const zt=Pt.status;let cn=function(mm){const oR=Vr[mm];if(void 0!==oR)return PD(oR)}(zt),ps=Pt.message;void 0===cn&&(cn=ae.INTERNAL,ps="Unknown error status: "+zt+" with message "+Pt.message),X=!0,ye.wo(new De(cn,ps)),R.close()}else Pe(Pi,`RPC '${e}' stream ${o} received:`,Rt),ye._o(Rt)}}),ke(m,Ey.STAT_EVENT,Ue=>{Ue.stat===Iy.PROXY?Pe(Pi,`RPC '${e}' stream ${o} detected buffering proxy`):Ue.stat===Iy.NOPROXY&&Pe(Pi,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{ye.fo()},0),ye}}function gv(){return typeof window<"u"?window:null}function mv(){return typeof document<"u"?document:null}function Ug(n){return new VM(n,!0)}class yv{constructor(e,t,r=1e3,o=1.5,u=6e4){this.ii=e,this.timerId=t,this.Po=r,this.bo=o,this.Vo=u,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),o=Math.max(0,t-r);o>0&&Pe("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,o,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class DC{constructor(e,t,r,o,u,l,m,I){this.ii=e,this.$o=r,this.Oo=o,this.connection=u,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=m,this.listener=I,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new yv(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var e=this;return(0,ge.Z)(function*(){e.Uo()&&(yield e.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}zo(){var e=this;return(0,ge.Z)(function*(){if(e.Ko())return e.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(e,t){var r=this;return(0,ge.Z)(function*(){r.Ho(),r.Jo(),r.qo.cancel(),r.Fo++,4!==e?r.qo.reset():t&&t.code===ae.RESOURCE_EXHAUSTED?(Cr(t.toString()),Cr("Using maximum backoff delay to prevent overloading the backend."),r.qo.xo()):t&&t.code===ae.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Yo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.ao(t)})()}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.Fo===t&&this.Zo(r,o)},r=>{e(()=>{const o=new De(ae.UNKNOWN,"Fetching auth token failed: "+r.message);return this.tu(o)})})}Zo(e,t){const r=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{r(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(o=>{r(()=>this.tu(o))}),this.stream.onMessage(o=>{r(()=>this.onMessage(o))})}Go(){var e=this;this.state=5,this.qo.No((0,ge.Z)(function*(){e.state=0,e.start()}))}tu(e){return Pe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():(Pe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class OS extends DC{constructor(e,t,r,o,u,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,l),this.serializer=u}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function BD(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(I=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===I?1:"REMOVE"===I?2:"CURRENT"===I?3:"RESET"===I?4:st(),o=e.targetChange.targetIds||[],u=function(I,b){return I.useProto3Json?(ct(void 0===b||"string"==typeof b),Tr.fromBase64String(b||"")):(ct(void 0===b||b instanceof Uint8Array),Tr.fromUint8Array(b||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,m=l&&function(I){const b=void 0===I.code?ae.UNKNOWN:PD(I.code);return new De(b,I.message||"")}(l);t=new X0(r,o,u,m||null)}else if("documentChange"in e){const r=e.documentChange,o=va(n,r.document.name),u=Ar(r.document.updateTime),l=r.document.createTime?Ar(r.document.createTime):vt.min(),m=new gi({mapValue:{fields:r.document.fields}}),I=Fn.newFoundDocument(o,u,l,m);t=new Cg(r.targetIds||[],r.removedTargetIds||[],I.key,I)}else if("documentDelete"in e){const r=e.documentDelete,o=va(n,r.document),u=r.readTime?Ar(r.readTime):vt.min(),l=Fn.newNoDocument(o,u);t=new Cg([],r.removedTargetIds||[],l.key,l)}else if("documentRemove"in e){const r=e.documentRemove,o=va(n,r.document);t=new Cg([],r.removedTargetIds||[],o,null)}else{if(!("filter"in e))return st();{const r=e.filter,{count:o=0,unchangedNames:u}=r,l=new sS(o,u);t=new J0(r.targetId,l)}}var I;return t}(this.serializer,e),r=function(o){if(!("targetChange"in o))return vt.min();const u=o.targetChange;return u.targetIds&&u.targetIds.length?vt.min():u.readTime?Ar(u.readTime):vt.min()}(e);return this.listener.nu(t,r)}su(e){const t={};t.database=Ln(this.serializer),t.addTarget=function(o,u){let l;const m=u.target;if(l=lf(m)?{documents:$D(o,m)}:{query:sw(o,m)},l.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){l.resumeToken=oS(o,u.resumeToken);const I=zy(o,u.expectedCount);null!==I&&(l.expectedCount=I)}else if(u.snapshotVersion.compareTo(vt.min())>0){l.readTime=dd(o,u.snapshotVersion.toTimestamp());const I=zy(o,u.expectedCount);null!==I&&(l.expectedCount=I)}return l}(this.serializer,e);const r=function Tg(n,e){const t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return st()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Wo(t)}iu(e){const t={};t.database=Ln(this.serializer),t.removeTarget=e,this.Wo(t)}}class CC extends DC{constructor(e,t,r,o,u,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,l),this.serializer=u,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(ct(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function jD(n,e){return n&&n.length>0?(ct(void 0!==e),n.map(t=>function(r,o){let u=Ar(r.updateTime?r.updateTime:o);return u.isEqual(vt.min())&&(u=Ar(o)),new H0(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Ar(e.commitTime);return this.listener.cu(r,t)}return ct(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=Ln(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Ef(this.serializer,r))};this.Wo(t)}}class vv extends class{}{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=o,this.lu=!1}fu(){if(this.lu)throw new De(ae.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.connection.Io(e,t,r,o,u)).catch(o=>{throw"FirebaseError"===o.name?(o.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new De(ae.UNKNOWN,o.toString())})}vo(e,t,r,o){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,l])=>this.connection.vo(e,t,r,u,l,o)).catch(u=>{throw"FirebaseError"===u.name?(u.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new De(ae.UNKNOWN,u.toString())})}terminate(){this.lu=!0}}class bC{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(Cr(t),this.mu=!1):Pe("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class TC{constructor(e,t,r,o,u){var l=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=u,this.Pu.Yr(m=>{r.enqueueAndForget((0,ge.Z)(function*(){var I;wa(l)&&(Pe("RemoteStore","Restarting streams for network reachability change."),yield(I=(0,ge.Z)(function*(b){const A=Ke(b);A.vu.add(4),yield xf(A),A.bu.set("Unknown"),A.vu.delete(4),yield md(A)}),function(b){return I.apply(this,arguments)})(l))}))}),this.bu=new bC(r,o)}}function md(n){return _v.apply(this,arguments)}function _v(){return _v=(0,ge.Z)(function*(n){if(wa(n))for(const e of n.Ru)yield e(!0)}),_v.apply(this,arguments)}function xf(n){return wv.apply(this,arguments)}function wv(){return wv=(0,ge.Z)(function*(n){for(const e of n.Ru)yield e(!1)}),wv.apply(this,arguments)}function Bg(n,e){const t=Ke(n);t.Au.has(e.targetId)||(t.Au.set(e.targetId,e),Iv(t)?$g(t):Rf(t).Ko()&&Pw(t,e))}function jg(n,e){const t=Ke(n),r=Rf(t);t.Au.delete(e),r.Ko()&&Ev(t,e),0===t.Au.size&&(r.Ko()?r.jo():wa(t)&&t.bu.set("Unknown"))}function Pw(n,e){if(n.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(vt.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Rf(n).su(e)}function Ev(n,e){n.Vu.qt(e),Rf(n).iu(e)}function $g(n){n.Vu=new ld({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),le:e=>n.Au.get(e)||null,ue:()=>n.datastore.serializer.databaseId}),Rf(n).start(),n.bu.gu()}function Iv(n){return wa(n)&&!Rf(n).Uo()&&n.Au.size>0}function wa(n){return 0===Ke(n).vu.size}function Dv(n){n.Vu=void 0}function kS(n){return kw.apply(this,arguments)}function kw(){return kw=(0,ge.Z)(function*(n){n.Au.forEach((e,t)=>{Pw(n,e)})}),kw.apply(this,arguments)}function FS(n,e){return Fw.apply(this,arguments)}function Fw(){return Fw=(0,ge.Z)(function*(n,e){Dv(n),Iv(n)?(n.bu.Iu(e),$g(n)):n.bu.set("Unknown")}),Fw.apply(this,arguments)}function SC(n,e,t){return Hg.apply(this,arguments)}function Hg(){return Hg=(0,ge.Z)(function*(n,e,t){if(n.bu.set("Online"),e instanceof X0&&2===e.state&&e.cause)try{yield(r=(0,ge.Z)(function*(o,u){const l=u.cause;for(const m of u.targetIds)o.Au.has(m)&&(yield o.remoteSyncer.rejectListen(m,l),o.Au.delete(m),o.Vu.removeTarget(m))}),function(o,u){return r.apply(this,arguments)})(n,e)}catch(r){Pe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Gg(n,r)}else if(e instanceof Cg?n.Vu.Ht(e):e instanceof J0?n.Vu.ne(e):n.Vu.Xt(e),!t.isEqual(vt.min()))try{const r=yield yC(n.localStore);t.compareTo(r)>=0&&(yield function(o,u){const l=o.Vu.ce(u);return l.targetChanges.forEach((m,I)=>{if(m.resumeToken.approximateByteSize()>0){const b=o.Au.get(I);b&&o.Au.set(I,b.withResumeToken(m.resumeToken,u))}}),l.targetMismatches.forEach((m,I)=>{const b=o.Au.get(m);if(!b)return;o.Au.set(m,b.withResumeToken(Tr.EMPTY_BYTE_STRING,b.snapshotVersion)),Ev(o,m);const A=new Ns(b.target,m,I,b.sequenceNumber);Pw(o,A)}),o.remoteSyncer.applyRemoteEvent(l)}(n,t))}catch(r){Pe("RemoteStore","Failed to raise snapshot:",r),yield Gg(n,r)}var r}),Hg.apply(this,arguments)}function Gg(n,e,t){return Lw.apply(this,arguments)}function Lw(){return Lw=(0,ge.Z)(function*(n,e,t){if(!la(e))throw e;n.vu.add(1),yield xf(n),n.bu.set("Offline"),t||(t=()=>yC(n.localStore)),n.asyncQueue.enqueueRetryable((0,ge.Z)(function*(){Pe("RemoteStore","Retrying IndexedDB access"),yield t(),n.vu.delete(1),yield md(n)}))}),Lw.apply(this,arguments)}function Vw(n,e){return e().catch(t=>Gg(n,t,e))}function yd(n){return Uw.apply(this,arguments)}function Uw(){return Uw=(0,ge.Z)(function*(n){const e=Ke(n),t=Su(e);let r=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;AC(e);)try{const o=yield xS(e.localStore,r);if(null===o){0===e.Eu.length&&t.jo();break}r=o.batchId,MC(e,o)}catch(o){yield Gg(e,o)}xC(e)&&Bw(e)}),Uw.apply(this,arguments)}function AC(n){return wa(n)&&n.Eu.length<10}function MC(n,e){n.Eu.push(e);const t=Su(n);t.Ko()&&t.ou&&t.uu(e.mutations)}function xC(n){return wa(n)&&!Su(n).Uo()&&n.Eu.length>0}function Bw(n){Su(n).start()}function LS(n){return mi.apply(this,arguments)}function mi(){return mi=(0,ge.Z)(function*(n){Su(n).hu()}),mi.apply(this,arguments)}function Nf(n){return jw.apply(this,arguments)}function jw(){return jw=(0,ge.Z)(function*(n){const e=Su(n);for(const t of n.Eu)e.uu(t.mutations)}),jw.apply(this,arguments)}function VS(n,e,t){return NC.apply(this,arguments)}function NC(){return NC=(0,ge.Z)(function*(n,e,t){const r=n.Eu.shift(),o=W0.from(r,e,t);yield Vw(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),yield yd(n)}),NC.apply(this,arguments)}function jM(n,e){return Cv.apply(this,arguments)}function Cv(){return Cv=(0,ge.Z)(function*(n,e){var t;e&&Su(n).ou&&(yield(t=(0,ge.Z)(function*(r,o){if(OD(u=o.code)&&u!==ae.ABORTED){const l=r.Eu.shift();Su(r).Qo(),yield Vw(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,o)),yield yd(r)}var u}),function(r,o){return t.apply(this,arguments)})(n,e)),xC(n)&&Bw(n)}),Cv.apply(this,arguments)}function bv(n,e){return vd.apply(this,arguments)}function vd(){return vd=(0,ge.Z)(function*(n,e){const t=Ke(n);t.asyncQueue.verifyOperationInProgress(),Pe("RemoteStore","RemoteStore received new credentials");const r=wa(t);t.vu.add(3),yield xf(t),r&&t.bu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.vu.delete(3),yield md(t)}),vd.apply(this,arguments)}function $w(n,e){return zg.apply(this,arguments)}function zg(){return zg=(0,ge.Z)(function*(n,e){const t=Ke(n);e?(t.vu.delete(2),yield md(t)):e||(t.vu.add(2),yield xf(t),t.bu.set("Unknown"))}),zg.apply(this,arguments)}function Rf(n){return n.Su||(n.Su=function(e,t,r){const o=Ke(e);return o.fu(),new OS(t,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(n.datastore,n.asyncQueue,{uo:kS.bind(null,n),ao:FS.bind(null,n),nu:SC.bind(null,n)}),n.Ru.push(function(){var e=(0,ge.Z)(function*(t){t?(n.Su.Qo(),Iv(n)?$g(n):n.bu.set("Unknown")):(yield n.Su.stop(),Dv(n))});return function(t){return e.apply(this,arguments)}}())),n.Su}function Su(n){return n.Du||(n.Du=function(e,t,r){const o=Ke(e);return o.fu(),new CC(t,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(n.datastore,n.asyncQueue,{uo:LS.bind(null,n),ao:jM.bind(null,n),au:Nf.bind(null,n),cu:VS.bind(null,n)}),n.Ru.push(function(){var e=(0,ge.Z)(function*(t){t?(n.Du.Qo(),yield yd(n)):(yield n.Du.stop(),n.Eu.length>0&&(Pe("RemoteStore",`Stopping write stream with ${n.Eu.length} pending writes`),n.Eu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Du}class Hw{constructor(e,t,r,o,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new lr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,t,r,o,u){const l=Date.now()+r,m=new Hw(e,t,l,o,u);return m.start(r),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new De(ae.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Of(n,e){if(Cr("AsyncQueue",`${e}: ${n}`),la(n))return new De(ae.UNAVAILABLE,`${e}: ${n}`);throw n}class Pf{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Qe.comparator(t.key,r.key):(t,r)=>Qe.comparator(t.key,r.key),this.keyedMap=fs(),this.sortedSet=new An(this.comparator)}static emptySet(e){return new Pf(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Pf)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Pf;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class Tv{constructor(){this.Cu=new An(Qe.comparator)}track(e){const t=e.doc.key,r=this.Cu.get(t);r?0!==e.type&&3===r.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==r.type?this.Cu=this.Cu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Cu=this.Cu.remove(t):1===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):st():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,r)=>{e.push(r)}),e}}class _d{constructor(e,t,r,o,u,l,m,I,b){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=l,this.syncStateChanged=m,this.excludesMetadataChanges=I,this.hasCachedResults=b}static fromInitialDocuments(e,t,r,o,u){const l=[];return t.forEach(m=>{l.push({type:0,doc:m})}),new _d(e,t,Pf.emptySet(t),l,r,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&hf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}class US{constructor(){this.Nu=void 0,this.listeners=[]}}class Sv{constructor(){this.queries=new pa(e=>L0(e),hf),this.onlineState="Unknown",this.ku=new Set}}function qg(n,e){return RC.apply(this,arguments)}function RC(){return RC=(0,ge.Z)(function*(n,e){const t=Ke(n),r=e.query;let o=!1,u=t.queries.get(r);if(u||(o=!0,u=new US),o)try{u.Nu=yield t.onListen(r)}catch(l){const m=Of(l,`Initialization of query '${Rc(e.query)}' failed`);return void e.onError(m)}t.queries.set(r,u),u.listeners.push(e),e.Mu(t.onlineState),u.Nu&&e.$u(u.Nu)&&zw(t)}),RC.apply(this,arguments)}function Av(n,e){return Gw.apply(this,arguments)}function Gw(){return Gw=(0,ge.Z)(function*(n,e){const t=Ke(n),r=e.query;let o=!1;const u=t.queries.get(r);if(u){const l=u.listeners.indexOf(e);l>=0&&(u.listeners.splice(l,1),o=0===u.listeners.length)}if(o)return t.queries.delete(r),t.onUnlisten(r)}),Gw.apply(this,arguments)}function OC(n,e){const t=Ke(n);let r=!1;for(const o of e){const l=t.queries.get(o.query);if(l){for(const m of l.listeners)m.$u(o)&&(r=!0);l.Nu=o}}r&&zw(t)}function kf(n,e,t){const r=Ke(n),o=r.queries.get(e);if(o)for(const u of o.listeners)u.onError(t);r.queries.delete(e)}function zw(n){n.ku.forEach(e=>{e.next()})}class Mv{constructor(e,t,r){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=r||{}}$u(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)3!==o.type&&r.push(o);e=new _d(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){return!e.fromCache||(!this.options.Ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(e){e=_d.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class qw{constructor(e,t){this.Gu=e,this.byteLength=t}Qu(){return"metadata"in this.Gu}}class BS{constructor(e){this.serializer=e}rr(e){return va(this.serializer,e)}ur(e){return e.metadata.exists?iw(this.serializer,e.document,!1):Fn.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}cr(e){return Ar(e)}}class jS{constructor(e,t,r){this.ju=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=$S(e)}zu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++t;const r=sn.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Wu(e){const t=new Map,r=new BS(this.serializer);for(const o of e)if(o.metadata.queries){const u=r.rr(o.metadata.name);for(const l of o.metadata.queries){const m=(t.get(l)||$t()).add(u);t.set(l,m)}}return t}complete(){var e=this;return(0,ge.Z)(function*(){const t=yield function NS(n,e,t,r){return Aw.apply(this,arguments)}(e.localStore,new BS(e.serializer),e.documents,e.ju.id),r=e.Wu(e.documents);for(const o of e.queries)yield BM(e.localStore,o,r.get(o.name));return e.progress.taskState="Success",{progress:e.progress,Hu:e.collectionGroups,Ju:t}})()}}function $S(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class PC{constructor(e){this.key=e}}class kC{constructor(e){this.key=e}}class FC{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=$t(),this.mutatedKeys=$t(),this.tc=V0(e),this.ec=new Pf(this.tc)}get nc(){return this.Yu}sc(e,t){const r=t?t.ic:new Tv,o=t?t.ec:this.ec;let u=t?t.mutatedKeys:this.mutatedKeys,l=o,m=!1;const I="F"===this.query.limitType&&o.size===this.query.limit?o.last():null,b="L"===this.query.limitType&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((A,R)=>{const H=o.get(A),X=wg(this.query,R)?R:null,ye=!!H&&this.mutatedKeys.has(H.key),ke=!!X&&(X.hasLocalMutations||this.mutatedKeys.has(X.key)&&X.hasCommittedMutations);let Ue=!1;H&&X?H.data.isEqual(X.data)?ye!==ke&&(r.track({type:3,doc:X}),Ue=!0):this.rc(H,X)||(r.track({type:2,doc:X}),Ue=!0,(I&&this.tc(X,I)>0||b&&this.tc(X,b)<0)&&(m=!0)):!H&&X?(r.track({type:0,doc:X}),Ue=!0):H&&!X&&(r.track({type:1,doc:H}),Ue=!0,(I||b)&&(m=!0)),Ue&&(X?(l=l.add(X),u=ke?u.add(A):u.delete(A)):(l=l.delete(A),u=u.delete(A)))}),null!==this.query.limit)for(;l.size>this.query.limit;){const A="F"===this.query.limitType?l.last():l.first();l=l.delete(A.key),u=u.delete(A.key),r.track({type:1,doc:A})}return{ec:l,ic:r,zi:m,mutatedKeys:u}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const o=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const u=e.ic.xu();u.sort((b,A)=>function(R,H){const X=ye=>{switch(ye){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return st()}};return X(R)-X(H)}(b.type,A.type)||this.tc(b.doc,A.doc)),this.oc(r);const l=t?this.uc():[],m=0===this.Zu.size&&this.current?1:0,I=m!==this.Xu;return this.Xu=m,0!==u.length||I?{snapshot:new _d(this.query,e.ec,o,u,e.mutatedKeys,0===m,I,!1,!!r&&r.resumeToken.approximateByteSize()>0),cc:l}:{cc:l}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new Tv,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(t=>this.Yu=this.Yu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Yu=this.Yu.delete(t)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=$t(),this.ec.forEach(r=>{this.ac(r.key)&&(this.Zu=this.Zu.add(r.key))});const t=[];return e.forEach(r=>{this.Zu.has(r)||t.push(new kC(r))}),this.Zu.forEach(r=>{e.has(r)||t.push(new PC(r))}),t}hc(e){this.Yu=e.ir,this.Zu=$t();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return _d.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class LC{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class VC{constructor(e){this.key=e,this.fc=!1}}class HS{constructor(e,t,r,o,u,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=l,this.dc={},this.wc=new pa(m=>L0(m),hf),this._c=new Map,this.mc=new Set,this.gc=new An(Qe.comparator),this.yc=new Map,this.Ic=new ww,this.Tc={},this.Ec=new Map,this.Ac=Uc.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function UC(n,e){return xv.apply(this,arguments)}function xv(){return xv=(0,ge.Z)(function*(n,e){const t=yi(n);let r,o;const u=t.wc.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),o=u.view.lc();else{const l=yield Mf(t.localStore,Zi(e)),m=t.sharedClientState.addLocalQueryTarget(l.targetId);r=l.targetId,o=yield Ww(t,e,r,"current"===m,l.resumeToken),t.isPrimaryClient&&Bg(t.remoteStore,l)}return o}),xv.apply(this,arguments)}function Ww(n,e,t,r,o){return Zw.apply(this,arguments)}function Zw(){return Zw=(0,ge.Z)(function*(n,e,t,r,o){n.Rc=(R,H,X)=>{return(ye=(0,ge.Z)(function*(ke,Ue,wt,Rt){let St=Ue.view.sc(wt);St.zi&&(St=yield Fg(ke.localStore,Ue.query,!1).then(({documents:cn})=>Ue.view.sc(cn,St)));const Pt=Rt&&Rt.targetChanges.get(Ue.targetId),zt=Ue.view.applyChanges(St,ke.isPrimaryClient,Pt);return Ov(ke,Ue.targetId,zt.cc),zt.snapshot}),function(ke,Ue,wt,Rt){return ye.apply(this,arguments)})(n,R,H,X);var ye};const u=yield Fg(n.localStore,e,!0),l=new FC(e,u.ir),m=l.sc(u.documents),I=vf.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,o),b=l.applyChanges(m,n.isPrimaryClient,I);Ov(n,t,b.cc);const A=new LC(e,t,l);return n.wc.set(e,A),n._c.has(t)?n._c.get(t).push(e):n._c.set(t,[e]),b.snapshot}),Zw.apply(this,arguments)}function BC(n,e){return Kw.apply(this,arguments)}function Kw(){return Kw=(0,ge.Z)(function*(n,e){const t=Ke(n),r=t.wc.get(e),o=t._c.get(r.targetId);if(o.length>1)return t._c.set(r.targetId,o.filter(u=>!hf(u,e))),void t.wc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield _a(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),jg(t.remoteStore,r.targetId),Wg(t,r.targetId)}).catch(Cc))):(Wg(t,r.targetId),yield _a(t.localStore,r.targetId,!0))}),Kw.apply(this,arguments)}function Nv(){return Nv=(0,ge.Z)(function*(n,e,t){const r=tE(n);try{const o=yield function(u,l){const m=Ke(u),I=Xn.now(),b=l.reduce((H,X)=>H.add(X.key),$t());let A,R;return m.persistence.runTransaction("Locally write mutations","readwrite",H=>{let X=Ki(),ye=$t();return m.Zi.getEntries(H,b).next(ke=>{X=ke,X.forEach((Ue,wt)=>{wt.isValidDocument()||(ye=ye.add(Ue))})}).next(()=>m.localDocuments.getOverlayedDocuments(H,X)).next(ke=>{A=ke;const Ue=[];for(const wt of l){const Rt=MD(wt,A.get(wt.key).overlayedDocument);null!=Rt&&Ue.push(new Du(wt.key,Rt,fD(Rt.value.mapValue),Mn.exists(!0)))}return m.mutationQueue.addMutationBatch(H,I,Ue,l)}).next(ke=>{R=ke;const Ue=ke.applyToLocalDocumentSet(A,ye);return m.documentOverlayCache.saveOverlays(H,ke.batchId,Ue)})}).then(()=>({batchId:R.batchId,changes:ED(A)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(u,l,m){let I=u.Tc[u.currentUser.toKey()];I||(I=new An(xt)),I=I.insert(l,m),u.Tc[u.currentUser.toKey()]=I}(r,o.batchId,t),yield Au(r,o.changes),yield yd(r.remoteStore)}catch(o){const u=Of(o,"Failed to persist write");t.reject(u)}}),Nv.apply(this,arguments)}function Yw(n,e){return Rv.apply(this,arguments)}function Rv(){return Rv=(0,ge.Z)(function*(n,e){const t=Ke(n);try{const r=yield function MS(n,e){const t=Ke(n),r=e.snapshotVersion;let o=t.Ji;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const l=t.Zi.newChangeBuffer({trackRemovals:!0});o=t.Ji;const m=[];e.targetChanges.forEach((A,R)=>{const H=o.get(R);if(!H)return;m.push(t.Bs.removeMatchingKeys(u,A.removedDocuments,R).next(()=>t.Bs.addMatchingKeys(u,A.addedDocuments,R)));let X=H.withSequenceNumber(u.currentSequenceNumber);var ye,ke,Ue;null!==e.targetMismatches.get(R)?X=X.withResumeToken(Tr.EMPTY_BYTE_STRING,vt.min()).withLastLimboFreeSnapshotVersion(vt.min()):A.resumeToken.approximateByteSize()>0&&(X=X.withResumeToken(A.resumeToken,r)),o=o.insert(R,X),ke=X,Ue=A,(0===(ye=H).resumeToken.approximateByteSize()||ke.snapshotVersion.toMicroseconds()-ye.snapshotVersion.toMicroseconds()>=3e8||Ue.addedDocuments.size+Ue.modifiedDocuments.size+Ue.removedDocuments.size>0)&&m.push(t.Bs.updateTargetData(u,X))});let I=Ki(),b=$t();if(e.documentUpdates.forEach(A=>{e.resolvedLimboDocuments.has(A)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(u,A))}),m.push(vC(u,l,e.documentUpdates).next(A=>{I=A.nr,b=A.sr})),!r.isEqual(vt.min())){const A=t.Bs.getLastRemoteSnapshotVersion(u).next(R=>t.Bs.setTargetsMetadata(u,u.currentSequenceNumber,r));m.push(A)}return re.waitFor(m).next(()=>l.apply(u)).next(()=>t.localDocuments.getLocalViewOfDocuments(u,I,b)).next(()=>I)}).then(u=>(t.Ji=o,u))}(t.localStore,e);e.targetChanges.forEach((o,u)=>{const l=t.yc.get(u);l&&(ct(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?l.fc=!0:o.modifiedDocuments.size>0?ct(l.fc):o.removedDocuments.size>0&&(ct(l.fc),l.fc=!1))}),yield Au(t,r,e)}catch(r){yield Cc(r)}}),Rv.apply(this,arguments)}function $C(n,e,t){const r=Ke(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const o=[];r.wc.forEach((u,l)=>{const m=l.view.Mu(e);m.snapshot&&o.push(m.snapshot)}),function(u,l){const m=Ke(u);m.onlineState=l;let I=!1;m.queries.forEach((b,A)=>{for(const R of A.listeners)R.Mu(l)&&(I=!0)}),I&&zw(m)}(r.eventManager,e),o.length&&r.dc.nu(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function GS(n,e,t){return HC.apply(this,arguments)}function HC(){return HC=(0,ge.Z)(function*(n,e,t){const r=Ke(n);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.yc.get(e),u=o&&o.key;if(u){let l=new An(Qe.comparator);l=l.insert(u,Fn.newNoDocument(u,vt.min()));const m=$t().add(u),I=new yf(vt.min(),new Map,new An(xt),l,m);yield Yw(r,I),r.gc=r.gc.remove(u),r.yc.delete(e),Pv(r)}else yield _a(r.localStore,e,!1).then(()=>Wg(r,e,t)).catch(Cc)}),HC.apply(this,arguments)}function GC(n,e){return zC.apply(this,arguments)}function zC(){return zC=(0,ge.Z)(function*(n,e){const t=Ke(n),r=e.batch.batchId;try{const o=yield function AS(n,e){const t=Ke(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),u=t.Zi.newChangeBuffer({trackRemovals:!0});return function(l,m,I,b){const A=I.batch,R=A.keys();let H=re.resolve();return R.forEach(X=>{H=H.next(()=>b.getEntry(m,X)).next(ye=>{const ke=I.docVersions.get(X);ct(null!==ke),ye.version.compareTo(ke)<0&&(A.applyToRemoteDocument(ye,I),ye.isValidDocument()&&(ye.setReadTime(I.commitVersion),b.addEntry(ye)))})}),H.next(()=>l.mutationQueue.removeMutationBatch(m,A))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let m=$t();for(let I=0;I<l.mutationResults.length;++I)l.mutationResults[I].transformResults.length>0&&(m=m.add(l.batch.mutations[I].key));return m}(e))).next(()=>t.localDocuments.getDocuments(r,o))})}(t.localStore,e);KC(t,r,null),ZC(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Au(t,o)}catch(o){yield Cc(o)}}),zC.apply(this,arguments)}function $M(n,e,t){return qC.apply(this,arguments)}function qC(){return qC=(0,ge.Z)(function*(n,e,t){const r=Ke(n);try{const o=yield function(u,l){const m=Ke(u);return m.persistence.runTransaction("Reject batch","readwrite-primary",I=>{let b;return m.mutationQueue.lookupMutationBatch(I,l).next(A=>(ct(null!==A),b=A.keys(),m.mutationQueue.removeMutationBatch(I,A))).next(()=>m.mutationQueue.performConsistencyCheck(I)).next(()=>m.documentOverlayCache.removeOverlaysForBatchId(I,b,l)).next(()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(I,b)).next(()=>m.localDocuments.getDocuments(I,b))})}(r.localStore,e);KC(r,e,t),ZC(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Au(r,o)}catch(o){yield Cc(o)}}),qC.apply(this,arguments)}function WC(){return WC=(0,ge.Z)(function*(n,e){const t=Ke(n);wa(t.remoteStore)||Pe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const l=Ke(u);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",m=>l.mutationQueue.getHighestUnacknowledgedBatchId(m))}(t.localStore);if(-1===r)return void e.resolve();const o=t.Ec.get(r)||[];o.push(e),t.Ec.set(r,o)}catch(r){const o=Of(r,"Initialization of waitForPendingWrites() operation failed");e.reject(o)}}),WC.apply(this,arguments)}function ZC(n,e){(n.Ec.get(e)||[]).forEach(t=>{t.resolve()}),n.Ec.delete(e)}function KC(n,e,t){const r=Ke(n);let o=r.Tc[r.currentUser.toKey()];if(o){const u=o.get(e);u&&(t?u.reject(t):u.resolve(),o=o.remove(e)),r.Tc[r.currentUser.toKey()]=o}}function Wg(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n._c.get(e))n.wc.delete(r),t&&n.dc.Pc(r,t);n._c.delete(e),n.isPrimaryClient&&n.Ic.Is(e).forEach(r=>{n.Ic.containsKey(r)||zS(n,r)})}function zS(n,e){n.mc.delete(e.path.canonicalString());const t=n.gc.get(e);null!==t&&(jg(n.remoteStore,t),n.gc=n.gc.remove(e),n.yc.delete(t),Pv(n))}function Ov(n,e,t){for(const r of t)r instanceof PC?(n.Ic.addReference(r.key,e),Qw(n,r)):r instanceof kC?(Pe("SyncEngine","Document no longer in limbo: "+r.key),n.Ic.removeReference(r.key,e),n.Ic.containsKey(r.key)||zS(n,r.key)):st()}function Qw(n,e){const t=e.key,r=t.path.canonicalString();n.gc.get(t)||n.mc.has(r)||(Pe("SyncEngine","New document in limbo: "+t),n.mc.add(r),Pv(n))}function Pv(n){for(;n.mc.size>0&&n.gc.size<n.maxConcurrentLimboResolutions;){const e=n.mc.values().next().value;n.mc.delete(e);const t=new Qe(sn.fromString(e)),r=n.Ac.next();n.yc.set(r,new VC(t)),n.gc=n.gc.insert(t,r),Bg(n.remoteStore,new Ns(Zi(df(t.path)),r,"TargetPurposeLimboResolution",er.ct))}}function Au(n,e,t){return Ff.apply(this,arguments)}function Ff(){return Ff=(0,ge.Z)(function*(n,e,t){const r=Ke(n),o=[],u=[],l=[];var m;r.wc.isEmpty()||(r.wc.forEach((m,I)=>{l.push(r.Rc(I,e,t).then(b=>{if((b||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(I.targetId,b?.fromCache?"not-current":"current"),b){o.push(b);const A=Dw.Li(I.targetId,b);u.push(A)}}))}),yield Promise.all(l),r.dc.nu(o),yield(m=(0,ge.Z)(function*(I,b){const A=Ke(I);try{yield A.persistence.runTransaction("notifyLocalViewChanges","readwrite",R=>re.forEach(b,H=>re.forEach(H.Fi,X=>A.persistence.referenceDelegate.addReference(R,H.targetId,X)).next(()=>re.forEach(H.Bi,X=>A.persistence.referenceDelegate.removeReference(R,H.targetId,X)))))}catch(R){if(!la(R))throw R;Pe("LocalStore","Failed to update sequence numbers: "+R)}for(const R of b){const H=R.targetId;if(!R.fromCache){const X=A.Ji.get(H),ke=X.withLastLimboFreeSnapshotVersion(X.snapshotVersion);A.Ji=A.Ji.insert(H,ke)}}}),function(I,b){return m.apply(this,arguments)})(r.localStore,u))}),Ff.apply(this,arguments)}function qS(n,e){return YC.apply(this,arguments)}function YC(){return YC=(0,ge.Z)(function*(n,e){const t=Ke(n);if(!t.currentUser.isEqual(e)){Pe("SyncEngine","User change. New user:",e.toKey());const r=yield mC(t.localStore,e);t.currentUser=e,(o=t).Ec.forEach(l=>{l.forEach(m=>{m.reject(new De(ae.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.Ec.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Au(t,r.er)}var o}),YC.apply(this,arguments)}function GM(n,e){const t=Ke(n),r=t.yc.get(e);if(r&&r.fc)return $t().add(r.key);{let o=$t();const u=t._c.get(e);if(!u)return o;for(const l of u){const m=t.wc.get(l);o=o.unionWith(m.view.nc)}return o}}function zM(n,e){return kv.apply(this,arguments)}function kv(){return kv=(0,ge.Z)(function*(n,e){const t=Ke(n),r=yield Fg(t.localStore,e.query,!0),o=e.view.hc(r);return t.isPrimaryClient&&Ov(t,e.targetId,o.cc),o}),kv.apply(this,arguments)}function WS(n,e){return Jw.apply(this,arguments)}function Jw(){return Jw=(0,ge.Z)(function*(n,e){const t=Ke(n);return Tw(t.localStore,e).then(r=>Au(t,r))}),Jw.apply(this,arguments)}function ZS(n,e,t,r){return QC.apply(this,arguments)}function QC(){return QC=(0,ge.Z)(function*(n,e,t,r){const o=Ke(n),u=yield function(l,m){const I=Ke(l),b=Ke(I.mutationQueue);return I.persistence.runTransaction("Lookup mutation documents","readonly",A=>b.Sn(A,m).next(R=>R?I.localDocuments.getDocuments(A,R):re.resolve(null)))}(o.localStore,e);var m;null!==u?("pending"===t?yield yd(o.remoteStore):"acknowledged"===t||"rejected"===t?(KC(o,e,r||null),ZC(o,e),m=e,Ke(Ke(o.localStore).mutationQueue).Cn(m)):st(),yield Au(o,u)):Pe("SyncEngine","Cannot apply mutation batch with id: "+e)}),QC.apply(this,arguments)}function Fv(){return Fv=(0,ge.Z)(function*(n,e){const t=Ke(n);if(yi(t),tE(t),!0===e&&!0!==t.vc){const r=t.sharedClientState.getAllActiveQueryTargets(),o=yield Xw(t,r.toArray());t.vc=!0,yield $w(t.remoteStore,!0);for(const u of o)Bg(t.remoteStore,u)}else if(!1===e&&!1!==t.vc){const r=[];let o=Promise.resolve();t._c.forEach((u,l)=>{t.sharedClientState.isLocalQueryTarget(l)?r.push(l):o=o.then(()=>(Wg(t,l),_a(t.localStore,l,!0))),jg(t.remoteStore,l)}),yield o,yield Xw(t,r),function(u){const l=Ke(u);l.yc.forEach((m,I)=>{jg(l.remoteStore,I)}),l.Ic.Ts(),l.yc=new Map,l.gc=new An(Qe.comparator)}(t),t.vc=!1,yield $w(t.remoteStore,!1)}}),Fv.apply(this,arguments)}function Xw(n,e,t){return JC.apply(this,arguments)}function JC(){return JC=(0,ge.Z)(function*(n,e,t){const r=Ke(n),o=[],u=[];for(const l of e){let m;const I=r._c.get(l);if(I&&0!==I.length){m=yield Mf(r.localStore,Zi(I[0]));for(const b of I){const A=r.wc.get(b),R=yield zM(r,A);R.snapshot&&u.push(R.snapshot)}}else{const b=yield bw(r.localStore,l);m=yield Mf(r.localStore,b),yield Ww(r,to(b),l,!1,m.resumeToken)}o.push(m)}return r.dc.nu(u),o}),JC.apply(this,arguments)}function to(n){return _D(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function YS(n){const e=Ke(n);return Ke(Ke(e.localStore).persistence).$i()}function eE(n,e,t,r){return Lv.apply(this,arguments)}function Lv(){return Lv=(0,ge.Z)(function*(n,e,t,r){const o=Ke(n);if(o.vc)return void Pe("SyncEngine","Ignoring unexpected query state notification.");const u=o._c.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const l=yield Tw(o.localStore,wD(u[0])),m=yf.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Tr.EMPTY_BYTE_STRING);yield Au(o,l,m);break}case"rejected":yield _a(o.localStore,e,!0),Wg(o,e,r);break;default:st()}}),Lv.apply(this,arguments)}function QS(n,e,t){return XC.apply(this,arguments)}function XC(){return XC=(0,ge.Z)(function*(n,e,t){const r=yi(n);if(r.vc){for(const o of e){if(r._c.has(o)){Pe("SyncEngine","Adding an already active target "+o);continue}const u=yield bw(r.localStore,o),l=yield Mf(r.localStore,u);yield Ww(r,to(u),l.targetId,!1,l.resumeToken),Bg(r.remoteStore,l)}for(const o of t)r._c.has(o)&&(yield _a(r.localStore,o,!1).then(()=>{jg(r.remoteStore,o),Wg(r,o)}).catch(Cc))}}),XC.apply(this,arguments)}function yi(n){const e=Ke(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Yw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=GM.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=GS.bind(null,e),e.dc.nu=OC.bind(null,e.eventManager),e.dc.Pc=kf.bind(null,e.eventManager),e}function tE(n){const e=Ke(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=GC.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=$M.bind(null,e),e}class Zg{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ge.Z)(function*(){t.serializer=Ug(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return gC(this.persistence,new pC,e.initialUser,this.serializer)}createPersistence(e){return new iv(sv.zs,this.serializer)}createSharedClientState(e){return new hv}terminate(){var e=this;return(0,ge.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Kg extends Zg{constructor(e,t,r){super(),this.Vc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,ge.Z)(function*(){yield t().call(r,e),yield r.Vc.initialize(r,e),yield tE(r.Vc.syncEngine),yield yd(r.Vc.remoteStore),yield r.persistence.Ii(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return gC(this.persistence,new pC,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new tv(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const r=new Ty(t,this.persistence);return new Jl(e.asyncQueue,r)}createPersistence(e){const t=fC(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Oi.withCacheSize(this.cacheSizeBytes):Oi.DEFAULT;return new av(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,gv(),mv(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new hv}}class rE extends Kg{constructor(e,t){super(e,t,!1),this.Vc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,ge.Z)(function*(){yield t().call(r,e);const o=r.Vc.syncEngine;r.sharedClientState instanceof Nw&&(r.sharedClientState.syncEngine={jr:ZS.bind(null,o),zr:eE.bind(null,o),Wr:QS.bind(null,o),$i:YS.bind(null,o),Qr:WS.bind(null,o)},yield r.sharedClientState.start()),yield r.persistence.Ii(function(){var u=(0,ge.Z)(function*(l){yield function KS(n,e){return Fv.apply(this,arguments)}(r.Vc.syncEngine,l),r.gcScheduler&&(l&&!r.gcScheduler.started?r.gcScheduler.start():l||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(l&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():l||r.indexBackfillerScheduler.stop())});return function(l){return u.apply(this,arguments)}}())})()}createSharedClientState(e){const t=gv();if(!Nw.D(t))throw new De(ae.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=fC(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Nw(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class wd{initialize(e,t){var r=this;return(0,ge.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=o=>$C(r.syncEngine,o,1),r.remoteStore.remoteSyncer.handleCredentialChange=qS.bind(null,r.syncEngine),yield $w(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Sv}createDatastore(e){const t=Ug(e.databaseInfo.databaseId),r=new RS(e.databaseInfo);return new vv(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,o=e.asyncQueue,u=m=>$C(this.syncEngine,m,0),l=EC.D()?new EC:new Vg,new TC(t,r,o,u,l);var t,r,o,u,l}createSyncEngine(e,t){return function(r,o,u,l,m,I,b){const A=new HS(r,o,u,l,m,I);return b&&(A.vc=!0),A}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,ge.Z)(function*(t){const r=Ke(t);Pe("RemoteStore","RemoteStore shutting down."),r.vu.add(5),yield xf(r),r.Pu.shutdown(),r.bu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function eb(n,e=10240){let t=0;return{read:()=>(0,ge.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,ge.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class Yg{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):Cr("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class tb{constructor(e,t){this.Cc=e,this.serializer=t,this.metadata=new lr,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then(r=>{r&&r.Qu()?this.metadata.resolve(r.Gu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.Gu)}`))},r=>this.metadata.reject(r))}close(){return this.Cc.cancel()}getMetadata(){var e=this;return(0,ge.Z)(function*(){return e.metadata.promise})()}bc(){var e=this;return(0,ge.Z)(function*(){return yield e.getMetadata(),e.Nc()})()}Nc(){var e=this;return(0,ge.Z)(function*(){const t=yield e.kc();if(null===t)return null;const r=e.xc.decode(t),o=Number(r);isNaN(o)&&e.Mc(`length string (${r}) is not valid number`);const u=yield e.$c(o);return new qw(JSON.parse(u),t.length+o)})()}Oc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}kc(){var e=this;return(0,ge.Z)(function*(){for(;e.Oc()<0&&!(yield e.Fc()););if(0===e.buffer.length)return null;const t=e.Oc();t<0&&e.Mc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}$c(e){var t=this;return(0,ge.Z)(function*(){for(;t.buffer.length<e;)(yield t.Fc())&&t.Mc("Reached the end of bundle when more is expected.");const r=t.xc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Mc(e){throw this.Cc.cancel(),new Error(`Invalid bundle format: ${e}`)}Fc(){var e=this;return(0,ge.Z)(function*(){const t=yield e.Cc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class nb{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ge.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new De(ae.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(o=(0,ge.Z)(function*(u,l){const m=Ke(u),I=Ln(m.serializer)+"/documents",b={documents:l.map(X=>ya(m.serializer,X))},A=yield m.vo("BatchGetDocuments",I,b,l.length),R=new Map;A.forEach(X=>{const ye=function uS(n,e){return"found"in e?function(t,r){ct(!!r.found);const o=va(t,r.found.name),u=Ar(r.found.updateTime),l=r.found.createTime?Ar(r.found.createTime):vt.min(),m=new gi({mapValue:{fields:r.found.fields}});return Fn.newFoundDocument(o,u,l,m)}(n,e):"missing"in e?function(t,r){ct(!!r.missing),ct(!!r.readTime);const o=va(t,r.missing),u=Ar(r.readTime);return Fn.newNoDocument(o,u)}(n,e):st()}(m.serializer,X);R.set(ye.key.toString(),ye)});const H=[];return l.forEach(X=>{const ye=R.get(X.toString());ct(!!ye),H.push(ye)}),H}),function(u,l){return o.apply(this,arguments)})(t.datastore,e);var o;return r.forEach(o=>t.recordVersion(o)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new gf(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ge.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,o)=>{const u=Qe.fromPath(o);e.mutations.push(new z0(u,e.precondition(u)))}),yield(r=(0,ge.Z)(function*(o,u){const l=Ke(o),m=Ln(l.serializer)+"/documents",I={writes:u.map(b=>Ef(l.serializer,b))};yield l.Io("Commit",m,I)}),function(o,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw st();t=vt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new De(ae.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(vt.min())?Mn.exists(!1):Mn.updateTime(t):Mn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(vt.min()))throw new De(ae.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Mn.updateTime(t)}return Mn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class rb{constructor(e,t,r,o,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=o,this.deferred=u,this.Bc=r.maxAttempts,this.qo=new yv(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){var e=this;this.qo.No((0,ge.Z)(function*(){const t=new nb(e.datastore),r=e.qc(t);r&&r.then(o=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(o)}).catch(u=>{e.Uc(u)}))}).catch(o=>{e.Uc(o)})}))}qc(e){try{const t=this.updateFunction(e);return!Xl(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Uc(e){this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Lc(),Promise.resolve()))):this.deferred.reject(e)}Kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!OD(t)}return!1}}class XS{constructor(e,t,r,o){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=kn.UNAUTHENTICATED,this.clientId=KI.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var l=(0,ge.Z)(function*(m){Pe("FirestoreClient","Received user=",m.uid),yield u.authCredentialListener(m),u.user=m});return function(m){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(r,l=>(Pe("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var e=this;return(0,ge.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new De(ae.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new lr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ge.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const o=Of(r,"Failed to shutdown persistence");t.reject(o)}})),t.promise}}function Qg(n,e){return iE.apply(this,arguments)}function iE(){return iE=(0,ge.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Pe("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var o=(0,ge.Z)(function*(u){r.isEqual(u)||(yield mC(e.localStore,u),r=u)});return function(u){return o.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),iE.apply(this,arguments)}function Jg(n,e){return Ea.apply(this,arguments)}function Ea(){return Ea=(0,ge.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield Xg(n);Pe("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(o=>bv(e.remoteStore,o)),n.setAppCheckTokenChangeListener((o,u)=>bv(e.remoteStore,u)),n._onlineComponents=e}),Ea.apply(this,arguments)}function sE(n){return"FirebaseError"===n.name?n.code===ae.FAILED_PRECONDITION||n.code===ae.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function Xg(n){return em.apply(this,arguments)}function em(){return em=(0,ge.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Pe("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Qg(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!sE(t))throw t;To("Error using user provided cache. Falling back to memory cache: "+t),yield Qg(n,new Zg)}}else Pe("FirestoreClient","Using default OfflineComponentProvider"),yield Qg(n,new Zg);return n._offlineComponents}),em.apply(this,arguments)}function Vv(n){return ib.apply(this,arguments)}function ib(){return ib=(0,ge.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Pe("FirestoreClient","Using user provided OnlineComponentProvider"),yield Jg(n,n._uninitializedComponentsProvider._online)):(Pe("FirestoreClient","Using default OnlineComponentProvider"),yield Jg(n,new wd))),n._onlineComponents}),ib.apply(this,arguments)}function oE(n){return Xg(n).then(e=>e.persistence)}function Uv(n){return Xg(n).then(e=>e.localStore)}function sb(n){return Vv(n).then(e=>e.remoteStore)}function aE(n){return Vv(n).then(e=>e.syncEngine)}function Ed(n){return ab.apply(this,arguments)}function ab(){return ab=(0,ge.Z)(function*(n){const e=yield Vv(n),t=e.eventManager;return t.onListen=UC.bind(null,e.syncEngine),t.onUnlisten=BC.bind(null,e.syncEngine),t}),ab.apply(this,arguments)}function tA(n,e,t={}){const r=new lr;return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return function(o,u,l,m,I){const b=new Yg({next:R=>{u.enqueueAndForget(()=>Av(o,A));const H=R.docs.has(l);!H&&R.fromCache?I.reject(new De(ae.UNAVAILABLE,"Failed to get document because the client is offline.")):H&&R.fromCache&&m&&"server"===m.source?I.reject(new De(ae.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):I.resolve(R)},error:R=>I.reject(R)}),A=new Mv(df(l.path),b,{includeMetadataChanges:!0,Ku:!0});return qg(o,A)}(yield Ed(n),n.asyncQueue,e,t,r)})),r.promise}function cE(n,e,t={}){const r=new lr;return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return function(o,u,l,m,I){const b=new Yg({next:R=>{u.enqueueAndForget(()=>Av(o,A)),R.fromCache&&"server"===m.source?I.reject(new De(ae.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):I.resolve(R)},error:R=>I.reject(R)}),A=new Mv(l,b,{includeMetadataChanges:!0,Ku:!0});return qg(o,A)}(yield Ed(n),n.asyncQueue,e,t,r)})),r.promise}function Id(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const tm=new Map;function Bv(n,e,t){if(!t)throw new De(ae.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function lE(n,e,t,r){if(!0===e&&!0===r)throw new De(ae.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function fb(n){if(!Qe.isDocumentKey(n))throw new De(ae.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function pb(n){if(Qe.isDocumentKey(n))throw new De(ae.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function dE(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":st()}function en(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new De(ae.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=dE(n);throw new De(ae.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function gb(n,e){if(e<=0)throw new De(ae.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class mb{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new De(ae.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new De(ae.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}lE("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=Id(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(o){if(void 0!==o.timeoutSeconds){if(isNaN(o.timeoutSeconds))throw new De(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new De(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new De(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class jv{constructor(e,t,r,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new mb({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new De(ae.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new De(ae.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new mb(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new OT;switch(t.type){case"firstParty":return new ug(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new De(ae.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=tm.get(e);t&&(Pe("ComponentProvider","Removing Datastore"),tm.delete(e),t.terminate())}(this),Promise.resolve()}}class tr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ia(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new tr(this.firestore,e,this._key)}}class ei{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ei(this.firestore,e,this._query)}}class Ia extends ei{constructor(e,t,r){super(e,t,df(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new tr(this.firestore,null,new Qe(e))}withConverter(e){return new Ia(this.firestore,e,this._path)}}function yb(n,e,...t){if(n=(0,nn.m9)(n),Bv("collection","path",e),n instanceof jv){const r=sn.fromString(e,...t);return pb(r),new Ia(n,null,r)}{if(!(n instanceof tr||n instanceof Ia))throw new De(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(sn.fromString(e,...t));return pb(r),new Ia(n.firestore,null,r)}}function hE(n,e,...t){if(n=(0,nn.m9)(n),1===arguments.length&&(e=KI.A()),Bv("doc","path",e),n instanceof jv){const r=sn.fromString(e,...t);return fb(r),new tr(n,null,new Qe(r))}{if(!(n instanceof tr||n instanceof Ia))throw new De(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(sn.fromString(e,...t));return fb(r),new tr(n.firestore,n instanceof Ia?n.converter:null,new Qe(r))}}function sA(n,e){return n=(0,nn.m9)(n),e=(0,nn.m9)(e),(n instanceof tr||n instanceof Ia)&&(e instanceof tr||e instanceof Ia)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function vb(n,e){return n=(0,nn.m9)(n),e=(0,nn.m9)(e),n instanceof ei&&e instanceof ei&&n.firestore===e.firestore&&hf(n._query,e._query)&&n.converter===e.converter}class qM{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new yv(this,"async_queue_retry"),this.Xc=()=>{const t=mv();t&&Pe("AsyncQueue","Visibility state changed to "+t.visibilityState),this.qo.Mo()};const e=mv();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=mv();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new lr;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}ea(){var e=this;return(0,ge.Z)(function*(){if(0!==e.Qc.length){try{yield e.Qc[0](),e.Qc.shift(),e.qo.reset()}catch(t){if(!la(t))throw t;Pe("AsyncQueue","Operation failed with retryable error: "+t)}e.Qc.length>0&&e.qo.No(()=>e.ea())}})()}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(r=>{throw this.Wc=r,this.Hc=!1,Cr("INTERNAL UNHANDLED ERROR: ",function(u){let l=u.message||"";return u.stack&&(l=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),l}(r)),r}).then(r=>(this.Hc=!1,r))));return this.Gc=t,t}enqueueAfterDelay(e,t,r){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const o=Hw.createAndSchedule(this,e,t,r,u=>this.na(u));return this.zc.push(o),o}Zc(){this.Wc&&st()}verifyOperationInProgress(){}sa(){var e=this;return(0,ge.Z)(function*(){let t;do{t=e.Gc,yield t}while(t!==e.Gc)})()}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function _b(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const o of["next","error","complete"])if(o in r&&"function"==typeof r[o])return!0;return!1}(n)}class oA{constructor(){this._progressObserver={},this._taskCompletionResolver=new lr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class qn extends jv{constructor(e,t,r,o){super(e,t,r,o),this.type="firestore",this._queue=new qM,this._persistenceKey=o?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||fE(this),this._firestoreClient.terminate()}}function xn(n){return n._firestoreClient||fE(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function fE(n){var e,t,r;const o=n._freezeSettings(),u=(m=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new lD(n._databaseId,m,n._persistenceKey,(b=o).host,b.ssl,b.experimentalForceLongPolling,b.experimentalAutoDetectLongPolling,Id(b.experimentalLongPollingOptions),b.useFetchStreams));var m,b;n._firestoreClient=new XS(n._authCredentials,n._appCheckCredentials,n._queue,u),null!==(t=o.cache)&&void 0!==t&&t._offlineComponentProvider&&null!==(r=o.cache)&&void 0!==r&&r._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:o.cache.kind,_offline:o.cache._offlineComponentProvider,_online:o.cache._onlineComponentProvider})}function wb(n,e,t){const r=new lr;return n.asyncQueue.enqueue((0,ge.Z)(function*(){try{yield Qg(n,t),yield Jg(n,e),r.resolve()}catch(o){const u=o;if(!sE(u))throw u;To("Error enabling indexeddb cache. Falling back to memory cache: "+u),r.reject(u)}})).then(()=>r.promise)}function Ib(n){if(n._initialized||n._terminated)throw new De(ae.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Da{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Da(Tr.fromBase64String(e))}catch(t){throw new De(ae.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Da(Tr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Ca{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new De(ae.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new dr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class $c{constructor(e){this._methodName=e}}class Gv{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new De(ae.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new De(ae.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return xt(this._lat,e._lat)||xt(this._long,e._long)}}const lA=/^__.*__$/;class Db{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Du(e,this.data,this.fieldMask,t,this.fieldTransforms):new cd(e,this.data,t,this.fieldTransforms)}}class zv{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Du(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function dA(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw st()}}class rm{constructor(e,t,r,o,u,l){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=o,void 0===u&&this.ua(),this.fieldTransforms=u||[],this.fieldMask=l||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new rm(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.aa({path:r,la:!1});return o.fa(e),o}da(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.aa({path:r,la:!1});return o.ua(),o}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return Xv(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(dA(this.ca)&&lA.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class vE{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Ug(e)}ya(e,t,r,o=!1){return new rm({ca:e,methodName:t,ga:r,path:dr.emptyPath(),la:!1,ma:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Dd(n){const e=n._freezeSettings(),t=Ug(n._databaseId);return new vE(n._databaseId,!!e.ignoreUndefinedProperties,t)}function qv(n,e,t,r,o,u={}){const l=n.ya(u.merge||u.mergeFields?2:0,e,t,o);Qv("Data must be an object, but it was:",l,r);const m=Yv(r,l);let I,b;if(u.merge)I=new hs(l.fieldMask),b=l.fieldTransforms;else if(u.mergeFields){const A=[];for(const R of u.mergeFields){const H=im(e,R,t);if(!l.contains(H))throw new De(ae.INVALID_ARGUMENT,`Field '${H}' is specified in your field mask but missing from your input data.`);IE(A,H)||A.push(H)}I=new hs(A),b=l.fieldTransforms.filter(R=>I.covers(R.field))}else I=null,b=l.fieldTransforms;return new Db(new gi(m),I,b)}class Wv extends $c{_toFieldTransform(e){if(2!==e.ca)throw e._a(1===e.ca?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Wv}}function hA(n,e,t){return new rm({ca:3,ga:e.settings.ga,methodName:n._methodName,la:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class _E extends $c{_toFieldTransform(e){return new Eg(e.path,new ff)}isEqual(e){return e instanceof _E}}class fA extends $c{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=hA(this,e,!0),r=this.pa.map(u=>Cd(u,t)),o=new Pc(r);return new Eg(e.path,o)}isEqual(e){return this===e}}class pA extends $c{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=hA(this,e,!0),r=this.pa.map(u=>Cd(u,t)),o=new ma(r);return new Eg(e.path,o)}isEqual(e){return this===e}}class gA extends $c{constructor(e,t){super(e),this.Ia=t}_toFieldTransform(e){const t=new ud(e.serializer,jy(e.serializer,this.Ia));return new Eg(e.path,t)}isEqual(e){return this===e}}function Zv(n,e,t,r){const o=n.ya(1,e,t);Qv("Data must be an object, but it was:",o,r);const u=[],l=gi.empty();ha(r,(I,b)=>{const A=Jv(e,I,t);b=(0,nn.m9)(b);const R=o.da(A);if(b instanceof Wv)u.push(A);else{const H=Cd(b,R);null!=H&&(u.push(A),l.set(A,H))}});const m=new hs(u);return new zv(l,m,o.fieldTransforms)}function Kv(n,e,t,r,o,u){const l=n.ya(1,e,t),m=[im(e,r,t)],I=[o];if(u.length%2!=0)throw new De(ae.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let H=0;H<u.length;H+=2)m.push(im(e,u[H])),I.push(u[H+1]);const b=[],A=gi.empty();for(let H=m.length-1;H>=0;--H)if(!IE(b,m[H])){const X=m[H];let ye=I[H];ye=(0,nn.m9)(ye);const ke=l.da(X);if(ye instanceof Wv)b.push(X);else{const Ue=Cd(ye,ke);null!=Ue&&(b.push(X),A.set(X,Ue))}}const R=new hs(b);return new zv(A,R,l.fieldTransforms)}function mA(n,e,t,r=!1){return Cd(t,n.ya(r?4:3,e))}function Cd(n,e){if(wE(n=(0,nn.m9)(n)))return Qv("Unsupported field value:",e,n),Yv(n,e);if(n instanceof $c)return function(t,r){if(!dA(r.ca))throw r._a(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r._a(`${t._methodName}() is not currently supported inside arrays`);const o=t._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.la&&4!==e.ca)throw e._a("Nested arrays are not supported");return function(t,r){const o=[];let u=0;for(const l of t){let m=Cd(l,r.wa(u));null==m&&(m={nullValue:"NULL_VALUE"}),o.push(m),u++}return{arrayValue:{values:o}}}(n,e)}return function(t,r){if(null===(t=(0,nn.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return jy(r.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const o=Xn.fromDate(t);return{timestampValue:dd(r.serializer,o)}}if(t instanceof Xn){const o=new Xn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:dd(r.serializer,o)}}if(t instanceof Gv)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Da)return{bytesValue:oS(r.serializer,t._byteString)};if(t instanceof tr){const o=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(o))throw r._a(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:nw(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r._a(`Unsupported field value: ${dE(t)}`)}(n,e)}function Yv(n,e){const t={};return pg(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ha(n,(r,o)=>{const u=Cd(o,e.ha(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function wE(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Xn||n instanceof Gv||n instanceof Da||n instanceof tr||n instanceof $c)}function Qv(n,e,t){if(!wE(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=dE(t);throw e._a("an object"===r?n+" a custom object":n+" "+r)}var r}function im(n,e,t){if((e=(0,nn.m9)(e))instanceof Ca)return e._internalPath;if("string"==typeof e)return Jv(n,e);throw Xv("Field path arguments must be of type string or ",n,!1,void 0,t)}const EE=new RegExp("[~\\*/\\[\\]]");function Jv(n,e,t){if(e.search(EE)>=0)throw Xv(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Ca(...e.split("."))._internalPath}catch{throw Xv(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Xv(n,e,t,r,o){const u=r&&!r.isEmpty(),l=void 0!==o;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let I="";return(u||l)&&(I+=" (found",u&&(I+=` in field ${r}`),l&&(I+=` in document ${o}`),I+=")"),new De(ae.INVALID_ARGUMENT,m+n+I)}function IE(n,e){return n.some(t=>t.isEqual(e))}class Lf{constructor(e,t,r,o,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new tr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new YM(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(e_("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class YM extends Lf{data(){return super.data()}}function e_(n,e){return"string"==typeof e?Jv(n,e):e instanceof Ca?e._internalPath:e._delegate._internalPath}function sm(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new De(ae.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Cb{}class om extends Cb{}function bd(n,e,...t){let r=[];e instanceof Cb&&r.push(e),r=r.concat(t),function(o){const u=o.filter(m=>m instanceof am).length,l=o.filter(m=>m instanceof t_).length;if(u>1||u>0&&l>0)throw new De(ae.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const o of r)n=o._apply(n);return n}class t_ extends om{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new t_(e,t,r)}_apply(e){const t=this._parse(e);return p(e._query,t),new ei(e.firestore,e.converter,Vy(e._query,t))}_parse(e){const t=Dd(e.firestore);return function(o,u,l,m,I,b,A){let R;if(I.isKeyField()){if("array-contains"===b||"array-contains-any"===b)throw new De(ae.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if("in"===b||"not-in"===b){d(A,b);const H=[];for(const X of A)H.push(c(m,o,X));R={arrayValue:{values:H}}}else R=c(m,o,A)}else"in"!==b&&"not-in"!==b&&"array-contains-any"!==b||d(A,b),R=mA(l,"where",A,"in"===b||"not-in"===b);return Xt.create(I,b,R)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class am extends Cb{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new am(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:vn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,o){let u=r;const l=o.getFlattenedFilters();for(const m of l)p(u,m),u=Vy(u,m)}(e._query,t),new ei(e.firestore,e.converter,Vy(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class bb extends om{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new bb(e,t)}_apply(e){const t=function(r,o,u){if(null!==r.startAt)throw new De(ae.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new De(ae.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new sd(o,u);return function(m,I){if(null===F0(m)){const b=hr(m);null!==b&&y(0,b,I.field)}}(r,l),l}(e._query,this._field,this._direction);return new ei(e.firestore,e.converter,function(r,o){const u=r.explicitOrderBy.concat([o]);return new Nc(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class DE extends om{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new DE(e,t,r)}_apply(e){return new ei(e.firestore,e.converter,Uy(e._query,this._limit,this._limitType))}}class CE extends om{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new CE(e,t,r)}_apply(e){const t=a(e,this.type,this._docOrFields,this._inclusive);return new ei(e.firestore,e.converter,(o=t,new Nc((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)));var r,o}}class bE extends om{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new bE(e,t,r)}_apply(e){const t=a(e,this.type,this._docOrFields,this._inclusive);return new ei(e.firestore,e.converter,(o=t,new Nc((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)));var r,o}}function a(n,e,t,r){if(t[0]=(0,nn.m9)(t[0]),t[0]instanceof Lf)return function(o,u,l,m,I){if(!m)throw new De(ae.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const b=[];for(const A of ad(o))if(A.field.isKeyField())b.push(id(u,m.key));else{const R=m.data.field(A.field);if(Ay(R))throw new De(ae.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+A.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===R){const H=A.field.canonicalString();throw new De(ae.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${H}' (used as the orderBy) does not exist.`)}b.push(R)}return new fa(b,I)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const o=Dd(n.firestore);return function(u,l,m,I,b,A){const R=u.explicitOrderBy;if(b.length>R.length)throw new De(ae.INVALID_ARGUMENT,`Too many arguments provided to ${I}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const H=[];for(let X=0;X<b.length;X++){const ye=b[X];if(R[X].field.isKeyField()){if("string"!=typeof ye)throw new De(ae.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${I}(), but got a ${typeof ye}`);if(!Ly(u)&&-1!==ye.indexOf("/"))throw new De(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${I}() must be a plain document ID, but '${ye}' contains a slash.`);const ke=u.path.child(sn.fromString(ye));if(!Qe.isDocumentKey(ke))throw new De(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${I}() must result in a valid document path, but '${ke}' is not because it contains an odd number of segments.`);const Ue=new Qe(ke);H.push(id(l,Ue))}else{const ke=mA(m,I,ye);H.push(ke)}}return new fa(H,A)}(n._query,n.firestore._databaseId,o,e,t,r)}}function c(n,e,t){if("string"==typeof(t=(0,nn.m9)(t))){if(""===t)throw new De(ae.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ly(e)&&-1!==t.indexOf("/"))throw new De(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(sn.fromString(t));if(!Qe.isDocumentKey(r))throw new De(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return id(n,new Qe(r))}if(t instanceof tr)return id(n,t._key);throw new De(ae.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${dE(t)}.`)}function d(n,e){if(!Array.isArray(n)||0===n.length)throw new De(ae.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function p(n,e){if(e.isInequality()){const r=hr(n),o=e.field;if(null!==r&&!r.isEqual(o))throw new De(ae.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${o.toString()}'`);const u=F0(n);null!==u&&y(0,o,u)}const t=function(r,o){for(const u of r)for(const l of u.getFlattenedFilters())if(o.indexOf(l.op)>=0)return l.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new De(ae.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function y(n,e,t){if(!t.isEqual(e))throw new De(ae.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class D{convertValue(e,t="none"){switch(Eu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Sr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(wu(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw st()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return ha(e,(o,u)=>{r[o]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new Gv(Sr(e.latitude),Sr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=sf(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(gg(e));default:return null}}convertTimestamp(e){const t=So(e);return new Xn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=sn.fromString(e);ct(If(r));const o=new Tc(r.get(1),r.get(3)),u=new Qe(r.popFirst(5));return o.isEqual(t)||Cr(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function S(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class N extends D{constructor(e){super(),this.firestore=e}convertBytes(e){return new Da(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new tr(this.firestore,null,t)}}class je{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ot extends Lf{constructor(e,t,r,o,u,l){super(e,t,r,o,l),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new we(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(e_("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class we extends ot{data(e={}){return super.data(e)}}class _t{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new je(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new we(this._firestore,this._userDataWriter,r.key,r,new je(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new De(ae.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(l=>({type:"added",doc:new we(r._firestore,r._userDataWriter,l.doc.key,l.doc,new je(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>o||3!==l.type).map(l=>{const m=new we(r._firestore,r._userDataWriter,l.doc.key,l.doc,new je(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let I=-1,b=-1;return 0!==l.type&&(I=u.indexOf(l.doc.key),u=u.delete(l.doc.key)),1!==l.type&&(u=u.add(l.doc),b=u.indexOf(l.doc.key)),{type:Qt(l.type),doc:m,oldIndex:I,newIndex:b}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Qt(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return st()}}function gn(n,e){return n instanceof ot&&e instanceof ot?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof _t&&e instanceof _t&&n._firestore===e._firestore&&vb(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class Mu extends D{constructor(e){super(),this.firestore=e}convertBytes(e){return new Da(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new tr(this.firestore,null,t)}}function ex(n,e,t){n=en(n,tr);const r=en(n.firestore,qn),o=S(n.converter,e,t);return n_(r,[qv(Dd(r),"setDoc",n._key,o,null!==n.converter,t).toMutation(n._key,Mn.none())])}function tx(n,e,t,...r){n=en(n,tr);const o=en(n.firestore,qn),u=Dd(o);let l;return l="string"==typeof(e=(0,nn.m9)(e))||e instanceof Ca?Kv(u,"updateDoc",n._key,e,t,r):Zv(u,"updateDoc",n._key,e),n_(o,[l.toMutation(n._key,Mn.exists(!0))])}function nx(n,...e){var t,r,o;n=(0,nn.m9)(n);let u={includeMetadataChanges:!1},l=0;"object"!=typeof e[l]||_b(e[l])||(u=e[l],l++);const m={includeMetadataChanges:u.includeMetadataChanges};if(_b(e[l])){const R=e[l];e[l]=null===(t=R.next)||void 0===t?void 0:t.bind(R),e[l+1]=null===(r=R.error)||void 0===r?void 0:r.bind(R),e[l+2]=null===(o=R.complete)||void 0===o?void 0:o.bind(R)}let I,b,A;if(n instanceof tr)b=en(n.firestore,qn),A=df(n._key.path),I={next:R=>{e[l]&&e[l](wA(b,n,R))},error:e[l+1],complete:e[l+2]};else{const R=en(n,ei);b=en(R.firestore,qn),A=R._query;const H=new Mu(b);I={next:X=>{e[l]&&e[l](new _t(b,H,R,X))},error:e[l+1],complete:e[l+2]},sm(n._query)}return function(R,H,X,ye){const ke=new Yg(ye),Ue=new Mv(H,ke,X);return R.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return qg(yield Ed(R),Ue)})),()=>{ke.Dc(),R.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return Av(yield Ed(R),Ue)}))}}(xn(b),A,m,I)}function n_(n,e){return function(t,r){const o=new lr;return t.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return function jC(n,e,t){return Nv.apply(this,arguments)}(yield aE(t),r,o)})),o.promise}(xn(n),e)}function wA(n,e,t){const r=t.docs.get(e._key),o=new Mu(n);return new ot(n,o,e._key,r,new je(t.hasPendingWrites,t.fromCache),e.converter)}const TR={maxAttempts:5};class rx{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Dd(e)}set(e,t,r){this._verifyNotCommitted();const o=Vf(e,this._firestore),u=S(o.converter,t,r),l=qv(this._dataReader,"WriteBatch.set",o._key,u,null!==o.converter,r);return this._mutations.push(l.toMutation(o._key,Mn.none())),this}update(e,t,r,...o){this._verifyNotCommitted();const u=Vf(e,this._firestore);let l;return l="string"==typeof(t=(0,nn.m9)(t))||t instanceof Ca?Kv(this._dataReader,"WriteBatch.update",u._key,t,r,o):Zv(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(l.toMutation(u._key,Mn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Vf(e,this._firestore);return this._mutations=this._mutations.concat(new gf(t._key,Mn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new De(ae.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Vf(n,e){if((n=(0,nn.m9)(n)).firestore!==e)throw new De(ae.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class SR extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Dd(e)}get(e){const t=Vf(e,this._firestore),r=new N(this._firestore);return this._transaction.lookup([t._key]).then(o=>{if(!o||1!==o.length)return st();const u=o[0];if(u.isFoundDocument())return new Lf(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new Lf(this._firestore,r,t._key,null,t.converter);throw st()})}set(e,t,r){const o=Vf(e,this._firestore),u=S(o.converter,t,r),l=qv(this._dataReader,"Transaction.set",o._key,u,null!==o.converter,r);return this._transaction.set(o._key,l),this}update(e,t,r,...o){const u=Vf(e,this._firestore);let l;return l="string"==typeof(t=(0,nn.m9)(t))||t instanceof Ca?Kv(this._dataReader,"Transaction.update",u._key,t,r,o):Zv(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,l),this}delete(e){const t=Vf(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Vf(e,this._firestore),r=new Mu(this._firestore);return super.get(e).then(o=>new ot(this._firestore,r,t._key,o._document,new je(!1,!1),t.converter))}}function EA(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new De("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function sx(){if(typeof Uint8Array>"u")throw new De("unimplemented","Uint8Arrays are not available in this environment.")}function ox(){if(!function YT(){return typeof atob<"u"}())throw new De("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Qh=fu.SDK_VERSION,(0,fu._registerComponent)(new Hm.wA("firestore",(t,{instanceIdentifier:r,options:o})=>{const u=t.getProvider("app").getImmediate(),l=new qn(new f0(t.getProvider("auth-internal")),new ZI(t.getProvider("app-check-internal")),function(m,I){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new De(ae.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Tc(m.options.projectId,I)}(u,r),u);return o=Object.assign({useFetchStreams:e},o),l._setSettings(o),l},"PUBLIC").setMultipleInstances(!0)),(0,fu.registerVersion)(Dy,"3.13.0",n),(0,fu.registerVersion)(Dy,"3.13.0","esm2017")}();class TE{constructor(e){this._delegate=e}static fromBase64String(e){return ox(),new TE(Da.fromBase64String(e))}static fromUint8Array(e){return sx(),new TE(Da.fromUint8Array(e))}toBase64(){return ox(),this._delegate.toBase64()}toUint8Array(){return sx(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function IA(n){return function FR(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class LR{enableIndexedDbPersistence(e,t){return function pE(n,e){Ib(n=en(n,qn));const t=xn(n);if(t._uninitializedComponentsProvider)throw new De(ae.FAILED_PRECONDITION,"SDK cache is already specified.");To("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=n._freezeSettings(),o=new wd;return wb(t,o,new Kg(o,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function gE(n){Ib(n=en(n,qn));const e=xn(n);if(e._uninitializedComponentsProvider)throw new De(ae.FAILED_PRECONDITION,"SDK cache is already specified.");To("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),r=new wd;return wb(e,r,new rE(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function mE(n){if(n._initialized&&!n._terminated)throw new De(ae.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new lr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,ge.Z)(function*(){try{yield(t=(0,ge.Z)(function*(r){if(!ds.D())return Promise.resolve();const o=r+"main";yield ds.delete(o)}),function(r){return t.apply(this,arguments)})(fC(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class ax{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Tc||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&To("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function rA(n,e,t,r={}){var o;const u=(n=en(n,jv))._getSettings(),l=`${e}:${t}`;if("firestore.googleapis.com"!==u.host&&u.host!==l&&To("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},u),{host:l,ssl:!1})),r.mockUserToken){let m,I;if("string"==typeof r.mockUserToken)m=r.mockUserToken,I=kn.MOCK_USER;else{m=(0,nn.Sg)(r.mockUserToken,null===(o=n._app)||void 0===o?void 0:o.options.projectId);const b=r.mockUserToken.sub||r.mockUserToken.user_id;if(!b)throw new De(ae.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");I=new kn(b)}n._authCredentials=new PT(new qI(m,I))}}(this._delegate,e,t,r)}enableNetwork(){return function Hv(n){return function ub(n){return n.asyncQueue.enqueue((0,ge.Z)(function*(){const e=yield oE(n),t=yield sb(n);return e.setNetworkEnabled(!0),function(r){const o=Ke(r);return o.vu.delete(0),md(o)}(t)}))}(xn(n=en(n,qn)))}(this._delegate)}disableNetwork(){return function ZM(n){return function eA(n){return n.asyncQueue.enqueue((0,ge.Z)(function*(){const e=yield oE(n),t=yield sb(n);return e.setNetworkEnabled(!1),(r=(0,ge.Z)(function*(o){const u=Ke(o);u.vu.add(0),yield xf(u),u.bu.set("Offline")}),function(o){return r.apply(this,arguments)})(t);var r}))}(xn(n=en(n,qn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,lE("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function yE(n){return function(e){const t=new lr;return e.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return function HM(n,e){return WC.apply(this,arguments)}(yield aE(e),t)})),t.promise}(xn(n=en(n,qn)))}(this._delegate)}onSnapshotsInSync(e){return function yR(n,e){return function lb(n,e){const t=new Yg(e);return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return r=yield Ed(n),o=t,Ke(r).ku.add(o),void o.next();var r,o})),()=>{t.Dc(),n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return r=yield Ed(n),o=t,void Ke(r).ku.delete(o);var r,o}))}}(xn(n=en(n,qn)),_b(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new De("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new r_(this,yb(this._delegate,e))}catch(t){throw Rs(t,"collection()","Firestore.collection()")}}doc(e){try{return new ba(this,hE(this._delegate,e))}catch(t){throw Rs(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Os(this,function iA(n,e){if(n=en(n,jv),Bv("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new De(ae.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ei(n,null,(t=e,new Nc(sn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Rs(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function AR(n,e,t){n=en(n,qn);const r=Object.assign(Object.assign({},TR),t);return function(o){if(o.maxAttempts<1)throw new De(ae.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,u,l){const m=new lr;return o.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){const I=yield function ob(n){return Vv(n).then(e=>e.datastore)}(o);new rb(o.asyncQueue,I,l,u,m).run()})),m.promise}(xn(n),o=>e(new SR(n,o)),r)}(this._delegate,t=>e(new ux(this,t)))}batch(){return xn(this._delegate),new cx(new rx(this._delegate,e=>n_(this._delegate,e)))}loadBundle(e){return function KM(n,e){const t=xn(n=en(n,qn)),r=new oA;return function nA(n,e,t,r){const o=function(u,l){let m;return m="string"==typeof u?kD().encode(u):u,I=function(I,b){if(I instanceof Uint8Array)return eb(I,b);if(I instanceof ArrayBuffer)return eb(new Uint8Array(I),b);if(I instanceof ReadableStream)return I.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(m),new tb(I,l);var I}(t,Ug(e));n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){!function nE(n,e,t){const r=Ke(n);var o;(o=(0,ge.Z)(function*(u,l,m){try{const I=yield l.getMetadata();if(yield function(H,X){const ye=Ke(H),ke=Ar(X.createTime);return ye.persistence.runTransaction("hasNewerBundle","readonly",Ue=>ye.qs.getBundleMetadata(Ue,X.id)).then(Ue=>!!Ue&&Ue.createTime.compareTo(ke)>=0)}(u.localStore,I))return yield l.close(),m._completeWith({taskState:"Success",documentsLoaded:(H=I).totalDocuments,bytesLoaded:H.totalBytes,totalDocuments:H.totalDocuments,totalBytes:H.totalBytes}),Promise.resolve(new Set);m._updateProgress($S(I));const b=new jS(I,u.localStore,l.serializer);let A=yield l.bc();for(;A;){const H=yield b.zu(A);H&&m._updateProgress(H),A=yield l.bc()}const R=yield b.complete();return yield Au(u,R.Ju,void 0),yield function(H,X){const ye=Ke(H);return ye.persistence.runTransaction("Save bundle","readwrite",ke=>ye.qs.saveBundleMetadata(ke,X))}(u.localStore,I),m._completeWith(R.progress),Promise.resolve(R.Hu)}catch(I){return To("SyncEngine",`Loading bundle failed with ${I}`),m._failWith(I),Promise.resolve(new Set)}var H}),function(u,l,m){return o.apply(this,arguments)})(r,e,t).then(o=>{r.sharedClientState.notifyBundleLoaded(o)})}(yield aE(n),o,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function Eb(n,e){return function db(n,e){return n.asyncQueue.enqueue((0,ge.Z)(function*(){return function(t,r){const o=Ke(t);return o.persistence.runTransaction("Get named query","readonly",u=>o.qs.getNamedQuery(u,r))}(yield Uv(n),e)}))}(xn(n=en(n,qn)),e).then(t=>t?new ei(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Os(this,t):null)}}class Tb extends D{constructor(e){super(),this.firestore=e}convertBytes(e){return new TE(new Da(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return ba.forKey(t,this.firestore,null)}}class ux{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Tb(e)}get(e){const t=cm(e);return this._delegate.get(t).then(r=>new SE(this._firestore,new ot(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const o=cm(e);return r?(EA("Transaction.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=cm(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=cm(e);return this._delegate.delete(t),this}}class cx{constructor(e){this._delegate=e}set(e,t,r){const o=cm(e);return r?(EA("WriteBatch.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=cm(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=cm(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class um{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new we(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new AE(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=um.INSTANCES;let o=r.get(e);o||(o=new WeakMap,r.set(e,o));let u=o.get(t);return u||(u=new um(e,new Tb(e),t),o.set(t,u)),u}}um.INSTANCES=new WeakMap;class ba{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Tb(e)}static forPath(e,t,r){if(e.length%2!=0)throw new De("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new ba(t,new tr(t._delegate,r,new Qe(e)))}static forKey(e,t,r){return new ba(t,new tr(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new r_(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new r_(this.firestore,yb(this._delegate,e))}catch(t){throw Rs(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,nn.m9)(e))instanceof tr&&sA(this._delegate,e)}set(e,t){t=EA("DocumentReference.set",t);try{return t?ex(this._delegate,e,t):ex(this._delegate,e)}catch(r){throw Rs(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?tx(this._delegate,e):tx(this._delegate,e,t,...r)}catch(o){throw Rs(o,"updateDoc()","DocumentReference.update()")}}delete(){return function gR(n){return n_(en(n.firestore,qn),[new gf(n._key,Mn.none())])}(this._delegate)}onSnapshot(...e){const t=lx(e),r=dx(e,o=>new SE(this.firestore,new ot(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)));return nx(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function lR(n){n=en(n,tr);const e=en(n.firestore,qn),t=xn(e),r=new Mu(e);return function cb(n,e){const t=new lr;return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return(r=(0,ge.Z)(function*(o,u,l){try{const m=yield function(I,b){const A=Ke(I);return A.persistence.runTransaction("read document","readonly",R=>A.localDocuments.getDocument(R,b))}(o,u);m.isFoundDocument()?l.resolve(m):m.isNoDocument()?l.resolve(null):l.reject(new De(ae.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(m){const I=Of(m,`Failed to get document '${u} from cache`);l.reject(I)}}),function(o,u,l){return r.apply(this,arguments)})(yield Uv(n),e,t);var r})),t.promise}(t,n._key).then(o=>new ot(e,r,n._key,o,new je(null!==o&&o.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function dR(n){n=en(n,tr);const e=en(n.firestore,qn);return tA(xn(e),n._key,{source:"server"}).then(t=>wA(e,n,t))}(this._delegate):function Ro(n){n=en(n,tr);const e=en(n.firestore,qn);return tA(xn(e),n._key).then(t=>wA(e,n,t))}(this._delegate),t.then(r=>new SE(this.firestore,new ot(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new ba(this.firestore,this._delegate.withConverter(e?um.getInstance(this.firestore,e):null))}}function Rs(n,e,t){return n.message=n.message.replace(e,t),n}function lx(n){for(const e of n)if("object"==typeof e&&!IA(e))return e;return{}}function dx(n,e){var t,r;let o;return o=IA(n[0])?n[0]:IA(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{o.next&&o.next(e(u))},error:null===(t=o.error)||void 0===t?void 0:t.bind(o),complete:null===(r=o.complete)||void 0===r?void 0:r.bind(o)}}class SE{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new ba(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return gn(this._delegate,e._delegate)}}class AE extends SE{data(e){const t=this._delegate.data(e);return function ag(n,e){n||st()}(void 0!==t),t}}class Os{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Tb(e)}where(e,t,r){try{return new Os(this.firestore,bd(this._delegate,function yA(n,e,t){const r=e,o=e_("where",n);return t_._create(o,r,t)}(e,t,r)))}catch(o){throw Rs(o,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Os(this.firestore,bd(this._delegate,function vA(n,e="asc"){const t=e,r=e_("orderBy",n);return bb._create(r,t)}(e,t)))}catch(r){throw Rs(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Os(this.firestore,bd(this._delegate,function QM(n){return gb("limit",n),DE._create("limit",n,"F")}(e)))}catch(t){throw Rs(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Os(this.firestore,bd(this._delegate,function JM(n){return gb("limitToLast",n),DE._create("limitToLast",n,"L")}(e)))}catch(t){throw Rs(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Os(this.firestore,bd(this._delegate,function XM(...n){return CE._create("startAt",n,!0)}(...e)))}catch(t){throw Rs(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Os(this.firestore,bd(this._delegate,function _A(...n){return CE._create("startAfter",n,!1)}(...e)))}catch(t){throw Rs(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Os(this.firestore,bd(this._delegate,function i(...n){return bE._create("endBefore",n,!1)}(...e)))}catch(t){throw Rs(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Os(this.firestore,bd(this._delegate,function s(...n){return bE._create("endAt",n,!0)}(...e)))}catch(t){throw Rs(t,"endAt()","Query.endAt()")}}isEqual(e){return vb(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function fR(n){n=en(n,ei);const e=en(n.firestore,qn),t=xn(e),r=new Mu(e);return function uE(n,e){const t=new lr;return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return(r=(0,ge.Z)(function*(o,u,l){try{const m=yield Fg(o,u,!0),I=new FC(u,m.ir),b=I.sc(m.documents),A=I.applyChanges(b,!1);l.resolve(A.snapshot)}catch(m){const I=Of(m,`Failed to execute query '${u} against cache`);l.reject(I)}}),function(o,u,l){return r.apply(this,arguments)})(yield Uv(n),e,t);var r})),t.promise}(t,n._query).then(o=>new _t(e,r,n,o))}(this._delegate):"server"===e?.source?function pR(n){n=en(n,ei);const e=en(n.firestore,qn),t=xn(e),r=new Mu(e);return cE(t,n._query,{source:"server"}).then(o=>new _t(e,r,n,o))}(this._delegate):function hR(n){n=en(n,ei);const e=en(n.firestore,qn),t=xn(e),r=new Mu(e);return sm(n._query),cE(t,n._query).then(o=>new _t(e,r,n,o))}(this._delegate),t.then(r=>new DA(this.firestore,new _t(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=lx(e),r=dx(e,o=>new DA(this.firestore,new _t(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)));return nx(this._delegate,t,r)}withConverter(e){return new Os(this.firestore,this._delegate.withConverter(e?um.getInstance(this.firestore,e):null))}}class UR{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new AE(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class DA{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Os(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new AE(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new UR(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new AE(this._firestore,r))})}isEqual(e){return gn(this._delegate,e._delegate)}}class r_ extends Os{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new ba(this.firestore,e):null}doc(e){try{return new ba(this.firestore,void 0===e?hE(this._delegate):hE(this._delegate,e))}catch(t){throw Rs(t,"doc()","CollectionReference.doc()")}}add(e){return function mR(n,e){const t=en(n.firestore,qn),r=hE(n),o=S(n.converter,e);return n_(t,[qv(Dd(n.firestore),"addDoc",r._key,o,null!==n.converter,{}).toMutation(r._key,Mn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new ba(this.firestore,t))}isEqual(e){return sA(this._delegate,e._delegate)}withConverter(e){return new r_(this.firestore,this._delegate.withConverter(e?um.getInstance(this.firestore,e):null))}}function cm(n){return en(n,tr)}class CA{constructor(...e){this._delegate=new Ca(...e)}static documentId(){return new CA(dr.keyField().canonicalString())}isEqual(e){return(e=(0,nn.m9)(e))instanceof Ca&&this._delegate._internalPath.isEqual(e._internalPath)}}class lm{constructor(e){this._delegate=e}static serverTimestamp(){const e=function xR(){return new _E("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new lm(e)}static delete(){const e=function MR(){return new Wv("deleteField")}();return e._methodName="FieldValue.delete",new lm(e)}static arrayUnion(...e){const t=function NR(...n){return new fA("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new lm(t)}static arrayRemove(...e){const t=function RR(...n){return new pA("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new lm(t)}static increment(e){const t=function OR(n){return new gA("increment",n)}(e);return t._methodName="FieldValue.increment",new lm(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const BR={Firestore:ax,GeoPoint:Gv,Timestamp:Xn,Blob:TE,Transaction:ux,WriteBatch:cx,DocumentReference:ba,DocumentSnapshot:SE,Query:Os,QueryDocumentSnapshot:AE,QuerySnapshot:DA,CollectionReference:r_,FieldPath:CA,FieldValue:lm,setLogLevel:function VR(n){!function RT(n){Dc.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function $R(n){(function jR(n,e){n.INTERNAL.registerComponent(new Hm.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),o=t.getProvider("firestore").getImmediate();return e(r,o)},"PUBLIC").setServiceProps(Object.assign({},BR)))})(n,(e,t)=>new ax(e,t,new LR)),n.registerVersion("@firebase/firestore-compat","0.3.12")}(CM.Z);var dm=O(7579),HR=O(6451),Sb=O(5363);function Qi(n,e){return(0,Ss.e)((t,r)=>{let o=null,u=0,l=!1;const m=()=>l&&!o&&r.complete();t.subscribe((0,Hn.x)(r,I=>{o?.unsubscribe();let b=0;const A=u++;(0,tu.Xf)(n(I,A)).subscribe(o=(0,Hn.x)(r,R=>r.next(e?e(I,R,A,b++):R),()=>{o=null,m()}))},()=>{l=!0,m()}))})}var GR=O(6063);class zR extends dm.x{constructor(e=1/0,t=1/0,r=GR.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:o,_timestampProvider:u,_windowTime:l}=this;t||(r.push(e),!o&&r.push(u.now()+l)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:o}=this,u=o.slice();for(let l=0;l<u.length&&!e.closed;l+=r?1:2)e.next(u[l]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:o}=this,u=(o?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!o){const l=t.now();let m=0;for(let I=1;I<r.length&&r[I]<=l;I+=2)m=I;m&&r.splice(0,m+1)}}}var qR=O(3099);function hx(n,e,t){let r,o=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:o=!1,scheduler:t}=n):r=n??1/0,(0,qR.B)({connector:()=>new zR(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:o})}const Ab=(0,O(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Uf=O(515);function i_(n){return n<=0?()=>Uf.E:(0,Ss.e)((e,t)=>{let r=0;e.subscribe((0,Hn.x)(t,o=>{++r<=n&&(t.next(o),n<=r&&t.complete())}))})}function Mb(n){return(0,Ss.e)((e,t)=>{let r=!1;e.subscribe((0,Hn.x)(t,o=>{r=!0,t.next(o)},()=>{r||t.next(n),t.complete()}))})}function fx(n=ZR){return(0,Ss.e)((e,t)=>{let r=!1;e.subscribe((0,Hn.x)(t,o=>{r=!0,t.next(o)},()=>r?t.complete():t.error(n())))})}function ZR(){return new Ab}var xb=O(4671);function Bf(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Io((o,u)=>n(o,u,r)):xb.y,i_(1),t?Mb(e):fx(()=>new Ab))}var ME=O(576);function px(n,e){return(0,ME.m)(e)?Qi(()=>n,e):Qi(()=>n)}var bA=O(9468);O(259);const SA=new Map,mx={activated:!1,tokenObservers:[]},XR={initialized:!1,enabled:!1};function Ur(n){return SA.get(n)||Object.assign({},mx)}function Rb(){return XR}const AA="https://content-firebaseappcheck.googleapis.com/v1",rO="exchangeDebugToken",yx={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class sO{constructor(e,t,r,o,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=o,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=o,o>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,ge.Z)(function*(){t.stop();try{t.pending=new nn.BH,yield function oO(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new nn.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Ji=new nn.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function MA(n){if(!Ur(n).activated)throw Ji.create("use-before-activation",{appName:n.name})}function kb(n,e){return NA.apply(this,arguments)}function NA(){return NA=(0,ge.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},o=t.getImmediate({optional:!0});if(o){const R=yield o.getHeartbeatsHeader();R&&(r["X-Firebase-Client"]=R)}const u={method:"POST",body:JSON.stringify(e),headers:r};let l,m;try{l=yield fetch(n,u)}catch(R){throw Ji.create("fetch-network-error",{originalErrorMessage:R?.message})}if(200!==l.status)throw Ji.create("fetch-status-error",{httpStatus:l.status});try{m=yield l.json()}catch(R){throw Ji.create("fetch-parse-error",{originalErrorMessage:R?.message})}const I=m.ttl.match(/^([\d.]+)(s)$/);if(!I||!I[2]||isNaN(Number(I[1])))throw Ji.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${m.ttl}`});const b=1e3*Number(I[1]),A=Date.now();return{token:m.token,expireTimeMillis:A+b,issuedAtTimeMillis:A}}),NA.apply(this,arguments)}function vx(n,e){const{projectId:t,appId:r,apiKey:o}=n.options;return{url:`${AA}/projects/${t}/apps/${r}:${rO}?key=${o}`,body:{debug_token:e}}}const lO="firebase-app-check-database",dO=1,xE="firebase-app-check-store";let Fb=null;function RA(){return RA=(0,ge.Z)(function*(n,e){const r=(yield function wx(){return Fb||(Fb=new Promise((n,e)=>{try{const t=indexedDB.open(lO,dO);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var o;e(Ji.create("storage-open",{originalErrorMessage:null===(o=r.target.error)||void 0===o?void 0:o.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(xE,{keyPath:"compositeKey"})}}catch(t){e(Ji.create("storage-open",{originalErrorMessage:t?.message}))}}),Fb)}()).transaction(xE,"readwrite"),u=r.objectStore(xE).put({compositeKey:n,value:e});return new Promise((l,m)=>{u.onsuccess=I=>{l()},r.onerror=I=>{var b;m(Ji.create("storage-set",{originalErrorMessage:null===(b=I.target.error)||void 0===b?void 0:b.message}))}})}),RA.apply(this,arguments)}const NE=new Ys.Yd("@firebase/app-check");function kA(n,e){return(0,nn.hl)()?function fO(n,e){return function Ex(n,e){return RA.apply(this,arguments)}(function Dx(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{NE.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function LA(){return Rb().enabled}function VA(){return UA.apply(this,arguments)}function UA(){return UA=(0,ge.Z)(function*(){const n=Rb();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),UA.apply(this,arguments)}const _O={error:"UNKNOWN_ERROR"};function wO(n){return nn.US.encodeString(JSON.stringify(n),!1)}function Lb(n){return BA.apply(this,arguments)}function BA(){return BA=(0,ge.Z)(function*(n,e=!1){const t=n.app;MA(t);const r=Ur(t);let u,o=r.token;if(o&&!s_(o)&&(r.token=void 0,o=void 0),!o){const I=yield r.cachedTokenPromise;I&&(s_(I)?o=I:yield kA(t,void 0))}if(!e&&o&&s_(o))return{token:o.token};let m,l=!1;if(LA()){r.exchangeTokenPromise||(r.exchangeTokenPromise=kb(vx(t,yield VA()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),l=!0);const I=yield r.exchangeTokenPromise;return yield kA(t,I),r.token=I,{token:I.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),l=!0),o=yield Ur(t).exchangeTokenPromise}catch(I){"appCheck/throttled"===I.code?NE.warn(I.message):NE.error(I),u=I}return o?u?m=s_(o)?{token:o.token,internalError:u}:Sx(u):(m={token:o.token},r.token=o,yield kA(t,o)):m=Sx(u),l&&function Tx(n,e){const t=Ur(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}(t,m),m}),BA.apply(this,arguments)}function jA(){return jA=(0,ge.Z)(function*(n){const e=n.app;MA(e);const{provider:t}=Ur(e);if(LA()){const r=yield VA(),{token:o}=yield kb(vx(e,r),n.heartbeatServiceProvider);return{token:o}}{const{token:r}=yield t.getToken();return{token:r}}}),jA.apply(this,arguments)}function HA(n,e){const t=Ur(n),r=t.tokenObservers.filter(o=>o.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function bx(n){const{app:e}=n,t=Ur(e);let r=t.tokenRefresher;r||(r=function EO(n){const{app:e}=n;return new sO((0,ge.Z)(function*(){let r;if(r=Ur(e).token?yield Lb(n,!0):yield Lb(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=Ur(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},yx.RETRIAL_MIN_WAIT,yx.RETRIAL_MAX_WAIT)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function s_(n){return n.expireTimeMillis-Date.now()>0}function Sx(n){return{token:wO(_O),error:n}}class IO{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Ur(this.app);for(const t of e)HA(this.app,t.next);return Promise.resolve()}}const kx="app-check-internal";!function FO(){(0,fu._registerComponent)(new Hm.wA("app-check",n=>function DO(n,e){return new IO(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(kx).initialize()})),(0,fu._registerComponent)(new Hm.wA(kx,n=>function CO(n){return{getToken:e=>Lb(n,e),getLimitedUseToken:()=>function Cx(n){return jA.apply(this,arguments)}(n),addTokenListener:e=>function $A(n,e,t,r){const{app:o}=n,u=Ur(o);if(u.tokenObservers=[...u.tokenObservers,{next:t,error:r,type:e}],u.token&&s_(u.token)){const m=u.token;Promise.resolve().then(()=>{t({token:m.token}),bx(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>bx(n))}(n,"INTERNAL",e),removeTokenListener:e=>HA(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,fu.registerVersion)("@firebase/app-check","0.8.0")}();class WA{constructor(){return(0,Dr.vb)("app-check")}}typeof window<"u"&&window;var jO=O(9260);const Lx=new h.OlP("angularfire2.auth.use-emulator"),Vx=new h.OlP("angularfire2.auth.settings"),Ux=new h.OlP("angularfire2.auth.tenant-id"),Bx=new h.OlP("angularfire2.auth.langugage-code"),jx=new h.OlP("angularfire2.auth.use-device-language"),$x=new h.OlP("angularfire.auth.persistence"),Hx=(n,e,t,r,o,u,l,m)=>(0,Ai.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const I=e.runOutsideAngular(()=>n.auth());if(t&&I.useEmulator(...t),r&&(I.tenantId=r),I.languageCode=o,u&&I.useDeviceLanguage(),l)for(const[b,A]of Object.entries(l))I.settings[b]=A;return m&&I.setPersistence(m),I},[t,r,o,u,l,m]);let Gx=(()=>{class n{constructor(t,r,o,u,l,m,I,b,A,R,H,X){const ye=new dm.x,ke=(0,Et.of)(void 0).pipe((0,Sb.Q)(l.outsideAngular),Qi(()=>u.runOutsideAngular(()=>Promise.resolve().then(O.bind(O,2644)))),(0,Tt.U)(()=>(0,Ai.on)(t,u,r)),(0,Tt.U)(Ue=>Hx(Ue,u,m,b,A,R,I,H)),hx({bufferSize:1,refCount:!1}));if(uo(o))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,Et.of)(null);else{ke.pipe(Bf()).subscribe();const wt=ke.pipe(Qi(Pt=>Pt.getRedirectResult().then(zt=>zt,()=>null)),Dr.iC,hx({bufferSize:1,refCount:!1})),Rt=ke.pipe(Qi(Pt=>new _r.y(zt=>({unsubscribe:u.runOutsideAngular(()=>Pt.onAuthStateChanged(cn=>zt.next(cn),cn=>zt.error(cn),()=>zt.complete()))})))),St=ke.pipe(Qi(Pt=>new _r.y(zt=>({unsubscribe:u.runOutsideAngular(()=>Pt.onIdTokenChanged(cn=>zt.next(cn),cn=>zt.error(cn),()=>zt.complete()))}))));this.authState=wt.pipe(px(Rt),(0,bA.R)(l.outsideAngular),(0,Sb.Q)(l.insideAngular)),this.user=wt.pipe(px(St),(0,bA.R)(l.outsideAngular),(0,Sb.Q)(l.insideAngular)),this.idToken=this.user.pipe(Qi(Pt=>Pt?(0,fn.D)(Pt.getIdToken()):(0,Et.of)(null))),this.idTokenResult=this.user.pipe(Qi(Pt=>Pt?(0,fn.D)(Pt.getIdTokenResult()):(0,Et.of)(null))),this.credential=(0,HR.T)(wt,ye,this.authState.pipe(Io(Pt=>!Pt))).pipe((0,Tt.U)(Pt=>Pt?.user?Pt:null),(0,bA.R)(l.outsideAngular),(0,Sb.Q)(l.insideAngular))}return(0,Ai.pX)(this,ke,u,{spy:{apply:(Ue,wt,Rt)=>{(Ue.startsWith("signIn")||Ue.startsWith("createUser"))&&Rt.then(St=>ye.next(St))}}})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Ai.Dh),h.LFG(Ai.xv,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(Dr.HU),h.LFG(Lx,8),h.LFG(Vx,8),h.LFG(Ux,8),h.LFG(Bx,8),h.LFG(jx,8),h.LFG($x,8),h.LFG(WA,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function zx(n,e){return function HO(n,e=Ch.z){return new _r.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function KA(n,e){return zx(n,e).pipe((0,Tt.U)(t=>({payload:t,type:"query"})))}function Ub(n,e){return KA(n,e).pipe(Fp(void 0),jm(),(0,Tt.U)(([t,r])=>{const o=r.payload.docChanges(),u=o.map(l=>({type:l.type,payload:l}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((l,m)=>{const I=o.find(A=>A.doc.ref.isEqual(l.ref)),b=t?.payload.docs.find(A=>A.ref.isEqual(l.ref));I&&JSON.stringify(I.doc.metadata)===JSON.stringify(l.metadata)||!I&&b&&JSON.stringify(b.metadata)===JSON.stringify(l.metadata)||u.push({type:"modified",payload:{oldIndex:m,newIndex:m,type:"modified",doc:l}})}),u}))}function qx(n,e,t){return Ub(n,t).pipe(bh((r,o)=>function zO(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function qO(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return YA(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return YA(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return YA(n,e.oldIndex,1)}return n}(n,r))}),n}(r,o.map(u=>u.payload),e),[]),(0,Th.x)(),(0,Tt.U)(r=>r.map(o=>({type:o.type,payload:o}))))}function YA(n,e,t,...r){const o=n.slice();return o.splice(e,t,...r),o}function Wx(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class Zx{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=Ub(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Tt.U)(r=>r.filter(o=>e.indexOf(o.type)>-1)))),t.pipe(Fp(void 0),jm(),Io(([r,o])=>o.length>0||!r),(0,Tt.U)(([r,o])=>o),Dr.iC)}auditTrail(e){return this.stateChanges(e).pipe(bh((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=Wx(e);return qx(this.query,t,this.afs.schedulers.outsideAngular).pipe(Dr.iC)}valueChanges(e={}){return KA(this.query,this.afs.schedulers.outsideAngular).pipe((0,Tt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Dr.iC)}get(e){return(0,fn.D)(this.query.get(e)).pipe(Dr.iC)}add(e){return this.ref.add(e)}doc(e){return new Kx(this.ref.doc(e),this.afs)}}class Kx{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:o,query:u}=Jx(r,t);return new Zx(o,u,this.afs)}snapshotChanges(){return function GO(n,e){return zx(n,e).pipe(Fp(void 0),jm(),(0,Tt.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Dr.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Tt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,fn.D)(this.ref.get(e)).pipe(Dr.iC)}}class WO{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?Ub(this.query,this.afs.schedulers.outsideAngular).pipe((0,Tt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Io(t=>t.length>0),Dr.iC):Ub(this.query,this.afs.schedulers.outsideAngular).pipe(Dr.iC)}auditTrail(e){return this.stateChanges(e).pipe(bh((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=Wx(e);return qx(this.query,t,this.afs.schedulers.outsideAngular).pipe(Dr.iC)}valueChanges(e={}){return KA(this.query,this.afs.schedulers.outsideAngular).pipe((0,Tt.U)(r=>r.payload.docs.map(o=>e.idField?Object.assign({[e.idField]:o.id},o.data()):o.data())),Dr.iC)}get(e){return(0,fn.D)(this.query.get(e)).pipe(Dr.iC)}}const Yx=new h.OlP("angularfire2.enableFirestorePersistence"),Qx=new h.OlP("angularfire2.firestore.persistenceSettings"),ZO=new h.OlP("angularfire2.firestore.settings"),KO=new h.OlP("angularfire2.firestore.use-emulator");function Jx(n,e=(t=>t)){return{query:e(n),ref:n}}let Xx=(()=>{class n{constructor(t,r,o,u,l,m,I,b,A,R,H,X,ye,ke,Ue,wt,Rt){this.schedulers=I;const St=(0,Ai.on)(t,m,r),Pt=A;R&&Hx(St,m,H,ye,ke,Ue,X,wt),[this.firestore,this.persistenceEnabled$]=(0,Ai.cc)(`${St.name}.firestore`,"AngularFirestore",St.name,()=>{const zt=m.runOutsideAngular(()=>St.firestore());if(u&&zt.settings(u),Pt&&zt.useEmulator(...Pt),o&&!uo(l)){const cn=()=>{try{return(0,fn.D)(zt.enablePersistence(b||void 0).then(()=>!0,()=>!1))}catch(ps){return typeof console<"u"&&console.warn(ps),(0,Et.of)(!1)}};return[zt,m.runOutsideAngular(cn)]}return[zt,(0,Et.of)(!1)]},[u,Pt,o])}collection(t,r){let o;o="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:l}=Jx(o,r),m=this.schedulers.ngZone.run(()=>u);return new Zx(m,l,this)}collectionGroup(t,r){const o=r||(l=>l),u=this.firestore.collectionGroup(t);return new WO(o(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const o=this.schedulers.ngZone.run(()=>r);return new Kx(o,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Ai.Dh),h.LFG(Ai.xv,8),h.LFG(Yx,8),h.LFG(ZO,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(Dr.HU),h.LFG(Qx,8),h.LFG(KO,8),h.LFG(Gx,8),h.LFG(Lx,8),h.LFG(Vx,8),h.LFG(Ux,8),h.LFG(Bx,8),h.LFG(jx,8),h.LFG($x,8),h.LFG(WA,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),YO=(()=>{class n{constructor(){jO.Z.registerVersion("angularfire",Dr.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:Yx,useValue:!0},{provide:Qx,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[Xx]}),n})();const QO_firebase={apiKey:"AIzaSyBE-Xqz8366R9ZGFi9PS53BIGMEzFnjnSE",authDomain:"test-cleaver.firebaseapp.com",projectId:"test-cleaver",storageBucket:"test-cleaver.appspot.com",messagingSenderId:"1089347099344",appId:"1:1089347099344:web:f30bfb900a0b0312585cd5"};var xu=O(1135),XO=O(9672);function QA(...n){const e=(0,Yo.yG)(n),t=(0,Yo.jO)(n),{args:r,keys:o}=Ko(n);if(0===r.length)return(0,fn.D)([],e);const u=new _r.y(function e1(n,e,t=xb.y){return r=>{eN(e,()=>{const{length:o}=n,u=new Array(o);let l=o,m=o;for(let I=0;I<o;I++)eN(e,()=>{const b=(0,fn.D)(n[I],e);let A=!1;b.subscribe((0,Hn.x)(r,R=>{u[I]=R,A||(A=!0,m--),m||r.next(t(u.slice()))},()=>{--l||r.complete()}))},r)},r)}}(r,e,o?l=>qs(o,l):xb.y));return t?u.pipe(ru(t)):u}function eN(n,e,t){n?(0,XO.f)(t,n,e):e()}function tN(n){return new _r.y(e=>{(0,tu.Xf)(n()).subscribe(e)})}var t1=O(9635);function RE(n,e){const t=(0,ME.m)(n)?n:()=>n,r=o=>o.error(t());return new _r.y(e?o=>e.schedule(r,0,o):r)}var nN=O(727);function JA(){return(0,Ss.e)((n,e)=>{let t=null;n._refCount++;const r=(0,Hn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const o=n._connection,u=t;t=null,o&&(!u||o===u)&&o.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class rN extends _r.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Ss.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new nN.w0;const t=this.getSubject();e.add(this.source.subscribe((0,Hn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=nN.w0.EMPTY)}return e}refCount(){return JA()(this)}}var Ps=O(5577);function OE(n,e){return(0,ME.m)(e)?(0,Ps.z)(n,e,1):(0,Ps.z)(n,1)}var ks=O(8505);function hm(n){return(0,Ss.e)((e,t)=>{let u,r=null,o=!1;r=e.subscribe((0,Hn.x)(t,void 0,void 0,l=>{u=(0,tu.Xf)(n(l,hm(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):o=!0})),o&&(r.unsubscribe(),r=null,u.subscribe(t))})}function XA(n){return n<=0?()=>Uf.E:(0,Ss.e)((e,t)=>{let r=[];e.subscribe((0,Hn.x)(t,o=>{r.push(o),n<r.length&&r.shift()},()=>{for(const o of r)t.next(o);t.complete()},void 0,()=>{r=null}))})}function eM(n){return(0,Ss.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const Zt="primary",PE=Symbol("RouteTitle");class i1{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function o_(n){return new i1(n)}function s1(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const o={};for(let u=0;u<r.length;u++){const l=r[u],m=n[u];if(l.startsWith(":"))o[l.substring(1)]=m;else if(l!==m.path)return null}return{consumed:n.slice(0,r.length),posParams:o}}function Hc(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let o;for(let u=0;u<t.length;u++)if(o=t[u],!iN(n[o],e[o]))return!1;return!0}function iN(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((o,u)=>r[u]===o)}return n===e}function sN(n){return n.length>0?n[n.length-1]:null}function jf(n){return function JO(n){return!!n&&(n instanceof _r.y||(0,ME.m)(n.lift)&&(0,ME.m)(n.subscribe))}(n)?n:(0,h.QGY)(n)?(0,fn.D)(Promise.resolve(n)):(0,Et.of)(n)}const a1={exact:function uN(n,e,t){if(!fm(n.segments,e.segments)||!Bb(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!uN(n.children[r],e.children[r],t))return!1;return!0},subset:cN},oN={exact:function u1(n,e){return Hc(n,e)},subset:function c1(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>iN(n[t],e[t]))},ignored:()=>!0};function aN(n,e,t){return a1[t.paths](n.root,e.root,t.matrixParams)&&oN[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function cN(n,e,t){return lN(n,e,e.segments,t)}function lN(n,e,t,r){if(n.segments.length>t.length){const o=n.segments.slice(0,t.length);return!(!fm(o,t)||e.hasChildren()||!Bb(o,t,r))}if(n.segments.length===t.length){if(!fm(n.segments,t)||!Bb(n.segments,t,r))return!1;for(const o in e.children)if(!n.children[o]||!cN(n.children[o],e.children[o],r))return!1;return!0}{const o=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(fm(n.segments,o)&&Bb(n.segments,o,r)&&n.children[Zt])&&lN(n.children[Zt],e,u,r)}}function Bb(n,e,t){return e.every((r,o)=>oN[t](n[o].parameters,r.parameters))}class a_{constructor(e=new Nn([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=o_(this.queryParams)),this._queryParamMap}toString(){return h1.serialize(this)}}class Nn{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return jb(this)}}class kE{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=o_(this.parameters)),this._parameterMap}toString(){return fN(this)}}function fm(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let FE=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return new tM},providedIn:"root"}),n})();class tM{parse(e){const t=new D1(e);return new a_(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${LE(e.root,!0)}`,r=function g1(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(o=>`${$b(t)}=${$b(o)}`).join("&"):`${$b(t)}=${$b(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams),o="string"==typeof e.fragment?`#${function f1(n){return encodeURI(n)}(e.fragment)}`:"";return`${t}${r}${o}`}}const h1=new tM;function jb(n){return n.segments.map(e=>fN(e)).join("/")}function LE(n,e){if(!n.hasChildren())return jb(n);if(e){const t=n.children[Zt]?LE(n.children[Zt],!1):"",r=[];return Object.entries(n.children).forEach(([o,u])=>{o!==Zt&&r.push(`${o}:${LE(u,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function d1(n,e){let t=[];return Object.entries(n.children).forEach(([r,o])=>{r===Zt&&(t=t.concat(e(o,r)))}),Object.entries(n.children).forEach(([r,o])=>{r!==Zt&&(t=t.concat(e(o,r)))}),t}(n,(r,o)=>o===Zt?[LE(n.children[Zt],!1)]:[`${o}:${LE(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Zt]?`${jb(n)}/${t[0]}`:`${jb(n)}/(${t.join("//")})`}}function dN(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function $b(n){return dN(n).replace(/%3B/gi,";")}function nM(n){return dN(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Hb(n){return decodeURIComponent(n)}function hN(n){return Hb(n.replace(/\+/g,"%20"))}function fN(n){return`${nM(n.path)}${function p1(n){return Object.keys(n).map(e=>`;${nM(e)}=${nM(n[e])}`).join("")}(n.parameters)}`}const m1=/^[^\/()?;#]+/;function rM(n){const e=n.match(m1);return e?e[0]:""}const y1=/^[^\/()?;=#]+/,_1=/^[^=?&#]+/,E1=/^[^&#]+/;class D1{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Nn([],{}):new Nn([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Zt]=new Nn(e,t)),r}parseSegment(){const e=rM(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new h.vHH(4009,!1);return this.capture(e),new kE(Hb(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=function v1(n){const e=n.match(y1);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=rM(this.remaining);o&&(r=o,this.capture(r))}e[Hb(t)]=Hb(r)}parseQueryParam(e){const t=function w1(n){const e=n.match(_1);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const l=function I1(n){const e=n.match(E1);return e?e[0]:""}(this.remaining);l&&(r=l,this.capture(r))}const o=hN(t),u=hN(r);if(e.hasOwnProperty(o)){let l=e[o];Array.isArray(l)||(l=[l],e[o]=l),l.push(u)}else e[o]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=rM(this.remaining),o=this.remaining[r.length];if("/"!==o&&")"!==o&&";"!==o)throw new h.vHH(4010,!1);let u;r.indexOf(":")>-1?(u=r.slice(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=Zt);const l=this.parseChildren();t[u]=1===Object.keys(l).length?l[Zt]:new Nn([],l),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new h.vHH(4011,!1)}}function pN(n){return n.segments.length>0?new Nn([],{[Zt]:n}):n}function gN(n){const e={};for(const r of Object.keys(n.children)){const u=gN(n.children[r]);if(r===Zt&&0===u.segments.length&&u.hasChildren())for(const[l,m]of Object.entries(u.children))e[l]=m;else(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function C1(n){if(1===n.numberOfChildren&&n.children[Zt]){const e=n.children[Zt];return new Nn(n.segments.concat(e.segments),e.children)}return n}(new Nn(n.segments,e))}function pm(n){return n instanceof a_}function mN(n){let e;const o=pN(function t(u){const l={};for(const I of u.children){const b=t(I);l[I.outlet]=b}const m=new Nn(u.url,l);return u===n&&(e=m),m}(n.root));return e??o}function yN(n,e,t,r){let o=n;for(;o.parent;)o=o.parent;if(0===e.length)return iM(o,o,o,t,r);const u=function T1(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new _N(!0,0,n);let e=0,t=!1;const r=n.reduce((o,u,l)=>{if("object"==typeof u&&null!=u){if(u.outlets){const m={};return Object.entries(u.outlets).forEach(([I,b])=>{m[I]="string"==typeof b?b.split("/"):b}),[...o,{outlets:m}]}if(u.segmentPath)return[...o,u.segmentPath]}return"string"!=typeof u?[...o,u]:0===l?(u.split("/").forEach((m,I)=>{0==I&&"."===m||(0==I&&""===m?t=!0:".."===m?e++:""!=m&&o.push(m))}),o):[...o,u]},[]);return new _N(t,e,r)}(e);if(u.toRoot())return iM(o,o,new Nn([],{}),t,r);const l=function S1(n,e,t){if(n.isAbsolute)return new zb(e,!0,0);if(!t)return new zb(e,!1,NaN);if(null===t.parent)return new zb(t,!0,0);const r=Gb(n.commands[0])?0:1;return function A1(n,e,t){let r=n,o=e,u=t;for(;u>o;){if(u-=o,r=r.parent,!r)throw new h.vHH(4005,!1);o=r.segments.length}return new zb(r,!1,o-u)}(t,t.segments.length-1+r,n.numberOfDoubleDots)}(u,o,n),m=l.processChildren?UE(l.segmentGroup,l.index,u.commands):wN(l.segmentGroup,l.index,u.commands);return iM(o,l.segmentGroup,m,t,r)}function Gb(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function VE(n){return"object"==typeof n&&null!=n&&n.outlets}function iM(n,e,t,r,o){let l,u={};r&&Object.entries(r).forEach(([I,b])=>{u[I]=Array.isArray(b)?b.map(A=>`${A}`):`${b}`}),l=n===e?t:vN(n,e,t);const m=pN(gN(l));return new a_(m,u,o)}function vN(n,e,t){const r={};return Object.entries(n.children).forEach(([o,u])=>{r[o]=u===e?t:vN(u,e,t)}),new Nn(n.segments,r)}class _N{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Gb(r[0]))throw new h.vHH(4003,!1);const o=r.find(VE);if(o&&o!==sN(r))throw new h.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class zb{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function wN(n,e,t){if(n||(n=new Nn([],{})),0===n.segments.length&&n.hasChildren())return UE(n,e,t);const r=function x1(n,e,t){let r=0,o=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;o<n.segments.length;){if(r>=t.length)return u;const l=n.segments[o],m=t[r];if(VE(m))break;const I=`${m}`,b=r<t.length-1?t[r+1]:null;if(o>0&&void 0===I)break;if(I&&b&&"object"==typeof b&&void 0===b.outlets){if(!IN(I,b,l))return u;r+=2}else{if(!IN(I,{},l))return u;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}(n,e,t),o=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new Nn(n.segments.slice(0,r.pathIndex),{});return u.children[Zt]=new Nn(n.segments.slice(r.pathIndex),n.children),UE(u,0,o)}return r.match&&0===o.length?new Nn(n.segments,{}):r.match&&!n.hasChildren()?sM(n,e,t):r.match?UE(n,0,o):sM(n,e,t)}function UE(n,e,t){if(0===t.length)return new Nn(n.segments,{});{const r=function M1(n){return VE(n[0])?n[0].outlets:{[Zt]:n}}(t),o={};if(!r[Zt]&&n.children[Zt]&&1===n.numberOfChildren&&0===n.children[Zt].segments.length){const u=UE(n.children[Zt],e,t);return new Nn(n.segments,u.children)}return Object.entries(r).forEach(([u,l])=>{"string"==typeof l&&(l=[l]),null!==l&&(o[u]=wN(n.children[u],e,l))}),Object.entries(n.children).forEach(([u,l])=>{void 0===r[u]&&(o[u]=l)}),new Nn(n.segments,o)}}function sM(n,e,t){const r=n.segments.slice(0,e);let o=0;for(;o<t.length;){const u=t[o];if(VE(u)){const I=N1(u.outlets);return new Nn(r,I)}if(0===o&&Gb(t[0])){r.push(new kE(n.segments[e].path,EN(t[0]))),o++;continue}const l=VE(u)?u.outlets[Zt]:`${u}`,m=o<t.length-1?t[o+1]:null;l&&m&&Gb(m)?(r.push(new kE(l,EN(m))),o+=2):(r.push(new kE(l,{})),o++)}return new Nn(r,{})}function N1(n){const e={};return Object.entries(n).forEach(([t,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[t]=sM(new Nn([],{}),0,r))}),e}function EN(n){const e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function IN(n,e,t){return n==t.path&&Hc(e,t.parameters)}const BE="imperative";class Gc{constructor(e,t){this.id=e,this.url=t}}class oM extends Gc{constructor(e,t,r="imperative",o=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class gm extends Gc{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class qb extends Gc{constructor(e,t,r,o){super(e,t),this.reason=r,this.code=o,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class jE extends Gc{constructor(e,t,r,o){super(e,t),this.reason=r,this.code=o,this.type=16}}class aM extends Gc{constructor(e,t,r,o){super(e,t),this.error=r,this.target=o,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class R1 extends Gc{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class O1 extends Gc{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class P1 extends Gc{constructor(e,t,r,o,u){super(e,t),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=u,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class k1 extends Gc{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class F1 extends Gc{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class L1{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class V1{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class U1{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class B1{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class j1{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class $1{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class DN{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class H1{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new $E,this.attachRef=null}}let $E=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const o=this.getOrCreateContext(t);o.outlet=r,this.contexts.set(t,o)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new H1,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class CN{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=uM(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=uM(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=cM(e,this._root);return t.length<2?[]:t[t.length-2].children.map(o=>o.value).filter(o=>o!==e)}pathFromRoot(e){return cM(e,this._root).map(t=>t.value)}}function uM(n,e){if(n===e.value)return e;for(const t of e.children){const r=uM(n,t);if(r)return r}return null}function cM(n,e){if(n===e.value)return[e];for(const t of e.children){const r=cM(n,t);if(r.length)return r.unshift(e),r}return[]}class Td{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function u_(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class bN extends CN{constructor(e,t){super(e),this.snapshot=t,lM(this,e)}toString(){return this.snapshot.toString()}}function TN(n,e){const t=function G1(n,e){const l=new Wb([],{},{},"",{},Zt,e,null,{});return new AN("",new Td(l,[]))}(0,e),r=new xu.X([new kE("",{})]),o=new xu.X({}),u=new xu.X({}),l=new xu.X({}),m=new xu.X(""),I=new c_(r,o,l,m,u,Zt,e,t.root);return I.snapshot=t.root,new bN(new Td(I,[]),t)}class c_{constructor(e,t,r,o,u,l,m,I){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=o,this.dataSubject=u,this.outlet=l,this.component=m,this._futureSnapshot=I,this.title=this.dataSubject?.pipe((0,Tt.U)(b=>b[PE]))??(0,Et.of)(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Tt.U)(e=>o_(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Tt.U)(e=>o_(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function SN(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const o=t[r],u=t[r-1];if(o.routeConfig&&""===o.routeConfig.path)r--;else{if(u.component)break;r--}}return function z1(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Wb{get title(){return this.data?.[PE]}constructor(e,t,r,o,u,l,m,I,b){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=l,this.component=m,this.routeConfig=I,this._resolve=b}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=o_(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=o_(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class AN extends CN{constructor(e,t){super(t),this.url=e,lM(this,t)}toString(){return MN(this._root)}}function lM(n,e){e.value._routerState=n,e.children.forEach(t=>lM(n,t))}function MN(n){const e=n.children.length>0?` { ${n.children.map(MN).join(", ")} } `:"";return`${n.value}${e}`}function dM(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Hc(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Hc(e.params,t.params)||n.paramsSubject.next(t.params),function o1(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Hc(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.urlSubject.next(t.url),Hc(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function hM(n,e){const t=Hc(n.params,e.params)&&function l1(n,e){return fm(n,e)&&n.every((t,r)=>Hc(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||hM(n.parent,e.parent))}let fM=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=Zt,this.activateEvents=new h.vpe,this.deactivateEvents=new h.vpe,this.attachEvents=new h.vpe,this.detachEvents=new h.vpe,this.parentContexts=(0,h.f3M)($E),this.location=(0,h.f3M)(h.s_b),this.changeDetector=(0,h.f3M)(h.sBO),this.environmentInjector=(0,h.f3M)(h.lqb),this.inputBinder=(0,h.f3M)(Zb,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:o}=t.name;if(r)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new h.vHH(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new h.vHH(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new h.vHH(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new h.vHH(4013,!1);this._activatedRoute=t;const o=this.location,l=t.snapshot.component,m=this.parentContexts.getOrCreateContext(this.name).children,I=new q1(t,m,o.injector);this.activated=o.createComponent(l,{index:o.length,injector:I,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=h.lG2({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[h.TTD]}),n})();class q1{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===c_?this.route:e===$E?this.childContexts:this.parent.get(e,t)}}const Zb=new h.OlP("");let xN=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:r}=t,o=QA([r.queryParams,r.params,r.data]).pipe(Qi(([u,l,m],I)=>(m={...u,...l,...m},0===I?(0,Et.of)(m):Promise.resolve(m)))).subscribe(u=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(t);const l=(0,h.qFp)(r.component);if(l)for(const{templateName:m}of l.inputs)t.activatedComponentRef.setInput(m,u[m]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,o)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function HE(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const o=function Z1(n,e,t){return e.children.map(r=>{for(const o of t.children)if(n.shouldReuseRoute(r.value,o.value.snapshot))return HE(n,r,o);return HE(n,r)})}(n,e,t);return new Td(r,o)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const l=u.route;return l.value._futureSnapshot=e.value,l.children=e.children.map(m=>HE(n,m)),l}}const r=function K1(n){return new c_(new xu.X(n.url),new xu.X(n.params),new xu.X(n.queryParams),new xu.X(n.fragment),new xu.X(n.data),n.outlet,n.component,n)}(e.value),o=e.children.map(u=>HE(n,u));return new Td(r,o)}}const pM="ngNavigationCancelingError";function NN(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=pm(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,o=RN(!1,0,e);return o.url=t,o.navigationBehaviorOptions=r,o}function RN(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[pM]=!0,r.cancellationCode=e,t&&(r.url=t),r}function ON(n){return PN(n)&&pm(n.url)}function PN(n){return n&&n[pM]}let kN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[h.jDz],decls:1,vars:0,template:function(t,r){1&t&&h._UZ(0,"router-outlet")},dependencies:[fM],encapsulation:2}),n})();function gM(n){const e=n.children&&n.children.map(gM),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Zt&&(t.component=kN),t}function Nu(n){return n.outlet||Zt}function GE(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class nP{constructor(e,t,r,o,u){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=o,this.inputBindingEnabled=u}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),dM(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const o=u_(t);e.children.forEach(u=>{const l=u.value.outlet;this.deactivateRoutes(u,o[l],r),delete o[l]}),Object.values(o).forEach(u=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(o===u)if(o.component){const l=r.getContext(o.outlet);l&&this.deactivateChildRoutes(e,t,l.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=u_(e);for(const l of Object.keys(u))this.deactivateRouteAndItsChildren(u[l],o);if(r&&r.outlet){const l=r.outlet.detach(),m=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:m})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=u_(e);for(const l of Object.keys(u))this.deactivateRouteAndItsChildren(u[l],o);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){const o=u_(t);e.children.forEach(u=>{this.activateRoutes(u,o[u.value.outlet],r),this.forwardEvent(new $1(u.value.snapshot))}),e.children.length&&this.forwardEvent(new B1(e.value.snapshot))}activateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(dM(o),o===u)if(o.component){const l=r.getOrCreateContext(o.outlet);this.activateChildRoutes(e,t,l.children)}else this.activateChildRoutes(e,t,r);else if(o.component){const l=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const m=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),l.children.onOutletReAttached(m.contexts),l.attachRef=m.componentRef,l.route=m.route.value,l.outlet&&l.outlet.attach(m.componentRef,m.route.value),dM(m.route.value),this.activateChildRoutes(e,null,l.children)}else{const m=GE(o.snapshot);l.attachRef=null,l.route=o,l.injector=m,l.outlet&&l.outlet.activateWith(o,l.injector),this.activateChildRoutes(e,null,l.children)}}else this.activateChildRoutes(e,null,r)}}class FN{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Kb{constructor(e,t){this.component=e,this.route=t}}function rP(n,e,t){const r=n._root;return zE(r,e?e._root:null,t,[r.value])}function l_(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,h.Z0I)(n)?e.get(n):n:r}function zE(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=u_(e);return n.children.forEach(l=>{(function sP(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,l=e?e.value:null,m=t?t.getContext(n.value.outlet):null;if(l&&u.routeConfig===l.routeConfig){const I=function oP(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!fm(n.url,e.url);case"pathParamsOrQueryParamsChange":return!fm(n.url,e.url)||!Hc(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!hM(n,e)||!Hc(n.queryParams,e.queryParams);default:return!hM(n,e)}}(l,u,u.routeConfig.runGuardsAndResolvers);I?o.canActivateChecks.push(new FN(r)):(u.data=l.data,u._resolvedData=l._resolvedData),zE(n,e,u.component?m?m.children:null:t,r,o),I&&m&&m.outlet&&m.outlet.isActivated&&o.canDeactivateChecks.push(new Kb(m.outlet.component,l))}else l&&qE(e,m,o),o.canActivateChecks.push(new FN(r)),zE(n,null,u.component?m?m.children:null:t,r,o)})(l,u[l.value.outlet],t,r.concat([l.value]),o),delete u[l.value.outlet]}),Object.entries(u).forEach(([l,m])=>qE(m,t.getContext(l),o)),o}function qE(n,e,t){const r=u_(n),o=n.value;Object.entries(r).forEach(([u,l])=>{qE(l,o.component?e?e.children.getContext(u):null:e,t)}),t.canDeactivateChecks.push(new Kb(o.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,o))}function WE(n){return"function"==typeof n}function LN(n){return n instanceof Ab||"EmptyError"===n?.name}const Yb=Symbol("INITIAL_VALUE");function d_(){return Qi(n=>QA(n.map(e=>e.pipe(i_(1),Fp(Yb)))).pipe((0,Tt.U)(e=>{for(const t of e)if(!0!==t){if(t===Yb)return Yb;if(!1===t||t instanceof a_)return t}return!0}),Io(e=>e!==Yb),i_(1)))}function VN(n){return(0,t1.z)((0,ks.b)(e=>{if(pm(e))throw NN(0,e)}),(0,Tt.U)(e=>!0===e))}class Qb{constructor(e){this.segmentGroup=e||null}}class UN{constructor(e){this.urlTree=e}}function h_(n){return RE(new Qb(n))}function BN(n){return RE(new UN(n))}class TP{constructor(e,t){this.urlSerializer=e,this.urlTree=t}noMatchError(e){return new h.vHH(4002,!1)}lineralizeSegments(e,t){let r=[],o=t.root;for(;;){if(r=r.concat(o.segments),0===o.numberOfChildren)return(0,Et.of)(r);if(o.numberOfChildren>1||!o.children[Zt])return RE(new h.vHH(4e3,!1));o=o.children[Zt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,o){const u=this.createSegmentGroup(e,t.root,r,o);return new a_(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Object.entries(e).forEach(([o,u])=>{if("string"==typeof u&&u.startsWith(":")){const m=u.substring(1);r[o]=t[m]}else r[o]=u}),r}createSegmentGroup(e,t,r,o){const u=this.createSegments(e,t.segments,r,o);let l={};return Object.entries(t.children).forEach(([m,I])=>{l[m]=this.createSegmentGroup(e,I,r,o)}),new Nn(u,l)}createSegments(e,t,r,o){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,o):this.findOrReturn(u,r))}findPosParam(e,t,r){const o=r[t.path.substring(1)];if(!o)throw new h.vHH(4001,!1);return o}findOrReturn(e,t){let r=0;for(const o of t){if(o.path===e.path)return t.splice(r),o;r++}return e}}const mM={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function SP(n,e,t,r,o){const u=yM(n,e,t);return u.matched?(r=function Y1(n,e){return n.providers&&!n._injector&&(n._injector=(0,h.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}(e,r),function DP(n,e,t,r){const o=e.canMatch;if(!o||0===o.length)return(0,Et.of)(!0);const u=o.map(l=>{const m=l_(l,n);return jf(function hP(n){return n&&WE(n.canMatch)}(m)?m.canMatch(e,t):n.runInContext(()=>m(e,t)))});return(0,Et.of)(u).pipe(d_(),VN())}(r,e,t).pipe((0,Tt.U)(l=>!0===l?u:{...mM}))):(0,Et.of)(u)}function yM(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...mM}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const o=(e.matcher||s1)(t,n,e);if(!o)return{...mM};const u={};Object.entries(o.posParams??{}).forEach(([m,I])=>{u[m]=I.path});const l=o.consumed.length>0?{...u,...o.consumed[o.consumed.length-1].parameters}:u;return{matched:!0,consumedSegments:o.consumed,remainingSegments:t.slice(o.consumed.length),parameters:l,positionalParamSegments:o.posParams??{}}}function jN(n,e,t,r){return t.length>0&&function xP(n,e,t){return t.some(r=>Jb(n,e,r)&&Nu(r)!==Zt)}(n,t,r)?{segmentGroup:new Nn(e,MP(r,new Nn(t,n.children))),slicedSegments:[]}:0===t.length&&function NP(n,e,t){return t.some(r=>Jb(n,e,r))}(n,t,r)?{segmentGroup:new Nn(n.segments,AP(n,0,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Nn(n.segments,n.children),slicedSegments:t}}function AP(n,e,t,r,o){const u={};for(const l of r)if(Jb(n,t,l)&&!o[Nu(l)]){const m=new Nn([],{});u[Nu(l)]=m}return{...o,...u}}function MP(n,e){const t={};t[Zt]=e;for(const r of n)if(""===r.path&&Nu(r)!==Zt){const o=new Nn([],{});t[Nu(r)]=o}return t}function Jb(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}class kP{constructor(e,t,r,o,u,l,m){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=o,this.urlTree=u,this.paramsInheritanceStrategy=l,this.urlSerializer=m,this.allowRedirects=!0,this.applyRedirects=new TP(this.urlSerializer,this.urlTree)}noMatchError(e){return new h.vHH(4002,!1)}recognize(){const e=jN(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Zt).pipe(hm(t=>{if(t instanceof UN)return this.allowRedirects=!1,this.urlTree=t.urlTree,this.match(t.urlTree);throw t instanceof Qb?this.noMatchError(t):t}),(0,Tt.U)(t=>{const r=new Wb([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Zt,this.rootComponentType,null,{}),o=new Td(r,t),u=new AN("",o),l=function b1(n,e,t=null,r=null){return yN(mN(n),e,t,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return l.queryParams=this.urlTree.queryParams,u.url=this.urlSerializer.serialize(l),this.inheritParamsAndData(u._root),{state:u,tree:l}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e.root,Zt).pipe(hm(r=>{throw r instanceof Qb?this.noMatchError(r):r}))}inheritParamsAndData(e){const t=e.value,r=SN(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,o,!0)}processChildren(e,t,r){const o=[];for(const u of Object.keys(r.children))"primary"===u?o.unshift(u):o.push(u);return(0,fn.D)(o).pipe(OE(u=>{const l=r.children[u],m=function eP(n,e){const t=n.filter(r=>Nu(r)===e);return t.push(...n.filter(r=>Nu(r)!==e)),t}(t,u);return this.processSegmentGroup(e,m,l,u)}),bh((u,l)=>(u.push(...l),u)),Mb(null),function n1(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Io((o,u)=>n(o,u,r)):xb.y,XA(1),t?Mb(e):fx(()=>new Ab))}(),(0,Ps.z)(u=>{if(null===u)return h_(r);const l=$N(u);return function FP(n){n.sort((e,t)=>e.value.outlet===Zt?-1:t.value.outlet===Zt?1:e.value.outlet.localeCompare(t.value.outlet))}(l),(0,Et.of)(l)}))}processSegment(e,t,r,o,u,l){return(0,fn.D)(t).pipe(OE(m=>this.processSegmentAgainstRoute(m._injector??e,t,m,r,o,u,l).pipe(hm(I=>{if(I instanceof Qb)return(0,Et.of)(null);throw I}))),Bf(m=>!!m),hm(m=>{if(LN(m))return function OP(n,e,t){return 0===e.length&&!n.children[t]}(r,o,u)?(0,Et.of)([]):h_(r);throw m}))}processSegmentAgainstRoute(e,t,r,o,u,l,m){return function RP(n,e,t,r){return!!(Nu(n)===r||r!==Zt&&Jb(e,t,n))&&("**"===n.path||yM(e,n,t).matched)}(r,o,u,l)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,o,r,u,l,m):m&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,o,t,r,u,l):h_(o):h_(o)}expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,l){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,o,l):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,o){const u=this.applyRedirects.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?BN(u):this.applyRedirects.lineralizeSegments(r,u).pipe((0,Ps.z)(l=>{const m=new Nn(l,{});return this.processSegment(e,t,m,l,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,l){const{matched:m,consumedSegments:I,remainingSegments:b,positionalParamSegments:A}=yM(t,o,u);if(!m)return h_(t);const R=this.applyRedirects.applyRedirectCommands(I,o.redirectTo,A);return o.redirectTo.startsWith("/")?BN(R):this.applyRedirects.lineralizeSegments(o,R).pipe((0,Ps.z)(H=>this.processSegment(e,r,t,H.concat(b),l,!1)))}matchSegmentAgainstRoute(e,t,r,o,u,l){let m;if("**"===r.path){const I=o.length>0?sN(o).parameters:{},b=new Wb(o,I,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,HN(r),Nu(r),r.component??r._loadedComponent??null,r,GN(r));m=(0,Et.of)({snapshot:b,consumedSegments:[],remainingSegments:[]}),t.children={}}else m=SP(t,r,o,e).pipe((0,Tt.U)(({matched:I,consumedSegments:b,remainingSegments:A,parameters:R})=>I?{snapshot:new Wb(b,R,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,HN(r),Nu(r),r.component??r._loadedComponent??null,r,GN(r)),consumedSegments:b,remainingSegments:A}:null));return m.pipe(Qi(I=>null===I?h_(t):this.getChildConfig(e=r._injector??e,r,o).pipe(Qi(({routes:b})=>{const A=r._loadedInjector??e,{snapshot:R,consumedSegments:H,remainingSegments:X}=I,{segmentGroup:ye,slicedSegments:ke}=jN(t,H,X,b);if(0===ke.length&&ye.hasChildren())return this.processChildren(A,b,ye).pipe((0,Tt.U)(wt=>null===wt?null:[new Td(R,wt)]));if(0===b.length&&0===ke.length)return(0,Et.of)([new Td(R,[])]);const Ue=Nu(r)===u;return this.processSegment(A,b,ye,ke,Ue?Zt:u,!0).pipe((0,Tt.U)(wt=>[new Td(R,wt)]))}))))}getChildConfig(e,t,r){return t.children?(0,Et.of)({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?(0,Et.of)({routes:t._loadedRoutes,injector:t._loadedInjector}):function IP(n,e,t,r){const o=e.canLoad;if(void 0===o||0===o.length)return(0,Et.of)(!0);const u=o.map(l=>{const m=l_(l,n);return jf(function uP(n){return n&&WE(n.canLoad)}(m)?m.canLoad(e,t):n.runInContext(()=>m(e,t)))});return(0,Et.of)(u).pipe(d_(),VN())}(e,t,r).pipe((0,Ps.z)(o=>o?this.configLoader.loadChildren(e,t).pipe((0,ks.b)(u=>{t._loadedRoutes=u.routes,t._loadedInjector=u.injector})):function bP(n){return RE(RN(!1,3))}())):(0,Et.of)({routes:[],injector:e})}}function LP(n){const e=n.value.routeConfig;return e&&""===e.path}function $N(n){const e=[],t=new Set;for(const r of n){if(!LP(r)){e.push(r);continue}const o=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==o?(o.children.push(...r.children),t.add(o)):e.push(r)}for(const r of t){const o=$N(r.children);e.push(new Td(r.value,o))}return e.filter(r=>!t.has(r))}function HN(n){return n.data||{}}function GN(n){return n.resolve||{}}function zN(n){return"string"==typeof n.title||null===n.title}function vM(n){return Qi(e=>{const t=n(e);return t?(0,fn.D)(t).pipe((0,Tt.U)(()=>e)):(0,Et.of)(e)})}const f_=new h.OlP("ROUTES");let _M=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,h.f3M)(h.Sil)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return(0,Et.of)(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=jf(t.loadComponent()).pipe((0,Tt.U)(qN),(0,ks.b)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=u}),eM(()=>{this.componentLoaders.delete(t)})),o=new rN(r,()=>new dm.x).pipe(JA());return this.componentLoaders.set(t,o),o}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return(0,Et.of)({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const u=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,Tt.U)(m=>{this.onLoadEndListener&&this.onLoadEndListener(r);let I,b;return Array.isArray(m)?b=m:(I=m.create(t).injector,b=I.get(f_,[],h.XFs.Self|h.XFs.Optional).flat()),{routes:b.map(gM),injector:I}}),eM(()=>{this.childrenLoaders.delete(r)})),l=new rN(u,()=>new dm.x).pipe(JA());return this.childrenLoaders.set(r,l),l}loadModuleFactoryOrRoutes(t){return jf(t()).pipe((0,Tt.U)(qN),(0,Ps.z)(r=>r instanceof h.YKP||Array.isArray(r)?(0,Et.of)(r):(0,fn.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function qN(n){return function GP(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let Xb=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new dm.x,this.configLoader=(0,h.f3M)(_M),this.environmentInjector=(0,h.f3M)(h.lqb),this.urlSerializer=(0,h.f3M)(FE),this.rootContexts=(0,h.f3M)($E),this.inputBindingEnabled=null!==(0,h.f3M)(Zb,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>(0,Et.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=o=>this.events.next(new V1(o)),this.configLoader.onLoadStartListener=o=>this.events.next(new L1(o))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t){return this.transitions=new xu.X({id:0,currentUrlTree:t.currentUrlTree,currentRawUrl:t.currentUrlTree,extractedUrl:t.urlHandlingStrategy.extract(t.currentUrlTree),urlAfterRedirects:t.urlHandlingStrategy.extract(t.currentUrlTree),rawUrl:t.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:BE,restoredState:null,currentSnapshot:t.routerState.snapshot,targetSnapshot:null,currentRouterState:t.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Io(r=>0!==r.id),(0,Tt.U)(r=>({...r,extractedUrl:t.urlHandlingStrategy.extract(r.rawUrl)})),Qi(r=>{let o=!1,u=!1;return(0,Et.of)(r).pipe((0,ks.b)(l=>{this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Qi(l=>{const m=t.browserUrlTree.toString(),I=!t.navigated||l.extractedUrl.toString()!==m||m!==t.currentUrlTree.toString();if(!I&&"reload"!==(l.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const A="";return this.events.next(new jE(l.id,t.serializeUrl(r.rawUrl),A,0)),t.rawUrlTree=l.rawUrl,l.resolve(null),Uf.E}if(t.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return WN(l.source)&&(t.browserUrlTree=l.extractedUrl),(0,Et.of)(l).pipe(Qi(A=>{const R=this.transitions?.getValue();return this.events.next(new oM(A.id,this.urlSerializer.serialize(A.extractedUrl),A.source,A.restoredState)),R!==this.transitions?.getValue()?Uf.E:Promise.resolve(A)}),function VP(n,e,t,r,o,u){return(0,Ps.z)(l=>function PP(n,e,t,r,o,u,l="emptyOnly"){return new kP(n,e,t,r,o,l,u).recognize()}(n,e,t,r,l.extractedUrl,o,u).pipe((0,Tt.U)(({state:m,tree:I})=>({...l,targetSnapshot:m,urlAfterRedirects:I}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),(0,ks.b)(A=>{if(r.targetSnapshot=A.targetSnapshot,r.urlAfterRedirects=A.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:A.urlAfterRedirects},"eager"===t.urlUpdateStrategy){if(!A.extras.skipLocationChange){const H=t.urlHandlingStrategy.merge(A.urlAfterRedirects,A.rawUrl);t.setBrowserUrl(H,A)}t.browserUrlTree=A.urlAfterRedirects}const R=new R1(A.id,this.urlSerializer.serialize(A.extractedUrl),this.urlSerializer.serialize(A.urlAfterRedirects),A.targetSnapshot);this.events.next(R)}));if(I&&t.urlHandlingStrategy.shouldProcessUrl(t.rawUrlTree)){const{id:A,extractedUrl:R,source:H,restoredState:X,extras:ye}=l,ke=new oM(A,this.urlSerializer.serialize(R),H,X);this.events.next(ke);const Ue=TN(0,this.rootComponentType).snapshot;return r={...l,targetSnapshot:Ue,urlAfterRedirects:R,extras:{...ye,skipLocationChange:!1,replaceUrl:!1}},(0,Et.of)(r)}{const A="";return this.events.next(new jE(l.id,t.serializeUrl(r.extractedUrl),A,1)),t.rawUrlTree=l.rawUrl,l.resolve(null),Uf.E}}),(0,ks.b)(l=>{const m=new O1(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(m)}),(0,Tt.U)(l=>r={...l,guards:rP(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),function pP(n,e){return(0,Ps.z)(t=>{const{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:u,canDeactivateChecks:l}}=t;return 0===l.length&&0===u.length?(0,Et.of)({...t,guardsResult:!0}):function gP(n,e,t,r){return(0,fn.D)(n).pipe((0,Ps.z)(o=>function EP(n,e,t,r,o){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!u||0===u.length)return(0,Et.of)(!0);const l=u.map(m=>{const I=GE(e)??o,b=l_(m,I);return jf(function dP(n){return n&&WE(n.canDeactivate)}(b)?b.canDeactivate(n,e,t,r):I.runInContext(()=>b(n,e,t,r))).pipe(Bf())});return(0,Et.of)(l).pipe(d_())}(o.component,o.route,t,e,r)),Bf(o=>!0!==o,!0))}(l,r,o,n).pipe((0,Ps.z)(m=>m&&function aP(n){return"boolean"==typeof n}(m)?function mP(n,e,t,r){return(0,fn.D)(e).pipe(OE(o=>C_(function vP(n,e){return null!==n&&e&&e(new U1(n)),(0,Et.of)(!0)}(o.route.parent,r),function yP(n,e){return null!==n&&e&&e(new j1(n)),(0,Et.of)(!0)}(o.route,r),function wP(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(l=>function iP(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(l)).filter(l=>null!==l).map(l=>tN(()=>{const m=l.guards.map(I=>{const b=GE(l.node)??t,A=l_(I,b);return jf(function lP(n){return n&&WE(n.canActivateChild)}(A)?A.canActivateChild(r,n):b.runInContext(()=>A(r,n))).pipe(Bf())});return(0,Et.of)(m).pipe(d_())}));return(0,Et.of)(u).pipe(d_())}(n,o.path,t),function _P(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return(0,Et.of)(!0);const o=r.map(u=>tN(()=>{const l=GE(e)??t,m=l_(u,l);return jf(function cP(n){return n&&WE(n.canActivate)}(m)?m.canActivate(e,n):l.runInContext(()=>m(e,n))).pipe(Bf())}));return(0,Et.of)(o).pipe(d_())}(n,o.route,t))),Bf(o=>!0!==o,!0))}(r,u,n,e):(0,Et.of)(m)),(0,Tt.U)(m=>({...t,guardsResult:m})))})}(this.environmentInjector,l=>this.events.next(l)),(0,ks.b)(l=>{if(r.guardsResult=l.guardsResult,pm(l.guardsResult))throw NN(0,l.guardsResult);const m=new P1(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(m)}),Io(l=>!!l.guardsResult||(t.restoreHistory(l),this.cancelNavigationTransition(l,"",3),!1)),vM(l=>{if(l.guards.canActivateChecks.length)return(0,Et.of)(l).pipe((0,ks.b)(m=>{const I=new k1(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(I)}),Qi(m=>{let I=!1;return(0,Et.of)(m).pipe(function UP(n,e){return(0,Ps.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:o}}=t;if(!o.length)return(0,Et.of)(t);let u=0;return(0,fn.D)(o).pipe(OE(l=>function BP(n,e,t,r){const o=n.routeConfig,u=n._resolve;return void 0!==o?.title&&!zN(o)&&(u[PE]=o.title),function jP(n,e,t,r){const o=function $P(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===o.length)return(0,Et.of)({});const u={};return(0,fn.D)(o).pipe((0,Ps.z)(l=>function HP(n,e,t,r){const o=GE(e)??r,u=l_(n,o);return jf(u.resolve?u.resolve(e,t):o.runInContext(()=>u(e,t)))}(n[l],e,t,r).pipe(Bf(),(0,ks.b)(m=>{u[l]=m}))),XA(1),function r1(n){return(0,Tt.U)(()=>n)}(u),hm(l=>LN(l)?Uf.E:RE(l)))}(u,n,e,r).pipe((0,Tt.U)(l=>(n._resolvedData=l,n.data=SN(n,t).resolve,o&&zN(o)&&(n.data[PE]=o.title),null)))}(l.route,r,n,e)),(0,ks.b)(()=>u++),XA(1),(0,Ps.z)(l=>u===o.length?(0,Et.of)(t):Uf.E))})}(t.paramsInheritanceStrategy,this.environmentInjector),(0,ks.b)({next:()=>I=!0,complete:()=>{I||(t.restoreHistory(m),this.cancelNavigationTransition(m,"",2))}}))}),(0,ks.b)(m=>{const I=new F1(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(I)}))}),vM(l=>{const m=I=>{const b=[];I.routeConfig?.loadComponent&&!I.routeConfig._loadedComponent&&b.push(this.configLoader.loadComponent(I.routeConfig).pipe((0,ks.b)(A=>{I.component=A}),(0,Tt.U)(()=>{})));for(const A of I.children)b.push(...m(A));return b};return QA(m(l.targetSnapshot.root)).pipe(Mb(),i_(1))}),vM(()=>this.afterPreactivation()),(0,Tt.U)(l=>{const m=function W1(n,e,t){const r=HE(n,e._root,t?t._root:void 0);return new bN(r,e)}(t.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return r={...l,targetRouterState:m}}),(0,ks.b)(l=>{t.currentUrlTree=l.urlAfterRedirects,t.rawUrlTree=t.urlHandlingStrategy.merge(l.urlAfterRedirects,l.rawUrl),t.routerState=l.targetRouterState,"deferred"===t.urlUpdateStrategy&&(l.extras.skipLocationChange||t.setBrowserUrl(t.rawUrlTree,l),t.browserUrlTree=l.urlAfterRedirects)}),((n,e,t,r)=>(0,Tt.U)(o=>(new nP(e,o.targetRouterState,o.currentRouterState,t,r).activate(n),o)))(this.rootContexts,t.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),i_(1),(0,ks.b)({next:l=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,t.navigated=!0,this.events.next(new gm(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(t.currentUrlTree))),t.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{o=!0}}),eM(()=>{o||u||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),hm(l=>{if(u=!0,PN(l)){ON(l)||(t.navigated=!0,t.restoreHistory(r,!0));const m=new qb(r.id,this.urlSerializer.serialize(r.extractedUrl),l.message,l.cancellationCode);if(this.events.next(m),ON(l)){const I=t.urlHandlingStrategy.merge(l.url,t.rawUrlTree),b={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===t.urlUpdateStrategy||WN(r.source)};t.scheduleNavigation(I,BE,null,b,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{t.restoreHistory(r,!0);const m=new aM(r.id,this.urlSerializer.serialize(r.extractedUrl),l,r.targetSnapshot??void 0);this.events.next(m);try{r.resolve(t.errorHandler(l))}catch(I){r.reject(I)}}return Uf.E}))}))}cancelNavigationTransition(t,r,o){const u=new qb(t.id,this.urlSerializer.serialize(t.extractedUrl),r,o);this.events.next(u),t.resolve(!1)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function WN(n){return n!==BE}let ZN=(()=>{class n{buildTitle(t){let r,o=t.root;for(;void 0!==o;)r=this.getResolvedTitleForRoute(o)??r,o=o.children.find(u=>u.outlet===Zt);return r}getResolvedTitleForRoute(t){return t.data[PE]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return(0,h.f3M)(zP)},providedIn:"root"}),n})(),zP=(()=>{class n extends ZN{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Ya))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),qP=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return(0,h.f3M)(ZP)},providedIn:"root"}),n})();class WP{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let ZP=(()=>{class n extends WP{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const eT=new h.OlP("",{providedIn:"root",factory:()=>({})});let KP=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return(0,h.f3M)(YP)},providedIn:"root"}),n})(),YP=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var Oo=(()=>((Oo=Oo||{})[Oo.COMPLETE=0]="COMPLETE",Oo[Oo.FAILED=1]="FAILED",Oo[Oo.REDIRECTING=2]="REDIRECTING",Oo))();function KN(n,e){n.events.pipe(Io(t=>t instanceof gm||t instanceof qb||t instanceof aM||t instanceof jE),(0,Tt.U)(t=>t instanceof gm||t instanceof jE?Oo.COMPLETE:t instanceof qb&&(0===t.code||1===t.code)?Oo.REDIRECTING:Oo.FAILED),Io(t=>t!==Oo.REDIRECTING),i_(1)).subscribe(()=>{e()})}function QP(n){throw n}function JP(n,e,t){return e.parse("/")}const XP={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},ek={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Ta=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){if("computed"===this.canceledNavigationResolution)return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,h.f3M)(h.c2e),this.isNgZoneEnabled=!1,this.options=(0,h.f3M)(eT,{optional:!0})||{},this.pendingTasks=(0,h.f3M)(h.HDt),this.errorHandler=this.options.errorHandler||QP,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||JP,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,h.f3M)(KP),this.routeReuseStrategy=(0,h.f3M)(qP),this.titleStrategy=(0,h.f3M)(ZN),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=(0,h.f3M)(f_,{optional:!0})?.flat()??[],this.navigationTransitions=(0,h.f3M)(Xb),this.urlSerializer=(0,h.f3M)(FE),this.location=(0,h.f3M)(ze),this.componentInputBindingEnabled=!!(0,h.f3M)(Zb,{optional:!0}),this.isNgZoneEnabled=(0,h.f3M)(h.R0b)instanceof h.R0b&&h.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new a_,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=TN(0,null),this.navigationTransitions.setupNavigations(this).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId??0},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),BE,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,o){const u={replaceUrl:!0},l=o?.navigationId?o:null;if(o){const I={...o};delete I.navigationId,delete I.\u0275routerPageId,0!==Object.keys(I).length&&(u.state=I)}const m=this.parseUrl(t);this.scheduleNavigation(m,r,l,u)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(gM),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:o,queryParams:u,fragment:l,queryParamsHandling:m,preserveFragment:I}=r,b=I?this.currentUrlTree.fragment:l;let R,A=null;switch(m){case"merge":A={...this.currentUrlTree.queryParams,...u};break;case"preserve":A=this.currentUrlTree.queryParams;break;default:A=u||null}null!==A&&(A=this.removeEmptyProps(A));try{R=mN(o?o.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||!t[0].startsWith("/"))&&(t=[]),R=this.currentUrlTree.root}return yN(R,t,A,b??null)}navigateByUrl(t,r={skipLocationChange:!1}){const o=pm(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(u,BE,null,r)}navigate(t,r={skipLocationChange:!1}){return function tk(n){for(let e=0;e<n.length;e++)if(null==n[e])throw new h.vHH(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(o){r=this.malformedUriErrorHandler(o,this.urlSerializer,t)}return r}isActive(t,r){let o;if(o=!0===r?{...XP}:!1===r?{...ek}:r,pm(t))return aN(this.currentUrlTree,t,o);const u=this.parseUrl(t);return aN(this.currentUrlTree,u,o)}removeEmptyProps(t){return Object.keys(t).reduce((r,o)=>{const u=t[o];return null!=u&&(r[o]=u),r},{})}scheduleNavigation(t,r,o,u,l){if(this.disposed)return Promise.resolve(!1);let m,I,b;l?(m=l.resolve,I=l.reject,b=l.promise):b=new Promise((R,H)=>{m=R,I=H});const A=this.pendingTasks.add();return KN(this,()=>{Promise.resolve().then(()=>this.pendingTasks.remove(A))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:u,resolve:m,reject:I,promise:b,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),b.catch(R=>Promise.reject(R))}setBrowserUrl(t,r){const o=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl){const l={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(o,"",l)}else{const u={...r.extras.state,...this.generateNgRouterState(r.id,(this.browserPageId??0)+1)};this.location.go(o,"",u)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const u=this.currentPageId-(this.browserPageId??this.currentPageId);0!==u?this.location.historyGo(u):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===u&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),tT=(()=>{class n{constructor(t,r,o,u,l,m){this.router=t,this.route=r,this.tabIndexAttribute=o,this.renderer=u,this.el=l,this.locationStrategy=m,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.href=null,this.commands=null,this.onChanges=new dm.x;const I=l.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===I||"area"===I,this.isAnchorElement?this.subscription=t.events.subscribe(b=>{b instanceof gm&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(t){this._preserveFragment=(0,h.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,h.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,h.D6c)(t)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,r,o,u,l){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||r||o||u||l||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:(0,h.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,r){const o=this.renderer,u=this.el.nativeElement;null!==r?o.setAttribute(u,t,r):o.removeAttribute(u,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Ta),h.Y36(c_),h.$8M("tabindex"),h.Y36(h.Qsj),h.Y36(h.SBq),h.Y36(Fe))},n.\u0275dir=h.lG2({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(t,r){1&t&&h.NdJ("click",function(u){return r.onClick(u.button,u.ctrlKey,u.shiftKey,u.altKey,u.metaKey)}),2&t&&h.uIk("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[h.TTD]}),n})();class YN{}let ik=(()=>{class n{constructor(t,r,o,u,l){this.router=t,this.injector=o,this.preloadingStrategy=u,this.loader=l}setUpPreloading(){this.subscription=this.router.events.pipe(Io(t=>t instanceof gm),OE(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const o=[];for(const u of r){u.providers&&!u._injector&&(u._injector=(0,h.MMx)(u.providers,t,`Route: ${u.path}`));const l=u._injector??t,m=u._loadedInjector??l;(u.loadChildren&&!u._loadedRoutes&&void 0===u.canLoad||u.loadComponent&&!u._loadedComponent)&&o.push(this.preloadConfig(l,u)),(u.children||u._loadedRoutes)&&o.push(this.processRoutes(m,u.children??u._loadedRoutes))}return(0,fn.D)(o).pipe((0,gc.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let o;o=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):(0,Et.of)(null);const u=o.pipe((0,Ps.z)(l=>null===l?(0,Et.of)(void 0):(r._loadedRoutes=l.routes,r._loadedInjector=l.injector,this.processRoutes(l.injector??t,l.routes))));if(r.loadComponent&&!r._loadedComponent){const l=this.loader.loadComponent(r);return(0,fn.D)([u,l]).pipe((0,gc.J)())}return u})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Ta),h.LFG(h.Sil),h.LFG(h.lqb),h.LFG(YN),h.LFG(_M))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const wM=new h.OlP("");let QN=(()=>{class n{constructor(t,r,o,u,l={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=o,this.zone=u,this.options=l,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},l.scrollPositionRestoration=l.scrollPositionRestoration||"disabled",l.anchorScrolling=l.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof oM?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof gm?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof jE&&0===t.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof DN&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new DN(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return n.\u0275fac=function(t){h.$Z()},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function Sd(n,e){return{\u0275kind:n,\u0275providers:e}}function XN(){const n=(0,h.f3M)(h.zs3);return e=>{const t=n.get(h.z2F);if(e!==t.components[0])return;const r=n.get(Ta),o=n.get(eR);1===n.get(EM)&&r.initialNavigation(),n.get(tR,null,h.XFs.Optional)?.setUpPreloading(),n.get(wM,null,h.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),o.closed||(o.next(),o.complete(),o.unsubscribe())}}const eR=new h.OlP("",{factory:()=>new dm.x}),EM=new h.OlP("",{providedIn:"root",factory:()=>1}),tR=new h.OlP("");function uk(n){return Sd(0,[{provide:tR,useExisting:ik},{provide:YN,useExisting:n}])}const nR=new h.OlP("ROUTER_FORROOT_GUARD"),lk=[ze,{provide:FE,useClass:tM},Ta,$E,{provide:c_,useFactory:function JN(n){return n.routerState.root},deps:[Ta]},_M,[]];function dk(){return new h.PXZ("Router",Ta)}let rR=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[lk,[],{provide:f_,multi:!0,useValue:t},{provide:nR,useFactory:gk,deps:[[Ta,new h.FiY,new h.tp0]]},{provide:eT,useValue:r||{}},r?.useHash?{provide:Fe,useClass:Me}:{provide:Fe,useClass:Ye},{provide:wM,useFactory:()=>{const n=(0,h.f3M)(ss),e=(0,h.f3M)(h.R0b),t=(0,h.f3M)(eT),r=(0,h.f3M)(Xb),o=(0,h.f3M)(FE);return t.scrollOffset&&n.setOffset(t.scrollOffset),new QN(o,r,n,e,t)}},r?.preloadingStrategy?uk(r.preloadingStrategy).\u0275providers:[],{provide:h.PXZ,multi:!0,useFactory:dk},r?.initialNavigation?mk(r):[],r?.bindToComponentInputs?Sd(8,[xN,{provide:Zb,useExisting:xN}]).\u0275providers:[],[{provide:iR,useFactory:XN},{provide:h.tb,multi:!0,useExisting:iR}]]}}static forChild(t){return{ngModule:n,providers:[{provide:f_,multi:!0,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(nR,8))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();function gk(n){return"guarded"}function mk(n){return["disabled"===n.initialNavigation?Sd(3,[{provide:h.ip1,multi:!0,useFactory:()=>{const e=(0,h.f3M)(Ta);return()=>{e.setUpLocationChangeListener()}}},{provide:EM,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Sd(2,[{provide:EM,useValue:0},{provide:h.ip1,multi:!0,deps:[h.zs3],useFactory:e=>{const t=e.get(Oe,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const o=e.get(Ta),u=e.get(eR);KN(o,()=>{r(!0)}),e.get(Xb).afterPreactivation=()=>(r(!0),u.closed?(0,Et.of)(void 0):u),o.initialNavigation()}))}}]).\u0275providers:[]]}const iR=new h.OlP("");let IM=(()=>{class n{constructor(t){this.db=t,this.dbPath="/tutorials",this.tutorialsRef=t.collection(this.dbPath)}getAll(){return this.tutorialsRef}getByProgram(t){return this.db.collection(this.dbPath,r=>r.where("programaInteres","==",t))}create(t){return this.tutorialsRef.add({...t})}update(t,r){return this.tutorialsRef.doc(t).update(r)}delete(t){return this.tutorialsRef.doc(t).delete()}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Xx))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function vk(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"div",2)(1,"h4"),h._uU(2,"Datos del estudiante"),h.qZA(),h.TgZ(3,"form")(4,"div",3)(5,"label",4),h._uU(6,"Ap. Paterno"),h.qZA(),h.TgZ(7,"input",5),h.NdJ("ngModelChange",function(o){h.CHM(t);const u=h.oxw();return h.KtG(u.currentTutorial.appPaterno=o)}),h.qZA()(),h.TgZ(8,"div",3)(9,"label",6),h._uU(10,"Ap. Materno"),h.qZA(),h.TgZ(11,"input",7),h.NdJ("ngModelChange",function(o){h.CHM(t);const u=h.oxw();return h.KtG(u.currentTutorial.appMaterno=o)}),h.qZA()(),h.TgZ(12,"div",3)(13,"label",6),h._uU(14,"Nombre"),h.qZA(),h.TgZ(15,"input",8),h.NdJ("ngModelChange",function(o){h.CHM(t);const u=h.oxw();return h.KtG(u.currentTutorial.nombre=o)}),h.qZA()(),h.TgZ(16,"div",3)(17,"label",6),h._uU(18,"Programa de interes"),h.qZA(),h.TgZ(19,"input",9),h.NdJ("ngModelChange",function(o){h.CHM(t);const u=h.oxw();return h.KtG(u.currentTutorial.programaInteres=o)}),h.qZA()(),h.TgZ(20,"div",3)(21,"label",6),h._uU(22,"Escuela procedencia"),h.qZA(),h.TgZ(23,"input",10),h.NdJ("ngModelChange",function(o){h.CHM(t);const u=h.oxw();return h.KtG(u.currentTutorial.bachilleratoProcedencia=o)}),h.qZA()(),h.TgZ(24,"div",3)(25,"label",6),h._uU(26,"Telefono"),h.qZA(),h.TgZ(27,"input",11),h.NdJ("ngModelChange",function(o){h.CHM(t);const u=h.oxw();return h.KtG(u.currentTutorial.telefono=o)}),h.qZA()(),h.TgZ(28,"div",3)(29,"label",6),h._uU(30,"e-mail"),h.qZA(),h.TgZ(31,"input",12),h.NdJ("ngModelChange",function(o){h.CHM(t);const u=h.oxw();return h.KtG(u.currentTutorial.email=o)}),h.qZA()(),h.TgZ(32,"div",3)(33,"label",6),h._uU(34,"facebook/instagram"),h.qZA(),h.TgZ(35,"input",13),h.NdJ("ngModelChange",function(o){h.CHM(t);const u=h.oxw();return h.KtG(u.currentTutorial.facebook=o)}),h.qZA()()()()}if(2&n){const t=h.oxw();h.xp6(7),h.Q6J("ngModel",t.currentTutorial.appPaterno),h.xp6(4),h.Q6J("ngModel",t.currentTutorial.appMaterno),h.xp6(4),h.Q6J("ngModel",t.currentTutorial.nombre),h.xp6(4),h.Q6J("ngModel",t.currentTutorial.programaInteres),h.xp6(4),h.Q6J("ngModel",t.currentTutorial.bachilleratoProcedencia),h.xp6(4),h.Q6J("ngModel",t.currentTutorial.telefono),h.xp6(4),h.Q6J("ngModel",t.currentTutorial.email),h.xp6(4),h.Q6J("ngModel",t.currentTutorial.facebook)}}function _k(n,e){1&n&&(h.TgZ(0,"div"),h._UZ(1,"br"),h.TgZ(2,"p"),h._uU(3,"Cannot access this Tutorial..."),h.qZA()())}let wk=(()=>{class n{constructor(t){this.tutorialService=t,this.refreshList=new h.vpe,this.currentTutorial={appPaterno:"",appMaterno:"",nombre:""},this.message=""}ngOnInit(){this.message=""}ngOnChanges(){this.message="",this.currentTutorial={...this.tutorial}}updatePublished(t){this.currentTutorial.id&&this.tutorialService.update(this.currentTutorial.id,{published:t}).then(()=>{this.message="The status was updated successfully!"}).catch(r=>console.log(r))}updateTutorial(){this.currentTutorial.id&&this.tutorialService.update(this.currentTutorial.id,{title:this.currentTutorial.appPaterno,description:this.currentTutorial.appMaterno}).then(()=>this.message="The tutorial was updated successfully!").catch(r=>console.log(r))}deleteTutorial(){this.currentTutorial.id&&this.tutorialService.delete(this.currentTutorial.id).then(()=>{this.refreshList.emit(),this.message="The tutorial was updated successfully!"}).catch(t=>console.log(t))}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(IM))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-tutorial-details"]],inputs:{tutorial:"tutorial"},outputs:{refreshList:"refreshList"},features:[h.TTD],decls:2,vars:2,consts:[["class","edit-form",4,"ngIf"],[4,"ngIf"],[1,"edit-form"],[1,"form-group"],["for","title"],["type","text","id","appPaterno","name","appPaterno",1,"form-control",3,"ngModel","ngModelChange"],["for","description"],["type","text","id","appMaterno","name","appMaterno",1,"form-control",3,"ngModel","ngModelChange"],["type","text","id","nombre","name","nombre",1,"form-control",3,"ngModel","ngModelChange"],["type","text","id","programaInteres","name","programaInteres",1,"form-control",3,"ngModel","ngModelChange"],["type","text","id","bachilleratoProcedencia","name","bachilleratoProcedencia",1,"form-control",3,"ngModel","ngModelChange"],["type","text","id","telefono","name","telefono",1,"form-control",3,"ngModel","ngModelChange"],["type","text","id","email","name","email",1,"form-control",3,"ngModel","ngModelChange"],["type","text","id","facebook","name","facebook",1,"form-control",3,"ngModel","ngModelChange"]],template:function(t,r){1&t&&(h.YNc(0,vk,36,8,"div",0),h.YNc(1,_k,4,0,"div",1)),2&t&&(h.Q6J("ngIf",r.currentTutorial),h.xp6(1),h.Q6J("ngIf",!r.currentTutorial))},dependencies:[Vs,km,Ds,Zs,Al,Ol,na]}),n})();function Ek(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"li",14),h.NdJ("click",function(){const o=h.CHM(t),u=o.$implicit,l=o.index,m=h.oxw();return h.KtG(m.setActiveTutorial(u,l))}),h._uU(1),h.qZA()}if(2&n){const t=e.$implicit,r=e.index,o=h.oxw();h.ekj("active",r==o.currentIndex),h.xp6(1),h.HOy(" ",r+1," ",t.appPaterno,"-",t.appMaterno,", ",t.nombre," ")}}function Ik(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"div")(1,"app-tutorial-details",15),h.NdJ("refreshList",function(){h.CHM(t);const o=h.oxw();return h.KtG(o.refreshList())}),h.qZA()()}if(2&n){const t=h.oxw();h.xp6(1),h.Q6J("tutorial",t.currentTutorial)}}function Dk(n,e){1&n&&(h.TgZ(0,"div"),h._UZ(1,"br"),h.TgZ(2,"p"),h._uU(3,"Seleccione un estudiante ..."),h.qZA()())}let Ck=(()=>{class n{constructor(t){this.tutorialService=t,this.currentIndex=-1,this.title="",this.programaInteres="",this.n=0}ngOnInit(){}refreshList(){this.currentTutorial=void 0,this.currentIndex=-1}retrieveTutorialsByProgram(){this.tutorialService.getByProgram(this.programaInteres).snapshotChanges().pipe((0,Tt.U)(t=>t.map(r=>({id:r.payload.doc.id,...r.payload.doc.data()})))).subscribe(t=>{this.tutorials=t,this.n=this.tutorials.length})}retrieveTutorials(){this.tutorialService.getAll().snapshotChanges().pipe((0,Tt.U)(t=>t.map(r=>({id:r.payload.doc.id,...r.payload.doc.data()})))).subscribe(t=>{this.tutorials=t})}setActiveTutorial(t,r){this.currentTutorial=t,this.currentIndex=r}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(IM))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-tutorials-list"]],decls:25,vars:5,consts:[[1,"list","row"],[1,"col-md-6"],[1,"form-group"],["for","description"],["id","programaInteres","required","","name","programaInteres",1,"form-control",3,"ngModel","ngModelChange","change"],["value","lae"],["value","conta"],["value","gestion"],["value","isw"],["value","ltio"],["value","cspol"],[1,"list-group"],["class","list-group-item",3,"active","click",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"list-group-item",3,"click"],[3,"tutorial","refreshList"]],template:function(t,r){1&t&&(h.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"label",3),h._uU(4,"Filtrar por Carrera "),h.qZA(),h.TgZ(5,"select",4),h.NdJ("ngModelChange",function(u){return r.programaInteres=u})("change",function(){return r.retrieveTutorialsByProgram()}),h.TgZ(6,"option",5),h._uU(7,"Lic. en Administracion de Empresas"),h.qZA(),h.TgZ(8,"option",6),h._uU(9,"Lic. en Contaduria"),h.qZA(),h.TgZ(10,"option",7),h._uU(11,"Gestion y direccion de negocios"),h.qZA(),h.TgZ(12,"option",8),h._uU(13,"Ing. de software"),h.qZA(),h.TgZ(14,"option",9),h._uU(15,"Lic. Tecnologias de la Informacion en las Org."),h.qZA(),h.TgZ(16,"option",10),h._uU(17,"Lic. en Ciencias Politicas y Gestion Publica"),h.qZA()()(),h.TgZ(18,"h3"),h._uU(19),h.qZA(),h.TgZ(20,"ul",11),h.YNc(21,Ek,2,6,"li",12),h.qZA()(),h.TgZ(22,"div",1),h.YNc(23,Ik,2,1,"div",13),h.YNc(24,Dk,4,0,"div",13),h.qZA()()),2&t&&(h.xp6(5),h.Q6J("ngModel",r.programaInteres),h.xp6(14),h.hij("",r.n," estudiantes "),h.xp6(2),h.Q6J("ngForOf",r.tutorials),h.xp6(2),h.Q6J("ngIf",r.currentTutorial),h.xp6(1),h.Q6J("ngIf",!r.currentTutorial))},dependencies:[Ru,Vs,Ap,pc,fc,Zs,hu,Ol,wk],styles:[".list[_ngcontent-%COMP%]{text-align:left;max-width:750px;margin:auto}"]}),n})();class sR{constructor(){this.otroPrograma="-",this.otroBachillerato="-",this.facultad="fnt"}}function bk(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"div")(1,"div",2)(2,"label",3),h._uU(3,"Apellido Paterno"),h.qZA(),h.TgZ(4,"input",4),h.NdJ("ngModelChange",function(o){h.CHM(t);const u=h.oxw();return h.KtG(u.tutorial.appPaterno=o)}),h.qZA()(),h.TgZ(5,"div",2)(6,"label",5),h._uU(7,"Apellido Materno"),h.qZA(),h.TgZ(8,"input",6),h.NdJ("ngModelChange",function(o){h.CHM(t);const u=h.oxw();return h.KtG(u.tutorial.appMaterno=o)}),h.qZA()(),h.TgZ(9,"div",2)(10,"label",5),h._uU(11,"Nombre completo"),h.qZA(),h.TgZ(12,"input",6),h.NdJ("ngModelChange",function(o){h.CHM(t);const u=h.oxw();return h.KtG(u.tutorial.nombre=o)}),h.qZA()(),h.TgZ(13,"div",2)(14,"label",5),h._uU(15,"Carrera de interes"),h.qZA(),h.TgZ(16,"select",7),h.NdJ("ngModelChange",function(o){h.CHM(t);const u=h.oxw();return h.KtG(u.tutorial.programaInteres=o)}),h.TgZ(17,"option",8),h._uU(18,"Lic. en Administracion de Empresas"),h.qZA(),h.TgZ(19,"option",9),h._uU(20,"Lic. en Contaduria"),h.qZA(),h.TgZ(21,"option",10),h._uU(22,"Gestion y direccion de negocios"),h.qZA(),h.TgZ(23,"option",11),h._uU(24,"Ing. de software"),h.qZA(),h.TgZ(25,"option",12),h._uU(26,"Lic. Tecnologias de la Informacion en las Org."),h.qZA(),h.TgZ(27,"option",13),h._uU(28,"Lic. en Ciencias Politicas y Gestion Publica"),h.qZA(),h.TgZ(29,"option",14),h._uU(30,"Otro, especifique ... "),h.qZA()()(),h.TgZ(31,"div",2)(32,"label",5),h._uU(33,"Otra carrera no listada "),h.qZA(),h.TgZ(34,"input",15),h.NdJ("ngModelChange",function(o){h.CHM(t);const u=h.oxw();return h.KtG(u.tutorial.otroPrograma=o)}),h.qZA()(),h.TgZ(35,"div",2)(36,"label",5),h._uU(37,"Bachillerato de procedencia"),h.qZA(),h.TgZ(38,"select",16),h.NdJ("ngModelChange",function(o){h.CHM(t);const u=h.oxw();return h.KtG(u.tutorial.bachilleratoProcedencia=o)}),h.TgZ(39,"option",17),h._uU(40,"Colegio Bachilleres 06 de Nogales"),h.qZA(),h.TgZ(41,"option",18),h._uU(42,"Colegio Bachilleres Maltrata"),h.qZA(),h.TgZ(43,"option",19),h._uU(44,"Colegio Bachilleres Cordoba"),h.qZA(),h.TgZ(45,"option",20),h._uU(46,"Cetis de Rio Blanco"),h.qZA(),h.TgZ(47,"option",21),h._uU(48,"Conalep Orizaba"),h.qZA(),h.TgZ(49,"option",22),h._uU(50,"CBTIS Ixtac"),h.qZA(),h.TgZ(51,"option",23),h._uU(52,"CETIS fortin"),h.qZA(),h.TgZ(53,"option",24),h._uU(54,"CBTIS Cordoba"),h.qZA(),h.TgZ(55,"option",25),h._uU(56,"CBTIS Chicola"),h.qZA(),h.TgZ(57,"option",26),h._uU(58,"ESBO Orizaba"),h.qZA(),h.TgZ(59,"option",27),h._uU(60,"Colegio Mexico Orizaba"),h.qZA(),h.TgZ(61,"option",28),h._uU(62,"ESBAO Cordoba"),h.qZA(),h.TgZ(63,"option",29),h._uU(64,"Univo preparatoria"),h.qZA(),h.TgZ(65,"option",30),h._uU(66,"Colegio Anglo Frances Orizaba"),h.qZA(),h.TgZ(67,"option",31),h._uU(68,"Colegio Oxford Cordoba"),h.qZA(),h.TgZ(69,"option",32),h._uU(70,"CEICO Orizaba"),h.qZA(),h.TgZ(71,"option",33),h._uU(72,"CPO Orizaba"),h.qZA(),h.TgZ(73,"option",34),h._uU(74,"GUILLAUMIN preparatoria"),h.qZA(),h.TgZ(75,"option",35),h._uU(76,"Hispano Orizaba"),h.qZA(),h.TgZ(77,"option",36),h._uU(78,"Hispano Cordoba"),h.qZA(),h.TgZ(79,"option",37),h._uU(80,"Escuela de Bachilleres America Cd Mendoza"),h.qZA(),h.TgZ(81,"option",14),h._uU(82,"Otro bachillerato, especifique ... "),h.qZA()()(),h.TgZ(83,"div",2)(84,"label",5),h._uU(85,"Otra bachillerato no listado "),h.qZA(),h.TgZ(86,"input",38),h.NdJ("ngModelChange",function(o){h.CHM(t);const u=h.oxw();return h.KtG(u.tutorial.otroBachillerato=o)}),h.qZA()(),h.TgZ(87,"div",2)(88,"label",5),h._uU(89,"Telefono"),h.qZA(),h.TgZ(90,"input",39),h.NdJ("ngModelChange",function(o){h.CHM(t);const u=h.oxw();return h.KtG(u.tutorial.telefono=o)}),h.qZA()(),h.TgZ(91,"div",2)(92,"label",5),h._uU(93,"e-mail"),h.qZA(),h.TgZ(94,"input",40),h.NdJ("ngModelChange",function(o){h.CHM(t);const u=h.oxw();return h.KtG(u.tutorial.email=o)}),h.qZA()(),h.TgZ(95,"div",2)(96,"label",5),h._uU(97,"Facebook/Instagram"),h.qZA(),h.TgZ(98,"input",41),h.NdJ("ngModelChange",function(o){h.CHM(t);const u=h.oxw();return h.KtG(u.tutorial.facebook=o)}),h.qZA()(),h.TgZ(99,"button",42),h.NdJ("click",function(){h.CHM(t);const o=h.oxw();return h.KtG(o.saveTutorial())}),h._uU(100,"Registrarme"),h.qZA()()}if(2&n){const t=h.oxw();h.xp6(4),h.Q6J("ngModel",t.tutorial.appPaterno),h.xp6(4),h.Q6J("ngModel",t.tutorial.appMaterno),h.xp6(4),h.Q6J("ngModel",t.tutorial.nombre),h.xp6(4),h.Q6J("ngModel",t.tutorial.programaInteres),h.xp6(18),h.Q6J("ngModel",t.tutorial.otroPrograma),h.xp6(4),h.Q6J("ngModel",t.tutorial.bachilleratoProcedencia),h.xp6(48),h.Q6J("ngModel",t.tutorial.otroBachillerato),h.xp6(4),h.Q6J("ngModel",t.tutorial.telefono),h.xp6(4),h.Q6J("ngModel",t.tutorial.email),h.xp6(4),h.Q6J("ngModel",t.tutorial.facebook)}}function Tk(n,e){1&n&&(h.TgZ(0,"div")(1,"h4"),h._uU(2,"Te has registro exitosamente!"),h.qZA(),h.TgZ(3,"h3"),h._uU(4,"Felicidades!"),h.qZA()())}const Sk=[{path:"",redirectTo:"add",pathMatch:"full"},{path:"tutorials",component:Ck},{path:"add",component:(()=>{class n{constructor(t){this.tutorialService=t,this.tutorial=new sR,this.submitted=!1}saveTutorial(){this.tutorialService.create(this.tutorial).then(()=>{console.log("Created new item successfully!"),this.submitted=!0})}newTutorial(){this.submitted=!1,this.tutorial=new sR}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(IM))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-add-tutorial"]],decls:3,vars:2,consts:[[1,"submit-form"],[4,"ngIf"],[1,"form-group"],["for","title"],["type","text","id","title","required","","name","title",1,"form-control",3,"ngModel","ngModelChange"],["for","description"],["id","description","required","","name","description",1,"form-control",3,"ngModel","ngModelChange"],["id","programaInteres","required","","name","programaInteres",1,"form-control",3,"ngModel","ngModelChange"],["value","lae"],["value","conta"],["value","gestion"],["value","isw"],["value","ltio"],["value","cspol"],["value","other"],["id","otroPrograma","name","otroPrograma",1,"form-control",3,"ngModel","ngModelChange"],["id","bachilleratoProcedencia","required","","name","bachilleratoProcedencia",1,"form-control",3,"ngModel","ngModelChange"],["value","cobaev06"],["value","cobaevmaltrata"],["value","cobaevcordoba"],["value","cetisrioblanco"],["value","conaleporizaba"],["value","cbtisixtac"],["value","cbtisfortin"],["value","cbtiscordoba"],["value","cbtischicola"],["value","esbo"],["value","colmexorizaba"],["value","esbao"],["value","prepaunivo"],["value","angloorizaba"],["value","oxford"],["value","ceico"],["value","cpo"],["value","guillaumin"],["value","hispanoorizaba"],["value","hispanocordoba"],["value","eba"],["id","otroBachillerato","name","otroBachillerato",1,"form-control",3,"ngModel","ngModelChange"],["id","telefono","required","","name","telefono",1,"form-control",3,"ngModel","ngModelChange"],["id","email","required","","name","email",1,"form-control",3,"ngModel","ngModelChange"],["id","facebook","required","","name","facebook",1,"form-control",3,"ngModel","ngModelChange"],[1,"btn","btn-success",3,"click"]],template:function(t,r){1&t&&(h.TgZ(0,"div",0),h.YNc(1,bk,101,10,"div",1),h.YNc(2,Tk,5,0,"div",1),h.qZA()),2&t&&(h.xp6(1),h.Q6J("ngIf",!r.submitted),h.xp6(1),h.Q6J("ngIf",r.submitted))},dependencies:[Vs,Ap,pc,Ds,fc,Zs,hu,Ol],styles:[".submit-form[_ngcontent-%COMP%]{max-width:300px;margin:auto}"]}),n})()}];let Ak=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[rR.forRoot(Sk),rR]}),n})(),Mk=(()=>{class n{constructor(){this.title="test Cleaver"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-root"]],decls:15,vars:1,consts:[[1,"navbar","navbar-expand","navbar-dark","bg-success"],["href","#",1,"navbar-brand"],[1,"navbar-nav","mr-auto"],[1,"nav-item"],["routerLink","add",1,"nav-link"],["routerLink","tutorials",1,"nav-link"],[1,"container","mt-3"]],template:function(t,r){1&t&&(h.TgZ(0,"div")(1,"nav",0)(2,"a",1),h._uU(3,"UV - test de Cleaver"),h.qZA(),h.TgZ(4,"div",2)(5,"li",3)(6,"a",4),h._uU(7,"Test"),h.qZA()(),h.TgZ(8,"li",3)(9,"a",5),h._uU(10,"Consultas"),h.qZA()()()(),h.TgZ(11,"div",6)(12,"h2"),h._uU(13),h.qZA(),h._UZ(14,"router-outlet"),h.qZA()()),2&t&&(h.xp6(13),h.Oqu(r.title))},dependencies:[fM,tT],styles:[".container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;margin:25px auto}"]}),n})(),xk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n,bootstrap:[Mk]}),n.\u0275inj=h.cJS({imports:[go,Ak,Ih,Ai.hO.initializeApp(QO_firebase),YO]}),n})();Kd().bootstrapModule(xk).catch(n=>console.error(n))},1135:(lt,Ie,O)=>{O.d(Ie,{X:()=>q});var h=O(7579);class q extends h.x{constructor(J){super(),this._value=J}get value(){return this.getValue()}_subscribe(J){const ne=super._subscribe(J);return!ne.closed&&J.next(this._value),ne}getValue(){const{hasError:J,thrownError:ne,_value:le}=this;if(J)throw ne;return this._throwIfClosed(),le}next(J){super.next(this._value=J)}}},9751:(lt,Ie,O)=>{O.d(Ie,{y:()=>Oe});var h=O(2961),q=O(727),P=O(8822),J=O(9635),ne=O(2416),le=O(576),fe=O(2806);let Oe=(()=>{class Q{constructor(Ce){Ce&&(this._subscribe=Ce)}lift(Ce){const Ye=new Q;return Ye.source=this,Ye.operator=Ce,Ye}subscribe(Ce,Ye,Me){const ze=function j(Q){return Q&&Q instanceof h.Lv||function V(Q){return Q&&(0,le.m)(Q.next)&&(0,le.m)(Q.error)&&(0,le.m)(Q.complete)}(Q)&&(0,q.Nn)(Q)}(Ce)?Ce:new h.Hp(Ce,Ye,Me);return(0,fe.x)(()=>{const{operator:Ne,source:mt}=this;ze.add(Ne?Ne.call(ze,mt):mt?this._subscribe(ze):this._trySubscribe(ze))}),ze}_trySubscribe(Ce){try{return this._subscribe(Ce)}catch(Ye){Ce.error(Ye)}}forEach(Ce,Ye){return new(Ye=de(Ye))((Me,ze)=>{const Ne=new h.Hp({next:mt=>{try{Ce(mt)}catch(dt){ze(dt),Ne.unsubscribe()}},error:ze,complete:Me});this.subscribe(Ne)})}_subscribe(Ce){var Ye;return null===(Ye=this.source)||void 0===Ye?void 0:Ye.subscribe(Ce)}[P.L](){return this}pipe(...Ce){return(0,J.U)(Ce)(this)}toPromise(Ce){return new(Ce=de(Ce))((Ye,Me)=>{let ze;this.subscribe(Ne=>ze=Ne,Ne=>Me(Ne),()=>Ye(ze))})}}return Q.create=Fe=>new Q(Fe),Q})();function de(Q){var Fe;return null!==(Fe=Q??ne.config.Promise)&&void 0!==Fe?Fe:Promise}},7579:(lt,Ie,O)=>{O.d(Ie,{x:()=>fe});var h=O(9751),q=O(727);const J=(0,O(3888).d)(de=>function(){de(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ne=O(8737),le=O(2806);let fe=(()=>{class de extends h.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(j){const Q=new Oe(this,this);return Q.operator=j,Q}_throwIfClosed(){if(this.closed)throw new J}next(j){(0,le.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Q of this.currentObservers)Q.next(j)}})}error(j){(0,le.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=j;const{observers:Q}=this;for(;Q.length;)Q.shift().error(j)}})}complete(){(0,le.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:j}=this;for(;j.length;)j.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var j;return(null===(j=this.observers)||void 0===j?void 0:j.length)>0}_trySubscribe(j){return this._throwIfClosed(),super._trySubscribe(j)}_subscribe(j){return this._throwIfClosed(),this._checkFinalizedStatuses(j),this._innerSubscribe(j)}_innerSubscribe(j){const{hasError:Q,isStopped:Fe,observers:Ce}=this;return Q||Fe?q.Lc:(this.currentObservers=null,Ce.push(j),new q.w0(()=>{this.currentObservers=null,(0,ne.P)(Ce,j)}))}_checkFinalizedStatuses(j){const{hasError:Q,thrownError:Fe,isStopped:Ce}=this;Q?j.error(Fe):Ce&&j.complete()}asObservable(){const j=new h.y;return j.source=this,j}}return de.create=(V,j)=>new Oe(V,j),de})();class Oe extends fe{constructor(V,j){super(),this.destination=V,this.source=j}next(V){var j,Q;null===(Q=null===(j=this.destination)||void 0===j?void 0:j.next)||void 0===Q||Q.call(j,V)}error(V){var j,Q;null===(Q=null===(j=this.destination)||void 0===j?void 0:j.error)||void 0===Q||Q.call(j,V)}complete(){var V,j;null===(j=null===(V=this.destination)||void 0===V?void 0:V.complete)||void 0===j||j.call(V)}_subscribe(V){var j,Q;return null!==(Q=null===(j=this.source)||void 0===j?void 0:j.subscribe(V))&&void 0!==Q?Q:q.Lc}}},2961:(lt,Ie,O)=>{O.d(Ie,{Hp:()=>Me,Lv:()=>Q});var h=O(576),q=O(727),P=O(2416),J=O(7849);function ne(){}const le=de("C",void 0,void 0);function de(te,pe,K){return{kind:te,value:pe,error:K}}var V=O(3410),j=O(2806);class Q extends q.w0{constructor(pe){super(),this.isStopped=!1,pe?(this.destination=pe,(0,q.Nn)(pe)&&pe.add(this)):this.destination=dt}static create(pe,K,he){return new Me(pe,K,he)}next(pe){this.isStopped?mt(function Oe(te){return de("N",te,void 0)}(pe),this):this._next(pe)}error(pe){this.isStopped?mt(function fe(te){return de("E",void 0,te)}(pe),this):(this.isStopped=!0,this._error(pe))}complete(){this.isStopped?mt(le,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(pe){this.destination.next(pe)}_error(pe){try{this.destination.error(pe)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Fe=Function.prototype.bind;function Ce(te,pe){return Fe.call(te,pe)}class Ye{constructor(pe){this.partialObserver=pe}next(pe){const{partialObserver:K}=this;if(K.next)try{K.next(pe)}catch(he){ze(he)}}error(pe){const{partialObserver:K}=this;if(K.error)try{K.error(pe)}catch(he){ze(he)}else ze(pe)}complete(){const{partialObserver:pe}=this;if(pe.complete)try{pe.complete()}catch(K){ze(K)}}}class Me extends Q{constructor(pe,K,he){let Te;if(super(),(0,h.m)(pe)||!pe)Te={next:pe??void 0,error:K??void 0,complete:he??void 0};else{let Le;this&&P.config.useDeprecatedNextContext?(Le=Object.create(pe),Le.unsubscribe=()=>this.unsubscribe(),Te={next:pe.next&&Ce(pe.next,Le),error:pe.error&&Ce(pe.error,Le),complete:pe.complete&&Ce(pe.complete,Le)}):Te=pe}this.destination=new Ye(Te)}}function ze(te){P.config.useDeprecatedSynchronousErrorHandling?(0,j.O)(te):(0,J.h)(te)}function mt(te,pe){const{onStoppedNotification:K}=P.config;K&&V.z.setTimeout(()=>K(te,pe))}const dt={closed:!0,next:ne,error:function Ne(te){throw te},complete:ne}},727:(lt,Ie,O)=>{O.d(Ie,{Lc:()=>le,w0:()=>ne,Nn:()=>fe});var h=O(576);const P=(0,O(3888).d)(de=>function(j){de(this),this.message=j?`${j.length} errors occurred during unsubscription:\n${j.map((Q,Fe)=>`${Fe+1}) ${Q.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=j});var J=O(8737);class ne{constructor(V){this.initialTeardown=V,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let V;if(!this.closed){this.closed=!0;const{_parentage:j}=this;if(j)if(this._parentage=null,Array.isArray(j))for(const Ce of j)Ce.remove(this);else j.remove(this);const{initialTeardown:Q}=this;if((0,h.m)(Q))try{Q()}catch(Ce){V=Ce instanceof P?Ce.errors:[Ce]}const{_finalizers:Fe}=this;if(Fe){this._finalizers=null;for(const Ce of Fe)try{Oe(Ce)}catch(Ye){V=V??[],Ye instanceof P?V=[...V,...Ye.errors]:V.push(Ye)}}if(V)throw new P(V)}}add(V){var j;if(V&&V!==this)if(this.closed)Oe(V);else{if(V instanceof ne){if(V.closed||V._hasParent(this))return;V._addParent(this)}(this._finalizers=null!==(j=this._finalizers)&&void 0!==j?j:[]).push(V)}}_hasParent(V){const{_parentage:j}=this;return j===V||Array.isArray(j)&&j.includes(V)}_addParent(V){const{_parentage:j}=this;this._parentage=Array.isArray(j)?(j.push(V),j):j?[j,V]:V}_removeParent(V){const{_parentage:j}=this;j===V?this._parentage=null:Array.isArray(j)&&(0,J.P)(j,V)}remove(V){const{_finalizers:j}=this;j&&(0,J.P)(j,V),V instanceof ne&&V._removeParent(this)}}ne.EMPTY=(()=>{const de=new ne;return de.closed=!0,de})();const le=ne.EMPTY;function fe(de){return de instanceof ne||de&&"closed"in de&&(0,h.m)(de.remove)&&(0,h.m)(de.add)&&(0,h.m)(de.unsubscribe)}function Oe(de){(0,h.m)(de)?de():de.unsubscribe()}},2416:(lt,Ie,O)=>{O.d(Ie,{config:()=>h});const h={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(lt,Ie,O)=>{O.d(Ie,{E:()=>q});const q=new(O(9751).y)(ne=>ne.complete())},8996:(lt,Ie,O)=>{O.d(Ie,{D:()=>pe});var h=O(8421),q=O(5363),P=O(9468),le=O(9751),Oe=O(2202),de=O(576),V=O(9672);function Q(K,he){if(!K)throw new Error("Iterable cannot be null");return new le.y(Te=>{(0,V.f)(Te,he,()=>{const Le=K[Symbol.asyncIterator]();(0,V.f)(Te,he,()=>{Le.next().then(ie=>{ie.done?Te.complete():Te.next(ie.value)})},0,!0)})})}var Fe=O(3670),Ce=O(8239),Ye=O(1144),Me=O(6495),ze=O(2206),Ne=O(4532),mt=O(3260);function pe(K,he){return he?function te(K,he){if(null!=K){if((0,Fe.c)(K))return function J(K,he){return(0,h.Xf)(K).pipe((0,P.R)(he),(0,q.Q)(he))}(K,he);if((0,Ye.z)(K))return function fe(K,he){return new le.y(Te=>{let Le=0;return he.schedule(function(){Le===K.length?Te.complete():(Te.next(K[Le++]),Te.closed||this.schedule())})})}(K,he);if((0,Ce.t)(K))return function ne(K,he){return(0,h.Xf)(K).pipe((0,P.R)(he),(0,q.Q)(he))}(K,he);if((0,ze.D)(K))return Q(K,he);if((0,Me.T)(K))return function j(K,he){return new le.y(Te=>{let Le;return(0,V.f)(Te,he,()=>{Le=K[Oe.h](),(0,V.f)(Te,he,()=>{let ie,$e;try{({value:ie,done:$e}=Le.next())}catch(Ht){return void Te.error(Ht)}$e?Te.complete():Te.next(ie)},0,!0)}),()=>(0,de.m)(Le?.return)&&Le.return()})}(K,he);if((0,mt.L)(K))return function dt(K,he){return Q((0,mt.Q)(K),he)}(K,he)}throw(0,Ne.z)(K)}(K,he):(0,h.Xf)(K)}},8421:(lt,Ie,O)=>{O.d(Ie,{Xf:()=>Fe});var h=O(7582),q=O(1144),P=O(8239),J=O(9751),ne=O(3670),le=O(2206),fe=O(4532),Oe=O(6495),de=O(3260),V=O(576),j=O(7849),Q=O(8822);function Fe(te){if(te instanceof J.y)return te;if(null!=te){if((0,ne.c)(te))return function Ce(te){return new J.y(pe=>{const K=te[Q.L]();if((0,V.m)(K.subscribe))return K.subscribe(pe);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(te);if((0,q.z)(te))return function Ye(te){return new J.y(pe=>{for(let K=0;K<te.length&&!pe.closed;K++)pe.next(te[K]);pe.complete()})}(te);if((0,P.t)(te))return function Me(te){return new J.y(pe=>{te.then(K=>{pe.closed||(pe.next(K),pe.complete())},K=>pe.error(K)).then(null,j.h)})}(te);if((0,le.D)(te))return Ne(te);if((0,Oe.T)(te))return function ze(te){return new J.y(pe=>{for(const K of te)if(pe.next(K),pe.closed)return;pe.complete()})}(te);if((0,de.L)(te))return function mt(te){return Ne((0,de.Q)(te))}(te)}throw(0,fe.z)(te)}function Ne(te){return new J.y(pe=>{(function dt(te,pe){var K,he,Te,Le;return(0,h.mG)(this,void 0,void 0,function*(){try{for(K=(0,h.KL)(te);!(he=yield K.next()).done;)if(pe.next(he.value),pe.closed)return}catch(ie){Te={error:ie}}finally{try{he&&!he.done&&(Le=K.return)&&(yield Le.call(K))}finally{if(Te)throw Te.error}}pe.complete()})})(te,pe).catch(K=>pe.error(K))})}},6451:(lt,Ie,O)=>{O.d(Ie,{T:()=>le});var h=O(8189),q=O(8421),P=O(515),J=O(7669),ne=O(8996);function le(...fe){const Oe=(0,J.yG)(fe),de=(0,J._6)(fe,1/0),V=fe;return V.length?1===V.length?(0,q.Xf)(V[0]):(0,h.J)(de)((0,ne.D)(V,Oe)):P.E}},9646:(lt,Ie,O)=>{O.d(Ie,{of:()=>P});var h=O(7669),q=O(8996);function P(...J){const ne=(0,h.yG)(J);return(0,q.D)(J,ne)}},5403:(lt,Ie,O)=>{O.d(Ie,{x:()=>q});var h=O(2961);function q(J,ne,le,fe,Oe){return new P(J,ne,le,fe,Oe)}class P extends h.Lv{constructor(ne,le,fe,Oe,de,V){super(ne),this.onFinalize=de,this.shouldUnsubscribe=V,this._next=le?function(j){try{le(j)}catch(Q){ne.error(Q)}}:super._next,this._error=Oe?function(j){try{Oe(j)}catch(Q){ne.error(Q)}finally{this.unsubscribe()}}:super._error,this._complete=fe?function(){try{fe()}catch(j){ne.error(j)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ne;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:le}=this;super.unsubscribe(),!le&&(null===(ne=this.onFinalize)||void 0===ne||ne.call(this))}}}},1884:(lt,Ie,O)=>{O.d(Ie,{x:()=>J});var h=O(4671),q=O(4482),P=O(5403);function J(le,fe=h.y){return le=le??ne,(0,q.e)((Oe,de)=>{let V,j=!0;Oe.subscribe((0,P.x)(de,Q=>{const Fe=fe(Q);(j||!le(V,Fe))&&(j=!1,V=Fe,de.next(Q))}))})}function ne(le,fe){return le===fe}},4004:(lt,Ie,O)=>{O.d(Ie,{U:()=>P});var h=O(4482),q=O(5403);function P(J,ne){return(0,h.e)((le,fe)=>{let Oe=0;le.subscribe((0,q.x)(fe,de=>{fe.next(J.call(ne,de,Oe++))}))})}},8189:(lt,Ie,O)=>{O.d(Ie,{J:()=>P});var h=O(5577),q=O(4671);function P(J=1/0){return(0,h.z)(q.y,J)}},5577:(lt,Ie,O)=>{O.d(Ie,{z:()=>Oe});var h=O(4004),q=O(8421),P=O(4482),J=O(9672),ne=O(5403),fe=O(576);function Oe(de,V,j=1/0){return(0,fe.m)(V)?Oe((Q,Fe)=>(0,h.U)((Ce,Ye)=>V(Q,Ce,Fe,Ye))((0,q.Xf)(de(Q,Fe))),j):("number"==typeof V&&(j=V),(0,P.e)((Q,Fe)=>function le(de,V,j,Q,Fe,Ce,Ye,Me){const ze=[];let Ne=0,mt=0,dt=!1;const te=()=>{dt&&!ze.length&&!Ne&&V.complete()},pe=he=>Ne<Q?K(he):ze.push(he),K=he=>{Ce&&V.next(he),Ne++;let Te=!1;(0,q.Xf)(j(he,mt++)).subscribe((0,ne.x)(V,Le=>{Fe?.(Le),Ce?pe(Le):V.next(Le)},()=>{Te=!0},void 0,()=>{if(Te)try{for(Ne--;ze.length&&Ne<Q;){const Le=ze.shift();Ye?(0,J.f)(V,Ye,()=>K(Le)):K(Le)}te()}catch(Le){V.error(Le)}}))};return de.subscribe((0,ne.x)(V,pe,()=>{dt=!0,te()})),()=>{Me?.()}}(Q,Fe,de,j)))}},5363:(lt,Ie,O)=>{O.d(Ie,{Q:()=>J});var h=O(9672),q=O(4482),P=O(5403);function J(ne,le=0){return(0,q.e)((fe,Oe)=>{fe.subscribe((0,P.x)(Oe,de=>(0,h.f)(Oe,ne,()=>Oe.next(de),le),()=>(0,h.f)(Oe,ne,()=>Oe.complete(),le),de=>(0,h.f)(Oe,ne,()=>Oe.error(de),le)))})}},3099:(lt,Ie,O)=>{O.d(Ie,{B:()=>ne});var h=O(8421),q=O(7579),P=O(2961),J=O(4482);function ne(fe={}){const{connector:Oe=(()=>new q.x),resetOnError:de=!0,resetOnComplete:V=!0,resetOnRefCountZero:j=!0}=fe;return Q=>{let Fe,Ce,Ye,Me=0,ze=!1,Ne=!1;const mt=()=>{Ce?.unsubscribe(),Ce=void 0},dt=()=>{mt(),Fe=Ye=void 0,ze=Ne=!1},te=()=>{const pe=Fe;dt(),pe?.unsubscribe()};return(0,J.e)((pe,K)=>{Me++,!Ne&&!ze&&mt();const he=Ye=Ye??Oe();K.add(()=>{Me--,0===Me&&!Ne&&!ze&&(Ce=le(te,j))}),he.subscribe(K),!Fe&&Me>0&&(Fe=new P.Hp({next:Te=>he.next(Te),error:Te=>{Ne=!0,mt(),Ce=le(dt,de,Te),he.error(Te)},complete:()=>{ze=!0,mt(),Ce=le(dt,V),he.complete()}}),(0,h.Xf)(pe).subscribe(Fe))})(Q)}}function le(fe,Oe,...de){if(!0===Oe)return void fe();if(!1===Oe)return;const V=new P.Hp({next:()=>{V.unsubscribe(),fe()}});return(0,h.Xf)(Oe(...de)).subscribe(V)}},9468:(lt,Ie,O)=>{O.d(Ie,{R:()=>q});var h=O(4482);function q(P,J=0){return(0,h.e)((ne,le)=>{le.add(P.schedule(()=>ne.subscribe(le),J))})}},8505:(lt,Ie,O)=>{O.d(Ie,{b:()=>ne});var h=O(576),q=O(4482),P=O(5403),J=O(4671);function ne(le,fe,Oe){const de=(0,h.m)(le)||fe||Oe?{next:le,error:fe,complete:Oe}:le;return de?(0,q.e)((V,j)=>{var Q;null===(Q=de.subscribe)||void 0===Q||Q.call(de);let Fe=!0;V.subscribe((0,P.x)(j,Ce=>{var Ye;null===(Ye=de.next)||void 0===Ye||Ye.call(de,Ce),j.next(Ce)},()=>{var Ce;Fe=!1,null===(Ce=de.complete)||void 0===Ce||Ce.call(de),j.complete()},Ce=>{var Ye;Fe=!1,null===(Ye=de.error)||void 0===Ye||Ye.call(de,Ce),j.error(Ce)},()=>{var Ce,Ye;Fe&&(null===(Ce=de.unsubscribe)||void 0===Ce||Ce.call(de)),null===(Ye=de.finalize)||void 0===Ye||Ye.call(de)}))}):J.y}},4408:(lt,Ie,O)=>{O.d(Ie,{o:()=>ne});var h=O(727);class q extends h.w0{constructor(fe,Oe){super()}schedule(fe,Oe=0){return this}}const P={setInterval(le,fe,...Oe){const{delegate:de}=P;return de?.setInterval?de.setInterval(le,fe,...Oe):setInterval(le,fe,...Oe)},clearInterval(le){const{delegate:fe}=P;return(fe?.clearInterval||clearInterval)(le)},delegate:void 0};var J=O(8737);class ne extends q{constructor(fe,Oe){super(fe,Oe),this.scheduler=fe,this.work=Oe,this.pending=!1}schedule(fe,Oe=0){var de;if(this.closed)return this;this.state=fe;const V=this.id,j=this.scheduler;return null!=V&&(this.id=this.recycleAsyncId(j,V,Oe)),this.pending=!0,this.delay=Oe,this.id=null!==(de=this.id)&&void 0!==de?de:this.requestAsyncId(j,this.id,Oe),this}requestAsyncId(fe,Oe,de=0){return P.setInterval(fe.flush.bind(fe,this),de)}recycleAsyncId(fe,Oe,de=0){if(null!=de&&this.delay===de&&!1===this.pending)return Oe;null!=Oe&&P.clearInterval(Oe)}execute(fe,Oe){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const de=this._execute(fe,Oe);if(de)return de;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(fe,Oe){let V,de=!1;try{this.work(fe)}catch(j){de=!0,V=j||new Error("Scheduled action threw falsy error")}if(de)return this.unsubscribe(),V}unsubscribe(){if(!this.closed){const{id:fe,scheduler:Oe}=this,{actions:de}=Oe;this.work=this.state=this.scheduler=null,this.pending=!1,(0,J.P)(de,this),null!=fe&&(this.id=this.recycleAsyncId(Oe,fe,null)),this.delay=null,super.unsubscribe()}}}},7565:(lt,Ie,O)=>{O.d(Ie,{v:()=>P});var h=O(6063);class q{constructor(ne,le=q.now){this.schedulerActionCtor=ne,this.now=le}schedule(ne,le=0,fe){return new this.schedulerActionCtor(this,ne).schedule(fe,le)}}q.now=h.l.now;class P extends q{constructor(ne,le=q.now){super(ne,le),this.actions=[],this._active=!1}flush(ne){const{actions:le}=this;if(this._active)return void le.push(ne);let fe;this._active=!0;do{if(fe=ne.execute(ne.state,ne.delay))break}while(ne=le.shift());if(this._active=!1,fe){for(;ne=le.shift();)ne.unsubscribe();throw fe}}}},4986:(lt,Ie,O)=>{O.d(Ie,{z:()=>P});var h=O(4408);const P=new(O(7565).v)(h.o)},6063:(lt,Ie,O)=>{O.d(Ie,{l:()=>h});const h={now:()=>(h.delegate||Date).now(),delegate:void 0}},3410:(lt,Ie,O)=>{O.d(Ie,{z:()=>h});const h={setTimeout(q,P,...J){const{delegate:ne}=h;return ne?.setTimeout?ne.setTimeout(q,P,...J):setTimeout(q,P,...J)},clearTimeout(q){const{delegate:P}=h;return(P?.clearTimeout||clearTimeout)(q)},delegate:void 0}},2202:(lt,Ie,O)=>{O.d(Ie,{h:()=>q});const q=function h(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(lt,Ie,O)=>{O.d(Ie,{L:()=>h});const h="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(lt,Ie,O)=>{O.d(Ie,{_6:()=>le,jO:()=>J,yG:()=>ne});var h=O(576);function P(fe){return fe[fe.length-1]}function J(fe){return(0,h.m)(P(fe))?fe.pop():void 0}function ne(fe){return function q(fe){return fe&&(0,h.m)(fe.schedule)}(P(fe))?fe.pop():void 0}function le(fe,Oe){return"number"==typeof P(fe)?fe.pop():Oe}},8737:(lt,Ie,O)=>{function h(q,P){if(q){const J=q.indexOf(P);0<=J&&q.splice(J,1)}}O.d(Ie,{P:()=>h})},3888:(lt,Ie,O)=>{function h(q){const J=q(ne=>{Error.call(ne),ne.stack=(new Error).stack});return J.prototype=Object.create(Error.prototype),J.prototype.constructor=J,J}O.d(Ie,{d:()=>h})},2806:(lt,Ie,O)=>{O.d(Ie,{O:()=>J,x:()=>P});var h=O(2416);let q=null;function P(ne){if(h.config.useDeprecatedSynchronousErrorHandling){const le=!q;if(le&&(q={errorThrown:!1,error:null}),ne(),le){const{errorThrown:fe,error:Oe}=q;if(q=null,fe)throw Oe}}else ne()}function J(ne){h.config.useDeprecatedSynchronousErrorHandling&&q&&(q.errorThrown=!0,q.error=ne)}},9672:(lt,Ie,O)=>{function h(q,P,J,ne=0,le=!1){const fe=P.schedule(function(){J(),le?q.add(this.schedule(null,ne)):this.unsubscribe()},ne);if(q.add(fe),!le)return fe}O.d(Ie,{f:()=>h})},4671:(lt,Ie,O)=>{function h(q){return q}O.d(Ie,{y:()=>h})},1144:(lt,Ie,O)=>{O.d(Ie,{z:()=>h});const h=q=>q&&"number"==typeof q.length&&"function"!=typeof q},2206:(lt,Ie,O)=>{O.d(Ie,{D:()=>q});var h=O(576);function q(P){return Symbol.asyncIterator&&(0,h.m)(P?.[Symbol.asyncIterator])}},576:(lt,Ie,O)=>{function h(q){return"function"==typeof q}O.d(Ie,{m:()=>h})},3670:(lt,Ie,O)=>{O.d(Ie,{c:()=>P});var h=O(8822),q=O(576);function P(J){return(0,q.m)(J[h.L])}},6495:(lt,Ie,O)=>{O.d(Ie,{T:()=>P});var h=O(2202),q=O(576);function P(J){return(0,q.m)(J?.[h.h])}},8239:(lt,Ie,O)=>{O.d(Ie,{t:()=>q});var h=O(576);function q(P){return(0,h.m)(P?.then)}},3260:(lt,Ie,O)=>{O.d(Ie,{L:()=>J,Q:()=>P});var h=O(7582),q=O(576);function P(ne){return(0,h.FC)(this,arguments,function*(){const fe=ne.getReader();try{for(;;){const{value:Oe,done:de}=yield(0,h.qq)(fe.read());if(de)return yield(0,h.qq)(void 0);yield yield(0,h.qq)(Oe)}}finally{fe.releaseLock()}})}function J(ne){return(0,q.m)(ne?.getReader)}},4482:(lt,Ie,O)=>{O.d(Ie,{A:()=>q,e:()=>P});var h=O(576);function q(J){return(0,h.m)(J?.lift)}function P(J){return ne=>{if(q(ne))return ne.lift(function(le){try{return J(le,this)}catch(fe){this.error(fe)}});throw new TypeError("Unable to lift unknown Observable type")}}},9635:(lt,Ie,O)=>{O.d(Ie,{U:()=>P,z:()=>q});var h=O(4671);function q(...J){return P(J)}function P(J){return 0===J.length?h.y:1===J.length?J[0]:function(le){return J.reduce((fe,Oe)=>Oe(fe),le)}}},7849:(lt,Ie,O)=>{O.d(Ie,{h:()=>P});var h=O(2416),q=O(3410);function P(J){q.z.setTimeout(()=>{const{onUnhandledError:ne}=h.config;if(!ne)throw J;ne(J)})}},4532:(lt,Ie,O)=>{function h(q){return new TypeError(`You provided ${null!==q&&"object"==typeof q?"an invalid object":`'${q}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}O.d(Ie,{z:()=>h})},2223:(lt,Ie,O)=>{O.d(Ie,{$8M:()=>Tl,$WT:()=>Us,$Z:()=>tg,AFp:()=>Hp,AaK:()=>Q,CHM:()=>qu,CRH:()=>yd,D6c:()=>yA,EJc:()=>qS,EpF:()=>Fn,F4k:()=>T0,FYo:()=>Wp,FiY:()=>$i,GfV:()=>Q_,Gpc:()=>Ye,HDt:()=>kv,HOy:()=>$y,JOm:()=>Eo,KtG:()=>hl,LFG:()=>Jt,Lbi:()=>_c,Lck:()=>Pg,MMx:()=>uC,NdJ:()=>Ny,Ojb:()=>Bl,OlP:()=>pn,Oqu:()=>H0,P3R:()=>Qm,PXZ:()=>sb,Q6J:()=>vg,QGY:()=>fa,Qsj:()=>Zp,R0b:()=>yi,RDi:()=>Hm,Rgc:()=>Vg,SBq:()=>$h,Sil:()=>Jw,Suo:()=>Vw,TTD:()=>Bu,TgZ:()=>cf,X6Q:()=>mb,XFs:()=>qe,Xpm:()=>oo,Xts:()=>xh,Y36:()=>Ic,YKP:()=>jc,YNc:()=>mg,Yjl:()=>Wc,Yz7:()=>Kt,Z0I:()=>Zn,ZZ4:()=>zv,_Bn:()=>sC,_UZ:()=>My,_c5:()=>_E,_uU:()=>j0,aQg:()=>vE,c2e:()=>Pv,cJS:()=>Wn,cg1:()=>tw,dDg:()=>XS,dqk:()=>rn,eFA:()=>ub,eJc:()=>bv,ekj:()=>By,eoX:()=>Qg,f3M:()=>qt,g9A:()=>pI,h0i:()=>gd,hGG:()=>fA,hij:()=>Mn,iGM:()=>Gg,ifc:()=>yn,ip1:()=>Ov,jDz:()=>Gr,kL8:()=>zy,lG2:()=>qc,lqb:()=>vc,lri:()=>nb,n5z:()=>au,oAB:()=>ms,oxw:()=>od,q4F:()=>II,qFp:()=>_A,qLn:()=>zl,qOj:()=>dg,qZA:()=>Mc,rWj:()=>rb,rg0:()=>Bd,sBO:()=>Ia,s_b:()=>vv,soG:()=>Ff,tb:()=>em,tp0:()=>li,uIk:()=>Xl,vHH:()=>te,vpe:()=>eo,wAp:()=>Mt,xp6:()=>n0,z2F:()=>Id,zSh:()=>$_,zs3:()=>yu});var h=O(7579),q=O(727),P=O(1135),J=O(9751),ne=O(6451),le=O(9646),fe=O(3099),Oe=O(5577),de=O(1884);function V(i){for(let s in i)if(i[s]===V)return s;throw Error("Could not find renamed property on target object.")}function j(i,s){for(const a in s)s.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=s[a])}function Q(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(Q).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const s=i.toString();if(null==s)return""+s;const a=s.indexOf("\n");return-1===a?s:s.substring(0,a)}function Fe(i,s){return null==i||""===i?null===s?"":s:null==s||""===s?i:i+" "+s}const Ce=V({__forward_ref__:V});function Ye(i){return i.__forward_ref__=Ye,i.toString=function(){return Q(this())},i}function Me(i){return ze(i)?i():i}function ze(i){return"function"==typeof i&&i.hasOwnProperty(Ce)&&i.__forward_ref__===Ye}function Ne(i){return i&&!!i.\u0275providers}const dt="https://g.co/ng/security#xss";class te extends Error{constructor(s,a){super(function pe(i,s){return`NG0${Math.abs(i)}${s?": "+s:""}`}(s,a)),this.code=s}}function K(i){return"string"==typeof i?i:null==i?"":String(i)}function $e(i,s){throw new te(-201,!1)}function tt(i,s){null==i&&function ht(i,s,a,c){throw new Error(`ASSERTION ERROR: ${i}`+(null==c?"":` [Expected=> ${a} ${c} ${s} <=Actual]`))}(s,i,null,"!=")}function Kt(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function Wn(i){return{providers:i.providers||[],imports:i.imports||[]}}function qr(i){return no(i,ni)||no(i,Ls)}function Zn(i){return null!==qr(i)}function no(i,s){return i.hasOwnProperty(s)?i[s]:null}function Sa(i){return i&&(i.hasOwnProperty(ri)||i.hasOwnProperty(Aa))?i[ri]:null}const ni=V({\u0275prov:V}),ri=V({\u0275inj:V}),Ls=V({ngInjectableDef:V}),Aa=V({ngInjectorDef:V});var qe=(()=>((qe=qe||{})[qe.Default=0]="Default",qe[qe.Host=1]="Host",qe[qe.Self=2]="Self",qe[qe.SkipSelf=4]="SkipSelf",qe[qe.Optional=8]="Optional",qe))();let ft;function ln(i){const s=ft;return ft=i,s}function Tn(i,s,a){const c=qr(i);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:a&qe.Optional?null:void 0!==s?s:void $e(Q(i))}const rn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Mr={},Bt="__NG_DI_FLAG__",Xi="ngTempTokenPath",xa=/\n/gm,es="__source";let gr;function mn(i){const s=gr;return gr=i,s}function ts(i,s=qe.Default){if(void 0===gr)throw new te(-203,!1);return null===gr?Tn(i,void 0,s):gr.get(i,s&qe.Optional?null:void 0,s)}function Jt(i,s=qe.Default){return(function yt(){return ft}()||ts)(Me(i),s)}function qt(i,s=qe.Default){return Jt(i,U(s))}function U(i){return typeof i>"u"||"number"==typeof i?i:0|(i.optional&&8)|(i.host&&1)|(i.self&&2)|(i.skipSelf&&4)}function L(i){const s=[];for(let a=0;a<i.length;a++){const c=Me(i[a]);if(Array.isArray(c)){if(0===c.length)throw new te(900,!1);let d,p=qe.Default;for(let y=0;y<c.length;y++){const w=c[y],D=_e(w);"number"==typeof D?-1===D?d=w.token:p|=D:d=w}s.push(Jt(d,p))}else s.push(Jt(c))}return s}function z(i,s){return i[Bt]=s,i.prototype[Bt]=s,i}function _e(i){return i[Bt]}function pt(i){return{toString:i}.toString()}var Nt=(()=>((Nt=Nt||{})[Nt.OnPush=0]="OnPush",Nt[Nt.Default=1]="Default",Nt))(),yn=(()=>{return(i=yn||(yn={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",yn;var i})();const dn={},bt=[],Gt=V({\u0275cmp:V}),mr=V({\u0275dir:V}),vi=V({\u0275pipe:V}),rs=V({\u0275mod:V}),si=V({\u0275fac:V}),ue=V({__NG_ELEMENT_ID__:V}),ee=V({__NG_ENV_ID__:V});function xe(i,s,a){let c=i.length;for(;;){const d=i.indexOf(s,a);if(-1===d)return d;if(0===d||i.charCodeAt(d-1)<=32){const p=s.length;if(d+p===c||i.charCodeAt(d+p)<=32)return d}a=d+1}}function ut(i,s,a){let c=0;for(;c<a.length;){const d=a[c];if("number"==typeof d){if(0!==d)break;c++;const p=a[c++],y=a[c++],w=a[c++];i.setAttribute(s,y,w,p)}else{const p=d,y=a[++c];Ft(p)?i.setProperty(s,p,y):i.setAttribute(s,p,y),c++}}return c}function At(i){return 3===i||4===i||6===i}function Ft(i){return 64===i.charCodeAt(0)}function Yt(i,s){if(null!==s&&0!==s.length)if(null===i||0===i.length)i=s.slice();else{let a=-1;for(let c=0;c<s.length;c++){const d=s[c];"number"==typeof d?a=d:0===a||rr(i,a,d,null,-1===a||2===a?s[++c]:null)}}return i}function rr(i,s,a,c,d){let p=0,y=i.length;if(-1===s)y=-1;else for(;p<i.length;){const w=i[p++];if("number"==typeof w){if(w===s){y=-1;break}if(w>s){y=p-1;break}}}for(;p<i.length;){const w=i[p];if("number"==typeof w)break;if(w===a){if(null===c)return void(null!==d&&(i[p+1]=d));if(c===i[p+1])return void(i[p+2]=d)}p++,null!==c&&p++,null!==d&&p++}-1!==y&&(i.splice(y,0,s),p=y+1),i.splice(p++,0,a),null!==c&&i.splice(p++,0,c),null!==d&&i.splice(p++,0,d)}const Kn="ng-template";function gs(i,s,a){let c=0,d=!0;for(;c<i.length;){let p=i[c++];if("string"==typeof p&&d){const y=i[c++];if(a&&"class"===p&&-1!==xe(y.toLowerCase(),s,0))return!0}else{if(1===p){for(;c<i.length&&"string"==typeof(p=i[c++]);)if(p.toLowerCase()===s)return!0;return!1}"number"==typeof p&&(d=!1)}}return!1}function so(i){return 4===i.type&&i.value!==Kn}function Na(i,s,a){return s===(4!==i.type||a?i.value:Kn)}function Ad(i,s,a){let c=4;const d=i.attrs||[],p=function Ru(i){for(let s=0;s<i.length;s++)if(At(i[s]))return s;return i.length}(d);let y=!1;for(let w=0;w<s.length;w++){const D=s[w];if("number"!=typeof D){if(!y)if(4&c){if(c=2|1&c,""!==D&&!Na(i,D,a)||""===D&&1===s.length){if(oi(c))return!1;y=!0}}else{const S=8&c?D:s[++w];if(8&c&&null!==i.attrs){if(!gs(i.attrs,S,a)){if(oi(c))return!1;y=!0}continue}const F=Md(8&c?"class":D,d,so(i),a);if(-1===F){if(oi(c))return!1;y=!0;continue}if(""!==S){let G;G=F>p?"":d[F+1].toLowerCase();const Z=8&c?G:null;if(Z&&-1!==xe(Z,S,0)||2&c&&S!==G){if(oi(c))return!1;y=!0}}}}else{if(!y&&!oi(c)&&!oi(D))return!1;if(y&&oi(D))continue;y=!1,c=D|1&c}}return oi(c)||y}function oi(i){return 0==(1&i)}function Md(i,s,a,c){if(null===s)return-1;let d=0;if(c||!a){let p=!1;for(;d<s.length;){const y=s[d];if(y===i)return d;if(3===y||6===y)p=!0;else{if(1===y||2===y){let w=s[++d];for(;"string"==typeof w;)w=s[++d];continue}if(4===y)break;if(0===y){d+=4;continue}}d+=p?1:2}return-1}return function xd(i,s){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const c=i[a];if("number"==typeof c)return-1;if(c===s)return a;a++}return-1}(s,i)}function _i(i,s,a=!1){for(let c=0;c<s.length;c++)if(Ad(i,s[c],a))return!0;return!1}function Vs(i,s){return i?":not("+s.trim()+")":s}function ym(i){let s=i[0],a=1,c=2,d="",p=!1;for(;a<i.length;){let y=i[a];if("string"==typeof y)if(2&c){const w=i[++a];d+="["+y+(w.length>0?'="'+w+'"':"")+"]"}else 8&c?d+="."+y:4&c&&(d+=" "+y);else""!==d&&!oi(y)&&(s+=Vs(p,d),d=""),c=y,p=p||!oi(c);a++}return""!==d&&(s+=Vs(p,d)),s}function oo(i){return pt(()=>{const s=Pu(i),a={...s,decls:i.decls,vars:i.vars,template:i.template,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,onPush:i.changeDetection===Nt.OnPush,directiveDefs:null,pipeDefs:null,dependencies:s.standalone&&i.dependencies||null,getStandaloneInjector:null,data:i.data||{},encapsulation:i.encapsulation||yn.Emulated,styles:i.styles||bt,_:null,schemas:i.schemas||null,tView:null,id:""};Zc(a);const c=i.dependencies;return a.directiveDefs=Po(c,!1),a.pipeDefs=Po(c,!0),a.id=function Od(i){let s=0;const a=[i.selectors,i.ngContentSelectors,i.hostVars,i.hostAttrs,i.consts,i.vars,i.decls,i.encapsulation,i.standalone,i.exportAs,JSON.stringify(i.inputs),JSON.stringify(i.outputs),Object.getOwnPropertyNames(i.type.prototype),!!i.contentQueries,!!i.viewQuery].join("|");for(const d of a)s=Math.imul(31,s)+d.charCodeAt(0)<<0;return s+=2147483648,"c"+s}(a),a})}function Rd(i){return Lt(i)||or(i)}function vm(i){return null!==i}function ms(i){return pt(()=>({type:i.type,bootstrap:i.bootstrap||bt,declarations:i.declarations||bt,imports:i.imports||bt,exports:i.exports||bt,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null}))}function Ra(i,s){if(null==i)return dn;const a={};for(const c in i)if(i.hasOwnProperty(c)){let d=i[c],p=d;Array.isArray(d)&&(p=d[1],d=d[0]),a[d]=c,s&&(s[d]=p)}return a}function qc(i){return pt(()=>{const s=Pu(i);return Zc(s),s})}function Wc(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,standalone:!0===i.standalone,onDestroy:i.type.prototype.ngOnDestroy||null}}function Lt(i){return i[Gt]||null}function or(i){return i[mr]||null}function un(i){return i[vi]||null}function Us(i){const s=Lt(i)||or(i)||un(i);return null!==s&&s.standalone}function xr(i,s){const a=i[rs]||null;if(!a&&!0===s)throw new Error(`Type ${Q(i)} does not have '\u0275mod' property.`);return a}function Pu(i){const s={};return{type:i.type,providersResolver:null,factory:null,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:s,exportAs:i.exportAs||null,standalone:!0===i.standalone,selectors:i.selectors||bt,viewQuery:i.viewQuery||null,features:i.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Ra(i.inputs,s),outputs:Ra(i.outputs)}}function Zc(i){i.features?.forEach(s=>s(i))}function Po(i,s){if(!i)return null;const a=s?un:Rd;return()=>("function"==typeof i?i():i).map(c=>a(c)).filter(vm)}const Vn=0,Ze=1,kt=2,wn=3,ai=4,Bs=5,Br=6,ao=7,En=8,yr=9,ys=10,Ot=11,Zr=12,Pd=13,is=14,On=15,ko=16,Pa=17,wi=18,Fo=19,kd=20,ui=21,Un=22,Kc=23,uo=24,jt=25,ku=1,ss=2,Kr=7,Ei=8,co=9,ar=11;function Bn(i){return Array.isArray(i)&&"object"==typeof i[ku]}function ci(i){return Array.isArray(i)&&!0===i[ku]}function Lo(i){return 0!=(4&i.flags)}function vs(i){return i.componentOffset>-1}function _s(i){return 1==(1&i.flags)}function vr(i){return!!i.template}function Nr(i){return 0!=(512&i[kt])}function js(i,s){return i.hasOwnProperty(si)?i[si]:null}let Ua=rn.WeakRef??class Fu{constructor(s){this.ref=s}deref(){return this.ref}},Cm=0,jr=null,Lu=!1;function Qn(i){const s=jr;return jr=i,s}class Vu{constructor(){this.id=Cm++,this.ref=function Ud(i){return new Ua(i)}(this),this.producers=new Map,this.consumers=new Map,this.trackingVersion=0,this.valueVersion=0}consumerPollProducersForChange(){for(const[s,a]of this.producers){const c=a.producerNode.deref();if(void 0!==c&&a.atTrackingVersion===this.trackingVersion){if(c.producerPollStatus(a.seenValueVersion))return!0}else this.producers.delete(s),c?.consumers.delete(this.id)}return!1}producerMayHaveChanged(){const s=Lu;Lu=!0;try{for(const[a,c]of this.consumers){const d=c.consumerNode.deref();void 0!==d&&d.trackingVersion===c.atTrackingVersion?d.onConsumerDependencyMayHaveChanged():(this.consumers.delete(a),d?.producers.delete(this.id))}}finally{Lu=s}}producerAccessed(){if(Lu)throw new Error("");if(null===jr)return;let s=jr.producers.get(this.id);void 0===s?(s={consumerNode:jr.ref,producerNode:this.ref,seenValueVersion:this.valueVersion,atTrackingVersion:jr.trackingVersion},jr.producers.set(this.id,s),this.consumers.set(jr.id,s)):(s.seenValueVersion=this.valueVersion,s.atTrackingVersion=jr.trackingVersion)}get hasProducers(){return this.producers.size>0}get producerUpdatesAllowed(){return!1!==jr?.consumerAllowSignalWrites}producerPollStatus(s){return this.valueVersion!==s||(this.onProducerUpdateValueVersion(),this.valueVersion!==s)}}let $a=null;function Bd(i){const s=Qn(null);try{return i()}finally{Qn(s)}}const nl=()=>{};class jd extends Vu{constructor(s,a,c){super(),this.watch=s,this.schedule=a,this.dirty=!1,this.cleanupFn=nl,this.registerOnCleanup=d=>{this.cleanupFn=d},this.consumerAllowSignalWrites=c}notify(){this.dirty||this.schedule(this),this.dirty=!0}onConsumerDependencyMayHaveChanged(){this.notify()}onProducerUpdateValueVersion(){}run(){if(this.dirty=!1,0!==this.trackingVersion&&!this.consumerPollProducersForChange())return;const s=Qn(this);this.trackingVersion++;try{this.cleanupFn(),this.cleanupFn=nl,this.watch(this.registerOnCleanup)}finally{Qn(s)}}cleanup(){this.cleanupFn()}}class rl{constructor(s,a,c){this.previousValue=s,this.currentValue=a,this.firstChange=c}isFirstChange(){return this.firstChange}}function Bu(){return Ha}function Ha(i){return i.type.prototype.ngOnChanges&&(i.setInput=ju),il}function il(){const i=$u(this),s=i?.current;if(s){const a=i.previous;if(a===dn)i.previous=s;else for(let c in s)a[c]=s[c];i.current=null,this.ngOnChanges(s)}}function ju(i,s,a,c){const d=this.declaredInputs[a],p=$u(i)||function Tm(i,s){return i[sl]=s}(i,{previous:dn,current:null}),y=p.current||(p.current={}),w=p.previous,D=w[d];y[d]=new rl(D&&D.currentValue,s,w===dn),i[c]=s}Bu.ngInherit=!0;const sl="__ngSimpleChanges__";function $u(i){return i[sl]||null}const Fi=function(i,s,a){};function In(i){for(;Array.isArray(i);)i=i[Vn];return i}function Hu(i,s){return In(s[i])}function Hr(i,s){return In(s[i.index])}function ol(i,s){return i.data[s]}function ur(i,s){const a=s[i];return Bn(a)?a:a[Vn]}function $o(i){return 128==(128&i[kt])}function Hs(i,s){return null==s?null:i[s]}function al(i){i[Pa]=0}function Gd(i){1024&i[kt]||(i[kt]|=1024,zu(i,1))}function ul(i){1024&i[kt]&&(i[kt]&=-1025,zu(i,-1))}function zu(i,s){let a=i[wn];if(null===a)return;a[Bs]+=s;let c=a;for(a=a[wn];null!==a&&(1===s&&1===c[Bs]||-1===s&&0===c[Bs]);)a[Bs]+=s,c=a,a=a[wn]}const gt={lFrame:pl(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Wd(){return gt.bindingsEnabled}function be(){return gt.lFrame.lView}function Wt(){return gt.lFrame.tView}function qu(i){return gt.lFrame.contextLView=i,i[En]}function hl(i){return gt.lFrame.contextLView=null,i}function Sn(){let i=Jf();for(;null!==i&&64===i.type;)i=i.parent;return i}function Jf(){return gt.lFrame.currentTNode}function Es(i,s){const a=gt.lFrame;a.currentTNode=i,a.isParent=s}function Wa(){return gt.lFrame.isParent}function zs(){return gt.lFrame.bindingIndex++}function hn(i){const s=gt.lFrame,a=s.bindingIndex;return s.bindingIndex=s.bindingIndex+i,a}function Za(i,s){const a=gt.lFrame;a.bindingIndex=a.bindingRootIndex=i,go(s)}function go(i){gt.lFrame.currentDirectiveIndex=i}function Yd(){return gt.lFrame.currentQueryIndex}function Ku(i){gt.lFrame.currentQueryIndex=i}function Yu(i){const s=i[Ze];return 2===s.type?s.declTNode:1===s.type?i[Br]:null}function Ya(i,s,a){if(a&qe.SkipSelf){let d=s,p=i;for(;!(d=d.parent,null!==d||a&qe.Host||(d=Yu(p),null===d||(p=p[is],10&d.type))););if(null===d)return!1;s=d,i=p}const c=gt.lFrame=Li();return c.currentTNode=s,c.lView=i,!0}function Wo(i){const s=Li(),a=i[Ze];gt.lFrame=s,s.currentTNode=a.firstChild,s.lView=i,s.tView=a,s.contextLView=i,s.bindingIndex=a.bindingStartIndex,s.inI18n=!1}function Li(){const i=gt.lFrame,s=null===i?null:i.child;return null===s?pl(i):s}function pl(i){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=s),s}function Qd(){const i=gt.lFrame;return gt.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const Qu=Qd;function gl(){const i=Qd();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function Yr(){return gt.lFrame.selectedIndex}function mo(i){gt.lFrame.selectedIndex=i}function Cn(){const i=gt.lFrame;return ol(i.tView,i.selectedIndex)}let ml=!0;function yl(){return ml}function as(i){ml=i}function Xa(i,s){for(let a=s.directiveStart,c=s.directiveEnd;a<c;a++){const p=i.data[a].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:w,ngAfterViewInit:D,ngAfterViewChecked:S,ngOnDestroy:N}=p;y&&(i.contentHooks??=[]).push(-a,y),w&&((i.contentHooks??=[]).push(a,w),(i.contentCheckHooks??=[]).push(a,w)),D&&(i.viewHooks??=[]).push(-a,D),S&&((i.viewHooks??=[]).push(a,S),(i.viewCheckHooks??=[]).push(a,S)),null!=N&&(i.destroyHooks??=[]).push(a,N)}}function vl(i,s,a){_l(i,s,3,a)}function Zo(i,s,a,c){(3&i[kt])===a&&_l(i,s,a,c)}function eh(i,s){let a=i[kt];(3&a)===s&&(a&=4095,a+=1,i[kt]=a)}function _l(i,s,a,c){const p=c??-1,y=s.length-1;let w=0;for(let D=void 0!==c?65535&i[Pa]:0;D<y;D++)if("number"==typeof s[D+1]){if(w=s[D],null!=c&&w>=c)break}else s[D]<0&&(i[Pa]+=65536),(w<p||-1==p)&&(Ju(i,a,s,D),i[Pa]=(4294901760&i[Pa])+D+2),D++}function np(i,s){Fi(4,i,s);const a=Qn(null);try{s.call(i)}finally{Qn(a),Fi(5,i,s)}}function Ju(i,s,a,c){const d=a[c]<0,p=a[c+1],w=i[d?-a[c]:a[c]];d?i[kt]>>12<i[Pa]>>16&&(3&i[kt])===s&&(i[kt]+=4096,np(w,p)):np(w,p)}const fn=-1;class _r{constructor(s,a,c){this.factory=s,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=c}}function Hn(i){return i!==fn}function Tt(i){return 32767&i}function nu(i,s){let a=function Ci(i){return i>>16}(i),c=s;for(;a>0;)c=c[is],a--;return c}let ru=!0;function qs(i){const s=ru;return ru=i,s}const iu=255,wr=5;let bi=0;const Vi={};function Qo(i,s){const a=ec(i,s);if(-1!==a)return a;const c=s[Ze];c.firstCreatePass&&(i.injectorIndex=s.length,nh(c.data,i),nh(s,null),nh(c.blueprint,null));const d=Ds(i,s),p=i.injectorIndex;if(Hn(d)){const y=Tt(d),w=nu(d,s),D=w[Ze].data;for(let S=0;S<8;S++)s[p+S]=w[y+S]|D[y+S]}return s[p+8]=d,p}function nh(i,s){i.push(0,0,0,0,0,0,0,0,s)}function ec(i,s){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===s[i.injectorIndex+8]?-1:i.injectorIndex}function Ds(i,s){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,c=null,d=s;for(;null!==d;){if(c=bl(d),null===c)return fn;if(a++,d=d[is],-1!==c.injectorIndex)return c.injectorIndex|a<<16}return fn}function Ti(i,s,a){!function th(i,s,a){let c;"string"==typeof a?c=a.charCodeAt(0)||0:a.hasOwnProperty(ue)&&(c=a[ue]),null==c&&(c=a[ue]=bi++);const d=c&iu;s.data[i+(d>>wr)]|=1<<d}(i,s,a)}function Pr(i,s,a){if(a&qe.Optional||void 0!==i)return i;$e()}function Ui(i,s,a,c){if(a&qe.Optional&&void 0===c&&(c=null),!(a&(qe.Self|qe.Host))){const d=i[yr],p=ln(void 0);try{return d?d.get(s,c,a&qe.Optional):Tn(s,c,a&qe.Optional)}finally{ln(p)}}return Pr(c,0,a)}function Dl(i,s,a,c=qe.Default,d){if(null!==i){if(2048&s[kt]&&!(c&qe.Self)){const y=function sc(i,s,a,c,d){let p=i,y=s;for(;null!==p&&null!==y&&2048&y[kt]&&!(512&y[kt]);){const w=rh(p,y,a,c|qe.Self,Vi);if(w!==Vi)return w;let D=p.parent;if(!D){const S=y[kd];if(S){const N=S.get(a,Vi,c);if(N!==Vi)return N}D=bl(y),y=y[is]}p=D}return d}(i,s,a,c,Vi);if(y!==Vi)return y}const p=rh(i,s,a,c,Vi);if(p!==Vi)return p}return Ui(s,a,c,d)}function rh(i,s,a,c,d){const p=function ih(i){if("string"==typeof i)return i.charCodeAt(0)||0;const s=i.hasOwnProperty(ue)?i[ue]:void 0;return"number"==typeof s?s>=0?s&iu:rc:s}(a);if("function"==typeof p){if(!Ya(s,i,c))return c&qe.Host?Pr(d,0,c):Ui(s,a,c,d);try{const y=p(c);if(null!=y||c&qe.Optional)return y;$e()}finally{Qu()}}else if("number"==typeof p){let y=null,w=ec(i,s),D=fn,S=c&qe.Host?s[On][Br]:null;for((-1===w||c&qe.SkipSelf)&&(D=-1===w?Ds(i,s):s[w+8],D!==fn&&nc(c,!1)?(y=s[Ze],w=Tt(D),s=nu(D,s)):w=-1);-1!==w;){const N=s[Ze];if(ou(p,w,N.data)){const F=Cl(w,s,a,y,c,S);if(F!==Vi)return F}D=s[w+8],D!==fn&&nc(c,s[Ze].data[w+8]===S)&&ou(p,w,s)?(y=N,w=Tt(D),s=nu(D,s)):w=-1}}return d}function Cl(i,s,a,c,d,p){const y=s[Ze],w=y.data[i+8],N=tc(w,y,a,null==c?vs(w)&&ru:c!=y&&0!=(3&w.type),d&qe.Host&&p===w);return null!==N?us(s,y,N,w):Vi}function tc(i,s,a,c,d){const p=i.providerIndexes,y=s.data,w=1048575&p,D=i.directiveStart,N=p>>20,G=d?w+N:i.directiveEnd;for(let Z=c?w:w+N;Z<G;Z++){const ve=y[Z];if(Z<D&&a===ve||Z>=D&&ve.type===a)return Z}if(d){const Z=y[D];if(Z&&vr(Z)&&Z.type===a)return D}return null}function us(i,s,a,c){let d=i[a];const p=s.data;if(function rp(i){return i instanceof _r}(d)){const y=d;y.resolving&&function Te(i,s){const a=s?`. Dependency path: ${s.join(" > ")} > ${i}`:"";throw new te(-200,`Circular dependency in DI detected for ${i}${a}`)}(function he(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():K(i)}(p[a]));const w=qs(y.canSeeViewProviders);y.resolving=!0;const D=y.injectImpl?ln(y.injectImpl):null;Ya(i,c,qe.Default);try{d=i[a]=y.factory(void 0,p,i,c),s.firstCreatePass&&a>=c.directiveStart&&function Xd(i,s,a){const{ngOnChanges:c,ngOnInit:d,ngDoCheck:p}=s.type.prototype;if(c){const y=Ha(s);(a.preOrderHooks??=[]).push(i,y),(a.preOrderCheckHooks??=[]).push(i,y)}d&&(a.preOrderHooks??=[]).push(0-i,d),p&&((a.preOrderHooks??=[]).push(i,p),(a.preOrderCheckHooks??=[]).push(i,p))}(a,p[a],s)}finally{null!==D&&ln(D),qs(w),y.resolving=!1,Qu()}}return d}function ou(i,s,a){return!!(a[s+(i>>wr)]&1<<i)}function nc(i,s){return!(i&qe.Self||i&qe.Host&&s)}class yo{constructor(s,a){this._tNode=s,this._lView=a}get(s,a,c){return Dl(this._tNode,this._lView,s,U(c),a)}}function rc(){return new yo(Sn(),be())}function au(i){return pt(()=>{const s=i.prototype.constructor,a=s[si]||ic(s),c=Object.prototype;let d=Object.getPrototypeOf(i.prototype).constructor;for(;d&&d!==c;){const p=d[si]||ic(d);if(p&&p!==a)return p;d=Object.getPrototypeOf(d)}return p=>new p})}function ic(i){return ze(i)?()=>{const s=ic(Me(i));return s&&s()}:js(i)}function bl(i){const s=i[Ze],a=s.type;return 2===a?s.declTNode:1===a?i[Br]:null}function Tl(i){return function su(i,s){if("class"===s)return i.classes;if("style"===s)return i.styles;const a=i.attrs;if(a){const c=a.length;let d=0;for(;d<c;){const p=a[d];if(At(p))break;if(0===p)d+=2;else if("number"==typeof p)for(d++;d<c&&"string"==typeof a[d];)d++;else{if(p===s)return a[d+1];d+=2}}}return null}(Sn(),i)}const vo="__parameters__";function Bi(i,s,a){return pt(()=>{const c=function Jo(i){return function(...a){if(i){const c=i(...a);for(const d in c)this[d]=c[d]}}}(s);function d(...p){if(this instanceof d)return c.apply(this,p),this;const y=new d(...p);return w.annotation=y,w;function w(D,S,N){const F=D.hasOwnProperty(vo)?D[vo]:Object.defineProperty(D,vo,{value:[]})[vo];for(;F.length<=N;)F.push(null);return(F[N]=F[N]||[]).push(y),D}}return a&&(d.prototype=Object.create(a.prototype)),d.prototype.ngMetadataName=i,d.annotationCls=d,d})}function ji(i,s){i.forEach(a=>Array.isArray(a)?ji(a,s):s(a))}function Ks(i,s,a){s>=i.length?i.push(a):i.splice(s,0,a)}function lu(i,s){return s>=i.length-1?i.pop():i.splice(s,1)[0]}function E(i,s,a){let c=M(i,s);return c>=0?i[1|c]=a:(c=~c,function Mm(i,s,a,c){let d=i.length;if(d==s)i.push(a,c);else if(1===d)i.push(c,i[0]),i[0]=a;else{for(d--,i.push(i[d-1],i[d]);d>s;)i[d]=i[d-2],d--;i[s]=a,i[s+1]=c}}(i,c,s,a)),c}function C(i,s){const a=M(i,s);if(a>=0)return i[1|a]}function M(i,s){return function $(i,s,a){let c=0,d=i.length>>a;for(;d!==c;){const p=c+(d-c>>1),y=i[p<<a];if(s===y)return p<<a;y>s?d=p:c=p+1}return~(d<<a)}(i,s,1)}const $i=z(Bi("Optional"),8),li=z(Bi("SkipSelf"),4);function _p(i){return 128==(128&i.flags)}var Eo=(()=>((Eo=Eo||{})[Eo.Important=1]="Important",Eo[Eo.DashCase=2]="DashCase",Eo))();const lh=new Map;let Ol=0;const dh="__ngContext__";function Ir(i,s){Bn(s)?(i[dh]=s[Fo],function Pl(i){lh.set(i[Fo],i)}(s)):i[dh]=s}let gh;function mh(i,s){return gh(i,s)}function cs(i){const s=i[wn];return ci(s)?s[wn]:s}function Mp(i){return xp(i[Zr])}function yh(i){return xp(i[ai])}function xp(i){for(;null!==i&&!ci(i);)i=i[ai];return i}function kr(i,s,a,c,d){if(null!=c){let p,y=!1;ci(c)?p=c:Bn(c)&&(y=!0,c=c[Vn]);const w=In(c);0===i&&null!==a?null==d?B(s,a,w):x(s,a,w,d||null,!0):1===i&&null!==a?x(s,a,w,d||null,!0):2===i?function Dh(i,s,a){const c=et(i,s);c&&function Se(i,s,a,c){i.removeChild(s,a,c)}(i,c,s,a)}(s,w,y):3===i&&s.destroyNode(w),null!=p&&function sT(i,s,a,c,d){const p=a[Kr];p!==In(a)&&kr(s,i,c,p,d);for(let w=ar;w<a.length;w++){const D=a[w];Et(D[Ze],D,i,s,c,p)}}(s,i,p,a,d)}}function qi(i,s,a){return i.createElement(s,a)}function Bm(i,s){const a=i[co],c=a.indexOf(s);ul(s),a.splice(c,1)}function hu(i,s){if(i.length<=ar)return;const a=ar+s,c=i[a];if(c){const d=c[ko];null!==d&&d!==i&&Bm(d,c),s>0&&(i[a-1][ai]=c[ai]);const p=lu(i,ar+s);!function bs(i,s){Et(i,s,s[Ot],2,null,null),s[Vn]=null,s[Br]=null}(c[Ze],c);const y=p[wi];null!==y&&y.detachView(p[Ze]),c[wn]=null,c[ai]=null,c[kt]&=-129}return c}function Rp(i,s){if(!(256&s[kt])){const a=s[Ot];s[Kc]?.destroy(),s[uo]?.destroy(),a.destroyNode&&Et(i,s,a,3,null,null),function I_(i){let s=i[Zr];if(!s)return v(i[Ze],i);for(;s;){let a=null;if(Bn(s))a=s[Zr];else{const c=s[ar];c&&(a=c)}if(!a){for(;s&&!s[ai]&&s!==i;)Bn(s)&&v(s[Ze],s),s=s[wn];null===s&&(s=i),Bn(s)&&v(s[Ze],s),a=s&&s[ai]}s=a}}(s)}}function v(i,s){if(!(256&s[kt])){s[kt]&=-129,s[kt]|=256,function g(i,s){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let c=0;c<a.length;c+=2){const d=s[a[c]];if(!(d instanceof _r)){const p=a[c+1];if(Array.isArray(p))for(let y=0;y<p.length;y+=2){const w=d[p[y]],D=p[y+1];Fi(4,w,D);try{D.call(w)}finally{Fi(5,w,D)}}else{Fi(4,d,p);try{p.call(d)}finally{Fi(5,d,p)}}}}}(i,s),function f(i,s){const a=i.cleanup,c=s[ao];if(null!==a)for(let p=0;p<a.length-1;p+=2)if("string"==typeof a[p]){const y=a[p+3];y>=0?c[y]():c[-y].unsubscribe(),p+=2}else a[p].call(c[a[p+1]]);null!==c&&(s[ao]=null);const d=s[ui];if(null!==d){s[ui]=null;for(let p=0;p<d.length;p++)(0,d[p])()}}(i,s),1===s[Ze].type&&s[Ot].destroy();const a=s[ko];if(null!==a&&ci(s[wn])){a!==s[wn]&&Bm(a,s);const c=s[wi];null!==c&&c.detachView(i)}!function Fm(i){lh.delete(i[Fo])}(s)}}function _(i,s,a){return function T(i,s,a){let c=s;for(;null!==c&&40&c.type;)c=(s=c).parent;if(null===c)return a[Vn];{const{componentOffset:d}=c;if(d>-1){const{encapsulation:p}=i.data[c.directiveStart+d];if(p===yn.None||p===yn.Emulated)return null}return Hr(c,a)}}(i,s.parent,a)}function x(i,s,a,c,d){i.insertBefore(s,a,c,d)}function B(i,s,a){i.appendChild(s,a)}function Y(i,s,a,c,d){null!==c?x(i,s,a,c,d):B(i,s,a)}function et(i,s){return i.parentNode(s)}let Op,fu,nn,wh=function Ts(i,s,a){return 40&i.type?Hr(i,a):null};function Eh(i,s,a,c){const d=_(i,c,s),p=s[Ot],w=function Pn(i,s,a){return wh(i,s,a)}(c.parent||s[Br],c,s);if(null!=d)if(Array.isArray(a))for(let D=0;D<a.length;D++)Y(p,d,a[D],w,!1);else Y(p,d,a,w,!1);void 0!==Op&&Op(p,c,s,a,d)}function kl(i,s){if(null!==s){const a=s.type;if(3&a)return Hr(s,i);if(4&a)return Ih(-1,i[s.index]);if(8&a){const c=s.child;if(null!==c)return kl(i,c);{const d=i[s.index];return ci(d)?Ih(-1,d):In(d)}}if(32&a)return mh(s,i)()||In(i[s.index]);{const c=kp(i,s);return null!==c?Array.isArray(c)?c[0]:kl(cs(i[On]),c):kl(i,s.next)}}return null}function kp(i,s){return null!==s?i[On][Br].projection[s.projection]:null}function Ih(i,s){const a=ar+i+1;if(a<s.length){const c=s[a],d=c[Ze].firstChild;if(null!==d)return kl(c,d)}return s[Kr]}function Ch(i,s,a,c,d,p,y){for(;null!=a;){const w=c[a.index],D=a.type;if(y&&0===s&&(w&&Ir(In(w),c),a.flags|=2),32!=(32&a.flags))if(8&D)Ch(i,s,a.child,c,d,p,!1),kr(s,i,d,w,p);else if(32&D){const S=mh(a,c);let N;for(;N=S();)kr(s,i,d,N,p);kr(s,i,d,w,p)}else 16&D?gc(i,s,c,a,d,p):kr(s,i,d,w,p);a=y?a.projectionNext:a.next}}function Et(i,s,a,c,d,p){Ch(a,c,i.firstChild,s,d,p,!1)}function gc(i,s,a,c,d,p){const y=a[On],D=y[Br].projection[c.projection];if(Array.isArray(D))for(let S=0;S<D.length;S++)kr(s,i,d,D[S],p);else{let S=D;const N=y[wn];_p(c)&&(S.flags|=128),Ch(i,s,S,N,d,p,!0)}}function Fp(i,s,a){""===a?i.removeAttribute(s,"class"):i.setAttribute(s,"class",a)}function jm(i,s,a){const{mergedAttrs:c,classes:d,styles:p}=a;null!==c&&ut(i,s,c),null!==d&&Fp(i,s,d),null!==p&&function Ss(i,s,a){i.setAttribute(s,"style",a)}(i,s,p)}function Hm(i){fu=i}function Gm(i){return function b_(){if(void 0===nn&&(nn=null,rn.trustedTypes))try{nn=rn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch{}return nn}()?.createScriptURL(i)||i}class Vt{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${dt})`}}function mc(i){return i instanceof Vt?i.changingThisBreaksApplicationSecurity:i}function Vp(i,s){const a=function Mi(i){return i instanceof Vt&&i.getTypeName()||null}(i);if(null!=a&&a!==s){if("ResourceURL"===a&&"URL"===s)return!0;throw new Error(`Required a safe ${s}, got a ${a} (see ${dt})`)}return a===s}const Up=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var sr=(()=>((sr=sr||{})[sr.NONE=0]="NONE",sr[sr.HTML=1]="HTML",sr[sr.STYLE=2]="STYLE",sr[sr.SCRIPT=3]="SCRIPT",sr[sr.URL=4]="URL",sr[sr.RESOURCE_URL=5]="RESOURCE_URL",sr))();function O_(i){const s=Mh();return s?s.sanitize(sr.URL,i)||"":Vp(i,"URL")?mc(i):function Sh(i){return(i=String(i)).match(Up)?i:"unsafe:"+i}(K(i))}function P_(i){const s=Mh();if(s)return Gm(s.sanitize(sr.RESOURCE_URL,i)||"");if(Vp(i,"ResourceURL"))return Gm(mc(i));throw new te(904,!1)}function Qm(i,s,a){return function F_(i,s){return"src"===s&&("embed"===i||"frame"===i||"iframe"===i||"media"===i||"script"===i)||"href"===s&&("base"===i||"link"===i)?P_:O_}(s,a)(i)}function Mh(){const i=be();return i&&i[ys].sanitizer}class pn{constructor(s,a){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=Kt({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const xh=new pn("ENVIRONMENT_INITIALIZER"),L_=new pn("INJECTOR",-1),Jm=new pn("INJECTOR_DEF_TYPES");class V_{get(s,a=Mr){if(a===Mr){const c=new Error(`NullInjectorError: No provider for ${Q(s)}!`);throw c.name="NullInjectorError",c}return a}}function U_(...i){return{\u0275providers:Xm(0,i),\u0275fromNgModule:!0}}function Xm(i,...s){const a=[],c=new Set;let d;return ji(s,p=>{const y=p;Fr(y,a,[],c)&&(d||=[],d.push(y))}),void 0!==d&&ey(d,a),a}function ey(i,s){for(let a=0;a<i.length;a++){const{providers:d}=i[a];Nh(d,p=>{s.push(p)})}}function Fr(i,s,a,c){if(!(i=Me(i)))return!1;let d=null,p=Sa(i);const y=!p&&Lt(i);if(p||y){if(y&&!y.standalone)return!1;d=i}else{const D=i.ngModule;if(p=Sa(D),!p)return!1;d=D}const w=c.has(d);if(y){if(w)return!1;if(c.add(d),y.dependencies){const D="function"==typeof y.dependencies?y.dependencies():y.dependencies;for(const S of D)Fr(S,s,a,c)}}else{if(!p)return!1;{if(null!=p.imports&&!w){let S;c.add(d);try{ji(p.imports,N=>{Fr(N,s,a,c)&&(S||=[],S.push(N))})}finally{}void 0!==S&&ey(S,s)}if(!w){const S=js(d)||(()=>new d);s.push({provide:d,useFactory:S,deps:bt},{provide:Jm,useValue:d,multi:!0},{provide:xh,useValue:()=>Jt(d),multi:!0})}const D=p.providers;null==D||w||Nh(D,N=>{s.push(N)})}}return d!==i&&void 0!==i.providers}function Nh(i,s){for(let a of i)Ne(a)&&(a=a.\u0275providers),Array.isArray(a)?Nh(a,s):s(a)}const B_=V({provide:String,useValue:V});function j_(i){return null!==i&&"object"==typeof i&&B_ in i}function yc(i){return"function"==typeof i}const $_=new pn("Set Injector scope."),ty={},jp={};let Ul;function Rh(){return void 0===Ul&&(Ul=new V_),Ul}class vc{}class H_ extends vc{get destroyed(){return this._destroyed}constructor(s,a,c,d){super(),this.parent=a,this.source=c,this.scopes=d,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,ny(s,y=>this.processProvider(y)),this.records.set(L_,Ph(void 0,this)),d.has("environment")&&this.records.set(vc,Ph(void 0,this));const p=this.records.get($_);null!=p&&"string"==typeof p.value&&this.scopes.add(p.value),this.injectorDefTypes=new Set(this.get(Jm.multi,bt,qe.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const a of this._ngOnDestroyHooks)a.ngOnDestroy();const s=this._onDestroyHooks;this._onDestroyHooks=[];for(const a of s)a()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(s){return this.assertNotDestroyed(),this._onDestroyHooks.push(s),()=>this.removeOnDestroy(s)}runInContext(s){this.assertNotDestroyed();const a=mn(this),c=ln(void 0);try{return s()}finally{mn(a),ln(c)}}get(s,a=Mr,c=qe.Default){if(this.assertNotDestroyed(),s.hasOwnProperty(ee))return s[ee](this);c=U(c);const d=mn(this),p=ln(void 0);try{if(!(c&qe.SkipSelf)){let w=this.records.get(s);if(void 0===w){const D=function fI(i){return"function"==typeof i||"object"==typeof i&&i instanceof pn}(s)&&qr(s);w=D&&this.injectableDefInScope(D)?Ph(Oh(s),ty):null,this.records.set(s,w)}if(null!=w)return this.hydrate(s,w)}return(c&qe.Self?Rh():this.parent).get(s,a=c&qe.Optional&&a===Mr?null:a)}catch(y){if("NullInjectorError"===y.name){if((y[Xi]=y[Xi]||[]).unshift(Q(s)),d)throw y;return function se(i,s,a,c){const d=i[Xi];throw s[es]&&d.unshift(s[es]),i.message=function nt(i,s,a,c=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.slice(2):i;let d=Q(s);if(Array.isArray(s))d=s.map(Q).join(" -> ");else if("object"==typeof s){let p=[];for(let y in s)if(s.hasOwnProperty(y)){let w=s[y];p.push(y+":"+("string"==typeof w?JSON.stringify(w):Q(w)))}d=`{${p.join(", ")}}`}return`${a}${c?"("+c+")":""}[${d}]: ${i.replace(xa,"\n  ")}`}("\n"+i.message,d,a,c),i.ngTokenPath=d,i[Xi]=null,i}(y,s,"R3InjectorError",this.source)}throw y}finally{ln(p),mn(d)}}resolveInjectorInitializers(){const s=mn(this),a=ln(void 0);try{const c=this.get(xh.multi,bt,qe.Self);for(const d of c)d()}finally{mn(s),ln(a)}}toString(){const s=[],a=this.records;for(const c of a.keys())s.push(Q(c));return`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new te(205,!1)}processProvider(s){let a=yc(s=Me(s))?s:Me(s&&s.provide);const c=function z_(i){return j_(i)?Ph(void 0,i.useValue):Ph(q_(i),ty)}(s);if(yc(s)||!0!==s.multi)this.records.get(a);else{let d=this.records.get(a);d||(d=Ph(void 0,ty,!0),d.factory=()=>L(d.multi),this.records.set(a,d)),a=s,d.multi.push(s)}this.records.set(a,c)}hydrate(s,a){return a.value===ty&&(a.value=jp,a.value=a.factory()),"object"==typeof a.value&&a.value&&function hI(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this._ngOnDestroyHooks.add(a.value),a.value}injectableDefInScope(s){if(!s.providedIn)return!1;const a=Me(s.providedIn);return"string"==typeof a?"any"===a||this.scopes.has(a):this.injectorDefTypes.has(a)}removeOnDestroy(s){const a=this._onDestroyHooks.indexOf(s);-1!==a&&this._onDestroyHooks.splice(a,1)}}function Oh(i){const s=qr(i),a=null!==s?s.factory:js(i);if(null!==a)return a;if(i instanceof pn)throw new te(204,!1);if(i instanceof Function)return function G_(i){const s=i.length;if(s>0)throw function uc(i,s){const a=[];for(let c=0;c<i;c++)a.push(s);return a}(s,"?"),new te(204,!1);const a=function ro(i){return i&&(i[ni]||i[Ls])||null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new te(204,!1)}function q_(i,s,a){let c;if(yc(i)){const d=Me(i);return js(d)||Oh(d)}if(j_(i))c=()=>Me(i.useValue);else if(function dI(i){return!(!i||!i.useFactory)}(i))c=()=>i.useFactory(...L(i.deps||[]));else if(function lI(i){return!(!i||!i.useExisting)}(i))c=()=>Jt(Me(i.useExisting));else{const d=Me(i&&(i.useClass||i.provide));if(!function $p(i){return!!i.deps}(i))return js(d)||Oh(d);c=()=>new d(...L(i.deps))}return c}function Ph(i,s,a=!1){return{factory:i,value:s,multi:a?[]:void 0}}function ny(i,s){for(const a of i)Array.isArray(a)?ny(a,s):a&&Ne(a)?ny(a.\u0275providers,s):s(a)}const Hp=new pn("AppId",{providedIn:"root",factory:()=>yT}),yT="ng",pI=new pn("Platform Initializer"),_c=new pn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Bl=new pn("CSP nonce",{providedIn:"root",factory:()=>function Ys(){if(void 0!==fu)return fu;if(typeof document<"u")return document;throw new te(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let Z_=(i,s)=>null;function qp(i,s){return Z_(i,s)}class IT{}class wI{}class Gl{resolveComponentFactory(s){throw function EI(i){const s=Error(`No component factory found for ${Q(i)}.`);return s.ngComponent=i,s}(s)}}let Js=(()=>{class i{}return i.NULL=new Gl,i})();function uy(){return mu(Sn(),be())}function mu(i,s){return new $h(Hr(i,s))}let $h=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=uy,i})();function Gn(i){return i instanceof $h?i.nativeElement:i}class Wp{}let Zp=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function Kp(){const i=be(),a=ur(Sn().index,i);return(Bn(a)?a:i)[Ot]}(),i})(),DT=(()=>{class i{}return i.\u0275prov=Kt({token:i,providedIn:"root",factory:()=>null}),i})();class Q_{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const II=new Q_("16.0.4"),J_={};function Yp(i){for(;i;){i[kt]|=64;const s=cs(i);if(Nr(i)&&!s)return i;i=s}return null}function aa(i){return i.ngOriginalError}class zl{constructor(){this._console=console}handleError(s){const a=this._findOriginalError(s);this._console.error("ERROR",s),a&&this._console.error("ORIGINAL ERROR",a)}_findOriginalError(s){let a=s&&aa(s);for(;a&&aa(a);)a=aa(a);return a||null}}const ql=new pn("",{providedIn:"root",factory:()=>!1});function ua(i){return i instanceof Function?i():i}class dy extends Vu{constructor(){super(...arguments),this.consumerAllowSignalWrites=!1,this._lView=null}set lView(s){this._lView=s}onConsumerDependencyMayHaveChanged(){Yp(this._lView)}onProducerUpdateValueVersion(){}get hasReadASignal(){return this.hasProducers}runInContext(s,a,c){const d=Qn(this);this.trackingVersion++;try{s(a,c)}finally{Qn(d)}}destroy(){this.trackingVersion++}}let Xp=null;function Gh(){return Xp??=new dy,Xp}function zh(i,s){return i[s]??Gh()}function SI(i,s){const a=Gh();a.hasReadASignal&&(i[s]=Xp,a.lView=i,Xp=new dy)}const at={};function n0(i){AI(Wt(),be(),Yr()+i,!1)}function AI(i,s,a,c){if(!c)if(3==(3&s[kt])){const p=i.preOrderCheckHooks;null!==p&&vl(s,p,a)}else{const p=i.preOrderHooks;null!==p&&Zo(s,p,0,a)}mo(a)}function hy(i,s=null,a=null,c){const d=qh(i,s,a,c);return d.resolveInjectorInitializers(),d}function qh(i,s=null,a=null,c,d=new Set){const p=[a||bt,U_(i)];return c=c||("object"==typeof i?void 0:Q(i)),new H_(p,s||Rh(),c||null,d)}let yu=(()=>{class i{static create(a,c){if(Array.isArray(a))return hy({name:""},c,a,"");{const d=a.name??"";return hy({name:d},a.parent,a.providers,d)}}}return i.THROW_IF_NOT_FOUND=Mr,i.NULL=new V_,i.\u0275prov=Kt({token:i,providedIn:"any",factory:()=>Jt(L_)}),i.__NG_ELEMENT_ID__=-1,i})();function Ic(i,s=qe.Default){const a=be();return null===a?Jt(i,s):Dl(Sn(),a,Me(i),s)}function tg(){throw new Error("invalid")}function Wl(i,s,a,c,d,p,y,w,D,S,N){const F=s.blueprint.slice();return F[Vn]=d,F[kt]=140|c,(null!==S||i&&2048&i[kt])&&(F[kt]|=2048),al(F),F[wn]=F[is]=i,F[En]=a,F[ys]=y||i&&i[ys],F[Ot]=w||i&&i[Ot],F[yr]=D||i&&i[yr]||null,F[Br]=p,F[Fo]=function km(){return Ol++}(),F[Un]=N,F[kd]=S,F[On]=2==s.type?i[On]:F,F}function Wh(i,s,a,c,d){let p=i.data[s];if(null===p)p=function fy(i,s,a,c,d){const p=Jf(),y=Wa(),D=i.data[s]=function gy(i,s,a,c,d,p){let y=s?s.injectorIndex:-1,w=0;return function Go(){return null!==gt.skipHydrationRootTNode}()&&(w|=128),{type:a,index:c,insertBeforeIndex:null,injectorIndex:y,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:w,providerIndexes:0,value:d,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?p:p&&p.parent,a,s,c,d);return null===i.firstChild&&(i.firstChild=D),null!==p&&(y?null==p.child&&null!==D.parent&&(p.child=D):null===p.next&&(p.next=D,D.prev=p)),D}(i,s,a,c,d),function Kd(){return gt.lFrame.inI18n}()&&(p.flags|=32);else if(64&p.type){p.type=a,p.value=c,p.attrs=d;const y=function Di(){const i=gt.lFrame,s=i.currentTNode;return i.isParent?s:s.parent}();p.injectorIndex=null===y?-1:y.injectorIndex}return Es(p,!0),p}function vu(i,s,a,c){if(0===a)return-1;const d=s.length;for(let p=0;p<a;p++)s.push(c),i.blueprint.push(c),i.data.push(null);return d}function s0(i,s,a,c,d){const p=zh(s,Kc),y=Yr(),w=2&c;try{if(mo(-1),w&&s.length>jt&&AI(i,s,jt,!1),Fi(w?2:0,d),w)p.runInContext(a,c,d);else{const S=Qn(null);try{a(c,d)}finally{Qn(S)}}}finally{w&&null===s[Kc]&&SI(s,Kc),mo(y),Fi(w?3:1,d)}}function py(i,s,a){if(Lo(s)){const c=Qn(null);try{const p=s.directiveEnd;for(let y=s.directiveStart;y<p;y++){const w=i.data[y];w.contentQueries&&w.contentQueries(1,a[y],y)}}finally{Qn(c)}}}function ng(i,s,a){Wd()&&(function d0(i,s,a,c){const d=a.directiveStart,p=a.directiveEnd;vs(a)&&function ig(i,s,a){const c=Hr(s,i),y=Ey(i,Wl(i,o0(a),null,a.onPush?64:16,c,s,null,i[ys].rendererFactory.createRenderer(c,a),null,null,null));i[s.index]=y}(s,a,i.data[d+a.componentOffset]),i.firstCreatePass||Qo(a,s),Ir(c,s);const y=a.initialInputs;for(let w=d;w<p;w++){const D=i.data[w],S=us(s,i,w,a);Ir(S,s),null!==y&&Yh(0,w-d,S,D,0,y),vr(D)&&(ur(a.index,s)[En]=us(s,i,w,a))}}(i,s,a,Hr(a,s)),64==(64&a.flags)&&Kl(i,s,a))}function rg(i,s,a=Hr){const c=s.localNames;if(null!==c){let d=s.index+1;for(let p=0;p<c.length;p+=2){const y=c[p+1],w=-1===y?a(s,i):i[y];i[d++]=w}}}function o0(i){const s=i.tView;return null===s||s.incompleteFirstPass?i.tView=Zh(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts,i.id):s}function Zh(i,s,a,c,d,p,y,w,D,S,N){const F=jt+c,G=F+d,Z=function PI(i,s){const a=[];for(let c=0;c<s;c++)a.push(c<i?null:at);return a}(F,G),ve="function"==typeof S?S():S;return Z[Ze]={type:i,blueprint:Z,template:a,queries:null,viewQuery:w,declTNode:s,data:Z.slice().fill(null,F),bindingStartIndex:F,expandoStartIndex:G,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:D,consts:ve,incompleteFirstPass:!1,ssrId:N}}let a0=i=>null;function ls(i,s,a,c){for(let d in i)if(i.hasOwnProperty(d)){a=null===a?{}:a;const p=i[d];null===c?u0(a,s,d,p):c.hasOwnProperty(d)&&u0(a,s,c[d],p)}return a}function u0(i,s,a,c){i.hasOwnProperty(a)?i[a].push(s,c):i[a]=[s,c]}function l0(i,s,a,c){if(Wd()){const d=null===c?null:{"":-1},p=function jI(i,s){const a=i.directiveRegistry;let c=null,d=null;if(a)for(let p=0;p<a.length;p++){const y=a[p];if(_i(s,y.selectors,!1))if(c||(c=[]),vr(y))if(null!==y.findHostDirectiveDefs){const w=[];d=d||new Map,y.findHostDirectiveDefs(y,w,d),c.unshift(...w,y),bo(i,s,w.length)}else c.unshift(y),bo(i,s,0);else d=d||new Map,y.findHostDirectiveDefs?.(y,c,d),c.push(y)}return null===c?null:[c,d]}(i,a);let y,w;null===p?y=w=null:[y,w]=p,null!==y&&my(i,s,a,y,d,w),d&&function Xs(i,s,a){if(s){const c=i.localNames=[];for(let d=0;d<s.length;d+=2){const p=a[s[d+1]];if(null==p)throw new te(-301,!1);c.push(s[d],p)}}}(a,c,d)}a.mergedAttrs=Yt(a.mergedAttrs,a.attrs)}function my(i,s,a,c,d,p){for(let S=0;S<c.length;S++)Ti(Qo(a,s),i,c[S].type);!function yy(i,s,a){i.flags|=1,i.directiveStart=s,i.directiveEnd=s+a,i.providerIndexes=s}(a,i.data.length,c.length);for(let S=0;S<c.length;S++){const N=c[S];N.providersResolver&&N.providersResolver(N)}let y=!1,w=!1,D=vu(i,s,c.length,null);for(let S=0;S<c.length;S++){const N=c[S];a.mergedAttrs=Yt(a.mergedAttrs,N.hostAttrs),vy(i,a,s,D,N),pi(D,N,d),null!==N.contentQueries&&(a.flags|=4),(null!==N.hostBindings||null!==N.hostAttrs||0!==N.hostVars)&&(a.flags|=64);const F=N.type.prototype;!y&&(F.ngOnChanges||F.ngOnInit||F.ngDoCheck)&&((i.preOrderHooks??=[]).push(a.index),y=!0),!w&&(F.ngOnChanges||F.ngDoCheck)&&((i.preOrderCheckHooks??=[]).push(a.index),w=!0),D++}!function UI(i,s,a){const d=s.directiveEnd,p=i.data,y=s.attrs,w=[];let D=null,S=null;for(let N=s.directiveStart;N<d;N++){const F=p[N],G=a?a.get(F):null,ve=G?G.outputs:null;D=ls(F.inputs,N,D,G?G.inputs:null),S=ls(F.outputs,N,S,ve);const Re=null===D||null===y||so(s)?null:NT(D,N,y);w.push(Re)}null!==D&&(D.hasOwnProperty("class")&&(s.flags|=8),D.hasOwnProperty("style")&&(s.flags|=16)),s.initialInputs=w,s.inputs=D,s.outputs=S}(i,a,p)}function Kl(i,s,a){const c=a.directiveStart,d=a.directiveEnd,p=a.index,y=function Zu(){return gt.lFrame.currentDirectiveIndex}();try{mo(p);for(let w=c;w<d;w++){const D=i.data[w],S=s[w];go(w),(null!==D.hostBindings||0!==D.hostVars||null!==D.hostAttrs)&&h0(D,S)}}finally{mo(-1),go(y)}}function h0(i,s){null!==i.hostBindings&&i.hostBindings(1,s)}function bo(i,s,a){s.componentOffset=a,(i.components??=[]).push(s.index)}function pi(i,s,a){if(a){if(s.exportAs)for(let c=0;c<s.exportAs.length;c++)a[s.exportAs[c]]=i;vr(s)&&(a[""]=i)}}function vy(i,s,a,c,d){i.data[c]=d;const p=d.factory||(d.factory=js(d.type)),y=new _r(p,vr(d),Ic);i.blueprint[c]=y,a[c]=y,function ca(i,s,a,c,d){const p=d.hostBindings;if(p){let y=i.hostBindingOpCodes;null===y&&(y=i.hostBindingOpCodes=[]);const w=~s.index;(function BI(i){let s=i.length;for(;s>0;){const a=i[--s];if("number"==typeof a&&a<0)return a}return 0})(y)!=w&&y.push(w),y.push(a,c,p)}}(i,s,c,vu(i,a,d.hostVars,at),d)}function Ms(i,s,a,c,d,p){const y=Hr(i,s);!function _y(i,s,a,c,d,p,y){if(null==p)i.removeAttribute(s,d,a);else{const w=null==y?K(p):y(p,c||"",d);i.setAttribute(s,d,w,a)}}(s[Ot],y,p,i.value,a,c,d)}function Yh(i,s,a,c,d,p){const y=p[s];if(null!==y)for(let w=0;w<y.length;)$I(c,a,y[w++],y[w++],y[w++])}function $I(i,s,a,c,d){const p=Qn(null);try{null!==i.setInput?i.setInput(s,d,a,c):s[c]=d}finally{Qn(p)}}function NT(i,s,a){let c=null,d=0;for(;d<a.length;){const p=a[d];if(0!==p)if(5!==p){if("number"==typeof p)break;if(i.hasOwnProperty(p)){null===c&&(c=[]);const y=i[p];for(let w=0;w<y.length;w+=2)if(y[w]===s){c.push(p,y[w+1],a[d+1]);break}}d+=2}else d+=2;else d+=4}return c}function wy(i,s,a,c){return[i,!0,!1,s,null,0,c,a,null,null,null]}function HI(i,s){const a=i.contentQueries;if(null!==a)for(let c=0;c<a.length;c+=2){const p=a[c+1];if(-1!==p){const y=i.data[p];Ku(a[c]),y.contentQueries(2,s[p],p)}}}function Ey(i,s){return i[Zr]?i[Pd][ai]=s:i[Zr]=s,i[Pd]=s,s}function Iy(i,s,a){Ku(0);const c=Qn(null);try{s(i,a)}finally{Qn(c)}}function sg(i){return i[ao]||(i[ao]=[])}function GI(i){return i.cleanup||(i.cleanup=[])}function Yl(i,s){const a=i[yr],c=a?a.get(zl,null):null;c&&c.handleError(s)}function Dy(i,s,a,c,d){for(let p=0;p<a.length;){const y=a[p++],w=a[p++];$I(i.data[y],s[y],c,w,d)}}function kn(i,s,a){const c=Hu(s,i);!function pc(i,s,a){i.setValue(s,a)}(i[Ot],c,a)}function Qh(i,s){const a=ur(s,i),c=a[Ze];!function Dc(i,s){for(let a=s.length;a<i.blueprint.length;a++)s.push(i.blueprint[a])}(c,a);const d=a[Vn];null!==d&&null===a[Un]&&(a[Un]=qp(d,a[yr])),og(c,a,a[En])}function og(i,s,a){Wo(s);try{const c=i.viewQuery;null!==c&&Iy(1,c,a);const d=i.template;null!==d&&s0(i,s,d,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&HI(i,s),i.staticViewQueries&&Iy(2,i.viewQuery,a);const p=i.components;null!==p&&function RT(i,s){for(let a=0;a<s.length;a++)Qh(i,s[a])}(s,p)}catch(c){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),c}finally{s[kt]&=-5,gl()}}let Cy=(()=>{class i{constructor(){this.all=new Set,this.queue=new Map}create(a,c,d){const p=typeof Zone>"u"?null:Zone.current,y=new jd(a,S=>{this.all.has(S)&&this.queue.set(S,p)},d);let w;this.all.add(y),y.notify();const D=()=>{y.cleanup(),w?.(),this.all.delete(y),this.queue.delete(y)};return w=c?.onDestroy(D),{destroy:D}}flush(){if(0!==this.queue.size)for(const[a,c]of this.queue)this.queue.delete(a),c?c.run(()=>a.run()):a.run()}get isQueueEmpty(){return 0===this.queue.size}}return i.\u0275prov=Kt({token:i,providedIn:"root",factory:()=>new i}),i})();function ct(i,s,a){let c=a?i.styles:null,d=a?i.classes:null,p=0;if(null!==s)for(let y=0;y<s.length;y++){const w=s[y];"number"==typeof w?p=w:1==p?d=Fe(d,w):2==p&&(c=Fe(c,w+": "+s[++y]+";"))}a?i.styles=c:i.stylesWithoutHost=c,a?i.classes=d:i.classesWithoutHost=d}function ag(i,s,a,c,d=!1){for(;null!==a;){const p=s[a.index];if(null!==p&&c.push(In(p)),ci(p)){for(let w=ar;w<p.length;w++){const D=p[w],S=D[Ze].firstChild;null!==S&&ag(D[Ze],D,S,c)}p[Kr]!==p[Vn]&&c.push(p[Kr])}const y=a.type;if(8&y)ag(i,s,a.child,c);else if(32&y){const w=mh(a,s);let D;for(;D=w();)c.push(D)}else if(16&y){const w=kp(s,a);if(Array.isArray(w))c.push(...w);else{const D=cs(s[On]);ag(D[Ze],D,w,c,!0)}}a=d?a.projectionNext:a.next}return c}function Ke(i,s,a,c=!0){const d=s[ys].rendererFactory;d.begin&&d.begin();try{lr(i,s,i.template,a)}catch(y){throw c&&Yl(s,y),y}finally{d.end&&d.end(),s[ys].effectManager?.flush()}}function lr(i,s,a,c){const d=s[kt];if(256!=(256&d)){s[ys].effectManager?.flush(),Wo(s);try{al(s),function Wu(i){return gt.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&s0(i,s,a,2,c);const y=3==(3&d);if(y){const S=i.preOrderCheckHooks;null!==S&&vl(s,S,null)}else{const S=i.preOrderHooks;null!==S&&Zo(s,S,0,null),eh(s,0)}if(function OT(i){for(let s=Mp(i);null!==s;s=yh(s)){if(!s[ss])continue;const a=s[co];for(let c=0;c<a.length;c++){Gd(a[c])}}}(s),function qI(i){for(let s=Mp(i);null!==s;s=yh(s))for(let a=ar;a<s.length;a++){const c=s[a],d=c[Ze];$o(c)&&lr(d,c,d.template,c[En])}}(s),null!==i.contentQueries&&HI(i,s),y){const S=i.contentCheckHooks;null!==S&&vl(s,S)}else{const S=i.contentHooks;null!==S&&Zo(s,S,1),eh(s,1)}!function OI(i,s){const a=i.hostBindingOpCodes;if(null===a)return;const c=zh(s,uo);try{for(let d=0;d<a.length;d++){const p=a[d];if(p<0)mo(~p);else{const y=p,w=a[++d],D=a[++d];Za(w,y),c.runInContext(D,2,s[y])}}}finally{null===s[uo]&&SI(s,uo),mo(-1)}}(i,s);const w=i.components;null!==w&&function kT(i,s){for(let a=0;a<s.length;a++)PT(i,s[a])}(s,w);const D=i.viewQuery;if(null!==D&&Iy(2,D,c),y){const S=i.viewCheckHooks;null!==S&&vl(s,S)}else{const S=i.viewHooks;null!==S&&Zo(s,S,2),eh(s,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),s[kt]&=-73,ul(s)}finally{gl()}}}function PT(i,s){const a=ur(s,i);if($o(a)){const c=a[Ze];80&a[kt]?lr(c,a,c.template,a[En]):a[Bs]>0&&f0(a)}}function f0(i){for(let c=Mp(i);null!==c;c=yh(c))for(let d=ar;d<c.length;d++){const p=c[d];if($o(p))if(1024&p[kt]){const y=p[Ze];lr(y,p,y.template,p[En])}else p[Bs]>0&&f0(p)}const a=i[Ze].components;if(null!==a)for(let c=0;c<a.length;c++){const d=ur(a[c],i);$o(d)&&d[Bs]>0&&f0(d)}}class ug{get rootNodes(){const s=this._lView,a=s[Ze];return ag(a,s,a.firstChild,[])}constructor(s,a){this._lView=s,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[En]}set context(s){this._lView[En]=s}get destroyed(){return 256==(256&this._lView[kt])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[wn];if(ci(s)){const a=s[Ei],c=a?a.indexOf(this):-1;c>-1&&(hu(s,c),lu(a,c))}this._attachedToViewContainer=!1}Rp(this._lView[Ze],this._lView)}onDestroy(s){!function cl(i,s){if(256==(256&i[kt]))throw new te(911,!1);null===i[ui]&&(i[ui]=[]),i[ui].push(s)}(this._lView,s)}markForCheck(){Yp(this._cdRefInjectingView||this._lView)}detach(){this._lView[kt]&=-129}reattach(){this._lView[kt]|=128}detectChanges(){Ke(this._lView[Ze],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new te(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Np(i,s){Et(i,s,s[Ot],2,null,null)}(this._lView[Ze],this._lView)}attachToAppRef(s){if(this._attachedToViewContainer)throw new te(902,!1);this._appRef=s}}class WI extends ug{constructor(s){super(s),this._view=s}detectChanges(){const s=this._view;Ke(s[Ze],s,s[En],!1)}checkNoChanges(){}get context(){return null}}class ZI extends Js{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const a=Lt(s);return new xt(a,this.ngModule)}}function FT(i){const s=[];for(let a in i)i.hasOwnProperty(a)&&s.push({propName:i[a],templateName:a});return s}class KI{constructor(s,a){this.injector=s,this.parentInjector=a}get(s,a,c){c=U(c);const d=this.injector.get(s,J_,c);return d!==J_||a===J_?d:this.parentInjector.get(s,a,c)}}class xt extends wI{get inputs(){return FT(this.componentDef.inputs)}get outputs(){return FT(this.componentDef.outputs)}constructor(s,a){super(),this.componentDef=s,this.ngModule=a,this.componentType=s.type,this.selector=function $f(i){return i.map(ym).join(",")}(s.selectors),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!a}create(s,a,c,d){let p=(d=d||this.ngModule)instanceof vc?d:d?.injector;p&&null!==this.componentDef.getStandaloneInjector&&(p=this.componentDef.getStandaloneInjector(p)||p);const y=p?new KI(s,p):s,w=y.get(Wp,null);if(null===w)throw new te(407,!1);const N={rendererFactory:w,sanitizer:y.get(DT,null),effectManager:y.get(Cy,null)},F=w.createRenderer(null,this.componentDef),G=this.componentDef.selectors[0][0]||"div",Z=c?function kI(i,s,a,c){const p=c.get(ql,!1)||a===yn.ShadowDom,y=i.selectRootElement(s,p);return function Zl(i){a0(i)}(y),y}(F,c,this.componentDef.encapsulation,y):qi(F,G,function LT(i){const s=i.toLowerCase();return"svg"===s?"svg":"math"===s?"math":null}(G)),ve=this.componentDef.onPush?576:528,Re=Zh(0,null,null,1,0,null,null,null,null,null,null),je=Wl(null,Re,null,ve,null,null,N,F,y,null,null);let ot,we;Wo(je);try{const _t=this.componentDef;let Qt,gn=null;_t.findHostDirectiveDefs?(Qt=[],gn=new Map,_t.findHostDirectiveDefs(_t,Qt,gn),Qt.push(_t)):Qt=[_t];const Ro=function Xn(i,s){const a=i[Ze],c=jt;return i[c]=s,Wh(a,c,2,"#host",null)}(je,Z),Mu=function vt(i,s,a,c,d,p,y){const w=d[Ze];!function cg(i,s,a,c){for(const d of i)s.mergedAttrs=Yt(s.mergedAttrs,d.hostAttrs);null!==s.mergedAttrs&&(ct(s,s.mergedAttrs,!0),null!==a&&jm(c,a,s))}(c,i,s,y);let D=null;null!==s&&(D=qp(s,d[yr]));const S=p.rendererFactory.createRenderer(s,a),N=Wl(d,o0(a),null,a.onPush?64:16,d[i.index],i,p,S,null,null,D);return w.firstCreatePass&&bo(w,i,c.length-1),Ey(d,N),d[i.index]=N}(Ro,Z,_t,Qt,je,N,F);we=ol(Re,jt),Z&&function UT(i,s,a,c){if(c)ut(i,a,["ng-version",II.full]);else{const{attrs:d,classes:p}=function Ou(i){const s=[],a=[];let c=1,d=2;for(;c<i.length;){let p=i[c];if("string"==typeof p)2===d?""!==p&&s.push(p,i[++c]):8===d&&a.push(p);else{if(!oi(d))break;d=p}c++}return{attrs:s,classes:a}}(s.selectors[0]);d&&ut(i,a,d),p&&p.length>0&&Fp(i,a,p.join(" "))}}(F,_t,Z,c),void 0!==a&&function dr(i,s,a){const c=i.projection=[];for(let d=0;d<s.length;d++){const p=a[d];c.push(null!=p?Array.from(p):null)}}(we,this.ngContentSelectors,a),ot=function sn(i,s,a,c,d,p){const y=Sn(),w=d[Ze],D=Hr(y,d);my(w,d,y,a,null,c);for(let N=0;N<a.length;N++)Ir(us(d,w,y.directiveStart+N,y),d);Kl(w,d,y),D&&Ir(D,d);const S=us(d,w,y.directiveStart+y.componentOffset,y);if(i[En]=d[En]=S,null!==p)for(const N of p)N(S,s);return py(w,y,i),S}(Mu,_t,Qt,gn,je,[Qe]),og(Re,je,null)}finally{gl()}return new Jh(this.componentType,ot,mu(we,je),je,we)}}class Jh extends IT{constructor(s,a,c,d,p){super(),this.location=c,this._rootLView=d,this._tNode=p,this.previousInputValues=null,this.instance=a,this.hostView=this.changeDetectorRef=new WI(d),this.componentType=s}setInput(s,a){const c=this._tNode.inputs;let d;if(null!==c&&(d=c[s])){if(this.previousInputValues??=new Map,this.previousInputValues.has(s)&&Object.is(this.previousInputValues.get(s),a))return;const p=this._rootLView;Dy(p[Ze],p,d,s,a),this.previousInputValues.set(s,a),Yp(ur(this._tNode.index,p))}}get injector(){return new yo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}function Qe(){const i=Sn();Xa(be()[Ze],i)}function dg(i){let s=function lg(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const c=[i];for(;s;){let d;if(vr(i))d=s.\u0275cmp||s.\u0275dir;else{if(s.\u0275cmp)throw new te(903,!1);d=s.\u0275dir}if(d){if(a){c.push(d);const y=i;y.inputs=p0(i.inputs),y.declaredInputs=p0(i.declaredInputs),y.outputs=p0(i.outputs);const w=d.hostBindings;w&&hg(i,w);const D=d.viewQuery,S=d.contentQueries;if(D&&by(i,D),S&&BT(i,S),j(i.inputs,d.inputs),j(i.declaredInputs,d.declaredInputs),j(i.outputs,d.outputs),vr(d)&&d.data.animation){const N=i.data;N.animation=(N.animation||[]).concat(d.data.animation)}}const p=d.features;if(p)for(let y=0;y<p.length;y++){const w=p[y];w&&w.ngInherit&&w(i),w===dg&&(a=!1)}}s=Object.getPrototypeOf(s)}!function Ql(i){let s=0,a=null;for(let c=i.length-1;c>=0;c--){const d=i[c];d.hostVars=s+=d.hostVars,d.hostAttrs=Yt(d.hostAttrs,a=Yt(a,d.hostAttrs))}}(c)}function p0(i){return i===dn?{}:i===bt?[]:i}function by(i,s){const a=i.viewQuery;i.viewQuery=a?(c,d)=>{s(c,d),a(c,d)}:s}function BT(i,s){const a=i.contentQueries;i.contentQueries=a?(c,d,p)=>{s(c,d,p),a(c,d,p)}:s}function hg(i,s){const a=i.hostBindings;i.hostBindings=a?(c,d)=>{s(c,d),a(c,d)}:s}function ds(i){return!!la(i)&&(Array.isArray(i)||!(i instanceof Map)&&Symbol.iterator in i)}function la(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function Jr(i,s,a){return!Object.is(i[s],a)&&(i[s]=a,!0)}function Jl(i,s,a,c){const d=Jr(i,s,a);return Jr(i,s+1,c)||d}function Xl(i,s,a,c){const d=be();return Jr(d,zs(),s)&&(Wt(),Ms(Cn(),d,i,s,a,c)),Xl}function td(i,s,a,c,d,p,y,w,D,S){const F=function er(i,s,a,c,d,p){const y=Jl(i,s,a,c);return Jl(i,s+2,d,p)||y}(i,function Is(){return gt.lFrame.bindingIndex}(),a,d,y,D);return hn(4),F?s+K(a)+c+K(d)+p+K(y)+w+K(D)+S:at}function mg(i,s,a,c,d,p,y,w){const D=be(),S=Wt(),N=i+jt,F=S.firstCreatePass?function Sc(i,s,a,c,d,p,y,w,D){const S=s.consts,N=Wh(s,i,4,y||null,Hs(S,w));l0(s,a,N,Hs(S,D)),Xa(s,N);const F=N.tView=Zh(2,N,c,d,p,s.directiveRegistry,s.pipeRegistry,null,s.schemas,S,null);return null!==s.queries&&(s.queries.template(s,N),F.queries=s.queries.embeddedTView(N)),N}(N,S,D,s,a,c,d,p,y):S.data[N];Es(F,!1);const G=Eu(S,D,F,i);yl()&&Eh(S,D,G,F),Ir(G,D),Ey(D,D[N]=wy(G,D,G,F)),_s(F)&&ng(S,D,F),null!=y&&rg(D,F,w)}let Eu=function Ao(i,s,a,c){return as(!0),s[Ot].createComment("")};function vg(i,s,a){const c=be();return Jr(c,zs(),s)&&function As(i,s,a,c,d,p,y,w){const D=Hr(s,a);let N,S=s.inputs;!w&&null!=S&&(N=S[c])?(Dy(i,a,N,c,d),vs(s)&&function Co(i,s){const a=ur(s,i);16&a[kt]||(a[kt]|=64)}(a,s.index)):3&s.type&&(c=function Kh(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(c),d=null!=y?y(d,s.value||"",c):d,p.setProperty(D,c,d))}(Wt(),Cn(),c,i,s,c[Ot],a,!1),vg}function uf(i,s,a,c,d){const y=d?"class":"style";Dy(i,a,s.inputs[y],y,c)}function cf(i,s,a,c){const d=be(),p=Wt(),y=jt+i,w=d[Ot],D=p.firstCreatePass?function id(i,s,a,c,d,p){const y=s.consts,D=Wh(s,i,2,c,Hs(y,d));return l0(s,a,D,Hs(y,p)),null!==D.attrs&&ct(D,D.attrs,!1),null!==D.mergedAttrs&&ct(D,D.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,D),D}(y,p,d,s,a,c):p.data[y],S=E0(p,d,D,w,s,i);d[y]=S;const N=_s(D);return Es(D,!0),jm(w,S,D),32!=(32&D.flags)&&yl()&&Eh(p,d,S,D),0===function ll(){return gt.lFrame.elementDepthCount}()&&Ir(S,d),function Qf(){gt.lFrame.elementDepthCount++}(),N&&(ng(p,d,D),py(p,D,d)),null!==c&&rg(d,D),cf}function Mc(){let i=Sn();Wa()?function qo(){gt.lFrame.isParent=!1}():(i=i.parent,Es(i,!1));const s=i;(function za(i){return gt.skipHydrationRootTNode===i})(s)&&function Zd(){gt.skipHydrationRootTNode=null}(),function qd(){gt.lFrame.elementDepthCount--}();const a=Wt();return a.firstCreatePass&&(Xa(a,i),Lo(i)&&a.queries.elementEnd(i)),null!=s.classesWithoutHost&&function Ko(i){return 0!=(8&i.flags)}(s)&&uf(a,s,be(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function El(i){return 0!=(16&i.flags)}(s)&&uf(a,s,be(),s.stylesWithoutHost,!1),Mc}function My(i,s,a,c){return cf(i,s,a,c),Mc(),My}let E0=(i,s,a,c,d,p)=>(as(!0),qi(c,d,function tp(){return gt.lFrame.currentNamespace}()));function Fn(){return be()}function fa(i){return!!i&&"function"==typeof i.then}function T0(i){return!!i&&"function"==typeof i.subscribe}function Ny(i,s,a,c){const d=be(),p=Wt(),y=Sn();return function S0(i,s,a,c,d,p,y){const w=_s(c),S=i.firstCreatePass&&GI(i),N=s[En],F=sg(s);let G=!0;if(3&c.type||y){const Re=Hr(c,s),je=y?y(Re):Re,ot=F.length,we=y?Qt=>y(In(Qt[c.index])):c.index;let _t=null;if(!y&&w&&(_t=function QT(i,s,a,c){const d=i.cleanup;if(null!=d)for(let p=0;p<d.length-1;p+=2){const y=d[p];if(y===a&&d[p+1]===c){const w=s[ao],D=d[p+2];return w.length>D?w[D]:null}"string"==typeof y&&(p+=2)}return null}(i,s,d,c.index)),null!==_t)(_t.__ngLastListenerFn__||_t).__ngNextListenerFn__=p,_t.__ngLastListenerFn__=p,G=!1;else{p=vn(c,s,N,p,!1);const Qt=a.listen(je,d,p);F.push(p,Qt),S&&S.push(d,we,ot,ot+1)}}else p=vn(c,s,N,p,!1);const Z=c.outputs;let ve;if(G&&null!==Z&&(ve=Z[d])){const Re=ve.length;if(Re)for(let je=0;je<Re;je+=2){const gn=s[ve[je]][ve[je+1]].subscribe(p),Ro=F.length;F.push(p,gn),S&&S.push(d,c.index,Ro,-(Ro+1))}}}(p,d,d[Ot],y,i,s,c),Ny}function Xt(i,s,a,c){try{return Fi(6,s,a),!1!==a(c)}catch(d){return Yl(i,d),!1}finally{Fi(7,s,a)}}function vn(i,s,a,c,d){return function p(y){if(y===Function)return c;Yp(i.componentOffset>-1?ur(i.index,s):s);let D=Xt(s,a,c,y),S=p.__ngNextListenerFn__;for(;S;)D=Xt(s,a,S,y)&&D,S=S.__ngNextListenerFn__;return d&&!1===D&&y.preventDefault(),D}}function od(i=1){return function Qa(i){return(gt.lFrame.contextLView=function Xf(i,s){for(;i>0;)s=s[is],i--;return s}(i,gt.lFrame.contextLView))[En]}(i)}function Py(i,s){return i<<17|s<<2}function xc(i){return i>>17&32767}function Iu(i){return 2|i}function Mo(i){return(131068&i)>>2}function lf(i,s){return-131069&i|s<<2}function Fy(i){return 1|i}function k0(i,s,a,c,d){const p=i[a+1],y=null===s;let w=c?xc(p):Mo(p),D=!1;for(;0!==w&&(!1===D||y);){const N=i[w+1];F0(i[w],s)&&(D=!0,i[w+1]=c?Fy(N):Iu(N)),w=c?xc(N):Mo(N)}D&&(i[a+1]=c?Iu(p):Fy(p))}function F0(i,s){return null===i||null==s||(Array.isArray(i)?i[1]:i)===s||!(!Array.isArray(i)||"string"!=typeof s)&&M(i,s)>=0}function By(i,s){return function Yi(i,s,a,c){const d=be(),p=Wt(),y=hn(2);p.firstUpdatePass&&function $t(i,s,a,c){const d=i.data;if(null===d[a+1]){const p=d[Yr()],y=function ID(i,s){return s>=i.expandoStartIndex}(i,a);(function ud(i,s){return 0!=(i.flags&(s?8:16))})(p,c)&&null===s&&!y&&(s=!1),s=function tS(i,s,a,c){const d=function Ka(i){const s=gt.lFrame.currentDirectiveIndex;return-1===s?null:i[s]}(i);let p=c?s.residualClasses:s.residualStyles;if(null===d)0===(c?s.classBindings:s.styleBindings)&&(a=Oc(a=jy(null,i,s,a,c),s.attrs,c),p=null);else{const y=s.directiveStylingLast;if(-1===y||i[y]!==d)if(a=jy(d,i,s,a,c),null===p){let D=function U0(i,s,a){const c=a?s.classBindings:s.styleBindings;if(0!==Mo(c))return i[xc(c)]}(i,s,c);void 0!==D&&Array.isArray(D)&&(D=jy(null,i,s,D[1],c),D=Oc(D,s.attrs,c),function DD(i,s,a,c){i[xc(a?s.classBindings:s.styleBindings)]=c}(i,s,c,D))}else p=function CD(i,s,a){let c;const d=s.directiveEnd;for(let p=1+s.directiveStylingLast;p<d;p++)c=Oc(c,i[p].hostAttrs,a);return Oc(c,s.attrs,a)}(i,s,c)}return void 0!==p&&(c?s.residualClasses=p:s.residualStyles=p),a}(d,p,s,c),function _D(i,s,a,c,d,p){let y=p?s.classBindings:s.styleBindings,w=xc(y),D=Mo(y);i[c]=a;let N,S=!1;if(Array.isArray(a)?(N=a[1],(null===N||M(a,N)>0)&&(S=!0)):N=a,d)if(0!==D){const G=xc(i[w+1]);i[c+1]=Py(G,w),0!==G&&(i[G+1]=lf(i[G+1],c)),i[w+1]=function P0(i,s){return 131071&i|s<<17}(i[w+1],c)}else i[c+1]=Py(w,0),0!==w&&(i[w+1]=lf(i[w+1],c)),w=c;else i[c+1]=Py(D,0),0===w?w=c:i[D+1]=lf(i[D+1],c),D=c;S&&(i[c+1]=Iu(i[c+1])),k0(i,N,c,!0),k0(i,N,c,!1),function df(i,s,a,c,d){const p=d?i.residualClasses:i.residualStyles;null!=p&&"string"==typeof s&&M(p,s)>=0&&(a[c+1]=Fy(a[c+1]))}(s,N,i,c,p),y=Py(w,D),p?s.classBindings=y:s.styleBindings=y}(d,p,s,a,y,c)}}(p,i,y,c),s!==at&&Jr(d,y,s)&&function Pc(i,s,a,c,d,p,y,w){if(!(3&s.type))return;const D=i.data,S=D[w+1],N=function ky(i){return 1==(1&i)}(S)?B0(D,s,a,d,Mo(S),y):void 0;ma(N)||(ma(p)||function JT(i){return 2==(2&i)}(S)&&(p=B0(D,null,a,d,w,y)),function C_(i,s,a,c,d){if(s)d?i.addClass(a,c):i.removeClass(a,c);else{let p=-1===c.indexOf("-")?void 0:Eo.DashCase;null==d?i.removeStyle(a,c,p):("string"==typeof d&&d.endsWith("!important")&&(d=d.slice(0,-10),p|=Eo.Important),i.setStyle(a,c,d,p))}}(c,y,Hu(Yr(),a),d,p))}(p,p.data[Yr()],d,d[Ot],i,d[y+1]=function SD(i,s){return null==i||""===i||("string"==typeof s?i+=s:"object"==typeof i&&(i=Q(mc(i)))),i}(s,a),c,y)}(i,s,null,!0),By}function jy(i,s,a,c,d){let p=null;const y=a.directiveEnd;let w=a.directiveStylingLast;for(-1===w?w=a.directiveStart:w++;w<y&&(p=s[w],c=Oc(c,p.hostAttrs,d),p!==i);)w++;return null!==i&&(a.directiveStylingLast=w),c}function Oc(i,s,a){const c=a?1:2;let d=-1;if(null!==s)for(let p=0;p<s.length;p++){const y=s[p];"number"==typeof y?d=y:d===c&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),E(i,y,!!a||s[++p]))}return void 0===i?null:i}function B0(i,s,a,c,d,p){const y=null===s;let w;for(;d>0;){const D=i[d],S=Array.isArray(D),N=S?D[1]:D,F=null===N;let G=a[d+1];G===at&&(G=F?bt:void 0);let Z=F?C(G,c):N===c?G:void 0;if(S&&!ma(Z)&&(Z=C(D,c)),ma(Z)&&(w=Z,y))return w;const ve=i[d+1];d=y?xc(ve):Mo(ve)}if(null!==s){let D=p?s.residualClasses:s.residualStyles;null!=D&&(w=C(D,c))}return w}function ma(i){return void 0!==i}function j0(i,s=""){const a=be(),c=Wt(),d=i+jt,p=c.firstCreatePass?Wh(c,d,1,s,null):c.data[d],y=$0(c,a,p,s,i);a[d]=y,yl()&&Eh(c,a,y,p),Es(p,!1)}let $0=(i,s,a,c,d)=>(as(!0),function oa(i,s){return i.createText(s)}(s[Ot],c));function H0(i){return Mn("",i,""),H0}function Mn(i,s,a){const c=be(),d=function ed(i,s,a,c){return Jr(i,zs(),a)?s+K(a)+c:at}(c,i,s,a);return d!==at&&kn(c,Yr(),d),Mn}function $y(i,s,a,c,d,p,y,w,D){const S=be(),N=td(S,i,s,a,c,d,p,y,w,D);return N!==at&&kn(S,Yr(),N),$y}const ld=void 0;var VD=["en",[["a","p"],["AM","PM"],ld],[["AM","PM"],ld,ld],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ld,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ld,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ld,"{1} 'at' {0}",ld],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function LD(i){const a=Math.floor(Math.abs(i)),c=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===c?1:5}];let _f={};function tw(i){const s=function Ar(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=dd(s);if(a)return a;const c=s.split("-")[0];if(a=dd(c),a)return a;if("en"===c)return VD;throw new te(701,!1)}function zy(i){return tw(i)[Mt.PluralCase]}function dd(i){return i in _f||(_f[i]=rn.ng&&rn.ng.common&&rn.ng.common.locales&&rn.ng.common.locales[i]),_f[i]}var Mt=(()=>((Mt=Mt||{})[Mt.LocaleId=0]="LocaleId",Mt[Mt.DayPeriodsFormat=1]="DayPeriodsFormat",Mt[Mt.DayPeriodsStandalone=2]="DayPeriodsStandalone",Mt[Mt.DaysFormat=3]="DaysFormat",Mt[Mt.DaysStandalone=4]="DaysStandalone",Mt[Mt.MonthsFormat=5]="MonthsFormat",Mt[Mt.MonthsStandalone=6]="MonthsStandalone",Mt[Mt.Eras=7]="Eras",Mt[Mt.FirstDayOfWeek=8]="FirstDayOfWeek",Mt[Mt.WeekendRange=9]="WeekendRange",Mt[Mt.DateFormat=10]="DateFormat",Mt[Mt.TimeFormat=11]="TimeFormat",Mt[Mt.DateTimeFormat=12]="DateTimeFormat",Mt[Mt.NumberSymbols=13]="NumberSymbols",Mt[Mt.NumberFormats=14]="NumberFormats",Mt[Mt.CurrencyCode=15]="CurrencyCode",Mt[Mt.CurrencySymbol=16]="CurrencySymbol",Mt[Mt.CurrencyName=17]="CurrencyName",Mt[Mt.Currencies=18]="Currencies",Mt[Mt.Directionality=19]="Directionality",Mt[Mt.PluralCase=20]="PluralCase",Mt[Mt.ExtraData=21]="ExtraData",Mt))();const ya="en-US";let rw=ya;function tv(i,s,a,c,d){if(i=Me(i),Array.isArray(i))for(let p=0;p<i.length;p++)tv(i[p],s,a,c,d);else{const p=Wt(),y=be();let w=yc(i)?i:Me(i.provide),D=q_(i);const S=Sn(),N=1048575&S.providerIndexes,F=S.directiveStart,G=S.providerIndexes>>20;if(yc(i)||!i.multi){const Z=new _r(D,d,Ic),ve=yw(w,s,d?N:N+G,F);-1===ve?(Ti(Qo(S,y),p,w),gw(p,i,s.length),s.push(w),S.directiveStart++,S.directiveEnd++,d&&(S.providerIndexes+=1048576),a.push(Z),y.push(Z)):(a[ve]=Z,y[ve]=Z)}else{const Z=yw(w,s,N+G,F),ve=yw(w,s,N,N+G),je=ve>=0&&a[ve];if(d&&!je||!d&&!(Z>=0&&a[Z])){Ti(Qo(S,y),p,w);const ot=function iC(i,s,a,c,d){const p=new _r(i,a,Ic);return p.multi=[],p.index=s,p.componentProviders=0,mw(p,d,c&&!a),p}(d?rC:nv,a.length,d,c,D);!d&&je&&(a[ve].providerFactory=ot),gw(p,i,s.length,0),s.push(w),S.directiveStart++,S.directiveEnd++,d&&(S.providerIndexes+=1048576),a.push(ot),y.push(ot)}else gw(p,i,Z>-1?Z:ve,mw(a[d?ve:Z],D,!d&&c));!d&&c&&je&&a[ve].componentProviders++}}}function gw(i,s,a,c){const d=yc(s),p=function mT(i){return!!i.useClass}(s);if(d||p){const D=(p?Me(s.useClass):s).prototype.ngOnDestroy;if(D){const S=i.destroyHooks||(i.destroyHooks=[]);if(!d&&s.multi){const N=S.indexOf(a);-1===N?S.push(a,[c,D]):S[N+1].push(c,D)}else S.push(a,D)}}}function mw(i,s,a){return a&&i.componentProviders++,i.multi.push(s)-1}function yw(i,s,a,c){for(let d=a;d<c;d++)if(s[d]===i)return d;return-1}function nv(i,s,a,c){return vw(this.multi,[])}function rC(i,s,a,c){const d=this.multi;let p;if(this.providerFactory){const y=this.providerFactory.componentProviders,w=us(a,a[Ze],this.providerFactory.index,c);p=w.slice(0,y),vw(d,p);for(let D=y;D<w.length;D++)p.push(w[D])}else p=[],vw(d,p);return p}function vw(i,s){for(let a=0;a<i.length;a++)s.push((0,i[a])());return s}function sC(i,s=[]){return a=>{a.providersResolver=(c,d)=>function DS(i,s,a){const c=Wt();if(c.firstCreatePass){const d=vr(i);tv(a,c.data,c.blueprint,d,!0),tv(s,c.data,c.blueprint,d,!1)}}(c,d?d(i):i,s)}}class gd{}class jc{}function Pg(i,s){return new rv(i,s??null,[])}class rv extends gd{constructor(s,a,c){super(),this._parent=a,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new ZI(this);const d=xr(s);this._bootstrapComponents=ua(d.bootstrap),this._r3Injector=qh(s,a,[{provide:gd,useValue:this},{provide:Js,useValue:this.componentFactoryResolver},...c],Q(s),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(s)}get injector(){return this._r3Injector}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class _w extends jc{constructor(s){super(),this.moduleType=s}create(s){return new rv(this.moduleType,s,[])}}class aC extends gd{constructor(s){super(),this.componentFactoryResolver=new ZI(this),this.instance=null;const a=new H_([...s.providers,{provide:gd,useValue:this},{provide:Js,useValue:this.componentFactoryResolver}],s.parent||Rh(),s.debugName,new Set(["environment"]));this.injector=a,s.runEnvironmentInitializers&&a.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(s){this.injector.onDestroy(s)}}function uC(i,s,a=null){return new aC({providers:i,parent:s,debugName:a,runEnvironmentInitializers:!0}).injector}let ww=(()=>{class i{constructor(a){this._injector=a,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(a){if(!a.standalone)return null;if(!this.cachedInjectors.has(a.id)){const c=Xm(0,a.type),d=c.length>0?uC([c],this._injector,`Standalone[${a.type.name}]`):null;this.cachedInjectors.set(a.id,d)}return this.cachedInjectors.get(a.id)}ngOnDestroy(){try{for(const a of this.cachedInjectors.values())null!==a&&a.destroy()}finally{this.cachedInjectors.clear()}}}return i.\u0275prov=Kt({token:i,providedIn:"environment",factory:()=>new i(Jt(vc))}),i})();function Gr(i){i.getStandaloneInjector=s=>s.get(ww).getOrCreateStandaloneInjector(i)}function Lg(i){return s=>{setTimeout(i,void 0,s)}}const eo=class dv extends h.x{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,a,c){let d=s,p=a||(()=>null),y=c;if(s&&"object"==typeof s){const D=s;d=D.next?.bind(D),p=D.error?.bind(D),y=D.complete?.bind(D)}this.__isAsync&&(p=Lg(p),d&&(d=Lg(d)),y&&(y=Lg(y)));const w=super.subscribe({next:d,error:p,complete:y});return s instanceof q.w0&&s.add(w),w}};function Nw(){return this._results[Symbol.iterator]()}class hv{get changes(){return this._changes||(this._changes=new eo)}constructor(s=!1){this._emitDistinctChangesOnly=s,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=hv.prototype;a[Symbol.iterator]||(a[Symbol.iterator]=Nw)}get(s){return this._results[s]}map(s){return this._results.map(s)}filter(s){return this._results.filter(s)}find(s){return this._results.find(s)}reduce(s,a){return this._results.reduce(s,a)}forEach(s){this._results.forEach(s)}some(s){return this._results.some(s)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(s,a){const c=this;c.dirty=!1;const d=function Jn(i){return i.flat(Number.POSITIVE_INFINITY)}(s);(this._changesDetected=!function Al(i,s,a){if(i.length!==s.length)return!1;for(let c=0;c<i.length;c++){let d=i[c],p=s[c];if(a&&(d=a(d),p=a(p)),p!==d)return!1}return!0}(c._results,d,a))&&(c._results=d,c.length=d.length,c.last=d[this.length-1],c.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Vg=(()=>{class i{}return i.__NG_ELEMENT_ID__=Rw,i})();const EC=Vg,fv=class extends EC{constructor(s,a,c){super(),this._declarationLView=s,this._declarationTContainer=a,this.elementRef=c}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(s,a){return this.createEmbeddedViewImpl(s,a,null)}createEmbeddedViewImpl(s,a,c){const d=this._declarationTContainer.tView,p=Wl(this._declarationLView,d,s,16,null,d.declTNode,null,null,null,a||null,c||null);p[ko]=this._declarationLView[this._declarationTContainer.index];const w=this._declarationLView[wi];return null!==w&&(p[wi]=w.createEmbeddedView(d)),og(d,p,s),new ug(p)}};function Rw(){return pv(Sn(),be())}function pv(i,s){return 4&i.type?new fv(s,i,mu(i,s)):null}let vv=(()=>{class i{}return i.__NG_ELEMENT_ID__=PS,i})();function PS(){return _v(Sn(),be())}const Ow=vv,bC=class extends Ow{constructor(s,a,c){super(),this._lContainer=s,this._hostTNode=a,this._hostLView=c}get element(){return mu(this._hostTNode,this._hostLView)}get injector(){return new yo(this._hostTNode,this._hostLView)}get parentInjector(){const s=Ds(this._hostTNode,this._hostLView);if(Hn(s)){const a=nu(s,this._hostLView),c=Tt(s);return new yo(a[Ze].data[c+8],a)}return new yo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const a=TC(this._lContainer);return null!==a&&a[s]||null}get length(){return this._lContainer.length-ar}createEmbeddedView(s,a,c){let d,p;"number"==typeof c?d=c:null!=c&&(d=c.index,p=c.injector);const w=s.createEmbeddedViewImpl(a||{},p,null);return this.insertImpl(w,d,false),w}createComponent(s,a,c,d,p){const y=s&&!function Zs(i){return"function"==typeof i}(s);let w;if(y)w=a;else{const Re=a||{};w=Re.index,c=Re.injector,d=Re.projectableNodes,p=Re.environmentInjector||Re.ngModuleRef}const D=y?s:new xt(Lt(s)),S=c||this.parentInjector;if(!p&&null==D.ngModule){const je=(y?S:this.parentInjector).get(vc,null);je&&(p=je)}Lt(D.componentType??{});const Z=D.create(S,d,null,p);return this.insertImpl(Z.hostView,w,false),Z}insert(s,a){return this.insertImpl(s,a,!1)}insertImpl(s,a,c){const d=s._lView,p=d[Ze];if(function Hd(i){return ci(i[wn])}(d)){const D=this.indexOf(s);if(-1!==D)this.detach(D);else{const S=d[wn],N=new bC(S,S[Br],S[wn]);N.detach(N.indexOf(s))}}const y=this._adjustIndex(a),w=this._lContainer;if(function _h(i,s,a,c){const d=ar+c,p=a.length;c>0&&(a[d-1][ai]=s),c<p-ar?(s[ai]=a[d],Ks(a,ar+c,s)):(a.push(s),s[ai]=null),s[wn]=a;const y=s[ko];null!==y&&a!==y&&function D_(i,s){const a=i[co];s[On]!==s[wn][wn][On]&&(i[ss]=!0),null===a?i[co]=[s]:a.push(s)}(y,s);const w=s[wi];null!==w&&w.insertView(i),s[kt]|=128}(p,d,w,y),!c){const D=Ih(y,w),S=d[Ot],N=et(S,w[Kr]);null!==N&&function Um(i,s,a,c,d,p){c[Vn]=d,c[Br]=s,Et(i,c,a,1,d,p)}(p,w[Br],S,d,N,D)}return s.attachToViewContainerRef(),Ks(md(w),y,s),s}move(s,a){return this.insert(s,a)}indexOf(s){const a=TC(this._lContainer);return null!==a?a.indexOf(s):-1}remove(s){const a=this._adjustIndex(s,-1),c=hu(this._lContainer,a);c&&(lu(md(this._lContainer),a),Rp(c[Ze],c))}detach(s){const a=this._adjustIndex(s,-1),c=hu(this._lContainer,a);return c&&null!=lu(md(this._lContainer),a)?new ug(c):null}_adjustIndex(s,a=0){return s??this.length+a}};function TC(i){return i[Ei]}function md(i){return i[Ei]||(i[Ei]=[])}function _v(i,s){let a;const c=s[i.index];return ci(c)?a=c:(a=wy(c,s,null,i),s[i.index]=a,Ey(s,a)),wv(a,s,i,c),new bC(a,i,s)}let wv=function Bg(i,s,a,c){if(i[Kr])return;let d;d=8&a.type?In(c):function xf(i,s){const a=i[Ot],c=a.createComment(""),d=Hr(s,i);return x(a,et(a,d),c,function rt(i,s){return i.nextSibling(s)}(a,d),!1),c}(s,a),i[Kr]=d};class Ev{constructor(s){this.queryList=s,this.matches=null}clone(){return new Ev(this.queryList)}setDirty(){this.queryList.setDirty()}}class $g{constructor(s=[]){this.queries=s}createEmbeddedView(s){const a=s.queries;if(null!==a){const c=null!==s.contentQueries?s.contentQueries[0]:a.length,d=[];for(let p=0;p<c;p++){const y=a.getByIndex(p);d.push(this.queries[y.indexInDeclarationView].clone())}return new $g(d)}return null}insertView(s){this.dirtyQueriesWithMatches(s)}detachView(s){this.dirtyQueriesWithMatches(s)}dirtyQueriesWithMatches(s){for(let a=0;a<this.queries.length;a++)null!==Bw(s,a).matches&&this.queries[a].setDirty()}}class Iv{constructor(s,a,c=null){this.predicate=s,this.flags=a,this.read=c}}class wa{constructor(s=[]){this.queries=s}elementStart(s,a){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(s,a)}elementEnd(s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(s)}embeddedTView(s){let a=null;for(let c=0;c<this.length;c++){const d=null!==a?a.length:0,p=this.getByIndex(c).embeddedTView(s,d);p&&(p.indexInDeclarationView=c,null!==a?a.push(p):a=[p])}return null!==a?new wa(a):null}template(s,a){for(let c=0;c<this.queries.length;c++)this.queries[c].template(s,a)}getByIndex(s){return this.queries[s]}get length(){return this.queries.length}track(s){this.queries.push(s)}}class Dv{constructor(s,a=-1){this.metadata=s,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(s,a){this.isApplyingToNode(a)&&this.matchTNode(s,a)}elementEnd(s){this._declarationNodeIndex===s.index&&(this._appliesToNextNode=!1)}template(s,a){this.elementStart(s,a)}embeddedTView(s,a){return this.isApplyingToNode(s)?(this.crossesNgTemplate=!0,this.addMatch(-s.index,a),new Dv(this.metadata)):null}isApplyingToNode(s){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let c=s.parent;for(;null!==c&&8&c.type&&c.index!==a;)c=c.parent;return a===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(s,a){const c=this.metadata.predicate;if(Array.isArray(c))for(let d=0;d<c.length;d++){const p=c[d];this.matchTNodeWithReadOption(s,a,kS(a,p)),this.matchTNodeWithReadOption(s,a,tc(a,s,p,!1,!1))}else c===Vg?4&a.type&&this.matchTNodeWithReadOption(s,a,-1):this.matchTNodeWithReadOption(s,a,tc(a,s,c,!1,!1))}matchTNodeWithReadOption(s,a,c){if(null!==c){const d=this.metadata.read;if(null!==d)if(d===$h||d===vv||d===Vg&&4&a.type)this.addMatch(a.index,-2);else{const p=tc(a,s,d,!1,!1);null!==p&&this.addMatch(a.index,p)}else this.addMatch(a.index,c)}}addMatch(s,a){null===this.matches?this.matches=[s,a]:this.matches.push(s,a)}}function kS(i,s){const a=i.localNames;if(null!==a)for(let c=0;c<a.length;c+=2)if(a[c]===s)return a[c+1];return null}function FS(i,s,a,c){return-1===a?function kw(i,s){return 11&i.type?mu(i,s):4&i.type?pv(i,s):null}(s,i):-2===a?function Fw(i,s,a){return a===$h?mu(s,i):a===Vg?pv(s,i):a===vv?_v(s,i):void 0}(i,s,c):us(i,i[Ze],a,s)}function SC(i,s,a,c){const d=s[wi].queries[c];if(null===d.matches){const p=i.data,y=a.matches,w=[];for(let D=0;D<y.length;D+=2){const S=y[D];w.push(S<0?null:FS(s,p[S],y[D+1],a.metadata.read))}d.matches=w}return d.matches}function Hg(i,s,a,c){const d=i.queries.getByIndex(a),p=d.matches;if(null!==p){const y=SC(i,s,d,a);for(let w=0;w<p.length;w+=2){const D=p[w];if(D>0)c.push(y[w/2]);else{const S=p[w+1],N=s[-D];for(let F=ar;F<N.length;F++){const G=N[F];G[ko]===G[wn]&&Hg(G[Ze],G,S,c)}if(null!==N[co]){const F=N[co];for(let G=0;G<F.length;G++){const Z=F[G];Hg(Z[Ze],Z,S,c)}}}}}return c}function Gg(i){const s=be(),a=Wt(),c=Yd();Ku(c+1);const d=Bw(a,c);if(i.dirty&&function Sm(i){return 4==(4&i[kt])}(s)===(2==(2&d.metadata.flags))){if(null===d.matches)i.reset([]);else{const p=d.crossesNgTemplate?Hg(a,s,c,[]):SC(a,s,d,c);i.reset(p,Gn),i.notifyOnChanges()}return!0}return!1}function Vw(i,s,a,c){const d=Wt();if(d.firstCreatePass){const p=Sn();(function MC(i,s,a){null===i.queries&&(i.queries=new wa),i.queries.track(new Dv(s,a))})(d,new Iv(s,a,c),p.index),function xC(i,s){const a=i.contentQueries||(i.contentQueries=[]);s!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,s)}(d,i),2==(2&a)&&(d.staticContentQueries=!0)}!function AC(i,s,a){const c=new hv(4==(4&a));(function VI(i,s,a,c){const d=sg(s);d.push(a),i.firstCreatePass&&GI(i).push(c,d.length-1)})(i,s,c,c.destroy),null===s[wi]&&(s[wi]=new $g),s[wi].queries.push(new Ev(c))}(d,be(),a)}function yd(){return function Uw(i,s){return i[wi].queries[s].queryList}(be(),Yd())}function Bw(i,s){return i.queries.getByIndex(s)}function bv(i){return!!xr(i)}const Ov=new pn("Application Initializer");let Qw=(()=>{class i{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((a,c)=>{this.resolve=a,this.reject=c}),this.appInits=qt(Ov,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const a=[];for(const d of this.appInits){const p=d();if(fa(p))a.push(p);else if(T0(p)){const y=new Promise((w,D)=>{p.subscribe({complete:w,error:D})});a.push(y)}}const c=()=>{this.done=!0,this.resolve()};Promise.all(a).then(()=>{c()}).catch(d=>{this.reject(d)}),0===a.length&&c(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Kt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),Pv=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Kt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();const Ff=new pn("LocaleId",{providedIn:"root",factory:()=>qt(Ff,qe.Optional|qe.SkipSelf)||function Au(){return typeof $localize<"u"&&$localize.locale||ya}()}),qS=new pn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});let kv=(()=>{class i{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new P.X(!1)}add(){this.hasPendingTasks.next(!0);const a=this.taskId++;return this.pendingTasks.add(a),a}remove(a){this.pendingTasks.delete(a),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Kt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();class WS{constructor(s,a){this.ngModuleFactory=s,this.componentFactories=a}}let Jw=(()=>{class i{compileModuleSync(a){return new _w(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const c=this.compileModuleSync(a),p=ua(xr(a).declarations).reduce((y,w)=>{const D=Lt(w);return D&&y.push(new xt(D)),y},[]);return new WS(c,p)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Kt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const YS=(()=>Promise.resolve(0))();function eE(i){typeof Zone>"u"?YS.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}function Lv(...i){}class yi{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new eo(!1),this.onMicrotaskEmpty=new eo(!1),this.onStable=new eo(!1),this.onError=new eo(!1),typeof Zone>"u")throw new te(908,!1);Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!c&&a,d.shouldCoalesceRunChangeDetection=c,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function QS(){let i=rn.requestAnimationFrame,s=rn.cancelAnimationFrame;if(typeof Zone<"u"&&i&&s){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const c=s[Zone.__symbol__("OriginalDelegate")];c&&(s=c)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function JS(i){const s=()=>{!function Zg(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(rn,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,Kg(i),i.isCheckStableRunning=!0,nE(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),Kg(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,c,d,p,y,w)=>{try{return rE(i),a.invokeTask(d,p,y,w)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||i.shouldCoalesceRunChangeDetection)&&s(),wd(i)}},onInvoke:(a,c,d,p,y,w,D)=>{try{return rE(i),a.invoke(d,p,y,w,D)}finally{i.shouldCoalesceRunChangeDetection&&s(),wd(i)}},onHasTask:(a,c,d,p)=>{a.hasTask(d,p),c===d&&("microTask"==p.change?(i._hasPendingMicrotasks=p.microTask,Kg(i),nE(i)):"macroTask"==p.change&&(i.hasPendingMacrotasks=p.macroTask))},onHandleError:(a,c,d,p)=>(a.handleError(d,p),i.runOutsideAngular(()=>i.onError.emit(p)),!1)})}(d)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!yi.isInAngularZone())throw new te(909,!1)}static assertNotInAngularZone(){if(yi.isInAngularZone())throw new te(909,!1)}run(s,a,c){return this._inner.run(s,a,c)}runTask(s,a,c,d){const p=this._inner,y=p.scheduleEventTask("NgZoneEvent: "+d,s,tE,Lv,Lv);try{return p.runTask(y,a,c)}finally{p.cancelTask(y)}}runGuarded(s,a,c){return this._inner.runGuarded(s,a,c)}runOutsideAngular(s){return this._outer.run(s)}}const tE={};function nE(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function Kg(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function rE(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function wd(i){i._nesting--,nE(i)}class eb{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new eo,this.onMicrotaskEmpty=new eo,this.onStable=new eo,this.onError=new eo}run(s,a,c){return s.apply(a,c)}runGuarded(s,a,c){return s.apply(a,c)}runOutsideAngular(s){return s()}runTask(s,a,c,d){return s.apply(a,c)}}const Yg=new pn("",{providedIn:"root",factory:tb});function tb(){const i=qt(yi);let s=!0;const a=new J.y(d=>{s=i.isStable&&!i.hasPendingMacrotasks&&!i.hasPendingMicrotasks,i.runOutsideAngular(()=>{d.next(s),d.complete()})}),c=new J.y(d=>{let p;i.runOutsideAngular(()=>{p=i.onStable.subscribe(()=>{yi.assertNotInAngularZone(),eE(()=>{!s&&!i.hasPendingMacrotasks&&!i.hasPendingMicrotasks&&(s=!0,d.next(!0))})})});const y=i.onUnstable.subscribe(()=>{yi.assertInAngularZone(),s&&(s=!1,i.runOutsideAngular(()=>{d.next(!1)}))});return()=>{p.unsubscribe(),y.unsubscribe()}});return(0,ne.T)(a,c.pipe((0,fe.B)()))}const nb=new pn(""),rb=new pn("");let Jg,XS=(()=>{class i{constructor(a,c,d){this._ngZone=a,this.registry=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Jg||(function iE(i){Jg=i}(d),d.addToWindow(c)),this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{yi.assertNotInAngularZone(),eE(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())eE(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(a)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,c,d){let p=-1;c&&c>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==p),a(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:a,timeoutId:p,updateCb:d})}whenStable(a,c,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,c,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(a){this.registry.registerApplication(a,this)}unregisterApplication(a){this.registry.unregisterApplication(a)}findProviders(a,c,d){return[]}}return i.\u0275fac=function(a){return new(a||i)(Jt(yi),Jt(Qg),Jt(rb))},i.\u0275prov=Kt({token:i,factory:i.\u0275fac}),i})(),Qg=(()=>{class i{constructor(){this._applications=new Map}registerApplication(a,c){this._applications.set(a,c)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,c=!0){return Jg?.findTestabilityInTree(this,a,c)??null}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Kt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})(),Ea=null;const sE=new pn("AllowMultipleToken"),Xg=new pn("PlatformDestroyListeners"),em=new pn("appBootstrapListener");class sb{constructor(s,a){this.name=s,this.token=a}}function ub(i,s,a=[]){const c=`Platform: ${s}`,d=new pn(c);return(p=[])=>{let y=uE();if(!y||y.injector.get(sE,!1)){const w=[...a,...p,{provide:d,useValue:!0}];i?i(w):function aE(i){if(Ea&&!Ea.get(sE,!1))throw new te(400,!1);(function oE(){!function Uu(i){$a=i}(()=>{throw new te(600,!1)})})(),Ea=i;const s=i.get(cE);(function Ed(i){i.get(pI,null)?.forEach(a=>a())})(i)}(function cb(i=[],s){return yu.create({name:s,providers:[{provide:$_,useValue:"platform"},{provide:Xg,useValue:new Set([()=>Ea=null])},...i]})}(w,c))}return function eA(i){const s=uE();if(!s)throw new te(401,!1);return s}()}}function uE(){return Ea?.get(cE)??null}let cE=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,c){const d=function nA(i="zone.js",s){return"noop"===i?new eb:"zone.js"===i?new yi(s):i}(c?.ngZone,function lb(i){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:i?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:i?.runCoalescing??!1}}({eventCoalescing:c?.ngZoneEventCoalescing,runCoalescing:c?.ngZoneRunCoalescing}));return d.run(()=>{const p=function oC(i,s,a){return new rv(i,s,a)}(a.moduleType,this.injector,function en(i){return[{provide:yi,useFactory:i},{provide:xh,multi:!0,useFactory:()=>{const s=qt(pb,{optional:!0});return()=>s.initialize()}},{provide:lE,useFactory:fb},{provide:Yg,useFactory:tb}]}(()=>d)),y=p.injector.get(zl,null);return d.runOutsideAngular(()=>{const w=d.onError.subscribe({next:D=>{y.handleError(D)}});p.onDestroy(()=>{tm(this._modules,p),w.unsubscribe()})}),function db(i,s,a){try{const c=a();return fa(c)?c.catch(d=>{throw s.runOutsideAngular(()=>i.handleError(d)),d}):c}catch(c){throw s.runOutsideAngular(()=>i.handleError(c)),c}}(y,d,()=>{const w=p.injector.get(Qw);return w.runInitializers(),w.donePromise.then(()=>(function iw(i){tt(i,"Expected localeId to be defined"),"string"==typeof i&&(rw=i.toLowerCase().replace(/_/g,"-"))}(p.injector.get(Ff,ya)||ya),this._moduleDoBootstrap(p),p))})})}bootstrapModule(a,c=[]){const d=hb({},c);return function Vv(i,s,a){const c=new _w(a);return Promise.resolve(c)}(0,0,a).then(p=>this.bootstrapModuleFactory(p,d))}_moduleDoBootstrap(a){const c=a.injector.get(Id);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(d=>c.bootstrap(d));else{if(!a.instance.ngDoBootstrap)throw new te(-403,!1);a.instance.ngDoBootstrap(c)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new te(404,!1);this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const a=this._injector.get(Xg,null);a&&(a.forEach(c=>c()),a.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)(Jt(yu))},i.\u0275prov=Kt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();function hb(i,s){return Array.isArray(s)?s.reduce(hb,i):{...i,...s}}let Id=(()=>{class i{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=qt(lE),this.zoneIsStable=qt(Yg),this.componentTypes=[],this.components=[],this.isStable=qt(kv).hasPendingTasks.pipe((0,Oe.z)(a=>a?(0,le.of)(!1):this.zoneIsStable),(0,de.x)(),(0,fe.B)()),this._injector=qt(vc)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(a,c){const d=a instanceof wI;if(!this._injector.get(Qw).done)throw!d&&Us(a),new te(405,!1);let y;y=d?a:this._injector.get(Js).resolveComponentFactory(a),this.componentTypes.push(y.componentType);const w=function Uv(i){return i.isBoundToModule}(y)?void 0:this._injector.get(gd),S=y.create(yu.NULL,[],c||y.selector,w),N=S.location.nativeElement,F=S.injector.get(nb,null);return F?.registerApplication(N),S.onDestroy(()=>{this.detachView(S.hostView),tm(this.components,S),F?.unregisterApplication(N)}),this._loadComponent(S),S}tick(){if(this._runningTick)throw new te(101,!1);try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this.internalErrorHandler(a)}finally{this._runningTick=!1}}attachView(a){const c=a;this._views.push(c),c.attachToAppRef(this)}detachView(a){const c=a;tm(this._views,c),c.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a);const c=this._injector.get(em,[]);c.push(...this._bootstrapListeners),c.forEach(d=>d(a))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(a=>a()),this._views.slice().forEach(a=>a.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(a){return this._destroyListeners.push(a),()=>tm(this._destroyListeners,a)}destroy(){if(this._destroyed)throw new te(406,!1);const a=this._injector;a.destroy&&!a.destroyed&&a.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Kt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function tm(i,s){const a=i.indexOf(s);a>-1&&i.splice(a,1)}const lE=new pn("",{providedIn:"root",factory:()=>qt(zl).handleError.bind(void 0)});function fb(){const i=qt(yi),s=qt(zl);return a=>i.runOutsideAngular(()=>s.handleError(a))}let pb=(()=>{class i{constructor(){this.zone=qt(yi),this.applicationRef=qt(Id)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Kt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function mb(){return!1}let Ia=(()=>{class i{}return i.__NG_ELEMENT_ID__=yb,i})();function yb(i){return function iA(i,s,a){if(vs(i)&&!a){const c=ur(i.index,s);return new ug(c,c)}return 47&i.type?new ug(s[On],s):null}(Sn(),be(),16==(16&i))}class Eb{constructor(){}supports(s){return ds(s)}create(s){return new nm(s)}}const Ib=(i,s)=>s;class nm{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||Ib}forEachItem(s){let a;for(a=this._itHead;null!==a;a=a._next)s(a)}forEachOperation(s){let a=this._itHead,c=this._removalsHead,d=0,p=null;for(;a||c;){const y=!c||a&&a.currentIndex<cA(c,d,p)?a:c,w=cA(y,d,p),D=y.currentIndex;if(y===c)d--,c=c._nextRemoved;else if(a=a._next,null==y.previousIndex)d++;else{p||(p=[]);const S=w-d,N=D-d;if(S!=N){for(let G=0;G<S;G++){const Z=G<p.length?p[G]:p[G]=0,ve=Z+G;N<=ve&&ve<S&&(p[G]=Z+1)}p[y.previousIndex]=N-S}}w!==D&&s(y,w,D)}}forEachPreviousItem(s){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachMovedItem(s){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}forEachIdentityChange(s){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)s(a)}diff(s){if(null==s&&(s=[]),!ds(s))throw new te(900,!1);return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let d,p,y,a=this._itHead,c=!1;if(Array.isArray(s)){this.length=s.length;for(let w=0;w<this.length;w++)p=s[w],y=this._trackByFn(w,p),null!==a&&Object.is(a.trackById,y)?(c&&(a=this._verifyReinsertion(a,p,y,w)),Object.is(a.item,p)||this._addIdentityChange(a,p)):(a=this._mismatch(a,p,y,w),c=!0),a=a._next}else d=0,function fg(i,s){if(Array.isArray(i))for(let a=0;a<i.length;a++)s(i[a]);else{const a=i[Symbol.iterator]();let c;for(;!(c=a.next()).done;)s(c.value)}}(s,w=>{y=this._trackByFn(d,w),null!==a&&Object.is(a.trackById,y)?(c&&(a=this._verifyReinsertion(a,w,y,d)),Object.is(a.item,w)||this._addIdentityChange(a,w)):(a=this._mismatch(a,w,y,d),c=!0),a=a._next,d++}),this.length=d;return this._truncate(a),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,a,c,d){let p;return null===s?p=this._itTail:(p=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._reinsertAfter(s,p,d)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(c,d))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._moveAfter(s,p,d)):s=this._addAfter(new uA(a,c),p,d),s}_verifyReinsertion(s,a,c,d){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==p?s=this._reinsertAfter(p,s._prev,d):s.currentIndex!=d&&(s.currentIndex=d,this._addToMoves(s,d)),s}_truncate(s){for(;null!==s;){const a=s._next;this._addToRemovals(this._unlink(s)),s=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,a,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const d=s._prevRemoved,p=s._nextRemoved;return null===d?this._removalsHead=p:d._nextRemoved=p,null===p?this._removalsTail=d:p._prevRemoved=d,this._insertAfter(s,a,c),this._addToMoves(s,c),s}_moveAfter(s,a,c){return this._unlink(s),this._insertAfter(s,a,c),this._addToMoves(s,c),s}_addAfter(s,a,c){return this._insertAfter(s,a,c),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,a,c){const d=null===a?this._itHead:a._next;return s._next=d,s._prev=a,null===d?this._itTail=s:d._prev=s,null===a?this._itHead=s:a._next=s,null===this._linkedRecords&&(this._linkedRecords=new Ca),this._linkedRecords.put(s),s.currentIndex=c,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const a=s._prev,c=s._next;return null===a?this._itHead=c:a._next=c,null===c?this._itTail=a:c._prev=a,s}_addToMoves(s,a){return s.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Ca),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,a){return s.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class uA{constructor(s,a){this.item=s,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Da{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,a){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===a||a<=c.currentIndex)&&Object.is(c.trackById,s))return c;return null}remove(s){const a=s._prevDup,c=s._nextDup;return null===a?this._head=c:a._nextDup=c,null===c?this._tail=a:c._prevDup=a,null===this._head}}class Ca{constructor(){this.map=new Map}put(s){const a=s.trackById;let c=this.map.get(a);c||(c=new Da,this.map.set(a,c)),c.add(s)}get(s,a){const d=this.map.get(s);return d?d.get(s,a):null}remove(s){const a=s.trackById;return this.map.get(a).remove(s)&&this.map.delete(a),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function cA(i,s,a){const c=i.previousIndex;if(null===c)return c;let d=0;return a&&c<a.length&&(d=a[c]),c+s+d}class $c{constructor(){}supports(s){return s instanceof Map||la(s)}create(){return new Gv}}class Gv{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let a;for(a=this._mapHead;null!==a;a=a._next)s(a)}forEachPreviousItem(s){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)s(a)}forEachChangedItem(s){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}diff(s){if(s){if(!(s instanceof Map||la(s)))throw new te(900,!1)}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(s,(c,d)=>{if(a&&a.key===d)this._maybeAddToChanges(a,c),this._appendAfter=a,a=a._next;else{const p=this._getOrCreateRecordForKey(d,c);a=this._insertBeforeOrAppend(a,p)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let c=a;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,a){if(s){const c=s._prev;return a._next=s,a._prev=c,s._prev=a,c&&(c._next=a),s===this._mapHead&&(this._mapHead=a),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(s,a){if(this._records.has(s)){const d=this._records.get(s);this._maybeAddToChanges(d,a);const p=d._prev,y=d._next;return p&&(p._next=y),y&&(y._prev=p),d._next=null,d._prev=null,d}const c=new lA(s);return this._records.set(s,c),c.currentValue=a,this._addToAdditions(c),c}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,a){Object.is(a,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=a,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,a){s instanceof Map?s.forEach(a):Object.keys(s).forEach(c=>a(s[c],c))}}class lA{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Db(){return new zv([new Eb])}let zv=(()=>{class i{constructor(a){this.factories=a}static create(a,c){if(null!=c){const d=c.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:c=>i.create(a,c||Db()),deps:[[i,new li,new $i]]}}find(a){const c=this.factories.find(d=>d.supports(a));if(null!=c)return c;throw new te(901,!1)}}return i.\u0275prov=Kt({token:i,providedIn:"root",factory:Db}),i})();function rm(){return new vE([new $c])}let vE=(()=>{class i{constructor(a){this.factories=a}static create(a,c){if(c){const d=c.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:c=>i.create(a,c||rm()),deps:[[i,new li,new $i]]}}find(a){const c=this.factories.find(d=>d.supports(a));if(c)return c;throw new te(901,!1)}}return i.\u0275prov=Kt({token:i,providedIn:"root",factory:rm}),i})();const _E=ub(null,"core",[]);let fA=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)(Jt(Id))},i.\u0275mod=ms({type:i}),i.\u0275inj=Wn({}),i})();function yA(i){return"boolean"==typeof i?i:null!=i&&"false"!==i}function _A(i){const s=Lt(i);if(!s)return null;const a=new xt(s);return{get selector(){return a.selector},get type(){return a.componentType},get inputs(){return a.inputs},get outputs(){return a.outputs},get ngContentSelectors(){return a.ngContentSelectors},get isStandalone(){return s.standalone}}}},3942:(lt,Ie,O)=>{O.d(Ie,{Z:()=>Ye});var h=O(2090),q=O(4859),P=O(6881),J=O(1877);class ne{constructor(ze,Ne){this._delegate=ze,this.firebase=Ne,(0,P._addComponent)(ze,new q.wA("app-compat",()=>this,"PUBLIC")),this.container=ze.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ze){this._delegate.automaticDataCollectionEnabled=ze}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ze=>{this._delegate.checkDestroyed(),ze()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,P.deleteApp)(this._delegate)))}_getService(ze,Ne=P._DEFAULT_ENTRY_NAME){var mt;this._delegate.checkDestroyed();const dt=this._delegate.container.getProvider(ze);return!dt.isInitialized()&&"EXPLICIT"===(null===(mt=dt.getComponent())||void 0===mt?void 0:mt.instantiationMode)&&dt.initialize(),dt.getImmediate({identifier:Ne})}_removeServiceInstance(ze,Ne=P._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ze).clearInstance(Ne)}_addComponent(ze){(0,P._addComponent)(this._delegate,ze)}_addOrOverwriteComponent(ze){(0,P._addOrOverwriteComponent)(this._delegate,ze)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const fe=new h.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),V=function de(){const Me=function Oe(Me){const ze={},Ne={__esModule:!0,initializeApp:function te(Te,Le={}){const ie=P.initializeApp(Te,Le);if((0,h.r3)(ze,ie.name))return ze[ie.name];const $e=new Me(ie,Ne);return ze[ie.name]=$e,$e},app:dt,registerVersion:P.registerVersion,setLogLevel:P.setLogLevel,onLog:P.onLog,apps:null,SDK_VERSION:P.SDK_VERSION,INTERNAL:{registerComponent:function K(Te){const Le=Te.name,ie=Le.replace("-compat","");if(P._registerComponent(Te)&&"PUBLIC"===Te.type){const $e=(Ht=dt())=>{if("function"!=typeof Ht[ie])throw fe.create("invalid-app-argument",{appName:Le});return Ht[ie]()};void 0!==Te.serviceProps&&(0,h.ZB)($e,Te.serviceProps),Ne[ie]=$e,Me.prototype[ie]=function(...Ht){return this._getService.bind(this,Le).apply(this,Te.multipleInstances?Ht:[])}}return"PUBLIC"===Te.type?Ne[ie]:null},removeApp:function mt(Te){delete ze[Te]},useAsService:function he(Te,Le){return"serverAuth"===Le?null:Le},modularAPIs:P}};function dt(Te){if(!(0,h.r3)(ze,Te=Te||P._DEFAULT_ENTRY_NAME))throw fe.create("no-app",{appName:Te});return ze[Te]}return Ne.default=Ne,Object.defineProperty(Ne,"apps",{get:function pe(){return Object.keys(ze).map(Te=>ze[Te])}}),dt.App=Me,Ne}(ne);return Me.INTERNAL=Object.assign(Object.assign({},Me.INTERNAL),{createFirebaseNamespace:de,extendNamespace:function ze(Ne){(0,h.ZB)(Me,Ne)},createSubscribe:h.ne,ErrorFactory:h.LL,deepExtend:h.ZB}),Me}(),j=new J.Yd("@firebase/app-compat");if((0,h.jU)()&&void 0!==self.firebase){j.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Me=self.firebase.SDK_VERSION;Me&&Me.indexOf("LITE")>=0&&j.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ye=V;!function Ce(Me){(0,P.registerVersion)("@firebase/app-compat","0.2.13",Me)}()},6881:(lt,Ie,O)=>{O.r(Ie),O.d(Ie,{FirebaseError:()=>J.ZR,SDK_VERSION:()=>io,_DEFAULT_ENTRY_NAME:()=>qe,_addComponent:()=>Tn,_addOrOverwriteComponent:()=>Wr,_apps:()=>yt,_clearComponents:()=>an,_components:()=>ln,_getProvider:()=>pr,_registerComponent:()=>rn,_removeServiceInstance:()=>Ma,deleteApp:()=>gr,getApp:()=>ii,getApps:()=>es,initializeApp:()=>xa,onLog:()=>ts,registerVersion:()=>mn,setLogLevel:()=>Jt});var h=O(5861),q=O(4859),P=O(1877),J=O(2090);const ne=(ue,ee)=>ee.some(xe=>ue instanceof xe);let le,fe;const V=new WeakMap,j=new WeakMap,Q=new WeakMap,Fe=new WeakMap,Ce=new WeakMap;let ze={get(ue,ee,xe){if(ue instanceof IDBTransaction){if("done"===ee)return j.get(ue);if("objectStoreNames"===ee)return ue.objectStoreNames||Q.get(ue);if("store"===ee)return xe.objectStoreNames[1]?void 0:xe.objectStore(xe.objectStoreNames[0])}return te(ue[ee])},set:(ue,ee,xe)=>(ue[ee]=xe,!0),has:(ue,ee)=>ue instanceof IDBTransaction&&("done"===ee||"store"===ee)||ee in ue};function dt(ue){return"function"==typeof ue?function mt(ue){return ue!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function de(){return fe||(fe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(ue)?function(...ee){return ue.apply(pe(this),ee),te(V.get(this))}:function(...ee){return te(ue.apply(pe(this),ee))}:function(ee,...xe){const ut=ue.call(pe(this),ee,...xe);return Q.set(ut,ee.sort?ee.sort():[ee]),te(ut)}}(ue):(ue instanceof IDBTransaction&&function Me(ue){if(j.has(ue))return;const ee=new Promise((xe,ut)=>{const At=()=>{ue.removeEventListener("complete",Ft),ue.removeEventListener("error",Yt),ue.removeEventListener("abort",Yt)},Ft=()=>{xe(),At()},Yt=()=>{ut(ue.error||new DOMException("AbortError","AbortError")),At()};ue.addEventListener("complete",Ft),ue.addEventListener("error",Yt),ue.addEventListener("abort",Yt)});j.set(ue,ee)}(ue),ne(ue,function Oe(){return le||(le=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(ue,ze):ue)}function te(ue){if(ue instanceof IDBRequest)return function Ye(ue){const ee=new Promise((xe,ut)=>{const At=()=>{ue.removeEventListener("success",Ft),ue.removeEventListener("error",Yt)},Ft=()=>{xe(te(ue.result)),At()},Yt=()=>{ut(ue.error),At()};ue.addEventListener("success",Ft),ue.addEventListener("error",Yt)});return ee.then(xe=>{xe instanceof IDBCursor&&V.set(xe,ue)}).catch(()=>{}),Ce.set(ee,ue),ee}(ue);if(Fe.has(ue))return Fe.get(ue);const ee=dt(ue);return ee!==ue&&(Fe.set(ue,ee),Ce.set(ee,ue)),ee}const pe=ue=>Ce.get(ue),Te=["get","getKey","getAll","getAllKeys","count"],Le=["put","add","delete","clear"],ie=new Map;function $e(ue,ee){if(!(ue instanceof IDBDatabase)||ee in ue||"string"!=typeof ee)return;if(ie.get(ee))return ie.get(ee);const xe=ee.replace(/FromIndex$/,""),ut=ee!==xe,At=Le.includes(xe);if(!(xe in(ut?IDBIndex:IDBObjectStore).prototype)||!At&&!Te.includes(xe))return;const Ft=function(){var Yt=(0,h.Z)(function*(rr,...Kn){const gs=this.transaction(rr,At?"readwrite":"readonly");let so=gs.store;return ut&&(so=so.index(Kn.shift())),(yield Promise.all([so[xe](...Kn),At&&gs.done]))[0]});return function(Kn){return Yt.apply(this,arguments)}}();return ie.set(ee,Ft),Ft}!function Ne(ue){ze=ue(ze)}(ue=>({...ue,get:(ee,xe,ut)=>$e(ee,xe)||ue.get(ee,xe,ut),has:(ee,xe)=>!!$e(ee,xe)||ue.has(ee,xe)}));class Ht{constructor(ee){this.container=ee}getPlatformInfoString(){return this.container.getProviders().map(xe=>{if(function fr(ue){const ee=ue.getComponent();return"VERSION"===ee?.type}(xe)){const ut=xe.getImmediate();return`${ut.library}/${ut.version}`}return null}).filter(xe=>xe).join(" ")}}const zr="@firebase/app",oe=new P.Yd("@firebase/app"),qe="[DEFAULT]",ft={[zr]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},yt=new Map,ln=new Map;function Tn(ue,ee){try{ue.container.addComponent(ee)}catch(xe){oe.debug(`Component ${ee.name} failed to register with FirebaseApp ${ue.name}`,xe)}}function Wr(ue,ee){ue.container.addOrOverwriteComponent(ee)}function rn(ue){const ee=ue.name;if(ln.has(ee))return oe.debug(`There were multiple attempts to register component ${ee}.`),!1;ln.set(ee,ue);for(const xe of yt.values())Tn(xe,ue);return!0}function pr(ue,ee){const xe=ue.container.getProvider("heartbeat").getImmediate({optional:!0});return xe&&xe.triggerHeartbeat(),ue.container.getProvider(ee)}function Ma(ue,ee,xe=qe){pr(ue,ee).clearInstance(xe)}function an(){ln.clear()}const Bt=new J.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Xi{constructor(ee,xe,ut){this._isDeleted=!1,this._options=Object.assign({},ee),this._config=Object.assign({},xe),this._name=xe.name,this._automaticDataCollectionEnabled=xe.automaticDataCollectionEnabled,this._container=ut,this.container.addComponent(new q.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ee){this.checkDestroyed(),this._automaticDataCollectionEnabled=ee}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(ee){this._isDeleted=ee}checkDestroyed(){if(this.isDeleted)throw Bt.create("app-deleted",{appName:this._name})}}const io="9.23.0";function xa(ue,ee={}){let xe=ue;"object"!=typeof ee&&(ee={name:ee});const ut=Object.assign({name:qe,automaticDataCollectionEnabled:!1},ee),At=ut.name;if("string"!=typeof At||!At)throw Bt.create("bad-app-name",{appName:String(At)});if(xe||(xe=(0,J.aH)()),!xe)throw Bt.create("no-options");const Ft=yt.get(At);if(Ft){if((0,J.vZ)(xe,Ft.options)&&(0,J.vZ)(ut,Ft.config))return Ft;throw Bt.create("duplicate-app",{appName:At})}const Yt=new q.H0(At);for(const Kn of ln.values())Yt.addComponent(Kn);const rr=new Xi(xe,ut,Yt);return yt.set(At,rr),rr}function ii(ue=qe){const ee=yt.get(ue);if(!ee&&ue===qe&&(0,J.aH)())return xa();if(!ee)throw Bt.create("no-app",{appName:ue});return ee}function es(){return Array.from(yt.values())}function gr(ue){return nr.apply(this,arguments)}function nr(){return(nr=(0,h.Z)(function*(ue){const ee=ue.name;yt.has(ee)&&(yt.delete(ee),yield Promise.all(ue.container.getProviders().map(xe=>xe.delete())),ue.isDeleted=!0)})).apply(this,arguments)}function mn(ue,ee,xe){var ut;let At=null!==(ut=ft[ue])&&void 0!==ut?ut:ue;xe&&(At+=`-${xe}`);const Ft=At.match(/\s|\//),Yt=ee.match(/\s|\//);if(Ft||Yt){const rr=[`Unable to register library "${At}" with version "${ee}":`];return Ft&&rr.push(`library name "${At}" contains illegal characters (whitespace or "/")`),Ft&&Yt&&rr.push("and"),Yt&&rr.push(`version name "${ee}" contains illegal characters (whitespace or "/")`),void oe.warn(rr.join(" "))}rn(new q.wA(`${At}-version`,()=>({library:At,version:ee}),"VERSION"))}function ts(ue,ee){if(null!==ue&&"function"!=typeof ue)throw Bt.create("invalid-log-argument");(0,P.Am)(ue,ee)}function Jt(ue){(0,P.Ub)(ue)}const ns="firebase-heartbeat-database",qt=1,U="firebase-heartbeat-store";let L=null;function z(){return L||(L=function K(ue,ee,{blocked:xe,upgrade:ut,blocking:At,terminated:Ft}={}){const Yt=indexedDB.open(ue,ee),rr=te(Yt);return ut&&Yt.addEventListener("upgradeneeded",Kn=>{ut(te(Yt.result),Kn.oldVersion,Kn.newVersion,te(Yt.transaction),Kn)}),xe&&Yt.addEventListener("blocked",Kn=>xe(Kn.oldVersion,Kn.newVersion,Kn)),rr.then(Kn=>{Ft&&Kn.addEventListener("close",()=>Ft()),At&&Kn.addEventListener("versionchange",gs=>At(gs.oldVersion,gs.newVersion,gs))}).catch(()=>{}),rr}(ns,qt,{upgrade:(ue,ee)=>{0===ee&&ue.createObjectStore(U)}}).catch(ue=>{throw Bt.create("idb-open",{originalErrorMessage:ue.message})})),L}function se(){return(se=(0,h.Z)(function*(ue){try{return yield(yield z()).transaction(U).objectStore(U).get(Nt(ue))}catch(ee){if(ee instanceof J.ZR)oe.warn(ee.message);else{const xe=Bt.create("idb-get",{originalErrorMessage:ee?.message});oe.warn(xe.message)}}})).apply(this,arguments)}function nt(ue,ee){return pt.apply(this,arguments)}function pt(){return(pt=(0,h.Z)(function*(ue,ee){try{const ut=(yield z()).transaction(U,"readwrite");yield ut.objectStore(U).put(ee,Nt(ue)),yield ut.done}catch(xe){if(xe instanceof J.ZR)oe.warn(xe.message);else{const ut=Bt.create("idb-set",{originalErrorMessage:xe?.message});oe.warn(ut.message)}}})).apply(this,arguments)}function Nt(ue){return`${ue.name}!${ue.options.appId}`}class bt{constructor(ee){this.container=ee,this._heartbeatsCache=null;const xe=this.container.getProvider("app").getImmediate();this._storage=new vi(xe),this._heartbeatsCachePromise=this._storage.read().then(ut=>(this._heartbeatsCache=ut,ut))}triggerHeartbeat(){var ee=this;return(0,h.Z)(function*(){const ut=ee.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),At=Gt();if(null===ee._heartbeatsCache&&(ee._heartbeatsCache=yield ee._heartbeatsCachePromise),ee._heartbeatsCache.lastSentHeartbeatDate!==At&&!ee._heartbeatsCache.heartbeats.some(Ft=>Ft.date===At))return ee._heartbeatsCache.heartbeats.push({date:At,agent:ut}),ee._heartbeatsCache.heartbeats=ee._heartbeatsCache.heartbeats.filter(Ft=>{const Yt=new Date(Ft.date).valueOf();return Date.now()-Yt<=2592e6}),ee._storage.overwrite(ee._heartbeatsCache)})()}getHeartbeatsHeader(){var ee=this;return(0,h.Z)(function*(){if(null===ee._heartbeatsCache&&(yield ee._heartbeatsCachePromise),null===ee._heartbeatsCache||0===ee._heartbeatsCache.heartbeats.length)return"";const xe=Gt(),{heartbeatsToSend:ut,unsentEntries:At}=function mr(ue,ee=1024){const xe=[];let ut=ue.slice();for(const At of ue){const Ft=xe.find(Yt=>Yt.agent===At.agent);if(Ft){if(Ft.dates.push(At.date),rs(xe)>ee){Ft.dates.pop();break}}else if(xe.push({agent:At.agent,dates:[At.date]}),rs(xe)>ee){xe.pop();break}ut=ut.slice(1)}return{heartbeatsToSend:xe,unsentEntries:ut}}(ee._heartbeatsCache.heartbeats),Ft=(0,J.L)(JSON.stringify({version:2,heartbeats:ut}));return ee._heartbeatsCache.lastSentHeartbeatDate=xe,At.length>0?(ee._heartbeatsCache.heartbeats=At,yield ee._storage.overwrite(ee._heartbeatsCache)):(ee._heartbeatsCache.heartbeats=[],ee._storage.overwrite(ee._heartbeatsCache)),Ft})()}}function Gt(){return(new Date).toISOString().substring(0,10)}class vi{constructor(ee){this.app=ee,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,h.Z)(function*(){return!!(0,J.hl)()&&(0,J.eu)().then(()=>!0).catch(()=>!1)})()}read(){var ee=this;return(0,h.Z)(function*(){return(yield ee._canUseIndexedDBPromise)&&(yield function _e(ue){return se.apply(this,arguments)}(ee.app))||{heartbeats:[]}})()}overwrite(ee){var xe=this;return(0,h.Z)(function*(){var ut;if(yield xe._canUseIndexedDBPromise){const Ft=yield xe.read();return nt(xe.app,{lastSentHeartbeatDate:null!==(ut=ee.lastSentHeartbeatDate)&&void 0!==ut?ut:Ft.lastSentHeartbeatDate,heartbeats:ee.heartbeats})}})()}add(ee){var xe=this;return(0,h.Z)(function*(){var ut;if(yield xe._canUseIndexedDBPromise){const Ft=yield xe.read();return nt(xe.app,{lastSentHeartbeatDate:null!==(ut=ee.lastSentHeartbeatDate)&&void 0!==ut?ut:Ft.lastSentHeartbeatDate,heartbeats:[...Ft.heartbeats,...ee.heartbeats]})}})()}}function rs(ue){return(0,J.L)(JSON.stringify({version:2,heartbeats:ue})).length}!function si(ue){rn(new q.wA("platform-logger",ee=>new Ht(ee),"PRIVATE")),rn(new q.wA("heartbeat",ee=>new bt(ee),"PRIVATE")),mn(zr,"0.9.13",ue),mn(zr,"0.9.13","esm2017"),mn("fire-js","")}("")},4859:(lt,Ie,O)=>{O.d(Ie,{H0:()=>Oe,wA:()=>P});var h=O(5861),q=O(2090);class P{constructor(V,j,Q){this.name=V,this.instanceFactory=j,this.type=Q,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(V){return this.instantiationMode=V,this}setMultipleInstances(V){return this.multipleInstances=V,this}setServiceProps(V){return this.serviceProps=V,this}setInstanceCreatedCallback(V){return this.onInstanceCreated=V,this}}const J="[DEFAULT]";class ne{constructor(V,j){this.name=V,this.container=j,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(V){const j=this.normalizeInstanceIdentifier(V);if(!this.instancesDeferred.has(j)){const Q=new q.BH;if(this.instancesDeferred.set(j,Q),this.isInitialized(j)||this.shouldAutoInitialize())try{const Fe=this.getOrInitializeService({instanceIdentifier:j});Fe&&Q.resolve(Fe)}catch{}}return this.instancesDeferred.get(j).promise}getImmediate(V){var j;const Q=this.normalizeInstanceIdentifier(V?.identifier),Fe=null!==(j=V?.optional)&&void 0!==j&&j;if(!this.isInitialized(Q)&&!this.shouldAutoInitialize()){if(Fe)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Q})}catch(Ce){if(Fe)return null;throw Ce}}getComponent(){return this.component}setComponent(V){if(V.name!==this.name)throw Error(`Mismatching Component ${V.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=V,this.shouldAutoInitialize()){if(function fe(de){return"EAGER"===de.instantiationMode}(V))try{this.getOrInitializeService({instanceIdentifier:J})}catch{}for(const[j,Q]of this.instancesDeferred.entries()){const Fe=this.normalizeInstanceIdentifier(j);try{const Ce=this.getOrInitializeService({instanceIdentifier:Fe});Q.resolve(Ce)}catch{}}}}clearInstance(V=J){this.instancesDeferred.delete(V),this.instancesOptions.delete(V),this.instances.delete(V)}delete(){var V=this;return(0,h.Z)(function*(){const j=Array.from(V.instances.values());yield Promise.all([...j.filter(Q=>"INTERNAL"in Q).map(Q=>Q.INTERNAL.delete()),...j.filter(Q=>"_delete"in Q).map(Q=>Q._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(V=J){return this.instances.has(V)}getOptions(V=J){return this.instancesOptions.get(V)||{}}initialize(V={}){const{options:j={}}=V,Q=this.normalizeInstanceIdentifier(V.instanceIdentifier);if(this.isInitialized(Q))throw Error(`${this.name}(${Q}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Fe=this.getOrInitializeService({instanceIdentifier:Q,options:j});for(const[Ce,Ye]of this.instancesDeferred.entries())Q===this.normalizeInstanceIdentifier(Ce)&&Ye.resolve(Fe);return Fe}onInit(V,j){var Q;const Fe=this.normalizeInstanceIdentifier(j),Ce=null!==(Q=this.onInitCallbacks.get(Fe))&&void 0!==Q?Q:new Set;Ce.add(V),this.onInitCallbacks.set(Fe,Ce);const Ye=this.instances.get(Fe);return Ye&&V(Ye,Fe),()=>{Ce.delete(V)}}invokeOnInitCallbacks(V,j){const Q=this.onInitCallbacks.get(j);if(Q)for(const Fe of Q)try{Fe(V,j)}catch{}}getOrInitializeService({instanceIdentifier:V,options:j={}}){let Q=this.instances.get(V);if(!Q&&this.component&&(Q=this.component.instanceFactory(this.container,{instanceIdentifier:(de=V,de===J?void 0:de),options:j}),this.instances.set(V,Q),this.instancesOptions.set(V,j),this.invokeOnInitCallbacks(Q,V),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,V,Q)}catch{}var de;return Q||null}normalizeInstanceIdentifier(V=J){return this.component?this.component.multipleInstances?V:J:V}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Oe{constructor(V){this.name=V,this.providers=new Map}addComponent(V){const j=this.getProvider(V.name);if(j.isComponentSet())throw new Error(`Component ${V.name} has already been registered with ${this.name}`);j.setComponent(V)}addOrOverwriteComponent(V){this.getProvider(V.name).isComponentSet()&&this.providers.delete(V.name),this.addComponent(V)}getProvider(V){if(this.providers.has(V))return this.providers.get(V);const j=new ne(V,this);return this.providers.set(V,j),j}getProviders(){return Array.from(this.providers.values())}}},1877:(lt,Ie,O)=>{O.d(Ie,{Am:()=>de,Ub:()=>Oe,Yd:()=>fe,in:()=>q});const h=[];var q=(()=>((q=q||{})[q.DEBUG=0]="DEBUG",q[q.VERBOSE=1]="VERBOSE",q[q.INFO=2]="INFO",q[q.WARN=3]="WARN",q[q.ERROR=4]="ERROR",q[q.SILENT=5]="SILENT",q))();const P={debug:q.DEBUG,verbose:q.VERBOSE,info:q.INFO,warn:q.WARN,error:q.ERROR,silent:q.SILENT},J=q.INFO,ne={[q.DEBUG]:"log",[q.VERBOSE]:"log",[q.INFO]:"info",[q.WARN]:"warn",[q.ERROR]:"error"},le=(V,j,...Q)=>{if(j<V.logLevel)return;const Fe=(new Date).toISOString(),Ce=ne[j];if(!Ce)throw new Error(`Attempted to log a message with an invalid logType (value: ${j})`);console[Ce](`[${Fe}]  ${V.name}:`,...Q)};class fe{constructor(j){this.name=j,this._logLevel=J,this._logHandler=le,this._userLogHandler=null,h.push(this)}get logLevel(){return this._logLevel}set logLevel(j){if(!(j in q))throw new TypeError(`Invalid value "${j}" assigned to \`logLevel\``);this._logLevel=j}setLogLevel(j){this._logLevel="string"==typeof j?P[j]:j}get logHandler(){return this._logHandler}set logHandler(j){if("function"!=typeof j)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=j}get userLogHandler(){return this._userLogHandler}set userLogHandler(j){this._userLogHandler=j}debug(...j){this._userLogHandler&&this._userLogHandler(this,q.DEBUG,...j),this._logHandler(this,q.DEBUG,...j)}log(...j){this._userLogHandler&&this._userLogHandler(this,q.VERBOSE,...j),this._logHandler(this,q.VERBOSE,...j)}info(...j){this._userLogHandler&&this._userLogHandler(this,q.INFO,...j),this._logHandler(this,q.INFO,...j)}warn(...j){this._userLogHandler&&this._userLogHandler(this,q.WARN,...j),this._logHandler(this,q.WARN,...j)}error(...j){this._userLogHandler&&this._userLogHandler(this,q.ERROR,...j),this._logHandler(this,q.ERROR,...j)}}function Oe(V){h.forEach(j=>{j.setLogLevel(V)})}function de(V,j){for(const Q of h){let Fe=null;j&&j.level&&(Fe=P[j.level]),Q.userLogHandler=null===V?null:(Ce,Ye,...Me)=>{const ze=Me.map(Ne=>{if(null==Ne)return null;if("string"==typeof Ne)return Ne;if("number"==typeof Ne||"boolean"==typeof Ne)return Ne.toString();if(Ne instanceof Error)return Ne.message;try{return JSON.stringify(Ne)}catch{return null}}).filter(Ne=>Ne).join(" ");Ye>=(Fe??Ce.logLevel)&&V({level:q[Ye].toLowerCase(),message:ze,args:Me,type:Ce.name})}}}},259:(lt,Ie,O)=>{O.d(Ie,{C6:()=>h.getApps,Mq:()=>h.getApp});var h=O(6881);(0,h.registerVersion)("firebase","9.23.0","app")},9260:(lt,Ie,O)=>{O.d(Ie,{Z:()=>h.Z});var h=O(3942);h.Z.registerVersion("firebase","9.23.0","app-compat")},2644:(lt,Ie,O)=>{O.r(Ie);var h=O(5861),q=O(3942),P=O(2090),J=O(6881),ne=O(7582),le=O(1877),fe=O(4859);const de={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"};const Ye=function Fe(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},Me=function Ce(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ze=new P.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),mt=new le.Yd("@firebase/auth");function te(v,...f){mt.logLevel<=le.in.ERROR&&mt.error(`Auth (${J.SDK_VERSION}): ${v}`,...f)}function pe(v,...f){throw Le(v,...f)}function K(v,...f){return Le(v,...f)}function he(v,f,g){const _=Object.assign(Object.assign({},Me()),{[f]:g});return new P.LL("auth","Firebase",_).create(f,{appName:v.name})}function Te(v,f,g){if(!(f instanceof g))throw g.name!==f.constructor.name&&pe(v,"argument-error"),he(v,"argument-error",`Type of ${f.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Le(v,...f){if("string"!=typeof v){const g=f[0],_=[...f.slice(1)];return _[0]&&(_[0].appName=v.name),v._errorFactory.create(g,..._)}return ze.create(v,...f)}function ie(v,f,...g){if(!v)throw Le(f,...g)}function $e(v){const f="INTERNAL ASSERTION FAILED: "+v;throw te(f),new Error(f)}function Ht(v,f){v||$e(f)}function fr(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.href)||""}function zr(){return"http:"===Fs()||"https:"===Fs()}function Fs(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.protocol)||null}class Ee{constructor(f,g){this.shortDelay=f,this.longDelay=g,Ht(g>f,"Short delay should be less than long delay!"),this.isMobile=(0,P.uI)()||(0,P.b$)()}get(){return function oe(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(zr()||(0,P.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Ae(v,f){Ht(v.emulator,"Emulator should always be set here");const{url:g}=v.emulator;return f?`${g}${f.startsWith("/")?f.slice(1):f}`:g}class He{static initialize(f,g,_){this.fetchImpl=f,g&&(this.headersImpl=g),_&&(this.responseImpl=_)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void $e("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void $e("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void $e("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Ve={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},It=new Ee(3e4,6e4);function Xe(v,f){return v.tenantId&&!f.tenantId?Object.assign(Object.assign({},f),{tenantId:v.tenantId}):f}function Ut(v,f,g,_){return tt.apply(this,arguments)}function tt(){return(tt=(0,h.Z)(function*(v,f,g,_,T={}){return ht(v,T,(0,h.Z)(function*(){let x={},B={};_&&("GET"===f?B=_:x={body:JSON.stringify(_)});const Y=(0,P.xO)(Object.assign({key:v.config.apiKey},B)).slice(1),Se=yield v._getAdditionalHeaders();return Se["Content-Type"]="application/json",v.languageCode&&(Se["X-Firebase-Locale"]=v.languageCode),He.fetch()(Kt(v,v.config.apiHost,g,Y),Object.assign({method:f,headers:Se,referrerPolicy:"no-referrer"},x))}))})).apply(this,arguments)}function ht(v,f,g){return _n.apply(this,arguments)}function _n(){return(_n=(0,h.Z)(function*(v,f,g){v._canInitEmulator=!1;const _=Object.assign(Object.assign({},Ve),f);try{const T=new ti(v),x=yield Promise.race([g(),T.promise]);T.clearNetworkTimeout();const B=yield x.json();if("needConfirmation"in B)throw Wn(v,"account-exists-with-different-credential",B);if(x.ok&&!("errorMessage"in B))return B;{const Y=x.ok?B.errorMessage:B.error.message,[Se,Ge]=Y.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Se)throw Wn(v,"credential-already-in-use",B);if("EMAIL_EXISTS"===Se)throw Wn(v,"email-already-in-use",B);if("USER_DISABLED"===Se)throw Wn(v,"user-disabled",B);const et=_[Se]||Se.toLowerCase().replace(/[_\s]+/g,"-");if(Ge)throw he(v,et,Ge);pe(v,et)}}catch(T){if(T instanceof P.ZR)throw T;pe(v,"network-request-failed",{message:String(T)})}})).apply(this,arguments)}function tn(v,f,g,_){return Rn.apply(this,arguments)}function Rn(){return(Rn=(0,h.Z)(function*(v,f,g,_,T={}){const x=yield Ut(v,f,g,_,T);return"mfaPendingCredential"in x&&pe(v,"multi-factor-auth-required",{_serverResponse:x}),x})).apply(this,arguments)}function Kt(v,f,g,_){const T=`${f}${g}?${_}`;return v.config.emulator?Ae(v.config,T):`${v.config.apiScheme}://${T}`}class ti{constructor(f){this.auth=f,this.timer=null,this.promise=new Promise((g,_)=>{this.timer=setTimeout(()=>_(K(this.auth,"network-request-failed")),It.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Wn(v,f,g){const _={appName:v.name};g.email&&(_.email=g.email),g.phoneNumber&&(_.phoneNumber=g.phoneNumber);const T=K(v,f,_);return T.customData._tokenResponse=g,T}function Zn(){return(Zn=(0,h.Z)(function*(v,f){return Ut(v,"POST","/v1/accounts:delete",f)})).apply(this,arguments)}function ro(){return(ro=(0,h.Z)(function*(v,f){return Ut(v,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function ni(){return(ni=(0,h.Z)(function*(v,f){return Ut(v,"POST","/v1/accounts:lookup",f)})).apply(this,arguments)}function ri(v){if(v)try{const f=new Date(Number(v));if(!isNaN(f.getTime()))return f.toUTCString()}catch{}}function qe(){return(qe=(0,h.Z)(function*(v,f=!1){const g=(0,P.m9)(v),_=yield g.getIdToken(f),T=yt(_);ie(T&&T.exp&&T.auth_time&&T.iat,g.auth,"internal-error");const x="object"==typeof T.firebase?T.firebase:void 0,B=x?.sign_in_provider;return{claims:T,token:_,authTime:ri(ft(T.auth_time)),issuedAtTime:ri(ft(T.iat)),expirationTime:ri(ft(T.exp)),signInProvider:B||null,signInSecondFactor:x?.sign_in_second_factor||null}})).apply(this,arguments)}function ft(v){return 1e3*Number(v)}function yt(v){const[f,g,_]=v.split(".");if(void 0===f||void 0===g||void 0===_)return te("JWT malformed, contained fewer than 3 sections"),null;try{const T=(0,P.tV)(g);return T?JSON.parse(T):(te("Failed to decode base64 JWT payload"),null)}catch(T){return te("Caught error parsing JWT payload as JSON",T?.toString()),null}}function Tn(v,f){return Wr.apply(this,arguments)}function Wr(){return(Wr=(0,h.Z)(function*(v,f,g=!1){if(g)return f;try{return yield f}catch(_){throw _ instanceof P.ZR&&function rn({code:v}){return"auth/user-disabled"===v||"auth/user-token-expired"===v}(_)&&v.auth.currentUser===v&&(yield v.auth.signOut()),_}})).apply(this,arguments)}class pr{constructor(f){this.user=f,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(f){var g;if(f){const _=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),_}{this.errorBackoff=3e4;const T=(null!==(g=this.user.stsTokenManager.expirationTime)&&void 0!==g?g:0)-Date.now()-3e5;return Math.max(0,T)}}schedule(f=!1){var g=this;if(!this.isRunning)return;const _=this.getInterval(f);this.timerId=setTimeout((0,h.Z)(function*(){yield g.iteration()}),_)}iteration(){var f=this;return(0,h.Z)(function*(){try{yield f.user.getIdToken(!0)}catch(g){return void("auth/network-request-failed"===g?.code&&f.schedule(!0))}f.schedule()})()}}class Ma{constructor(f,g){this.createdAt=f,this.lastLoginAt=g,this._initializeTime()}_initializeTime(){this.lastSignInTime=ri(this.lastLoginAt),this.creationTime=ri(this.createdAt)}_copy(f){this.createdAt=f.createdAt,this.lastLoginAt=f.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function an(v){return Mr.apply(this,arguments)}function Mr(){return Mr=(0,h.Z)(function*(v){var f;const g=v.auth,_=yield v.getIdToken(),T=yield Tn(v,function Sa(v,f){return ni.apply(this,arguments)}(g,{idToken:_}));ie(T?.users.length,g,"internal-error");const x=T.users[0];v._notifyReloadListener(x);const B=null!==(f=x.providerUserInfo)&&void 0!==f&&f.length?function xa(v){return v.map(f=>{var{providerId:g}=f,_=(0,ne._T)(f,["providerId"]);return{providerId:g,uid:_.rawId||"",displayName:_.displayName||null,email:_.email||null,phoneNumber:_.phoneNumber||null,photoURL:_.photoUrl||null}})}(x.providerUserInfo):[],Y=function io(v,f){return[...v.filter(_=>!f.some(T=>T.providerId===_.providerId)),...f]}(v.providerData,B),et=!!v.isAnonymous&&!(v.email&&x.passwordHash||Y?.length),rt={uid:x.localId,displayName:x.displayName||null,photoURL:x.photoUrl||null,email:x.email||null,emailVerified:x.emailVerified||!1,phoneNumber:x.phoneNumber||null,tenantId:x.tenantId||null,providerData:Y,metadata:new Ma(x.createdAt,x.lastLoginAt),isAnonymous:et};Object.assign(v,rt)}),Mr.apply(this,arguments)}function Xi(){return(Xi=(0,h.Z)(function*(v){const f=(0,P.m9)(v);yield an(f),yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)})).apply(this,arguments)}function es(){return(es=(0,h.Z)(function*(v,f){const g=yield ht(v,{},(0,h.Z)(function*(){const _=(0,P.xO)({grant_type:"refresh_token",refresh_token:f}).slice(1),{tokenApiHost:T,apiKey:x}=v.config,B=Kt(v,T,"/v1/token",`key=${x}`),Y=yield v._getAdditionalHeaders();return Y["Content-Type"]="application/x-www-form-urlencoded",He.fetch()(B,{method:"POST",headers:Y,body:_})}));return{accessToken:g.access_token,expiresIn:g.expires_in,refreshToken:g.refresh_token}})).apply(this,arguments)}class gr{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(f){ie(f.idToken,"internal-error"),ie(typeof f.idToken<"u","internal-error"),ie(typeof f.refreshToken<"u","internal-error");const g="expiresIn"in f&&typeof f.expiresIn<"u"?Number(f.expiresIn):function ln(v){const f=yt(v);return ie(f,"internal-error"),ie(typeof f.exp<"u","internal-error"),ie(typeof f.iat<"u","internal-error"),Number(f.exp)-Number(f.iat)}(f.idToken);this.updateTokensAndExpiration(f.idToken,f.refreshToken,g)}getToken(f,g=!1){var _=this;return(0,h.Z)(function*(){return ie(!_.accessToken||_.refreshToken,f,"user-token-expired"),g||!_.accessToken||_.isExpired?_.refreshToken?(yield _.refresh(f,_.refreshToken),_.accessToken):null:_.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(f,g){var _=this;return(0,h.Z)(function*(){const{accessToken:T,refreshToken:x,expiresIn:B}=yield function ii(v,f){return es.apply(this,arguments)}(f,g);_.updateTokensAndExpiration(T,x,Number(B))})()}updateTokensAndExpiration(f,g,_){this.refreshToken=g||null,this.accessToken=f||null,this.expirationTime=Date.now()+1e3*_}static fromJSON(f,g){const{refreshToken:_,accessToken:T,expirationTime:x}=g,B=new gr;return _&&(ie("string"==typeof _,"internal-error",{appName:f}),B.refreshToken=_),T&&(ie("string"==typeof T,"internal-error",{appName:f}),B.accessToken=T),x&&(ie("number"==typeof x,"internal-error",{appName:f}),B.expirationTime=x),B}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(f){this.accessToken=f.accessToken,this.refreshToken=f.refreshToken,this.expirationTime=f.expirationTime}_clone(){return Object.assign(new gr,this.toJSON())}_performRefresh(){return $e("not implemented")}}function nr(v,f){ie("string"==typeof v||typeof v>"u","internal-error",{appName:f})}class mn{constructor(f){var{uid:g,auth:_,stsTokenManager:T}=f,x=(0,ne._T)(f,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new pr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=g,this.auth=_,this.stsTokenManager=T,this.accessToken=T.accessToken,this.displayName=x.displayName||null,this.email=x.email||null,this.emailVerified=x.emailVerified||!1,this.phoneNumber=x.phoneNumber||null,this.photoURL=x.photoURL||null,this.isAnonymous=x.isAnonymous||!1,this.tenantId=x.tenantId||null,this.providerData=x.providerData?[...x.providerData]:[],this.metadata=new Ma(x.createdAt||void 0,x.lastLoginAt||void 0)}getIdToken(f){var g=this;return(0,h.Z)(function*(){const _=yield Tn(g,g.stsTokenManager.getToken(g.auth,f));return ie(_,g.auth,"internal-error"),g.accessToken!==_&&(g.accessToken=_,yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)),_})()}getIdTokenResult(f){return function Aa(v){return qe.apply(this,arguments)}(this,f)}reload(){return function Bt(v){return Xi.apply(this,arguments)}(this)}_assign(f){this!==f&&(ie(this.uid===f.uid,this.auth,"internal-error"),this.displayName=f.displayName,this.photoURL=f.photoURL,this.email=f.email,this.emailVerified=f.emailVerified,this.phoneNumber=f.phoneNumber,this.isAnonymous=f.isAnonymous,this.tenantId=f.tenantId,this.providerData=f.providerData.map(g=>Object.assign({},g)),this.metadata._copy(f.metadata),this.stsTokenManager._assign(f.stsTokenManager))}_clone(f){const g=new mn(Object.assign(Object.assign({},this),{auth:f,stsTokenManager:this.stsTokenManager._clone()}));return g.metadata._copy(this.metadata),g}_onReload(f){ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=f,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(f){this.reloadListener?this.reloadListener(f):this.reloadUserInfo=f}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(f,g=!1){var _=this;return(0,h.Z)(function*(){let T=!1;f.idToken&&f.idToken!==_.stsTokenManager.accessToken&&(_.stsTokenManager.updateFromServerResponse(f),T=!0),g&&(yield an(_)),yield _.auth._persistUserIfCurrent(_),T&&_.auth._notifyListenersIfCurrent(_)})()}delete(){var f=this;return(0,h.Z)(function*(){const g=yield f.getIdToken();return yield Tn(f,function qr(v,f){return Zn.apply(this,arguments)}(f.auth,{idToken:g})),f.stsTokenManager.clearRefreshToken(),f.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(f=>Object.assign({},f)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(f,g){var _,T,x,B,Y,Se,Ge,et;const rt=null!==(_=g.displayName)&&void 0!==_?_:void 0,Pn=null!==(T=g.email)&&void 0!==T?T:void 0,Ts=null!==(x=g.phoneNumber)&&void 0!==x?x:void 0,wh=null!==(B=g.photoURL)&&void 0!==B?B:void 0,Op=null!==(Y=g.tenantId)&&void 0!==Y?Y:void 0,Pp=null!==(Se=g._redirectEventId)&&void 0!==Se?Se:void 0,Eh=null!==(Ge=g.createdAt)&&void 0!==Ge?Ge:void 0,kl=null!==(et=g.lastLoginAt)&&void 0!==et?et:void 0,{uid:kp,emailVerified:Ih,isAnonymous:Dh,providerData:Ai,stsTokenManager:Ch}=g;ie(kp&&Ch,f,"internal-error");const Et=gr.fromJSON(this.name,Ch);ie("string"==typeof kp,f,"internal-error"),nr(rt,f.name),nr(Pn,f.name),ie("boolean"==typeof Ih,f,"internal-error"),ie("boolean"==typeof Dh,f,"internal-error"),nr(Ts,f.name),nr(wh,f.name),nr(Op,f.name),nr(Pp,f.name),nr(Eh,f.name),nr(kl,f.name);const Dr=new mn({uid:kp,auth:f,email:Pn,emailVerified:Ih,displayName:rt,isAnonymous:Dh,photoURL:wh,phoneNumber:Ts,tenantId:Op,stsTokenManager:Et,createdAt:Eh,lastLoginAt:kl});return Ai&&Array.isArray(Ai)&&(Dr.providerData=Ai.map(gc=>Object.assign({},gc))),Pp&&(Dr._redirectEventId=Pp),Dr}static _fromIdTokenResponse(f,g,_=!1){return(0,h.Z)(function*(){const T=new gr;T.updateFromServerResponse(g);const x=new mn({uid:g.localId,auth:f,stsTokenManager:T,isAnonymous:_});return yield an(x),x})()}}const ts=new Map;function Jt(v){Ht(v instanceof Function,"Expected a class definition");let f=ts.get(v);return f?(Ht(f instanceof v,"Instance stored in cache mismatched with class"),f):(f=new v,ts.set(v,f),f)}const qt=(()=>{class v{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,h.Z)(function*(){return!0})()}_set(g,_){var T=this;return(0,h.Z)(function*(){T.storage[g]=_})()}_get(g){var _=this;return(0,h.Z)(function*(){const T=_.storage[g];return void 0===T?null:T})()}_remove(g){var _=this;return(0,h.Z)(function*(){delete _.storage[g]})()}_addListener(g,_){}_removeListener(g,_){}}return v.type="NONE",v})();function U(v,f,g){return`firebase:${v}:${f}:${g}`}class L{constructor(f,g,_){this.persistence=f,this.auth=g,this.userKey=_;const{config:T,name:x}=this.auth;this.fullUserKey=U(this.userKey,T.apiKey,x),this.fullPersistenceKey=U("persistence",T.apiKey,x),this.boundEventHandler=g._onStorageEvent.bind(g),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(f){return this.persistence._set(this.fullUserKey,f.toJSON())}getCurrentUser(){var f=this;return(0,h.Z)(function*(){const g=yield f.persistence._get(f.fullUserKey);return g?mn._fromJSON(f.auth,g):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(f){var g=this;return(0,h.Z)(function*(){if(g.persistence===f)return;const _=yield g.getCurrentUser();return yield g.removeCurrentUser(),g.persistence=f,_?g.setCurrentUser(_):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(f,g,_="authUser"){return(0,h.Z)(function*(){if(!g.length)return new L(Jt(qt),f,_);const T=(yield Promise.all(g.map(function(){var Ge=(0,h.Z)(function*(et){if(yield et._isAvailable())return et});return function(et){return Ge.apply(this,arguments)}}()))).filter(Ge=>Ge);let x=T[0]||Jt(qt);const B=U(_,f.config.apiKey,f.name);let Y=null;for(const Ge of g)try{const et=yield Ge._get(B);if(et){const rt=mn._fromJSON(f,et);Ge!==x&&(Y=rt),x=Ge;break}}catch{}const Se=T.filter(Ge=>Ge._shouldAllowMigration);return x._shouldAllowMigration&&Se.length?(x=Se[0],Y&&(yield x._set(B,Y.toJSON())),yield Promise.all(g.map(function(){var Ge=(0,h.Z)(function*(et){if(et!==x)try{yield et._remove(B)}catch{}});return function(et){return Ge.apply(this,arguments)}}())),new L(x,f,_)):new L(x,f,_)})()}}function z(v){const f=v.toLowerCase();if(f.includes("opera/")||f.includes("opr/")||f.includes("opios/"))return"Opera";if(pt(f))return"IEMobile";if(f.includes("msie")||f.includes("trident/"))return"IE";if(f.includes("edge/"))return"Edge";if(_e(f))return"Firefox";if(f.includes("silk/"))return"Silk";if(yn(f))return"Blackberry";if(dn(f))return"Webos";if(se(f))return"Safari";if((f.includes("chrome/")||nt(f))&&!f.includes("edge/"))return"Chrome";if(Nt(f))return"Android";{const _=v.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===_?.length)return _[1]}return"Other"}function _e(v=(0,P.z$)()){return/firefox\//i.test(v)}function se(v=(0,P.z$)()){const f=v.toLowerCase();return f.includes("safari/")&&!f.includes("chrome/")&&!f.includes("crios/")&&!f.includes("android")}function nt(v=(0,P.z$)()){return/crios\//i.test(v)}function pt(v=(0,P.z$)()){return/iemobile/i.test(v)}function Nt(v=(0,P.z$)()){return/android/i.test(v)}function yn(v=(0,P.z$)()){return/blackberry/i.test(v)}function dn(v=(0,P.z$)()){return/webos/i.test(v)}function bt(v=(0,P.z$)()){return/iphone|ipad|ipod/i.test(v)||/macintosh/i.test(v)&&/mobile/i.test(v)}function rs(v=(0,P.z$)()){return bt(v)||Nt(v)||dn(v)||yn(v)||/windows phone/i.test(v)||pt(v)}function ue(v,f=[]){let g;switch(v){case"Browser":g=z((0,P.z$)());break;case"Worker":g=`${z((0,P.z$)())}-${v}`;break;default:g=v}const _=f.length?f.join(","):"FirebaseCore-web";return`${g}/JsCore/${J.SDK_VERSION}/${_}`}function xe(){return(xe=(0,h.Z)(function*(v){return(yield Ut(v,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function ut(v,f){return At.apply(this,arguments)}function At(){return(At=(0,h.Z)(function*(v,f){return Ut(v,"GET","/v2/recaptchaConfig",Xe(v,f))})).apply(this,arguments)}function Ft(v){return void 0!==v&&void 0!==v.getResponse}function Yt(v){return void 0!==v&&void 0!==v.enterprise}class rr{constructor(f){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===f.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=f.recaptchaKey.split("/")[3],this.emailPasswordEnabled=f.recaptchaEnforcementState.some(g=>"EMAIL_PASSWORD_PROVIDER"===g.provider&&"OFF"!==g.enforcementState)}}function gs(v){return new Promise((f,g)=>{const _=document.createElement("script");_.setAttribute("src",v),_.onload=f,_.onerror=T=>{const x=K("internal-error");x.customData=T,g(x)},_.type="text/javascript",_.charset="UTF-8",function Kn(){var v,f;return null!==(f=null===(v=document.getElementsByTagName("head"))||void 0===v?void 0:v[0])&&void 0!==f?f:document}().appendChild(_)})}function so(v){return`__${v}${Math.floor(1e6*Math.random())}`}class Md{constructor(f){this.type="recaptcha-enterprise",this.auth=Yn(f)}verify(f="verify",g=!1){var _=this;return(0,h.Z)(function*(){function x(){return x=(0,h.Z)(function*(Y){if(!g){if(null==Y.tenantId&&null!=Y._agentRecaptchaConfig)return Y._agentRecaptchaConfig.siteKey;if(null!=Y.tenantId&&void 0!==Y._tenantRecaptchaConfigs[Y.tenantId])return Y._tenantRecaptchaConfigs[Y.tenantId].siteKey}return new Promise(function(){var Se=(0,h.Z)(function*(Ge,et){ut(Y,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(rt=>{if(void 0!==rt.recaptchaKey){const Pn=new rr(rt);return null==Y.tenantId?Y._agentRecaptchaConfig=Pn:Y._tenantRecaptchaConfigs[Y.tenantId]=Pn,Ge(Pn.siteKey)}et(new Error("recaptcha Enterprise site key undefined"))}).catch(rt=>{et(rt)})});return function(Ge,et){return Se.apply(this,arguments)}}())}),x.apply(this,arguments)}function B(Y,Se,Ge){const et=window.grecaptcha;Yt(et)?et.enterprise.ready(()=>{et.enterprise.execute(Y,{action:f}).then(rt=>{Se(rt)}).catch(()=>{Se("NO_RECAPTCHA")})}):Ge(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((Y,Se)=>{(function T(Y){return x.apply(this,arguments)})(_.auth).then(Ge=>{if(!g&&Yt(window.grecaptcha))B(Ge,Y,Se);else{if(typeof window>"u")return void Se(new Error("RecaptchaVerifier is only supported in browser"));gs("https://www.google.com/recaptcha/enterprise.js?render="+Ge).then(()=>{B(Ge,Y,Se)}).catch(et=>{Se(et)})}}).catch(Ge=>{Se(Ge)})})})()}}function _i(v,f,g){return zc.apply(this,arguments)}function zc(){return(zc=(0,h.Z)(function*(v,f,g,_=!1){const T=new Md(v);let x;try{x=yield T.verify(g)}catch{x=yield T.verify(g,!0)}const B=Object.assign({},f);return Object.assign(B,_?{captchaResp:x}:{captchaResponse:x}),Object.assign(B,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(B,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),B})).apply(this,arguments)}class Ru{constructor(f){this.auth=f,this.queue=[]}pushCallback(f,g){const _=x=>new Promise((B,Y)=>{try{B(f(x))}catch(Se){Y(Se)}});_.onAbort=g,this.queue.push(_);const T=this.queue.length-1;return()=>{this.queue[T]=()=>Promise.resolve()}}runMiddleware(f){var g=this;return(0,h.Z)(function*(){if(g.auth.currentUser===f)return;const _=[];try{for(const T of g.queue)yield T(f),T.onAbort&&_.push(T.onAbort)}catch(T){_.reverse();for(const x of _)try{x()}catch{}throw g.auth._errorFactory.create("login-blocked",{originalMessage:T?.message})}})()}}class xd{constructor(f,g,_,T){this.app=f,this.heartbeatServiceProvider=g,this.appCheckServiceProvider=_,this.config=T,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Vs(this),this.idTokenSubscription=new Vs(this),this.beforeStateQueue=new Ru(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ze,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=f.name,this.clientVersion=T.sdkClientVersion}_initializeWithPersistence(f,g){var _=this;return g&&(this._popupRedirectResolver=Jt(g)),this._initializationPromise=this.queue((0,h.Z)(function*(){var T,x;if(!_._deleted&&(_.persistenceManager=yield L.create(_,f),!_._deleted)){if(null!==(T=_._popupRedirectResolver)&&void 0!==T&&T._shouldInitProactively)try{yield _._popupRedirectResolver._initialize(_)}catch{}yield _.initializeCurrentUser(g),_.lastNotifiedUid=(null===(x=_.currentUser)||void 0===x?void 0:x.uid)||null,!_._deleted&&(_._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var f=this;return(0,h.Z)(function*(){if(f._deleted)return;const g=yield f.assertedPersistence.getCurrentUser();if(f.currentUser||g){if(f.currentUser&&g&&f.currentUser.uid===g.uid)return f._currentUser._assign(g),void(yield f.currentUser.getIdToken());yield f._updateCurrentUser(g,!0)}})()}initializeCurrentUser(f){var g=this;return(0,h.Z)(function*(){var _;const T=yield g.assertedPersistence.getCurrentUser();let x=T,B=!1;if(f&&g.config.authDomain){yield g.getOrInitRedirectPersistenceManager();const Y=null===(_=g.redirectUser)||void 0===_?void 0:_._redirectEventId,Se=x?._redirectEventId,Ge=yield g.tryRedirectSignIn(f);(!Y||Y===Se)&&Ge?.user&&(x=Ge.user,B=!0)}if(!x)return g.directlySetCurrentUser(null);if(!x._redirectEventId){if(B)try{yield g.beforeStateQueue.runMiddleware(x)}catch(Y){x=T,g._popupRedirectResolver._overrideRedirectResult(g,()=>Promise.reject(Y))}return x?g.reloadAndSetCurrentUserOrClear(x):g.directlySetCurrentUser(null)}return ie(g._popupRedirectResolver,g,"argument-error"),yield g.getOrInitRedirectPersistenceManager(),g.redirectUser&&g.redirectUser._redirectEventId===x._redirectEventId?g.directlySetCurrentUser(x):g.reloadAndSetCurrentUserOrClear(x)})()}tryRedirectSignIn(f){var g=this;return(0,h.Z)(function*(){let _=null;try{_=yield g._popupRedirectResolver._completeRedirectFn(g,f,!0)}catch{yield g._setRedirectUser(null)}return _})()}reloadAndSetCurrentUserOrClear(f){var g=this;return(0,h.Z)(function*(){try{yield an(f)}catch(_){if("auth/network-request-failed"!==_?.code)return g.directlySetCurrentUser(null)}return g.directlySetCurrentUser(f)})()}useDeviceLanguage(){this.languageCode=function me(){if(typeof navigator>"u")return null;const v=navigator;return v.languages&&v.languages[0]||v.language||null}()}_delete(){var f=this;return(0,h.Z)(function*(){f._deleted=!0})()}updateCurrentUser(f){var g=this;return(0,h.Z)(function*(){const _=f?(0,P.m9)(f):null;return _&&ie(_.auth.config.apiKey===g.config.apiKey,g,"invalid-user-token"),g._updateCurrentUser(_&&_._clone(g))})()}_updateCurrentUser(f,g=!1){var _=this;return(0,h.Z)(function*(){if(!_._deleted)return f&&ie(_.tenantId===f.tenantId,_,"tenant-id-mismatch"),g||(yield _.beforeStateQueue.runMiddleware(f)),_.queue((0,h.Z)(function*(){yield _.directlySetCurrentUser(f),_.notifyAuthListeners()}))})()}signOut(){var f=this;return(0,h.Z)(function*(){return yield f.beforeStateQueue.runMiddleware(null),(f.redirectPersistenceManager||f._popupRedirectResolver)&&(yield f._setRedirectUser(null)),f._updateCurrentUser(null,!0)})()}setPersistence(f){var g=this;return this.queue((0,h.Z)(function*(){yield g.assertedPersistence.setPersistence(Jt(f))}))}initializeRecaptchaConfig(){var f=this;return(0,h.Z)(function*(){const g=yield ut(f,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),_=new rr(g);null==f.tenantId?f._agentRecaptchaConfig=_:f._tenantRecaptchaConfigs[f.tenantId]=_,_.emailPasswordEnabled&&new Md(f).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(f){this._errorFactory=new P.LL("auth","Firebase",f())}onAuthStateChanged(f,g,_){return this.registerStateListener(this.authStateSubscription,f,g,_)}beforeAuthStateChanged(f,g){return this.beforeStateQueue.pushCallback(f,g)}onIdTokenChanged(f,g,_){return this.registerStateListener(this.idTokenSubscription,f,g,_)}toJSON(){var f;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(f=this._currentUser)||void 0===f?void 0:f.toJSON()}}_setRedirectUser(f,g){var _=this;return(0,h.Z)(function*(){const T=yield _.getOrInitRedirectPersistenceManager(g);return null===f?T.removeCurrentUser():T.setCurrentUser(f)})()}getOrInitRedirectPersistenceManager(f){var g=this;return(0,h.Z)(function*(){if(!g.redirectPersistenceManager){const _=f&&Jt(f)||g._popupRedirectResolver;ie(_,g,"argument-error"),g.redirectPersistenceManager=yield L.create(g,[Jt(_._redirectPersistence)],"redirectUser"),g.redirectUser=yield g.redirectPersistenceManager.getCurrentUser()}return g.redirectPersistenceManager})()}_redirectUserForId(f){var g=this;return(0,h.Z)(function*(){var _,T;return g._isInitialized&&(yield g.queue((0,h.Z)(function*(){}))),(null===(_=g._currentUser)||void 0===_?void 0:_._redirectEventId)===f?g._currentUser:(null===(T=g.redirectUser)||void 0===T?void 0:T._redirectEventId)===f?g.redirectUser:null})()}_persistUserIfCurrent(f){var g=this;return(0,h.Z)(function*(){if(f===g.currentUser)return g.queue((0,h.Z)(function*(){return g.directlySetCurrentUser(f)}))})()}_notifyListenersIfCurrent(f){f===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var f,g;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const _=null!==(g=null===(f=this.currentUser)||void 0===f?void 0:f.uid)&&void 0!==g?g:null;this.lastNotifiedUid!==_&&(this.lastNotifiedUid=_,this.authStateSubscription.next(this.currentUser))}registerStateListener(f,g,_,T){if(this._deleted)return()=>{};const x="function"==typeof g?g:g.next.bind(g),B=this._isInitialized?Promise.resolve():this._initializationPromise;return ie(B,this,"internal-error"),B.then(()=>x(this.currentUser)),"function"==typeof g?f.addObserver(g,_,T):f.addObserver(g)}directlySetCurrentUser(f){var g=this;return(0,h.Z)(function*(){g.currentUser&&g.currentUser!==f&&g._currentUser._stopProactiveRefresh(),f&&g.isProactiveRefreshEnabled&&f._startProactiveRefresh(),g.currentUser=f,f?yield g.assertedPersistence.setCurrentUser(f):yield g.assertedPersistence.removeCurrentUser()})()}queue(f){return this.operations=this.operations.then(f,f),this.operations}get assertedPersistence(){return ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(f){!f||this.frameworks.includes(f)||(this.frameworks.push(f),this.frameworks.sort(),this.clientVersion=ue(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var f=this;return(0,h.Z)(function*(){var g;const _={"X-Client-Version":f.clientVersion};f.app.options.appId&&(_["X-Firebase-gmpid"]=f.app.options.appId);const T=yield null===(g=f.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===g?void 0:g.getHeartbeatsHeader();T&&(_["X-Firebase-Client"]=T);const x=yield f._getAppCheckToken();return x&&(_["X-Firebase-AppCheck"]=x),_})()}_getAppCheckToken(){var f=this;return(0,h.Z)(function*(){var g;const _=yield null===(g=f.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===g?void 0:g.getToken();return _?.error&&function dt(v,...f){mt.logLevel<=le.in.WARN&&mt.warn(`Auth (${J.SDK_VERSION}): ${v}`,...f)}(`Error while retrieving App Check token: ${_.error}`),_?.token})()}}function Yn(v){return(0,P.m9)(v)}class Vs{constructor(f){this.auth=f,this.observer=null,this.addObserver=(0,P.ne)(g=>this.observer=g)}get next(){return ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function oo(v){const f=v.indexOf(":");return f<0?"":v.substr(0,f+1)}function Rd(v){if(!v)return null;const f=Number(v);return isNaN(f)?null:f}class ms{constructor(f,g){this.providerId=f,this.signInMethod=g}toJSON(){return $e("not implemented")}_getIdTokenResponse(f){return $e("not implemented")}_linkToIdToken(f,g){return $e("not implemented")}_getReauthenticationResolver(f){return $e("not implemented")}}function Hf(v,f){return Ra.apply(this,arguments)}function Ra(){return(Ra=(0,h.Z)(function*(v,f){return Ut(v,"POST","/v1/accounts:resetPassword",Xe(v,f))})).apply(this,arguments)}function qc(v,f){return Wc.apply(this,arguments)}function Wc(){return(Wc=(0,h.Z)(function*(v,f){return Ut(v,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function or(){return(or=(0,h.Z)(function*(v,f){return Ut(v,"POST","/v1/accounts:update",Xe(v,f))})).apply(this,arguments)}function un(v,f){return Us.apply(this,arguments)}function Us(){return(Us=(0,h.Z)(function*(v,f){return tn(v,"POST","/v1/accounts:signInWithPassword",Xe(v,f))})).apply(this,arguments)}function xr(v,f){return Pu.apply(this,arguments)}function Pu(){return(Pu=(0,h.Z)(function*(v,f){return Ut(v,"POST","/v1/accounts:sendOobCode",Xe(v,f))})).apply(this,arguments)}function Po(){return(Po=(0,h.Z)(function*(v,f){return xr(v,f)})).apply(this,arguments)}function Oa(v,f){return Od.apply(this,arguments)}function Od(){return(Od=(0,h.Z)(function*(v,f){return xr(v,f)})).apply(this,arguments)}function Vn(v,f){return Ze.apply(this,arguments)}function Ze(){return(Ze=(0,h.Z)(function*(v,f){return xr(v,f)})).apply(this,arguments)}function wn(){return(wn=(0,h.Z)(function*(v,f){return xr(v,f)})).apply(this,arguments)}function Bs(){return(Bs=(0,h.Z)(function*(v,f){return tn(v,"POST","/v1/accounts:signInWithEmailLink",Xe(v,f))})).apply(this,arguments)}function ao(){return(ao=(0,h.Z)(function*(v,f){return tn(v,"POST","/v1/accounts:signInWithEmailLink",Xe(v,f))})).apply(this,arguments)}class En extends ms{constructor(f,g,_,T=null){super("password",_),this._email=f,this._password=g,this._tenantId=T}static _fromEmailAndPassword(f,g){return new En(f,g,"password")}static _fromEmailAndCode(f,g,_=null){return new En(f,g,"emailLink",_)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f;if(g?.email&&g?.password){if("password"===g.signInMethod)return this._fromEmailAndPassword(g.email,g.password);if("emailLink"===g.signInMethod)return this._fromEmailAndCode(g.email,g.password,g.tenantId)}return null}_getIdTokenResponse(f){var g=this;return(0,h.Z)(function*(){var _;switch(g.signInMethod){case"password":const T={returnSecureToken:!0,email:g._email,password:g._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(_=f._getRecaptchaConfig())&&void 0!==_&&_.emailPasswordEnabled){const x=yield _i(f,T,"signInWithPassword");return un(f,x)}return un(f,T).catch(function(){var x=(0,h.Z)(function*(B){if("auth/missing-recaptcha-token"===B.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const Y=yield _i(f,T,"signInWithPassword");return un(f,Y)}return Promise.reject(B)});return function(B){return x.apply(this,arguments)}}());case"emailLink":return function ai(v,f){return Bs.apply(this,arguments)}(f,{email:g._email,oobCode:g._password});default:pe(f,"internal-error")}})()}_linkToIdToken(f,g){var _=this;return(0,h.Z)(function*(){switch(_.signInMethod){case"password":return qc(f,{idToken:g,returnSecureToken:!0,email:_._email,password:_._password});case"emailLink":return function Br(v,f){return ao.apply(this,arguments)}(f,{idToken:g,email:_._email,oobCode:_._password});default:pe(f,"internal-error")}})()}_getReauthenticationResolver(f){return this._getIdTokenResponse(f)}}function yr(v,f){return ys.apply(this,arguments)}function ys(){return(ys=(0,h.Z)(function*(v,f){return tn(v,"POST","/v1/accounts:signInWithIdp",Xe(v,f))})).apply(this,arguments)}class Zr extends ms{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(f){const g=new Zr(f.providerId,f.signInMethod);return f.idToken||f.accessToken?(f.idToken&&(g.idToken=f.idToken),f.accessToken&&(g.accessToken=f.accessToken),f.nonce&&!f.pendingToken&&(g.nonce=f.nonce),f.pendingToken&&(g.pendingToken=f.pendingToken)):f.oauthToken&&f.oauthTokenSecret?(g.accessToken=f.oauthToken,g.secret=f.oauthTokenSecret):pe("argument-error"),g}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f,{providerId:_,signInMethod:T}=g,x=(0,ne._T)(g,["providerId","signInMethod"]);if(!_||!T)return null;const B=new Zr(_,T);return B.idToken=x.idToken||void 0,B.accessToken=x.accessToken||void 0,B.secret=x.secret,B.nonce=x.nonce,B.pendingToken=x.pendingToken||null,B}_getIdTokenResponse(f){return yr(f,this.buildRequest())}_linkToIdToken(f,g){const _=this.buildRequest();return _.idToken=g,yr(f,_)}_getReauthenticationResolver(f){const g=this.buildRequest();return g.autoCreate=!1,yr(f,g)}buildRequest(){const f={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)f.pendingToken=this.pendingToken;else{const g={};this.idToken&&(g.id_token=this.idToken),this.accessToken&&(g.access_token=this.accessToken),this.secret&&(g.oauth_token_secret=this.secret),g.providerId=this.providerId,this.nonce&&!this.pendingToken&&(g.nonce=this.nonce),f.postBody=(0,P.xO)(g)}return f}}function is(){return(is=(0,h.Z)(function*(v,f){return Ut(v,"POST","/v1/accounts:sendVerificationCode",Xe(v,f))})).apply(this,arguments)}function ko(){return(ko=(0,h.Z)(function*(v,f){return tn(v,"POST","/v1/accounts:signInWithPhoneNumber",Xe(v,f))})).apply(this,arguments)}function wi(){return(wi=(0,h.Z)(function*(v,f){const g=yield tn(v,"POST","/v1/accounts:signInWithPhoneNumber",Xe(v,f));if(g.temporaryProof)throw Wn(v,"account-exists-with-different-credential",g);return g})).apply(this,arguments)}const Fo={USER_NOT_FOUND:"user-not-found"};function ui(){return(ui=(0,h.Z)(function*(v,f){return tn(v,"POST","/v1/accounts:signInWithPhoneNumber",Xe(v,Object.assign(Object.assign({},f),{operation:"REAUTH"})),Fo)})).apply(this,arguments)}class Un extends ms{constructor(f){super("phone","phone"),this.params=f}static _fromVerification(f,g){return new Un({verificationId:f,verificationCode:g})}static _fromTokenResponse(f,g){return new Un({phoneNumber:f,temporaryProof:g})}_getIdTokenResponse(f){return function On(v,f){return ko.apply(this,arguments)}(f,this._makeVerificationRequest())}_linkToIdToken(f,g){return function Pa(v,f){return wi.apply(this,arguments)}(f,Object.assign({idToken:g},this._makeVerificationRequest()))}_getReauthenticationResolver(f){return function kd(v,f){return ui.apply(this,arguments)}(f,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:f,phoneNumber:g,verificationId:_,verificationCode:T}=this.params;return f&&g?{temporaryProof:f,phoneNumber:g}:{sessionInfo:_,code:T}}toJSON(){const f={providerId:this.providerId};return this.params.phoneNumber&&(f.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(f.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(f.verificationCode=this.params.verificationCode),this.params.verificationId&&(f.verificationId=this.params.verificationId),f}static fromJSON(f){"string"==typeof f&&(f=JSON.parse(f));const{verificationId:g,verificationCode:_,phoneNumber:T,temporaryProof:x}=f;return _||g||T||x?new Un({verificationId:g,verificationCode:_,phoneNumber:T,temporaryProof:x}):null}}class jt{constructor(f){var g,_,T,x,B,Y;const Se=(0,P.zd)((0,P.pd)(f)),Ge=null!==(g=Se.apiKey)&&void 0!==g?g:null,et=null!==(_=Se.oobCode)&&void 0!==_?_:null,rt=function Kc(v){switch(v){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(T=Se.mode)&&void 0!==T?T:null);ie(Ge&&et&&rt,"argument-error"),this.apiKey=Ge,this.operation=rt,this.code=et,this.continueUrl=null!==(x=Se.continueUrl)&&void 0!==x?x:null,this.languageCode=null!==(B=Se.languageCode)&&void 0!==B?B:null,this.tenantId=null!==(Y=Se.tenantId)&&void 0!==Y?Y:null}static parseLink(f){const g=function uo(v){const f=(0,P.zd)((0,P.pd)(v)).link,g=f?(0,P.zd)((0,P.pd)(f)).deep_link_id:null,_=(0,P.zd)((0,P.pd)(v)).deep_link_id;return(_?(0,P.zd)((0,P.pd)(_)).link:null)||_||g||f||v}(f);try{return new jt(g)}catch{return null}}}let ku=(()=>{class v{constructor(){this.providerId=v.PROVIDER_ID}static credential(g,_){return En._fromEmailAndPassword(g,_)}static credentialWithLink(g,_){const T=jt.parseLink(_);return ie(T,"argument-error"),En._fromEmailAndCode(g,T.code,T.tenantId)}}return v.PROVIDER_ID="password",v.EMAIL_PASSWORD_SIGN_IN_METHOD="password",v.EMAIL_LINK_SIGN_IN_METHOD="emailLink",v})();class ss{constructor(f){this.providerId=f,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(f){this.defaultLanguageCode=f}setCustomParameters(f){return this.customParameters=f,this}getCustomParameters(){return this.customParameters}}class Kr extends ss{constructor(){super(...arguments),this.scopes=[]}addScope(f){return this.scopes.includes(f)||this.scopes.push(f),this}getScopes(){return[...this.scopes]}}class Ei extends Kr{static credentialFromJSON(f){const g="string"==typeof f?JSON.parse(f):f;return ie("providerId"in g&&"signInMethod"in g,"argument-error"),Zr._fromParams(g)}credential(f){return this._credential(Object.assign(Object.assign({},f),{nonce:f.rawNonce}))}_credential(f){return ie(f.idToken||f.accessToken,"argument-error"),Zr._fromParams(Object.assign(Object.assign({},f),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(f){return Ei.oauthCredentialFromTaggedObject(f)}static credentialFromError(f){return Ei.oauthCredentialFromTaggedObject(f.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:g,oauthAccessToken:_,oauthTokenSecret:T,pendingToken:x,nonce:B,providerId:Y}=f;if(!_&&!T&&!g&&!x||!Y)return null;try{return new Ei(Y)._credential({idToken:g,accessToken:_,nonce:B,pendingToken:x})}catch{return null}}}let co=(()=>{class v extends Kr{constructor(){super("facebook.com")}static credential(g){return Zr._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.FACEBOOK_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return v.credential(g.oauthAccessToken)}catch{return null}}}return v.FACEBOOK_SIGN_IN_METHOD="facebook.com",v.PROVIDER_ID="facebook.com",v})(),lo=(()=>{class v extends Kr{constructor(){super("google.com"),this.addScope("profile")}static credential(g,_){return Zr._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GOOGLE_SIGN_IN_METHOD,idToken:g,accessToken:_})}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:_,oauthAccessToken:T}=g;if(!_&&!T)return null;try{return v.credential(_,T)}catch{return null}}}return v.GOOGLE_SIGN_IN_METHOD="google.com",v.PROVIDER_ID="google.com",v})(),ar=(()=>{class v extends Kr{constructor(){super("github.com")}static credential(g){return Zr._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GITHUB_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return v.credential(g.oauthAccessToken)}catch{return null}}}return v.GITHUB_SIGN_IN_METHOD="github.com",v.PROVIDER_ID="github.com",v})();class Bn extends ms{constructor(f,g){super(f,f),this.pendingToken=g}_getIdTokenResponse(f){return yr(f,this.buildRequest())}_linkToIdToken(f,g){const _=this.buildRequest();return _.idToken=g,yr(f,_)}_getReauthenticationResolver(f){const g=this.buildRequest();return g.autoCreate=!1,yr(f,g)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f,{providerId:_,signInMethod:T,pendingToken:x}=g;return _&&T&&x&&_===T?new Bn(_,x):null}static _create(f,g){return new Bn(f,g)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Lo extends ss{constructor(f){ie(f.startsWith("saml."),"argument-error"),super(f)}static credentialFromResult(f){return Lo.samlCredentialFromTaggedObject(f)}static credentialFromError(f){return Lo.samlCredentialFromTaggedObject(f.customData||{})}static credentialFromJSON(f){const g=Bn.fromJSON(f);return ie(g,"argument-error"),g}static samlCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{pendingToken:g,providerId:_}=f;if(!g||!_)return null;try{return Bn._create(_,g)}catch{return null}}}let vs=(()=>{class v extends Kr{constructor(){super("twitter.com")}static credential(g,_){return Zr._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.TWITTER_SIGN_IN_METHOD,oauthToken:g,oauthTokenSecret:_})}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthAccessToken:_,oauthTokenSecret:T}=g;if(!_||!T)return null;try{return v.credential(_,T)}catch{return null}}}return v.TWITTER_SIGN_IN_METHOD="twitter.com",v.PROVIDER_ID="twitter.com",v})();function _s(v,f){return vr.apply(this,arguments)}function vr(){return(vr=(0,h.Z)(function*(v,f){return tn(v,"POST","/v1/accounts:signUp",Xe(v,f))})).apply(this,arguments)}class Nr{constructor(f){this.user=f.user,this.providerId=f.providerId,this._tokenResponse=f._tokenResponse,this.operationType=f.operationType}static _fromIdTokenResponse(f,g,_,T=!1){return(0,h.Z)(function*(){const x=yield mn._fromIdTokenResponse(f,_,T),B=ho(_);return new Nr({user:x,providerId:B,_tokenResponse:_,operationType:g})})()}static _forOperation(f,g,_){return(0,h.Z)(function*(){yield f._updateTokensIfNecessary(_,!0);const T=ho(_);return new Nr({user:f,providerId:T,_tokenResponse:_,operationType:g})})()}}function ho(v){return v.providerId?v.providerId:"phoneNumber"in v?"phone":null}function Yc(){return(Yc=(0,h.Z)(function*(v){var f;const g=Yn(v);if(yield g._initializationPromise,null!==(f=g.currentUser)&&void 0!==f&&f.isAnonymous)return new Nr({user:g.currentUser,providerId:null,operationType:"signIn"});const _=yield _s(g,{returnSecureToken:!0}),T=yield Nr._fromIdTokenResponse(g,"signIn",_,!0);return yield g._updateCurrentUser(T.user),T})).apply(this,arguments)}class ka extends P.ZR{constructor(f,g,_,T){var x;super(g.code,g.message),this.operationType=_,this.user=T,Object.setPrototypeOf(this,ka.prototype),this.customData={appName:f.name,tenantId:null!==(x=f.tenantId)&&void 0!==x?x:void 0,_serverResponse:g.customData._serverResponse,operationType:_}}static _fromErrorAndOperation(f,g,_,T){return new ka(f,g,_,T)}}function Gf(v,f,g,_){return("reauthenticate"===f?g._getReauthenticationResolver(v):g._getIdTokenResponse(v)).catch(x=>{throw"auth/multi-factor-auth-required"===x.code?ka._fromErrorAndOperation(v,x,f,_):x})}function zf(v){return new Set(v.map(({providerId:f})=>f).filter(f=>!!f))}function os(){return os=(0,h.Z)(function*(v,f){const g=(0,P.m9)(v);yield Fa(!0,g,f);const{providerUserInfo:_}=yield function no(v,f){return ro.apply(this,arguments)}(g.auth,{idToken:yield g.getIdToken(),deleteProvider:[f]}),T=zf(_||[]);return g.providerData=g.providerData.filter(x=>T.has(x.providerId)),T.has("phone")||(g.phoneNumber=null),yield g.auth._persistUserIfCurrent(g),g}),os.apply(this,arguments)}function Qc(v,f){return Jc.apply(this,arguments)}function Jc(){return(Jc=(0,h.Z)(function*(v,f,g=!1){const _=yield Tn(v,f._linkToIdToken(v.auth,yield v.getIdToken()),g);return Nr._forOperation(v,"link",_)})).apply(this,arguments)}function Fa(v,f,g){return Fd.apply(this,arguments)}function Fd(){return(Fd=(0,h.Z)(function*(v,f,g){yield an(f);const T=!1===v?"provider-already-linked":"no-such-provider";ie(zf(f.providerData).has(g)===v,f.auth,T)})).apply(this,arguments)}function qf(v,f){return Xc.apply(this,arguments)}function Xc(){return(Xc=(0,h.Z)(function*(v,f,g=!1){const{auth:_}=v,T="reauthenticate";try{const x=yield Tn(v,Gf(_,T,f,v),g);ie(x.idToken,_,"internal-error");const B=yt(x.idToken);ie(B,_,"internal-error");const{sub:Y}=B;return ie(v.uid===Y,_,"user-mismatch"),Nr._forOperation(v,T,x)}catch(x){throw"auth/user-not-found"===x?.code&&pe(_,"user-mismatch"),x}})).apply(this,arguments)}function Ld(v,f){return Vd.apply(this,arguments)}function Vd(){return(Vd=(0,h.Z)(function*(v,f,g=!1){const _="signIn",T=yield Gf(v,_,f),x=yield Nr._fromIdTokenResponse(v,_,T);return g||(yield v._updateCurrentUser(x.user)),x})).apply(this,arguments)}function La(v,f){return Va.apply(this,arguments)}function Va(){return(Va=(0,h.Z)(function*(v,f){return Ld(Yn(v),f)})).apply(this,arguments)}function Im(v,f){return el.apply(this,arguments)}function el(){return(el=(0,h.Z)(function*(v,f){const g=(0,P.m9)(v);return yield Fa(!1,g,f.providerId),Qc(g,f)})).apply(this,arguments)}function jn(v,f){return js.apply(this,arguments)}function js(){return(js=(0,h.Z)(function*(v,f){return qf((0,P.m9)(v),f)})).apply(this,arguments)}function Dm(){return(Dm=(0,h.Z)(function*(v,f){return tn(v,"POST","/v1/accounts:signInWithCustomToken",Xe(v,f))})).apply(this,arguments)}function ki(){return ki=(0,h.Z)(function*(v,f){const g=Yn(v),_=yield function Wf(v,f){return Dm.apply(this,arguments)}(g,{token:f,returnSecureToken:!0}),T=yield Nr._fromIdTokenResponse(g,"signIn",_);return yield g._updateCurrentUser(T.user),T}),ki.apply(this,arguments)}class Fu{constructor(f,g){this.factorId=f,this.uid=g.mfaEnrollmentId,this.enrollmentTime=new Date(g.enrolledAt).toUTCString(),this.displayName=g.displayName}static _fromServerResponse(f,g){return"phoneInfo"in g?Ua._fromServerResponse(f,g):"totpInfo"in g?Ud._fromServerResponse(f,g):pe(f,"internal-error")}}class Ua extends Fu{constructor(f){super("phone",f),this.phoneNumber=f.phoneInfo}static _fromServerResponse(f,g){return new Ua(g)}}class Ud extends Fu{constructor(f){super("totp",f)}static _fromServerResponse(f,g){return new Ud(g)}}function Ba(v,f,g){var _;ie((null===(_=g.url)||void 0===_?void 0:_.length)>0,v,"invalid-continue-uri"),ie(typeof g.dynamicLinkDomain>"u"||g.dynamicLinkDomain.length>0,v,"invalid-dynamic-link-domain"),f.continueUrl=g.url,f.dynamicLinkDomain=g.dynamicLinkDomain,f.canHandleCodeInApp=g.handleCodeInApp,g.iOS&&(ie(g.iOS.bundleId.length>0,v,"missing-ios-bundle-id"),f.iOSBundleId=g.iOS.bundleId),g.android&&(ie(g.android.packageName.length>0,v,"missing-android-pkg-name"),f.androidInstallApp=g.android.installApp,f.androidMinimumVersionCode=g.android.minimumVersion,f.androidPackageName=g.android.packageName)}function jr(){return jr=(0,h.Z)(function*(v,f,g){var _;const T=Yn(v),x={requestType:"PASSWORD_RESET",email:f,clientType:"CLIENT_TYPE_WEB"};if(null!==(_=T._getRecaptchaConfig())&&void 0!==_&&_.emailPasswordEnabled){const B=yield _i(T,x,"getOobCode",!0);g&&Ba(T,B,g),yield Oa(T,B)}else g&&Ba(T,x,g),yield Oa(T,x).catch(function(){var B=(0,h.Z)(function*(Y){if("auth/missing-recaptcha-token"!==Y.code)return Promise.reject(Y);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const Se=yield _i(T,x,"getOobCode",!0);g&&Ba(T,Se,g),yield Oa(T,Se)}});return function(Y){return B.apply(this,arguments)}}())}),jr.apply(this,arguments)}function Qn(){return(Qn=(0,h.Z)(function*(v,f,g){yield Hf((0,P.m9)(v),{oobCode:f,newPassword:g})})).apply(this,arguments)}function Ii(){return Ii=(0,h.Z)(function*(v,f){yield function Lt(v,f){return or.apply(this,arguments)}((0,P.m9)(v),{oobCode:f})}),Ii.apply(this,arguments)}function ja(v,f){return Vo.apply(this,arguments)}function Vo(){return(Vo=(0,h.Z)(function*(v,f){const g=(0,P.m9)(v),_=yield Hf(g,{oobCode:f}),T=_.requestType;switch(ie(T,g,"internal-error"),T){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ie(_.newEmail,g,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ie(_.mfaInfo,g,"internal-error");default:ie(_.email,g,"internal-error")}let x=null;return _.mfaInfo&&(x=Fu._fromServerResponse(Yn(g),_.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===_.requestType?_.newEmail:_.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===_.requestType?_.email:_.newEmail)||null,multiFactorInfo:x},operation:T}})).apply(this,arguments)}function Bo(){return(Bo=(0,h.Z)(function*(v,f){const{data:g}=yield ja((0,P.m9)(v),f);return g.email})).apply(this,arguments)}function $a(){return $a=(0,h.Z)(function*(v,f,g){var _;const T=Yn(v),x={returnSecureToken:!0,email:f,password:g,clientType:"CLIENT_TYPE_WEB"};let B;if(null!==(_=T._getRecaptchaConfig())&&void 0!==_&&_.emailPasswordEnabled){const Ge=yield _i(T,x,"signUpPassword");B=_s(T,Ge)}else B=_s(T,x).catch(function(){var Ge=(0,h.Z)(function*(et){if("auth/missing-recaptcha-token"===et.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const rt=yield _i(T,x,"signUpPassword");return _s(T,rt)}return Promise.reject(et)});return function(et){return Ge.apply(this,arguments)}}());const Y=yield B.catch(Ge=>Promise.reject(Ge)),Se=yield Nr._fromIdTokenResponse(T,"signIn",Y);return yield T._updateCurrentUser(Se.user),Se}),$a.apply(this,arguments)}function fo(){return fo=(0,h.Z)(function*(v,f,g){var _;const T=Yn(v),x={requestType:"EMAIL_SIGNIN",email:f,clientType:"CLIENT_TYPE_WEB"};function B(Y,Se){ie(Se.handleCodeInApp,T,"argument-error"),Se&&Ba(T,Y,Se)}if(null!==(_=T._getRecaptchaConfig())&&void 0!==_&&_.emailPasswordEnabled){const Y=yield _i(T,x,"getOobCode",!0);B(Y,g),yield Vn(T,Y)}else B(x,g),yield Vn(T,x).catch(function(){var Y=(0,h.Z)(function*(Se){if("auth/missing-recaptcha-token"!==Se.code)return Promise.reject(Se);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const Ge=yield _i(T,x,"getOobCode",!0);B(Ge,g),yield Vn(T,Ge)}});return function(Se){return Y.apply(this,arguments)}}())}),fo.apply(this,arguments)}function Kf(){return(Kf=(0,h.Z)(function*(v,f,g){const _=(0,P.m9)(v),T=ku.credentialWithLink(f,g||fr());return ie(T._tenantId===(_.tenantId||null),_,"tenant-id-mismatch"),La(_,T)})).apply(this,arguments)}function nl(){return(nl=(0,h.Z)(function*(v,f){return Ut(v,"POST","/v1/accounts:createAuthUri",Xe(v,f))})).apply(this,arguments)}function rl(){return rl=(0,h.Z)(function*(v,f){const _={identifier:f,continueUri:zr()?fr():"http://localhost"},{signinMethods:T}=yield function Bd(v,f){return nl.apply(this,arguments)}((0,P.m9)(v),_);return T||[]}),rl.apply(this,arguments)}function Ha(){return Ha=(0,h.Z)(function*(v,f){const g=(0,P.m9)(v),T={requestType:"VERIFY_EMAIL",idToken:yield v.getIdToken()};f&&Ba(g.auth,T,f);const{email:x}=yield function Zc(v,f){return Po.apply(this,arguments)}(g.auth,T);x!==v.email&&(yield v.reload())}),Ha.apply(this,arguments)}function ju(){return ju=(0,h.Z)(function*(v,f,g){const _=(0,P.m9)(v),x={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield v.getIdToken(),newEmail:f};g&&Ba(_.auth,x,g);const{email:B}=yield function kt(v,f){return wn.apply(this,arguments)}(_.auth,x);B!==v.email&&(yield v.reload())}),ju.apply(this,arguments)}function $u(){return($u=(0,h.Z)(function*(v,f){return Ut(v,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function jo(){return jo=(0,h.Z)(function*(v,{displayName:f,photoURL:g}){if(void 0===f&&void 0===g)return;const _=(0,P.m9)(v),x={idToken:yield _.getIdToken(),displayName:f,photoUrl:g,returnSecureToken:!0},B=yield Tn(_,function sl(v,f){return $u.apply(this,arguments)}(_.auth,x));_.displayName=B.displayName||null,_.photoURL=B.photoUrl||null;const Y=_.providerData.find(({providerId:Se})=>"password"===Se);Y&&(Y.displayName=_.displayName,Y.photoURL=_.photoURL),yield _._updateTokensIfNecessary(B)}),jo.apply(this,arguments)}function $d(v,f,g){return Ga.apply(this,arguments)}function Ga(){return(Ga=(0,h.Z)(function*(v,f,g){const{auth:_}=v,x={idToken:yield v.getIdToken(),returnSecureToken:!0};f&&(x.email=f),g&&(x.password=g);const B=yield Tn(v,qc(_,x));yield v._updateTokensIfNecessary(B,!0)})).apply(this,arguments)}class po{constructor(f,g,_={}){this.isNewUser=f,this.providerId=g,this.profile=_}}class Hu extends po{constructor(f,g,_,T){super(f,g,_),this.username=T}}class Hr extends po{constructor(f,g){super(f,"facebook.com",g)}}class Gu extends Hu{constructor(f,g){super(f,"github.com",g,"string"==typeof g?.login?g?.login:null)}}class ol extends po{constructor(f,g){super(f,"google.com",g)}}class $s extends Hu{constructor(f,g,_){super(f,"twitter.com",g,_)}}function ur(v){const{user:f,_tokenResponse:g}=v;return f.isAnonymous&&!g?{providerId:null,isNewUser:!1,profile:null}:function In(v){var f,g;if(!v)return null;const{providerId:_}=v,T=v.rawUserInfo?JSON.parse(v.rawUserInfo):{},x=v.isNewUser||"identitytoolkit#SignupNewUserResponse"===v.kind;if(!_&&v?.idToken){const B=null===(g=null===(f=yt(v.idToken))||void 0===f?void 0:f.firebase)||void 0===g?void 0:g.sign_in_provider;if(B)return new po(x,"anonymous"!==B&&"custom"!==B?B:null)}if(!_)return null;switch(_){case"facebook.com":return new Hr(x,T);case"github.com":return new Gu(x,T);case"google.com":return new ol(x,T);case"twitter.com":return new $s(x,T,v.screenName||null);case"custom":case"anonymous":return new po(x,null);default:return new po(x,_,T)}}(g)}class gt{constructor(f,g,_){this.type=f,this.credential=g,this.auth=_}static _fromIdtoken(f,g){return new gt("enroll",f,g)}static _fromMfaPendingCredential(f){return new gt("signin",f)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(f){var g,_;if(f?.multiFactorSession){if(null!==(g=f.multiFactorSession)&&void 0!==g&&g.pendingCredential)return gt._fromMfaPendingCredential(f.multiFactorSession.pendingCredential);if(null!==(_=f.multiFactorSession)&&void 0!==_&&_.idToken)return gt._fromIdtoken(f.multiFactorSession.idToken)}return null}}class Gs{constructor(f,g,_){this.session=f,this.hints=g,this.signInResolver=_}static _fromError(f,g){const _=Yn(f),T=g.customData._serverResponse,x=(T.mfaInfo||[]).map(Y=>Fu._fromServerResponse(_,Y));ie(T.mfaPendingCredential,_,"internal-error");const B=gt._fromMfaPendingCredential(T.mfaPendingCredential);return new Gs(B,x,function(){var Y=(0,h.Z)(function*(Se){const Ge=yield Se._process(_,B);delete T.mfaInfo,delete T.mfaPendingCredential;const et=Object.assign(Object.assign({},T),{idToken:Ge.idToken,refreshToken:Ge.refreshToken});switch(g.operationType){case"signIn":const rt=yield Nr._fromIdTokenResponse(_,g.operationType,et);return yield _._updateCurrentUser(rt.user),rt;case"reauthenticate":return ie(g.user,_,"internal-error"),Nr._forOperation(g.user,g.operationType,et);default:pe(_,"internal-error")}});return function(Se){return Y.apply(this,arguments)}}())}resolveSignIn(f){var g=this;return(0,h.Z)(function*(){return g.signInResolver(f)})()}}class za{constructor(f){this.user=f,this.enrolledFactors=[],f._onReload(g=>{g.mfaInfo&&(this.enrolledFactors=g.mfaInfo.map(_=>Fu._fromServerResponse(f.auth,_)))})}static _fromUser(f){return new za(f)}getSession(){var f=this;return(0,h.Z)(function*(){return gt._fromIdtoken(yield f.user.getIdToken(),f.user.auth)})()}enroll(f,g){var _=this;return(0,h.Z)(function*(){const T=f,x=yield _.getSession(),B=yield Tn(_.user,T._process(_.user.auth,x,g));return yield _.user._updateTokensIfNecessary(B),_.user.reload()})()}unenroll(f){var g=this;return(0,h.Z)(function*(){const _="string"==typeof f?f:f.uid,T=yield g.user.getIdToken();try{const x=yield Tn(g.user,function Go(v,f){return Ut(v,"POST","/v2/accounts/mfaEnrollment:withdraw",Xe(v,f))}(g.user.auth,{idToken:T,mfaEnrollmentId:_}));g.enrolledFactors=g.enrolledFactors.filter(({uid:B})=>B!==_),yield g.user._updateTokensIfNecessary(x),yield g.user.reload()}catch(x){throw x}})()}}const qa=new WeakMap,zo="__sak";class Zd{constructor(f,g){this.storageRetriever=f,this.type=g}_isAvailable(){try{return this.storage?(this.storage.setItem(zo,"1"),this.storage.removeItem(zo),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(f,g){return this.storage.setItem(f,JSON.stringify(g)),Promise.resolve()}_get(f){const g=this.storage.getItem(f);return Promise.resolve(g?JSON.parse(g):null)}_remove(f){return this.storage.removeItem(f),Promise.resolve()}get storage(){return this.storageRetriever()}}const Sn=(()=>{class v extends Zd{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(g,_)=>this.onStorageEvent(g,_),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function be(){const v=(0,P.z$)();return se(v)||bt(v)}()&&function si(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=rs(),this._shouldAllowMigration=!0}forAllChangedKeys(g){for(const _ of Object.keys(this.listeners)){const T=this.storage.getItem(_),x=this.localCache[_];T!==x&&g(_,x,T)}}onStorageEvent(g,_=!1){if(!g.key)return void this.forAllChangedKeys((Y,Se,Ge)=>{this.notifyListeners(Y,Ge)});const T=g.key;if(_?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Y=this.storage.getItem(T);if(g.newValue!==Y)null!==g.newValue?this.storage.setItem(T,g.newValue):this.storage.removeItem(T);else if(this.localCache[T]===g.newValue&&!_)return}const x=()=>{const Y=this.storage.getItem(T);!_&&this.localCache[T]===Y||this.notifyListeners(T,Y)},B=this.storage.getItem(T);!function vi(){return(0,P.w1)()&&10===document.documentMode}()||B===g.newValue||g.newValue===g.oldValue?x():setTimeout(x,10)}notifyListeners(g,_){this.localCache[g]=_;const T=this.listeners[g];if(T)for(const x of Array.from(T))x(_&&JSON.parse(_))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((g,_,T)=>{this.onStorageEvent(new StorageEvent("storage",{key:g,oldValue:_,newValue:T}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(g,_){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[g]||(this.listeners[g]=new Set,this.localCache[g]=this.storage.getItem(g)),this.listeners[g].add(_)}_removeListener(g,_){this.listeners[g]&&(this.listeners[g].delete(_),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(g,_){var T=()=>super._set,x=this;return(0,h.Z)(function*(){yield T().call(x,g,_),x.localCache[g]=JSON.stringify(_)})()}_get(g){var _=()=>super._get,T=this;return(0,h.Z)(function*(){const x=yield _().call(T,g);return T.localCache[g]=JSON.stringify(x),x})()}_remove(g){var _=()=>super._remove,T=this;return(0,h.Z)(function*(){yield _().call(T,g),delete T.localCache[g]})()}}return v.type="LOCAL",v})(),Di=(()=>{class v extends Zd{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(g,_){}_removeListener(g,_){}}return v.type="SESSION",v})();let Wa=(()=>{class v{constructor(g){this.eventTarget=g,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(g){const _=this.receivers.find(x=>x.isListeningto(g));if(_)return _;const T=new v(g);return this.receivers.push(T),T}isListeningto(g){return this.eventTarget===g}handleEvent(g){var _=this;return(0,h.Z)(function*(){const T=g,{eventId:x,eventType:B,data:Y}=T.data,Se=_.handlersMap[B];if(!Se?.size)return;T.ports[0].postMessage({status:"ack",eventId:x,eventType:B});const Ge=Array.from(Se).map(function(){var rt=(0,h.Z)(function*(Pn){return Pn(T.origin,Y)});return function(Pn){return rt.apply(this,arguments)}}()),et=yield function Es(v){return Promise.all(v.map(function(){var f=(0,h.Z)(function*(g){try{return{fulfilled:!0,value:yield g}}catch(_){return{fulfilled:!1,reason:_}}});return function(g){return f.apply(this,arguments)}}()))}(Ge);T.ports[0].postMessage({status:"done",eventId:x,eventType:B,response:et})})()}_subscribe(g,_){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[g]||(this.handlersMap[g]=new Set),this.handlersMap[g].add(_)}_unsubscribe(g,_){this.handlersMap[g]&&_&&this.handlersMap[g].delete(_),(!_||0===this.handlersMap[g].size)&&delete this.handlersMap[g],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return v.receivers=[],v})();function qo(v="",f=10){let g="";for(let _=0;_<f;_++)g+=Math.floor(10*Math.random());return v+g}class p_{constructor(f){this.target=f,this.handlers=new Set}removeMessageHandler(f){f.messageChannel&&(f.messageChannel.port1.removeEventListener("message",f.onMessage),f.messageChannel.port1.close()),this.handlers.delete(f)}_send(f,g,_=50){var T=this;return(0,h.Z)(function*(){const x=typeof MessageChannel<"u"?new MessageChannel:null;if(!x)throw new Error("connection_unavailable");let B,Y;return new Promise((Se,Ge)=>{const et=qo("",20);x.port1.start();const rt=setTimeout(()=>{Ge(new Error("unsupported_event"))},_);Y={messageChannel:x,onMessage(Pn){const Ts=Pn;if(Ts.data.eventId===et)switch(Ts.data.status){case"ack":clearTimeout(rt),B=setTimeout(()=>{Ge(new Error("timeout"))},3e3);break;case"done":clearTimeout(B),Se(Ts.data.response);break;default:clearTimeout(rt),clearTimeout(B),Ge(new Error("invalid_response"))}}},T.handlers.add(Y),x.port1.addEventListener("message",Y.onMessage),T.target.postMessage({eventType:f,eventId:et,data:g},[x.port2])}).finally(()=>{Y&&T.removeMessageHandler(Y)})})()}}function $n(){return window}function Rr(){return typeof $n().WorkerGlobalScope<"u"&&"function"==typeof $n().importScripts}function Wu(){return(Wu=(0,h.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Kd="firebaseLocalStorageDb",Za="firebaseLocalStorage",Zu="fbase_key";class go{constructor(f){this.request=f}toPromise(){return new Promise((f,g)=>{this.request.addEventListener("success",()=>{f(this.request.result)}),this.request.addEventListener("error",()=>{g(this.request.error)})})}}function Ka(v,f){return v.transaction([Za],f?"readwrite":"readonly").objectStore(Za)}function Ku(){const v=indexedDB.open(Kd,1);return new Promise((f,g)=>{v.addEventListener("error",()=>{g(v.error)}),v.addEventListener("upgradeneeded",()=>{const _=v.result;try{_.createObjectStore(Za,{keyPath:Zu})}catch(T){g(T)}}),v.addEventListener("success",(0,h.Z)(function*(){const _=v.result;_.objectStoreNames.contains(Za)?f(_):(_.close(),yield function Yd(){const v=indexedDB.deleteDatabase(Kd);return new go(v).toPromise()}(),f(yield Ku()))}))})}function Yu(v,f,g){return Ya.apply(this,arguments)}function Ya(){return(Ya=(0,h.Z)(function*(v,f,g){const _=Ka(v,!0).put({[Zu]:f,value:g});return new go(_).toPromise()})).apply(this,arguments)}function Li(){return(Li=(0,h.Z)(function*(v,f){const g=Ka(v,!1).get(f),_=yield new go(g).toPromise();return void 0===_?null:_.value})).apply(this,arguments)}function pl(v,f){const g=Ka(v,!0).delete(f);return new go(g).toPromise()}const Qa=(()=>{class v{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var g=this;return(0,h.Z)(function*(){return g.db||(g.db=yield Ku()),g.db})()}_withRetries(g){var _=this;return(0,h.Z)(function*(){let T=0;for(;;)try{const x=yield _._openDb();return yield g(x)}catch(x){if(T++>3)throw x;_.db&&(_.db.close(),_.db=void 0)}})()}initializeServiceWorkerMessaging(){var g=this;return(0,h.Z)(function*(){return Rr()?g.initializeReceiver():g.initializeSender()})()}initializeReceiver(){var g=this;return(0,h.Z)(function*(){g.receiver=Wa._getInstance(function hn(){return Rr()?self:null}()),g.receiver._subscribe("keyChanged",function(){var _=(0,h.Z)(function*(T,x){return{keyProcessed:(yield g._poll()).includes(x.key)}});return function(T,x){return _.apply(this,arguments)}}()),g.receiver._subscribe("ping",function(){var _=(0,h.Z)(function*(T,x){return["keyChanged"]});return function(T,x){return _.apply(this,arguments)}}())})()}initializeSender(){var g=this;return(0,h.Z)(function*(){var _,T;if(g.activeServiceWorker=yield function Is(){return Wu.apply(this,arguments)}(),!g.activeServiceWorker)return;g.sender=new p_(g.activeServiceWorker);const x=yield g.sender._send("ping",{},800);x&&null!==(_=x[0])&&void 0!==_&&_.fulfilled&&null!==(T=x[0])&&void 0!==T&&T.value.includes("keyChanged")&&(g.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(g){var _=this;return(0,h.Z)(function*(){if(_.sender&&_.activeServiceWorker&&function zs(){var v;return(null===(v=navigator?.serviceWorker)||void 0===v?void 0:v.controller)||null}()===_.activeServiceWorker)try{yield _.sender._send("keyChanged",{key:g},_.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,h.Z)(function*(){try{if(!indexedDB)return!1;const g=yield Ku();return yield Yu(g,zo,"1"),yield pl(g,zo),!0}catch{}return!1})()}_withPendingWrite(g){var _=this;return(0,h.Z)(function*(){_.pendingWrites++;try{yield g()}finally{_.pendingWrites--}})()}_set(g,_){var T=this;return(0,h.Z)(function*(){return T._withPendingWrite((0,h.Z)(function*(){return yield T._withRetries(x=>Yu(x,g,_)),T.localCache[g]=_,T.notifyServiceWorker(g)}))})()}_get(g){var _=this;return(0,h.Z)(function*(){const T=yield _._withRetries(x=>function Wo(v,f){return Li.apply(this,arguments)}(x,g));return _.localCache[g]=T,T})()}_remove(g){var _=this;return(0,h.Z)(function*(){return _._withPendingWrite((0,h.Z)(function*(){return yield _._withRetries(T=>pl(T,g)),delete _.localCache[g],_.notifyServiceWorker(g)}))})()}_poll(){var g=this;return(0,h.Z)(function*(){const _=yield g._withRetries(B=>{const Y=Ka(B,!1).getAll();return new go(Y).toPromise()});if(!_)return[];if(0!==g.pendingWrites)return[];const T=[],x=new Set;for(const{fbase_key:B,value:Y}of _)x.add(B),JSON.stringify(g.localCache[B])!==JSON.stringify(Y)&&(g.notifyListeners(B,Y),T.push(B));for(const B of Object.keys(g.localCache))g.localCache[B]&&!x.has(B)&&(g.notifyListeners(B,null),T.push(B));return T})()}notifyListeners(g,_){this.localCache[g]=_;const T=this.listeners[g];if(T)for(const x of Array.from(T))x(_)}startPolling(){var g=this;this.stopPolling(),this.pollTimer=setInterval((0,h.Z)(function*(){return g._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(g,_){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[g]||(this.listeners[g]=new Set,this._get(g)),this.listeners[g].add(_)}_removeListener(g,_){this.listeners[g]&&(this.listeners[g].delete(_),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return v.type="LOCAL",v})(),Ja=1e12;class ep{constructor(f){this.auth=f,this.counter=Ja,this._widgets=new Map}render(f,g){const _=this.counter;return this._widgets.set(_,new Jd(f,this.auth.name,g||{})),this.counter++,_}reset(f){var g;const _=f||Ja;null===(g=this._widgets.get(_))||void 0===g||g.delete(),this._widgets.delete(_)}getResponse(f){var g;return(null===(g=this._widgets.get(f||Ja))||void 0===g?void 0:g.getResponse())||""}execute(f){var g=this;return(0,h.Z)(function*(){var _;return null===(_=g._widgets.get(f||Ja))||void 0===_||_.execute(),""})()}}class Jd{constructor(f,g,_){this.params=_,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const T="string"==typeof f?document.getElementById(f):f;ie(T,"argument-error",{appName:g}),this.container=T,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function tp(v){const f=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let _=0;_<v;_++)f.push(g.charAt(Math.floor(62*Math.random())));return f.join("")}(50);const{callback:f,"expired-callback":g}=this.params;if(f)try{f(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,g)try{g()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const ml=so("rcb"),yl=new Ee(3e4,6e4);class Xd{constructor(){var f;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(f=$n().grecaptcha)||void 0===f||!f.render)}load(f,g=""){return ie(function Xa(v){return v.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(v)}(g),f,"argument-error"),this.shouldResolveImmediately(g)&&Ft($n().grecaptcha)?Promise.resolve($n().grecaptcha):new Promise((_,T)=>{const x=$n().setTimeout(()=>{T(K(f,"network-request-failed"))},yl.get());$n()[ml]=()=>{$n().clearTimeout(x),delete $n()[ml];const Y=$n().grecaptcha;if(!Y||!Ft(Y))return void T(K(f,"internal-error"));const Se=Y.render;Y.render=(Ge,et)=>{const rt=Se(Ge,et);return this.counter++,rt},this.hostLanguage=g,_(Y)},gs(`https://www.google.com/recaptcha/api.js??${(0,P.xO)({onload:ml,render:"explicit",hl:g})}`).catch(()=>{clearTimeout(x),T(K(f,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(f){var g;return!(null===(g=$n().grecaptcha)||void 0===g||!g.render)&&(f===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class vl{load(f){return(0,h.Z)(function*(){return new ep(f)})()}clearedOneInstance(){}}const Zo="recaptcha",eh={theme:"light",type:"image"};class _l{constructor(f,g=Object.assign({},eh),_){this.parameters=g,this.type=Zo,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Yn(_),this.isInvisible="invisible"===this.parameters.size,ie(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const T="string"==typeof f?document.getElementById(f):f;ie(T,this.auth,"argument-error"),this.container=T,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new vl:new Xd,this.validateStartingState()}verify(){var f=this;return(0,h.Z)(function*(){f.assertNotDestroyed();const g=yield f.render(),_=f.getAssertedRecaptcha();return _.getResponse(g)||new Promise(x=>{const B=Y=>{Y&&(f.tokenChangeListeners.delete(B),x(Y))};f.tokenChangeListeners.add(B),f.isInvisible&&_.execute(g)})})()}render(){try{this.assertNotDestroyed()}catch(f){return Promise.reject(f)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(f=>{throw this.renderPromise=null,f})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(f=>{this.container.removeChild(f)})}validateStartingState(){ie(!this.parameters.sitekey,this.auth,"argument-error"),ie(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ie(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(f){return g=>{if(this.tokenChangeListeners.forEach(_=>_(g)),"function"==typeof f)f(g);else if("string"==typeof f){const _=$n()[f];"function"==typeof _&&_(g)}}}assertNotDestroyed(){ie(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var f=this;return(0,h.Z)(function*(){if(yield f.init(),!f.widgetId){let g=f.container;if(!f.isInvisible){const _=document.createElement("div");g.appendChild(_),g=_}f.widgetId=f.getAssertedRecaptcha().render(g,f.parameters)}return f.widgetId})()}init(){var f=this;return(0,h.Z)(function*(){ie(zr()&&!Rr(),f.auth,"internal-error"),yield function np(){let v=null;return new Promise(f=>{"complete"!==document.readyState?(v=()=>f(),window.addEventListener("load",v)):f()}).catch(f=>{throw v&&window.removeEventListener("load",v),f})}(),f.recaptcha=yield f._recaptchaLoader.load(f.auth,f.auth.languageCode||void 0);const g=yield function ee(v){return xe.apply(this,arguments)}(f.auth);ie(g,f.auth,"internal-error"),f.parameters.sitekey=g})()}getAssertedRecaptcha(){return ie(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Ju{constructor(f,g){this.verificationId=f,this.onConfirmation=g}confirm(f){const g=Un._fromVerification(this.verificationId,f);return this.onConfirmation(g)}}function _r(){return(_r=(0,h.Z)(function*(v,f,g){const _=Yn(v),T=yield Ko(_,f,(0,P.m9)(g));return new Ju(T,x=>La(_,x))})).apply(this,arguments)}function Xu(){return(Xu=(0,h.Z)(function*(v,f,g){const _=(0,P.m9)(v);yield Fa(!1,_,"phone");const T=yield Ko(_.auth,f,(0,P.m9)(g));return new Ju(T,x=>Im(_,x))})).apply(this,arguments)}function wl(){return(wl=(0,h.Z)(function*(v,f,g){const _=(0,P.m9)(v),T=yield Ko(_.auth,f,(0,P.m9)(g));return new Ju(T,x=>jn(_,x))})).apply(this,arguments)}function Ko(v,f,g){return El.apply(this,arguments)}function El(){return El=(0,h.Z)(function*(v,f,g){var _;const T=yield g.verify();try{let x;if(ie("string"==typeof T,v,"argument-error"),ie(g.type===Zo,v,"argument-error"),x="string"==typeof f?{phoneNumber:f}:f,"session"in x){const B=x.session;if("phoneNumber"in x)return ie("enroll"===B.type,v,"internal-error"),(yield function ll(v,f){return Ut(v,"POST","/v2/accounts/mfaEnrollment:start",Xe(v,f))}(v,{idToken:B.credential,phoneEnrollmentInfo:{phoneNumber:x.phoneNumber,recaptchaToken:T}})).phoneSessionInfo.sessionInfo;{ie("signin"===B.type,v,"internal-error");const Y=(null===(_=x.multiFactorHint)||void 0===_?void 0:_.uid)||x.multiFactorUid;return ie(Y,v,"missing-multi-factor-info"),(yield function Xf(v,f){return Ut(v,"POST","/v2/accounts/mfaSignIn:start",Xe(v,f))}(v,{mfaPendingCredential:B.credential,mfaEnrollmentId:Y,phoneSignInInfo:{recaptchaToken:T}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:B}=yield function Pd(v,f){return is.apply(this,arguments)}(v,{phoneNumber:x.phoneNumber,recaptchaToken:T});return B}}finally{g._reset()}}),El.apply(this,arguments)}function Yo(){return(Yo=(0,h.Z)(function*(v,f){yield Qc((0,P.m9)(v),f)})).apply(this,arguments)}let Hn=(()=>{class v{constructor(g){this.providerId=v.PROVIDER_ID,this.auth=Yn(g)}verifyPhoneNumber(g,_){return Ko(this.auth,g,(0,P.m9)(_))}static credential(g,_){return Un._fromVerification(g,_)}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{phoneNumber:_,temporaryProof:T}=g;return _&&T?Un._fromTokenResponse(_,T):null}}return v.PROVIDER_ID="phone",v.PHONE_SIGN_IN_METHOD="phone",v})();function Tt(v,f){return f?Jt(f):(ie(v._popupRedirectResolver,v,"argument-error"),v._popupRedirectResolver)}class Ci extends ms{constructor(f){super("custom","custom"),this.params=f}_getIdTokenResponse(f){return yr(f,this._buildIdpRequest())}_linkToIdToken(f,g){return yr(f,this._buildIdpRequest(g))}_getReauthenticationResolver(f){return yr(f,this._buildIdpRequest())}_buildIdpRequest(f){const g={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return f&&(g.idToken=f),g}}function nu(v){return Ld(v.auth,new Ci(v),v.bypassAuthState)}function ru(v){const{auth:f,user:g}=v;return ie(g,f,"internal-error"),qf(g,new Ci(v),v.bypassAuthState)}function qs(v){return Il.apply(this,arguments)}function Il(){return(Il=(0,h.Z)(function*(v){const{auth:f,user:g}=v;return ie(g,f,"internal-error"),Qc(g,new Ci(v),v.bypassAuthState)})).apply(this,arguments)}class iu{constructor(f,g,_,T,x=!1){this.auth=f,this.resolver=_,this.user=T,this.bypassAuthState=x,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(g)?g:[g]}execute(){var f=this;return new Promise(function(){var g=(0,h.Z)(function*(_,T){f.pendingPromise={resolve:_,reject:T};try{f.eventManager=yield f.resolver._initialize(f.auth),yield f.onExecution(),f.eventManager.registerConsumer(f)}catch(x){f.reject(x)}});return function(_,T){return g.apply(this,arguments)}}())}onAuthEvent(f){var g=this;return(0,h.Z)(function*(){const{urlResponse:_,sessionId:T,postBody:x,tenantId:B,error:Y,type:Se}=f;if(Y)return void g.reject(Y);const Ge={auth:g.auth,requestUri:_,sessionId:T,tenantId:B||void 0,postBody:x||void 0,user:g.user,bypassAuthState:g.bypassAuthState};try{g.resolve(yield g.getIdpTask(Se)(Ge))}catch(et){g.reject(et)}})()}onError(f){this.reject(f)}getIdpTask(f){switch(f){case"signInViaPopup":case"signInViaRedirect":return nu;case"linkViaPopup":case"linkViaRedirect":return qs;case"reauthViaPopup":case"reauthViaRedirect":return ru;default:pe(this.auth,"internal-error")}}resolve(f){Ht(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(f),this.unregisterAndCleanUp()}reject(f){Ht(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(f),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const wr=new Ee(2e3,1e4);function Vi(){return(Vi=(0,h.Z)(function*(v,f,g){const _=Yn(v);Te(v,f,ss);const T=Tt(_,g);return new Ds(_,"signInViaPopup",f,T).executeNotNull()})).apply(this,arguments)}function Qo(){return(Qo=(0,h.Z)(function*(v,f,g){const _=(0,P.m9)(v);Te(_.auth,f,ss);const T=Tt(_.auth,g);return new Ds(_.auth,"reauthViaPopup",f,T,_).executeNotNull()})).apply(this,arguments)}function ec(){return(ec=(0,h.Z)(function*(v,f,g){const _=(0,P.m9)(v);Te(_.auth,f,ss);const T=Tt(_.auth,g);return new Ds(_.auth,"linkViaPopup",f,T,_).executeNotNull()})).apply(this,arguments)}let Ds=(()=>{class v extends iu{constructor(g,_,T,x,B){super(g,_,x,B),this.provider=T,this.authWindow=null,this.pollId=null,v.currentPopupAction&&v.currentPopupAction.cancel(),v.currentPopupAction=this}executeNotNull(){var g=this;return(0,h.Z)(function*(){const _=yield g.execute();return ie(_,g.auth,"internal-error"),_})()}onExecution(){var g=this;return(0,h.Z)(function*(){Ht(1===g.filter.length,"Popup operations only handle one event");const _=qo();g.authWindow=yield g.resolver._openPopup(g.auth,g.provider,g.filter[0],_),g.authWindow.associatedEvent=_,g.resolver._originValidation(g.auth).catch(T=>{g.reject(T)}),g.resolver._isIframeWebStorageSupported(g.auth,T=>{T||g.reject(K(g.auth,"web-storage-unsupported"))}),g.pollUserCancellation()})()}get eventId(){var g;return(null===(g=this.authWindow)||void 0===g?void 0:g.associatedEvent)||null}cancel(){this.reject(K(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,v.currentPopupAction=null}pollUserCancellation(){const g=()=>{var _,T;this.pollId=null!==(T=null===(_=this.authWindow)||void 0===_?void 0:_.window)&&void 0!==T&&T.closed?window.setTimeout(()=>{this.pollId=null,this.reject(K(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(g,wr.get())};g()}}return v.currentPopupAction=null,v})();const Ti="pendingRedirect",su=new Map;class Pr extends iu{constructor(f,g,_=!1){super(f,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],g,void 0,_),this.eventId=null}execute(){var f=()=>super.execute,g=this;return(0,h.Z)(function*(){let _=su.get(g.auth._key());if(!_){try{const x=(yield function Ui(v,f){return Dl.apply(this,arguments)}(g.resolver,g.auth))?yield f().call(g):null;_=()=>Promise.resolve(x)}catch(T){_=()=>Promise.reject(T)}su.set(g.auth._key(),_)}return g.bypassAuthState||su.set(g.auth._key(),()=>Promise.resolve(null)),_()})()}onAuthEvent(f){var g=()=>super.onAuthEvent,_=this;return(0,h.Z)(function*(){if("signInViaRedirect"===f.type)return g().call(_,f);if("unknown"!==f.type){if(f.eventId){const T=yield _.auth._redirectUserForId(f.eventId);if(T)return _.user=T,g().call(_,f);_.resolve(null)}}else _.resolve(null)})()}onExecution(){return(0,h.Z)(function*(){})()}cleanUp(){}}function Dl(){return(Dl=(0,h.Z)(function*(v,f){const g=ou(f),_=ih(v);if(!(yield _._isAvailable()))return!1;const T="true"===(yield _._get(g));return yield _._remove(g),T})).apply(this,arguments)}function rh(v,f){return Cl.apply(this,arguments)}function Cl(){return(Cl=(0,h.Z)(function*(v,f){return ih(v)._set(ou(f),"true")})).apply(this,arguments)}function us(v,f){su.set(v._key(),f)}function ih(v){return Jt(v._redirectPersistence)}function ou(v){return U(Ti,v.config.apiKey,v.name)}function nc(v,f,g){return function yo(v,f,g){return rc.apply(this,arguments)}(v,f,g)}function rc(){return(rc=(0,h.Z)(function*(v,f,g){const _=Yn(v);Te(v,f,ss),yield _._initializationPromise;const T=Tt(_,g);return yield rh(T,_),T._openRedirect(_,f,"signInViaRedirect")})).apply(this,arguments)}function au(v,f,g){return function ic(v,f,g){return sc.apply(this,arguments)}(v,f,g)}function sc(){return(sc=(0,h.Z)(function*(v,f,g){const _=(0,P.m9)(v);Te(_.auth,f,ss),yield _.auth._initializationPromise;const T=Tt(_.auth,g);yield rh(T,_.auth);const x=yield Bi(_);return T._openRedirect(_.auth,f,"reauthViaRedirect",x)})).apply(this,arguments)}function bl(v,f,g){return function Tl(v,f,g){return Ws.apply(this,arguments)}(v,f,g)}function Ws(){return(Ws=(0,h.Z)(function*(v,f,g){const _=(0,P.m9)(v);Te(_.auth,f,ss),yield _.auth._initializationPromise;const T=Tt(_.auth,g);yield Fa(!1,_,f.providerId),yield rh(T,_.auth);const x=yield Bi(_);return T._openRedirect(_.auth,f,"linkViaRedirect",x)})).apply(this,arguments)}function Cs(){return(Cs=(0,h.Z)(function*(v,f){return yield Yn(v)._initializationPromise,_o(v,f,!1)})).apply(this,arguments)}function _o(v,f){return Jo.apply(this,arguments)}function Jo(){return(Jo=(0,h.Z)(function*(v,f,g=!1){const _=Yn(v),T=Tt(_,f),B=yield new Pr(_,T,g).execute();return B&&!g&&(delete B.user._redirectEventId,yield _._persistUserIfCurrent(B.user),yield _._setRedirectUser(null,f)),B})).apply(this,arguments)}function Bi(v){return uu.apply(this,arguments)}function uu(){return(uu=(0,h.Z)(function*(v){const f=qo(`${v.uid}:::`);return v._redirectEventId=f,yield v.auth._setRedirectUser(v),yield v.auth._persistUserIfCurrent(v),f})).apply(this,arguments)}class ac{constructor(f){this.auth=f,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(f){this.consumers.add(f),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,f)&&(this.sendToConsumer(this.queuedRedirectEvent,f),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(f){this.consumers.delete(f)}onEvent(f){if(this.hasEventBeenHandled(f))return!1;let g=!1;return this.consumers.forEach(_=>{this.isEventForConsumer(f,_)&&(g=!0,this.sendToConsumer(f,_),this.saveEventToCache(f))}),this.hasHandledPotentialRedirect||!function Sl(v){switch(v.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Xo(v);default:return!1}}(f)||(this.hasHandledPotentialRedirect=!0,g||(this.queuedRedirectEvent=f,g=!0)),g}sendToConsumer(f,g){var _;if(f.error&&!Xo(f)){const T=(null===(_=f.error.code)||void 0===_?void 0:_.split("auth/")[1])||"internal-error";g.onError(K(this.auth,T))}else g.onAuthEvent(f)}isEventForConsumer(f,g){const _=null===g.eventId||!!f.eventId&&f.eventId===g.eventId;return g.filter.includes(f.type)&&_}hasEventBeenHandled(f){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(cu(f))}saveEventToCache(f){this.cachedEventUids.add(cu(f)),this.lastProcessedEventTime=Date.now()}}function cu(v){return[v.type,v.eventId,v.sessionId,v.tenantId].filter(f=>f).join("-")}function Xo({type:v,error:f}){return"unknown"===v&&"auth/no-auth-event"===f?.code}function ip(v){return sh.apply(this,arguments)}function sh(){return(sh=(0,h.Z)(function*(v,f={}){return Ut(v,"GET","/v1/projects",f)})).apply(this,arguments)}const cr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,wo=/^https?/;function Dn(){return(Dn=(0,h.Z)(function*(v){if(v.config.emulator)return;const{authorizedDomains:f}=yield ip(v);for(const g of f)try{if(op(g))return}catch{}pe(v,"unauthorized-domain")})).apply(this,arguments)}function op(v){const f=fr(),{protocol:g,hostname:_}=new URL(f);if(v.startsWith("chrome-extension://")){const B=new URL(v);return""===B.hostname&&""===_?"chrome-extension:"===g&&v.replace("chrome-extension://","")===f.replace("chrome-extension://",""):"chrome-extension:"===g&&B.hostname===_}if(!wo.test(g))return!1;if(cr.test(v))return _===v;const T=v.replace(/\./g,"\\.");return new RegExp("^(.+\\."+T+"|"+T+")$","i").test(_)}const Zs=new Ee(3e4,6e4);function Al(){const v=$n().___jsl;if(v?.H)for(const f of Object.keys(v.H))if(v.H[f].r=v.H[f].r||[],v.H[f].L=v.H[f].L||[],v.H[f].r=[...v.H[f].L],v.CP)for(let g=0;g<v.CP.length;g++)v.CP[g]=null}let ji=null;const lu=new Ee(5e3,15e3),uc="__/auth/iframe",ap="emulator/auth/iframe",g_={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Mm=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function KE(v){const f=v.config;ie(f.authDomain,v,"auth-domain-config-required");const g=f.emulator?Ae(f,ap):`https://${v.config.authDomain}/${uc}`,_={apiKey:f.apiKey,appName:v.name,v:J.SDK_VERSION},T=Mm.get(v.config.apiHost);T&&(_.eid=T);const x=v._getFrameworks();return x.length&&(_.fw=x.join(",")),`${g}?${(0,P.xO)(_).slice(1)}`}function C(){return C=(0,h.Z)(function*(v){const f=yield function Ks(v){return ji=ji||function Jn(v){return new Promise((f,g)=>{var _,T,x;function B(){Al(),gapi.load("gapi.iframes",{callback:()=>{f(gapi.iframes.getContext())},ontimeout:()=>{Al(),g(K(v,"network-request-failed"))},timeout:Zs.get()})}if(null!==(T=null===(_=$n().gapi)||void 0===_?void 0:_.iframes)&&void 0!==T&&T.Iframe)f(gapi.iframes.getContext());else{if(null===(x=$n().gapi)||void 0===x||!x.load){const Y=so("iframefcb");return $n()[Y]=()=>{gapi.load?B():g(K(v,"network-request-failed"))},gs(`https://apis.google.com/js/api.js?onload=${Y}`).catch(Se=>g(Se))}B()}}).catch(f=>{throw ji=null,f})}(v),ji}(v),g=$n().gapi;return ie(g,v,"internal-error"),f.open({where:document.body,url:KE(v),messageHandlersFilter:g.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:g_,dontclear:!0},_=>new Promise(function(){var T=(0,h.Z)(function*(x,B){yield _.restyle({setHideOnLeave:!1});const Y=K(v,"network-request-failed"),Se=$n().setTimeout(()=>{B(Y)},lu.get());function Ge(){$n().clearTimeout(Se),x(_)}_.ping(Ge).then(Ge,()=>{B(Y)})});return function(x,B){return T.apply(this,arguments)}}()))}),C.apply(this,arguments)}const M={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class We{constructor(f){this.window=f,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const Dt="__/auth/handler",Ct="emulator/auth/handler",Er=encodeURIComponent("fac");function ir(v,f,g,_,T,x){return $i.apply(this,arguments)}function $i(){return($i=(0,h.Z)(function*(v,f,g,_,T,x){ie(v.config.authDomain,v,"auth-domain-config-required"),ie(v.config.apiKey,v,"invalid-api-key");const B={apiKey:v.config.apiKey,appName:v.name,authType:g,redirectUrl:_,v:J.SDK_VERSION,eventId:T};if(f instanceof ss){f.setDefaultLanguage(v.languageCode),B.providerId=f.providerId||"",(0,P.xb)(f.getCustomParameters())||(B.customParameters=JSON.stringify(f.getCustomParameters()));for(const[et,rt]of Object.entries(x||{}))B[et]=rt}if(f instanceof Kr){const et=f.getScopes().filter(rt=>""!==rt);et.length>0&&(B.scopes=et.join(","))}v.tenantId&&(B.tid=v.tenantId);const Y=B;for(const et of Object.keys(Y))void 0===Y[et]&&delete Y[et];const Se=yield v._getAppCheckToken(),Ge=Se?`#${Er}=${encodeURIComponent(Se)}`:"";return`${function Ml({config:v}){return v.emulator?Ae(v,Ct):`https://${v.authDomain}/${Dt}`}(v)}?${(0,P.xO)(Y).slice(1)}${Ge}`})).apply(this,arguments)}const li="webStorageSupport",Hi=class Si{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Di,this._completeRedirectFn=_o,this._overrideRedirectResult=us}_openPopup(f,g,_,T){var x=this;return(0,h.Z)(function*(){var B;Ht(null===(B=x.eventManagers[f._key()])||void 0===B?void 0:B.manager,"_initialize() not called before _openPopup()");const Y=yield ir(f,g,_,fr(),T);return function Be(v,f,g,_=500,T=600){const x=Math.max((window.screen.availHeight-T)/2,0).toString(),B=Math.max((window.screen.availWidth-_)/2,0).toString();let Y="";const Se=Object.assign(Object.assign({},M),{width:_.toString(),height:T.toString(),top:x,left:B}),Ge=(0,P.z$)().toLowerCase();g&&(Y=nt(Ge)?"_blank":g),_e(Ge)&&(f=f||"http://localhost",Se.scrollbars="yes");const et=Object.entries(Se).reduce((Pn,[Ts,wh])=>`${Pn}${Ts}=${wh},`,"");if(function mr(v=(0,P.z$)()){var f;return bt(v)&&!(null===(f=window.navigator)||void 0===f||!f.standalone)}(Ge)&&"_self"!==Y)return function it(v,f){const g=document.createElement("a");g.href=v,g.target=f;const _=document.createEvent("MouseEvent");_.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),g.dispatchEvent(_)}(f||"",Y),new We(null);const rt=window.open(f||"",Y,et);ie(rt,v,"popup-blocked");try{rt.focus()}catch{}return new We(rt)}(f,Y,qo())})()}_openRedirect(f,g,_,T){var x=this;return(0,h.Z)(function*(){return yield x._originValidation(f),function fl(v){$n().location.href=v}(yield ir(f,g,_,fr(),T)),new Promise(()=>{})})()}_initialize(f){const g=f._key();if(this.eventManagers[g]){const{manager:T,promise:x}=this.eventManagers[g];return T?Promise.resolve(T):(Ht(x,"If manager is not set, promise should be"),x)}const _=this.initAndGetManager(f);return this.eventManagers[g]={promise:_},_.catch(()=>{delete this.eventManagers[g]}),_}initAndGetManager(f){var g=this;return(0,h.Z)(function*(){const _=yield function E(v){return C.apply(this,arguments)}(f),T=new ac(f);return _.register("authEvent",x=>(ie(x?.authEvent,f,"invalid-auth-event"),{status:T.onEvent(x.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),g.eventManagers[f._key()]={manager:T},g.iframes[f._key()]=_,T})()}_isIframeWebStorageSupported(f,g){this.iframes[f._key()].send(li,{type:li},T=>{var x;const B=null===(x=T?.[0])||void 0===x?void 0:x[li];void 0!==B&&g(!!B),pe(f,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(f){const g=f._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function sp(v){return Dn.apply(this,arguments)}(f)),this.originValidationPromises[g]}get _shouldInitProactively(){return rs()||se()||bt()}};class du{constructor(f){this.factorId=f}_process(f,g,_){switch(g.type){case"enroll":return this._finalizeEnroll(f,g.credential,_);case"signin":return this._finalizeSignIn(f,g.credential);default:return $e("unexpected MultiFactorSessionType")}}}class ea extends du{constructor(f){super("phone"),this.credential=f}static _fromCredential(f){return new ea(f)}_finalizeEnroll(f,g,_){return function Qf(v,f){return Ut(v,"POST","/v2/accounts/mfaEnrollment:finalize",Xe(v,f))}(f,{idToken:g,displayName:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(f,g){return function Yr(v,f){return Ut(v,"POST","/v2/accounts/mfaSignIn:finalize",Xe(v,f))}(f,{mfaPendingCredential:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let m_=(()=>{class v{constructor(){}static assertion(g){return ea._fromCredential(g)}}return v.FACTOR_ID="phone",v})();var xl="@firebase/auth";class lc{constructor(f){this.auth=f,this.internalListeners=new Map}getUid(){var f;return this.assertAuthConfigured(),(null===(f=this.auth.currentUser)||void 0===f?void 0:f.uid)||null}getToken(f){var g=this;return(0,h.Z)(function*(){return g.assertAuthConfigured(),yield g.auth._initializationPromise,g.auth.currentUser?{accessToken:yield g.auth.currentUser.getIdToken(f)}:null})()}addAuthTokenListener(f){if(this.assertAuthConfigured(),this.internalListeners.has(f))return;const g=this.auth.onIdTokenChanged(_=>{f(_?.stsTokenManager.accessToken||null)});this.internalListeners.set(f,g),this.updateProactiveRefresh()}removeAuthTokenListener(f){this.assertAuthConfigured();const g=this.internalListeners.get(f);g&&(this.internalListeners.delete(f),g(),this.updateProactiveRefresh())}assertAuthConfigured(){ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function ta(){return window}(0,P.Pz)("authIdTokenMaxAge"),function cp(v){(0,J._registerComponent)(new fe.wA("auth",(f,{options:g})=>{const _=f.getProvider("app").getImmediate(),T=f.getProvider("heartbeat"),x=f.getProvider("app-check-internal"),{apiKey:B,authDomain:Y}=_.options;ie(B&&!B.includes(":"),"invalid-api-key",{appName:_.name});const Se={apiKey:B,authDomain:Y,clientPlatform:v,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ue(v)},Ge=new xd(_,T,x,Se);return function $f(v,f){const g=f?.persistence||[],_=(Array.isArray(g)?g:[g]).map(Jt);f?.errorMap&&v._updateErrorMap(f.errorMap),v._initializeWithPersistence(_,f?.popupRedirectResolver)}(Ge,g),Ge},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((f,g,_)=>{f.getProvider("auth-internal").initialize()})),(0,J._registerComponent)(new fe.wA("auth-internal",f=>{const g=Yn(f.getProvider("auth").getImmediate());return new lc(g)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,J.registerVersion)(xl,"0.23.2",function ah(v){switch(v){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(v)),(0,J.registerVersion)(xl,"0.23.2","esm2017")}("Browser");function ch(){return ch=(0,h.Z)(function*(v,f,g){var _;const{BuildInfo:T}=ta();Ht(f.sessionId,"AuthEvent did not contain a session ID");const x=yield function fp(v){return pp.apply(this,arguments)}(f.sessionId),B={};return bt()?B.ibi=T.packageName:Nt()?B.apn=T.packageName:pe(v,"operation-not-supported-in-this-environment"),T.displayName&&(B.appDisplayName=T.displayName),B.sessionId=x,ir(v,g,f.type,void 0,null!==(_=f.eventId)&&void 0!==_?_:void 0,B)}),ch.apply(this,arguments)}function dp(){return(dp=(0,h.Z)(function*(v){const{BuildInfo:f}=ta(),g={};bt()?g.iosBundleId=f.packageName:Nt()?g.androidPackageName=f.packageName:pe(v,"operation-not-supported-in-this-environment"),yield ip(v,g)})).apply(this,arguments)}function w_(){return(w_=(0,h.Z)(function*(v,f,g){const{cordova:_}=ta();let T=()=>{};try{yield new Promise((x,B)=>{let Y=null;function Se(){var rt;x();const Pn=null===(rt=_.plugins.browsertab)||void 0===rt?void 0:rt.close;"function"==typeof Pn&&Pn(),"function"==typeof g?.close&&g.close()}function Ge(){Y||(Y=window.setTimeout(()=>{B(K(v,"redirect-cancelled-by-user"))},2e3))}function et(){"visible"===document?.visibilityState&&Ge()}f.addPassiveListener(Se),document.addEventListener("resume",Ge,!1),Nt()&&document.addEventListener("visibilitychange",et,!1),T=()=>{f.removePassiveListener(Se),document.removeEventListener("resume",Ge,!1),document.removeEventListener("visibilitychange",et,!1),Y&&window.clearTimeout(Y)}})}finally{T()}})).apply(this,arguments)}function pp(){return(pp=(0,h.Z)(function*(v){const f=function Om(v){if(Ht(/[0-9a-zA-Z]+/.test(v),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(v);const f=new ArrayBuffer(v.length),g=new Uint8Array(f);for(let _=0;_<v.length;_++)g[_]=v.charCodeAt(_);return g}(v),g=yield crypto.subtle.digest("SHA-256",f);return Array.from(new Uint8Array(g)).map(T=>T.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class iT extends ac{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(f=>{this.resolveInialized=f})}addPassiveListener(f){this.passiveListeners.add(f)}removePassiveListener(f){this.passiveListeners.delete(f)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(f){return this.resolveInialized(),this.passiveListeners.forEach(g=>g(f)),super.onEvent(f)}initialized(){var f=this;return(0,h.Z)(function*(){yield f.initPromise})()}}function na(v){return dc.apply(this,arguments)}function dc(){return(dc=(0,h.Z)(function*(v){const f=yield yp()._get(ra(v));return f&&(yield yp()._remove(ra(v))),f})).apply(this,arguments)}function mp(){const v=[];for(let g=0;g<20;g++){const _=Math.floor(62*Math.random());v.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(_))}return v.join("")}function yp(){return Jt(Sn)}function ra(v){return U("authEvent",v.config.apiKey,v.name)}function hc(v){if(!v?.includes("?"))return{};const[f,...g]=v.split("?");return(0,P.zd)(g.join("?"))}const E_=class JE{constructor(){this._redirectPersistence=Di,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=_o,this._overrideRedirectResult=us}_initialize(f){var g=this;return(0,h.Z)(function*(){const _=f._key();let T=g.eventManagers.get(_);return T||(T=new iT(f),g.eventManagers.set(_,T),g.attachCallbackListeners(f,T)),T})()}_openPopup(f){pe(f,"operation-not-supported-in-this-environment")}_openRedirect(f,g,_,T){var x=this;return(0,h.Z)(function*(){!function Rm(v){var f,g,_,T,x,B,Y,Se,Ge,et;const rt=ta();ie("function"==typeof(null===(f=rt?.universalLinks)||void 0===f?void 0:f.subscribe),v,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),ie(typeof(null===(g=rt?.BuildInfo)||void 0===g?void 0:g.packageName)<"u",v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),ie("function"==typeof(null===(x=null===(T=null===(_=rt?.cordova)||void 0===_?void 0:_.plugins)||void 0===T?void 0:T.browsertab)||void 0===x?void 0:x.openUrl),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ie("function"==typeof(null===(Se=null===(Y=null===(B=rt?.cordova)||void 0===B?void 0:B.plugins)||void 0===Y?void 0:Y.browsertab)||void 0===Se?void 0:Se.isAvailable),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ie("function"==typeof(null===(et=null===(Ge=rt?.cordova)||void 0===Ge?void 0:Ge.InAppBrowser)||void 0===et?void 0:et.open),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(f);const B=yield x._initialize(f);yield B.initialized(),B.resetRedirect(),function tc(){su.clear()}(),yield x._originValidation(f);const Y=function QE(v,f,g=null){return{type:f,eventId:g,urlResponse:null,sessionId:mp(),postBody:null,tenantId:v.tenantId,error:K(v,"no-auth-event")}}(f,_,T);yield function Rl(v,f){return yp()._set(ra(v),f)}(f,Y);const Se=yield function __(v,f,g){return ch.apply(this,arguments)}(f,Y,g),Ge=yield function hp(v){const{cordova:f}=ta();return new Promise(g=>{f.plugins.browsertab.isAvailable(_=>{let T=null;_?f.plugins.browsertab.openUrl(v):T=f.InAppBrowser.open(v,function Gt(v=(0,P.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(v)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(v)}()?"_blank":"_system","location=yes"),g(T)})})}(Se);return function Nm(v,f,g){return w_.apply(this,arguments)}(f,B,Ge)})()}_isIframeWebStorageSupported(f,g){throw new Error("Method not implemented.")}_originValidation(f){const g=f._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function rT(v){return dp.apply(this,arguments)}(f)),this.originValidationPromises[g]}attachCallbackListeners(f,g){const{universalLinks:_,handleOpenURL:T,BuildInfo:x}=ta(),B=setTimeout((0,h.Z)(function*(){yield na(f),g.onEvent(wp())}),500),Y=function(){var et=(0,h.Z)(function*(rt){clearTimeout(B);const Pn=yield na(f);let Ts=null;Pn&&rt?.url&&(Ts=function gp(v,f){var g,_;const T=function _p(v){const f=hc(v),g=f.link?decodeURIComponent(f.link):void 0,_=hc(g).link,T=f.deep_link_id?decodeURIComponent(f.deep_link_id):void 0;return hc(T).link||T||_||g||v}(f);if(T.includes("/__/auth/callback")){const x=hc(T),B=x.firebaseError?function vp(v){try{return JSON.parse(v)}catch{return null}}(decodeURIComponent(x.firebaseError)):null,Y=null===(_=null===(g=B?.code)||void 0===g?void 0:g.split("auth/"))||void 0===_?void 0:_[1],Se=Y?K(Y):null;return Se?{type:v.type,eventId:v.eventId,tenantId:v.tenantId,error:Se,urlResponse:null,sessionId:null,postBody:null}:{type:v.type,eventId:v.eventId,tenantId:v.tenantId,sessionId:v.sessionId,urlResponse:T,postBody:null}}return null}(Pn,rt.url)),g.onEvent(Ts||wp())});return function(Pn){return et.apply(this,arguments)}}();typeof _<"u"&&"function"==typeof _.subscribe&&_.subscribe(null,Y);const Se=T,Ge=`${x.packageName.toLowerCase()}://`;ta().handleOpenURL=function(){var et=(0,h.Z)(function*(rt){if(rt.toLowerCase().startsWith(Ge)&&Y({url:rt}),"function"==typeof Se)try{Se(rt)}catch(Pn){console.error(Pn)}});return function(rt){return et.apply(this,arguments)}}()}};function wp(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:K("no-auth-event")}}function Pl(){var v;return(null===(v=self?.location)||void 0===v?void 0:v.protocol)||null}function Fm(v=(0,P.z$)()){return!("file:"!==Pl()&&"ionic:"!==Pl()&&"capacitor:"!==Pl()||!v.toLowerCase().match(/iphone|ipad|ipod|android/))}function dh(){try{const v=self.localStorage,f=qo();if(v)return v.setItem(f,"1"),v.removeItem(f),!function Dp(v=(0,P.z$)()){return function di(){return(0,P.w1)()&&11===document?.documentMode}()||function Ip(v=(0,P.z$)()){return/Edge\/\d+/.test(v)}(v)}()||(0,P.hl)()}catch{return Ir()&&(0,P.hl)()}return!1}function Ir(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function ia(){return(function Ep(){return"http:"===Pl()||"https:"===Pl()}()||(0,P.ru)()||Fm())&&!function XE(){return(0,P.b$)()||(0,P.UG)()}()&&dh()&&!Ir()}function Cp(){return Fm()&&typeof document<"u"}function Tp(){return(Tp=(0,h.Z)(function*(){return!!Cp()&&new Promise(v=>{const f=setTimeout(()=>{v(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(f),v(!0)})})})).apply(this,arguments)}const zi={LOCAL:"local",NONE:"none",SESSION:"session"},sa=ie,Lm="persistence";function ph(v){return Sp.apply(this,arguments)}function Sp(){return(Sp=(0,h.Z)(function*(v){yield v._initializationPromise;const f=mh(),g=U(Lm,v.config.apiKey,v.name);f&&f.setItem(g,v._getPersistence())})).apply(this,arguments)}function mh(){var v;try{return(null===(v=function hh(){return typeof window<"u"?window:null}())||void 0===v?void 0:v.sessionStorage)||null}catch{return null}}const Vm=ie;class cs{constructor(){this.browserResolver=Jt(Hi),this.cordovaResolver=Jt(E_),this.underlyingResolver=null,this._redirectPersistence=Di,this._completeRedirectFn=_o,this._overrideRedirectResult=us}_initialize(f){var g=this;return(0,h.Z)(function*(){return yield g.selectUnderlyingResolver(),g.assertedUnderlyingResolver._initialize(f)})()}_openPopup(f,g,_,T){var x=this;return(0,h.Z)(function*(){return yield x.selectUnderlyingResolver(),x.assertedUnderlyingResolver._openPopup(f,g,_,T)})()}_openRedirect(f,g,_,T){var x=this;return(0,h.Z)(function*(){return yield x.selectUnderlyingResolver(),x.assertedUnderlyingResolver._openRedirect(f,g,_,T)})()}_isIframeWebStorageSupported(f,g){this.assertedUnderlyingResolver._isIframeWebStorageSupported(f,g)}_originValidation(f){return this.assertedUnderlyingResolver._originValidation(f)}get _shouldInitProactively(){return Cp()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Vm(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var f=this;return(0,h.Z)(function*(){if(f.underlyingResolver)return;const g=yield function bp(){return Tp.apply(this,arguments)}();f.underlyingResolver=g?f.cordovaResolver:f.browserResolver})()}}function fc(v){return v.unwrap()}function Mp(v){return xp(v)}function xp(v){const{_tokenResponse:f}=v instanceof P.ZR?v.customData:v;if(!f)return null;if(!(v instanceof P.ZR)&&"temporaryProof"in f&&"phoneNumber"in f)return Hn.credentialFromResult(v);const g=f.providerId;if(!g||g===de.PASSWORD)return null;let _;switch(g){case de.GOOGLE:_=lo;break;case de.FACEBOOK:_=co;break;case de.GITHUB:_=ar;break;case de.TWITTER:_=vs;break;default:const{oauthIdToken:T,oauthAccessToken:x,oauthTokenSecret:B,pendingToken:Y,nonce:Se}=f;return x||B||T||Y?Y?g.startsWith("saml.")?Bn._create(g,Y):Zr._fromParams({providerId:g,signInMethod:g,pendingToken:Y,idToken:T,accessToken:x}):new Ei(g).credential({idToken:T,accessToken:x,rawNonce:Se}):null}return v instanceof P.ZR?_.credentialFromError(v):_.credentialFromResult(v)}function kr(v,f){return f.catch(g=>{throw g instanceof P.ZR&&function yh(v,f){var g;const _=null===(g=f.customData)||void 0===g?void 0:g._tokenResponse;if("auth/multi-factor-auth-required"===f?.code)f.resolver=new vh(v,function zd(v,f){var g;const _=(0,P.m9)(v),T=f;return ie(f.customData.operationType,_,"argument-error"),ie(null===(g=T.customData._serverResponse)||void 0===g?void 0:g.mfaPendingCredential,_,"argument-error"),Gs._fromError(_,T)}(v,f));else if(_){const T=xp(f),x=f;T&&(x.credential=T,x.tenantId=_.tenantId||void 0,x.email=_.email||void 0,x.phoneNumber=_.phoneNumber||void 0)}}(v,g),g}).then(g=>{const T=g.user;return{operationType:g.operationType,credential:Mp(g),additionalUserInfo:ur(g),user:qi.getOrCreate(T)}})}function oa(v,f){return pc.apply(this,arguments)}function pc(){return(pc=(0,h.Z)(function*(v,f){const g=yield f;return{verificationId:g.verificationId,confirm:_=>kr(v,g.confirm(_))}})).apply(this,arguments)}class vh{constructor(f,g){this.resolver=g,this.auth=function Ap(v){return v.wrapped()}(f)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(f){return kr(fc(this.auth),this.resolver.resolveSignIn(f))}}class qi{constructor(f){this._delegate=f,this.multiFactor=function dl(v){const f=(0,P.m9)(v);return qa.has(f)||qa.set(f,za._fromUser(f)),qa.get(f)}(f)}static getOrCreate(f){return qi.USER_MAP.has(f)||qi.USER_MAP.set(f,new qi(f)),qi.USER_MAP.get(f)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(f){return this._delegate.getIdTokenResult(f)}getIdToken(f){return this._delegate.getIdToken(f)}linkAndRetrieveDataWithCredential(f){return this.linkWithCredential(f)}linkWithCredential(f){var g=this;return(0,h.Z)(function*(){return kr(g.auth,Im(g._delegate,f))})()}linkWithPhoneNumber(f,g){var _=this;return(0,h.Z)(function*(){return oa(_.auth,function rp(v,f,g){return Xu.apply(this,arguments)}(_._delegate,f,g))})()}linkWithPopup(f){var g=this;return(0,h.Z)(function*(){return kr(g.auth,function nh(v,f,g){return ec.apply(this,arguments)}(g._delegate,f,cs))})()}linkWithRedirect(f){var g=this;return(0,h.Z)(function*(){return yield ph(Yn(g.auth)),bl(g._delegate,f,cs)})()}reauthenticateAndRetrieveDataWithCredential(f){return this.reauthenticateWithCredential(f)}reauthenticateWithCredential(f){var g=this;return(0,h.Z)(function*(){return kr(g.auth,jn(g._delegate,f))})()}reauthenticateWithPhoneNumber(f,g){return oa(this.auth,function eu(v,f,g){return wl.apply(this,arguments)}(this._delegate,f,g))}reauthenticateWithPopup(f){return kr(this.auth,function th(v,f,g){return Qo.apply(this,arguments)}(this._delegate,f,cs))}reauthenticateWithRedirect(f){var g=this;return(0,h.Z)(function*(){return yield ph(Yn(g.auth)),au(g._delegate,f,cs)})()}sendEmailVerification(f){return function Bu(v,f){return Ha.apply(this,arguments)}(this._delegate,f)}unlink(f){var g=this;return(0,h.Z)(function*(){return yield function Em(v,f){return os.apply(this,arguments)}(g._delegate,f),g})()}updateEmail(f){return function Yf(v,f){return $d((0,P.m9)(v),f,null)}(this._delegate,f)}updatePassword(f){return function Fi(v,f){return $d((0,P.m9)(v),null,f)}(this._delegate,f)}updatePhoneNumber(f){return function tu(v,f){return Yo.apply(this,arguments)}(this._delegate,f)}updateProfile(f){return function Tm(v,f){return jo.apply(this,arguments)}(this._delegate,f)}verifyBeforeUpdateEmail(f,g){return function il(v,f,g){return ju.apply(this,arguments)}(this._delegate,f,g)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}qi.USER_MAP=new WeakMap;const bs=ie;let Um=(()=>{class v{constructor(g,_){if(this.app=g,_.isInitialized())return this._delegate=_.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:T}=g.options;bs(T,"invalid-api-key",{appName:g.name}),bs(T,"invalid-api-key",{appName:g.name});const x=typeof window<"u"?cs:void 0;this._delegate=_.initialize({options:{persistence:I_(T,g.name),popupRedirectResolver:x}}),this._delegate._updateErrorMap(Ye),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?qi.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(g){this._delegate.languageCode=g}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(g){this._delegate.tenantId=g}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(g,_){!function Ou(v,f,g){const _=Yn(v);ie(_._canInitEmulator,_,"emulator-config-failed"),ie(/^https?:\/\//.test(f),_,"invalid-emulator-scheme");const T=!!g?.disableWarnings,x=oo(f),{host:B,port:Y}=function Nd(v){const f=oo(v),g=/(\/\/)?([^?#/]+)/.exec(v.substr(f.length));if(!g)return{host:"",port:null};const _=g[2].split("@").pop()||"",T=/^(\[[^\]]+\])(:|$)/.exec(_);if(T){const x=T[1];return{host:x,port:Rd(_.substr(x.length+1))}}{const[x,B]=_.split(":");return{host:x,port:Rd(B)}}}(f);_.config.emulator={url:`${x}//${B}${null===Y?"":`:${Y}`}/`},_.settings.appVerificationDisabledForTesting=!0,_.emulatorConfig=Object.freeze({host:B,port:Y,protocol:x.replace(":",""),options:Object.freeze({disableWarnings:T})}),T||function vm(){function v(){const f=document.createElement("p"),g=f.style;f.innerText="Running in emulator mode. Do not use with production credentials.",g.position="fixed",g.width="100%",g.backgroundColor="#ffffff",g.border=".1em solid #000000",g.color="#b50000",g.bottom="0px",g.left="0px",g.margin="0px",g.zIndex="10000",g.textAlign="center",f.classList.add("firebase-emulator-warning"),document.body.appendChild(f)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",v):v())}()}(this._delegate,g,_)}applyActionCode(g){return function Vu(v,f){return Ii.apply(this,arguments)}(this._delegate,g)}checkActionCode(g){return ja(this._delegate,g)}confirmPasswordReset(g,_){return function Lu(v,f,g){return Qn.apply(this,arguments)}(this._delegate,g,_)}createUserWithEmailAndPassword(g,_){var T=this;return(0,h.Z)(function*(){return kr(T._delegate,function Zf(v,f,g){return $a.apply(this,arguments)}(T._delegate,g,_))})()}fetchProvidersForEmail(g){return this.fetchSignInMethodsForEmail(g)}fetchSignInMethodsForEmail(g){return function jd(v,f){return rl.apply(this,arguments)}(this._delegate,g)}isSignInWithEmailLink(g){return function bm(v,f){const g=jt.parseLink(f);return"EMAIL_SIGNIN"===g?.operation}(0,g)}getRedirectResult(){var g=this;return(0,h.Z)(function*(){bs(ia(),g._delegate,"operation-not-supported-in-this-environment");const _=yield function vo(v,f){return Cs.apply(this,arguments)}(g._delegate,cs);return _?kr(g._delegate,Promise.resolve(_)):{credential:null,user:null}})()}addFrameworkForLogging(g){!function Pm(v,f){Yn(v)._logFramework(f)}(this._delegate,g)}onAuthStateChanged(g,_,T){const{next:x,error:B,complete:Y}=Np(g,_,T);return this._delegate.onAuthStateChanged(x,B,Y)}onIdTokenChanged(g,_,T){const{next:x,error:B,complete:Y}=Np(g,_,T);return this._delegate.onIdTokenChanged(x,B,Y)}sendSignInLinkToEmail(g,_){return function Uu(v,f,g){return fo.apply(this,arguments)}(this._delegate,g,_)}sendPasswordResetEmail(g,_){return function Cm(v,f,g){return jr.apply(this,arguments)}(this._delegate,g,_||void 0)}setPersistence(g){var _=this;return(0,h.Z)(function*(){let T;switch(function fh(v,f){sa(Object.values(zi).includes(f),v,"invalid-persistence-type"),(0,P.b$)()?sa(f!==zi.SESSION,v,"unsupported-persistence-type"):(0,P.UG)()?sa(f===zi.NONE,v,"unsupported-persistence-type"):Ir()?sa(f===zi.NONE||f===zi.LOCAL&&(0,P.hl)(),v,"unsupported-persistence-type"):sa(f===zi.NONE||dh(),v,"unsupported-persistence-type")}(_._delegate,g),g){case zi.SESSION:T=Di;break;case zi.LOCAL:T=(yield Jt(Qa)._isAvailable())?Qa:Sn;break;case zi.NONE:T=qt;break;default:return pe("argument-error",{appName:_._delegate.name})}return _._delegate.setPersistence(T)})()}signInAndRetrieveDataWithCredential(g){return this.signInWithCredential(g)}signInAnonymously(){return kr(this._delegate,function wm(v){return Yc.apply(this,arguments)}(this._delegate))}signInWithCredential(g){return kr(this._delegate,La(this._delegate,g))}signInWithCustomToken(g){return kr(this._delegate,function ws(v,f){return ki.apply(this,arguments)}(this._delegate,g))}signInWithEmailAndPassword(g,_){return kr(this._delegate,function tl(v,f,g){return La((0,P.m9)(v),ku.credential(f,g))}(this._delegate,g,_))}signInWithEmailLink(g,_){return kr(this._delegate,function $r(v,f,g){return Kf.apply(this,arguments)}(this._delegate,g,_))}signInWithPhoneNumber(g,_){return oa(this._delegate,function fn(v,f,g){return _r.apply(this,arguments)}(this._delegate,g,_))}signInWithPopup(g){var _=this;return(0,h.Z)(function*(){return bs(ia(),_._delegate,"operation-not-supported-in-this-environment"),kr(_._delegate,function bi(v,f,g){return Vi.apply(this,arguments)}(_._delegate,g,cs))})()}signInWithRedirect(g){var _=this;return(0,h.Z)(function*(){return bs(ia(),_._delegate,"operation-not-supported-in-this-environment"),yield ph(_._delegate),nc(_._delegate,g,cs)})()}updateCurrentUser(g){return this._delegate.updateCurrentUser(g)}verifyPasswordResetCode(g){return function Uo(v,f){return Bo.apply(this,arguments)}(this._delegate,g)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return v.Persistence=zi,v})();function Np(v,f,g){let _=v;"function"!=typeof v&&({next:_,error:f,complete:g}=v);const T=_;return{next:B=>T(B&&qi.getOrCreate(B)),error:f,complete:g}}function I_(v,f){const g=function gh(v,f){const g=mh();if(!g)return[];const _=U(Lm,v,f);switch(g.getItem(_)){case zi.NONE:return[qt];case zi.LOCAL:return[Qa,Di];case zi.SESSION:return[Di];default:return[]}}(v,f);if(typeof self<"u"&&!g.includes(Qa)&&g.push(Qa),typeof window<"u")for(const _ of[Sn,Di])g.includes(_)||g.push(_);return g.includes(qt)||g.push(qt),g}class _h{constructor(){this.providerId="phone",this._delegate=new Hn(fc(q.Z.auth()))}static credential(f,g){return Hn.credential(f,g)}verifyPhoneNumber(f,g){return this._delegate.verifyPhoneNumber(f,g)}unwrap(){return this._delegate}}_h.PHONE_SIGN_IN_METHOD=Hn.PHONE_SIGN_IN_METHOD,_h.PROVIDER_ID=Hn.PROVIDER_ID;const D_=ie;class Bm{constructor(f,g,_=q.Z.app()){var T;D_(null===(T=_.options)||void 0===T?void 0:T.apiKey,"invalid-api-key",{appName:_.name}),this._delegate=new _l(f,g,_.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Rp(v){v.INTERNAL.registerComponent(new fe.wA("auth-compat",f=>{const g=f.getProvider("app-compat").getImmediate(),_=f.getProvider("auth");return new Um(g,_)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:ku,FacebookAuthProvider:co,GithubAuthProvider:ar,GoogleAuthProvider:lo,OAuthProvider:Ei,SAMLAuthProvider:Lo,PhoneAuthProvider:_h,PhoneMultiFactorGenerator:m_,RecaptchaVerifier:Bm,TwitterAuthProvider:vs,Auth:Um,AuthCredential:ms,Error:P.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),v.registerVersion("@firebase/auth-compat","0.4.2")}(q.Z)},5861:(lt,Ie,O)=>{function h(P,J,ne,le,fe,Oe,de){try{var V=P[Oe](de),j=V.value}catch(Q){return void ne(Q)}V.done?J(j):Promise.resolve(j).then(le,fe)}function q(P){return function(){var J=this,ne=arguments;return new Promise(function(le,fe){var Oe=P.apply(J,ne);function de(j){h(Oe,le,fe,de,V,"next",j)}function V(j){h(Oe,le,fe,de,V,"throw",j)}de(void 0)})}}O.d(Ie,{Z:()=>q})},7582:(lt,Ie,O)=>{function J(oe,me){var Ee={};for(var Ae in oe)Object.prototype.hasOwnProperty.call(oe,Ae)&&me.indexOf(Ae)<0&&(Ee[Ae]=oe[Ae]);if(null!=oe&&"function"==typeof Object.getOwnPropertySymbols){var He=0;for(Ae=Object.getOwnPropertySymbols(oe);He<Ae.length;He++)me.indexOf(Ae[He])<0&&Object.prototype.propertyIsEnumerable.call(oe,Ae[He])&&(Ee[Ae[He]]=oe[Ae[He]])}return Ee}function Q(oe,me,Ee,Ae){return new(Ee||(Ee=Promise))(function(Ve,It){function Xe(ht){try{tt(Ae.next(ht))}catch(_n){It(_n)}}function Ut(ht){try{tt(Ae.throw(ht))}catch(_n){It(_n)}}function tt(ht){ht.done?Ve(ht.value):function He(Ve){return Ve instanceof Ee?Ve:new Ee(function(It){It(Ve)})}(ht.value).then(Xe,Ut)}tt((Ae=Ae.apply(oe,me||[])).next())})}function te(oe){return this instanceof te?(this.v=oe,this):new te(oe)}function pe(oe,me,Ee){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var He,Ae=Ee.apply(oe,me||[]),Ve=[];return He={},It("next"),It("throw"),It("return"),He[Symbol.asyncIterator]=function(){return this},He;function It(tn){Ae[tn]&&(He[tn]=function(Rn){return new Promise(function(Kt,ti){Ve.push([tn,Rn,Kt,ti])>1||Xe(tn,Rn)})})}function Xe(tn,Rn){try{!function Ut(tn){tn.value instanceof te?Promise.resolve(tn.value.v).then(tt,ht):_n(Ve[0][2],tn)}(Ae[tn](Rn))}catch(Kt){_n(Ve[0][3],Kt)}}function tt(tn){Xe("next",tn)}function ht(tn){Xe("throw",tn)}function _n(tn,Rn){tn(Rn),Ve.shift(),Ve.length&&Xe(Ve[0][0],Ve[0][1])}}function he(oe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ee,me=oe[Symbol.asyncIterator];return me?me.call(oe):(oe=function Me(oe){var me="function"==typeof Symbol&&Symbol.iterator,Ee=me&&oe[me],Ae=0;if(Ee)return Ee.call(oe);if(oe&&"number"==typeof oe.length)return{next:function(){return oe&&Ae>=oe.length&&(oe=void 0),{value:oe&&oe[Ae++],done:!oe}}};throw new TypeError(me?"Object is not iterable.":"Symbol.iterator is not defined.")}(oe),Ee={},Ae("next"),Ae("throw"),Ae("return"),Ee[Symbol.asyncIterator]=function(){return this},Ee);function Ae(Ve){Ee[Ve]=oe[Ve]&&function(It){return new Promise(function(Xe,Ut){!function He(Ve,It,Xe,Ut){Promise.resolve(Ut).then(function(tt){Ve({value:tt,done:Xe})},It)}(Xe,Ut,(It=oe[Ve](It)).done,It.value)})}}}O.d(Ie,{FC:()=>pe,KL:()=>he,_T:()=>J,mG:()=>Q,qq:()=>te})}},lt=>{lt(lt.s=8541)}]);